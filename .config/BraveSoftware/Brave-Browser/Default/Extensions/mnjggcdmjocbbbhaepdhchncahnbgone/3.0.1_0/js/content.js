!function(e){function t(t){for(var o,r,a=t[0],c=t[1],l=t[2],d=0,p=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(u&&u(t);p.length;)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(o=!1)}o&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={2:0},s=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;s.push([13,0]),n()}([,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),i=n(0);var s;!function(e){e[e.Timer=0]="Timer",e[e.Paused=1]="Paused",e[e.Stopped=2]="Stopped"}(s||(s={}));class r extends o.Component{constructor(e){var t;super(e);const n=()=>this.props.maxCountdownTime?this.props.maxCountdownTime():i.default.config.skipNoticeDuration;this.countdownInterval=null,this.amountOfPreviousNotices=e.amountOfPreviousNotices||0,this.idSuffix=e.idSuffix||"",this.state={noticeTitle:e.noticeTitle,maxCountdownTime:n,countdownTime:n(),countdownMode:s.Timer,mouseHovering:!1,startFaded:null!==(t=this.props.startFaded)&&void 0!==t&&t}}componentDidMount(){this.startCountdown()}render(){var e;const t=Object.assign({zIndex:this.props.zIndex||1e3+this.amountOfPreviousNotices},null!==(e=this.props.style)&&void 0!==e?e:{});return o.createElement("div",{id:"sponsorSkipNotice"+this.idSuffix,className:"sponsorSkipObject sponsorSkipNoticeParent"+(this.props.showInSecondSlot?" secondSkipNotice":""),onMouseEnter:e=>this.onMouseEnter(e),onMouseLeave:()=>this.timerMouseLeave(),style:t},o.createElement("table",{className:"sponsorSkipObject sponsorSkipNotice"+(this.props.fadeIn?" sponsorSkipNoticeFadeIn":"")+(this.state.startFaded?" sponsorSkipNoticeFaded":"")},o.createElement("tbody",null,o.createElement("tr",{id:"sponsorSkipNoticeFirstRow"+this.idSuffix},o.createElement("td",{className:"noticeLeftIcon"},o.createElement("img",{id:"sponsorSkipLogo"+this.idSuffix,className:"sponsorSkipLogo sponsorSkipObject",src:chrome.extension.getURL("icons/IconSponsorBlocker256px.png")}),o.createElement("span",{id:"sponsorSkipMessage"+this.idSuffix,style:{float:"left"},className:"sponsorSkipMessage sponsorSkipObject"},this.state.noticeTitle),this.props.firstColumn),this.props.firstRow,o.createElement("td",{className:"sponsorSkipNoticeRightSection",style:{top:"9.32px"}},this.props.timed?o.createElement("span",{id:"sponsorSkipNoticeTimeLeft"+this.idSuffix,onClick:()=>this.toggleManualPause(),className:"sponsorSkipObject sponsorSkipNoticeTimeLeft"},this.getCountdownElements()):"",o.createElement("img",{src:chrome.extension.getURL("icons/close.png"),className:"sponsorSkipObject sponsorSkipNoticeButton sponsorSkipNoticeCloseButton sponsorSkipNoticeRightButton",onClick:()=>this.close()}))),this.props.children,!this.props.smaller&&this.props.bottomRow?this.props.bottomRow:null)),this.props.smaller&&this.props.bottomRow?o.createElement("table",{style:{visibility:"hidden",paddingTop:"14px"}},o.createElement("tbody",null,this.props.bottomRow)):null)}getCountdownElements(){return[o.createElement("span",{id:"skipNoticeTimerText"+this.idSuffix,key:"skipNoticeTimerText",className:this.state.countdownMode!==s.Timer?"hidden":""},this.state.countdownTime+"s"),o.createElement("img",{id:"skipNoticeTimerPaused"+this.idSuffix,key:"skipNoticeTimerPaused",className:this.state.countdownMode!==s.Paused?"hidden":"",src:chrome.runtime.getURL("icons/pause.svg"),alt:chrome.i18n.getMessage("paused")}),o.createElement("img",{id:"skipNoticeTimerStopped"+this.idSuffix,key:"skipNoticeTimerStopped",className:this.state.countdownMode!==s.Stopped?"hidden":"",src:chrome.runtime.getURL("icons/stop.svg"),alt:chrome.i18n.getMessage("manualPaused")})]}onMouseEnter(e){this.props.onMouseEnter&&this.props.onMouseEnter(e),this.fadedMouseEnter(),this.timerMouseEnter()}fadedMouseEnter(){this.state.startFaded&&this.setState({startFaded:!1})}timerMouseEnter(){this.state.countdownMode!==s.Stopped&&(this.pauseCountdown(),this.setState({mouseHovering:!0}))}timerMouseLeave(){this.state.countdownMode!==s.Stopped&&(this.startCountdown(),this.setState({mouseHovering:!1}))}toggleManualPause(){this.setState({countdownMode:this.state.countdownMode===s.Stopped?s.Timer:s.Stopped},()=>{this.state.countdownMode===s.Stopped||this.state.mouseHovering?this.pauseCountdown():this.startCountdown()})}countdown(){if(!this.props.timed)return;const e=Math.min(this.state.countdownTime-1,this.state.maxCountdownTime());if(this.props.videoSpeed&&this.intervalVideoSpeed!=this.props.videoSpeed()&&this.setupInterval(),e<=0)return clearInterval(this.countdownInterval),void this.close();if(3==e){const e=document.getElementById("sponsorSkipNotice"+this.idSuffix);e.style.removeProperty("animation"),e.classList.add("sponsorSkipNoticeFadeOut")}this.setState({countdownTime:e})}removeFadeAnimation(){const e=document.getElementById("sponsorSkipNotice"+this.idSuffix);e.classList.remove("sponsorSkipNoticeFadeOut"),e.style.animation="none"}pauseCountdown(){this.props.timed&&(this.countdownInterval&&clearInterval(this.countdownInterval),this.countdownInterval=null,this.setState({countdownTime:this.state.maxCountdownTime(),countdownMode:this.state.countdownMode===s.Timer?s.Paused:this.state.countdownMode}),this.removeFadeAnimation())}startCountdown(){this.props.timed&&null===this.countdownInterval&&(this.setState({countdownTime:this.state.maxCountdownTime(),countdownMode:s.Timer}),this.setupInterval())}setupInterval(){this.countdownInterval&&clearInterval(this.countdownInterval);const e=this.props.videoSpeed?1e3/this.props.videoSpeed():1e3;this.countdownInterval=setInterval(this.countdown.bind(this),e),this.props.videoSpeed&&(this.intervalVideoSpeed=this.props.videoSpeed())}resetCountdown(){this.props.timed&&(this.setupInterval(),this.setState({countdownTime:this.state.maxCountdownTime(),countdownMode:s.Timer}),this.removeFadeAnimation())}close(e){null!==this.countdownInterval&&clearInterval(this.countdownInterval),e||this.props.closeListener()}changeNoticeTitle(e){this.setState({noticeTitle:e})}addNoticeInfoMessage(e,t=""){const n=document.getElementById("sponsorTimesInfoMessage"+this.idSuffix);null!=n&&document.getElementById("sponsorSkipNotice"+this.idSuffix).removeChild(n);const o=document.getElementById("sponsorTimesInfoMessage"+this.idSuffix+"2");null!=o&&document.getElementById("sponsorSkipNotice"+this.idSuffix).removeChild(o);const i=document.createElement("p");if(i.id="sponsorTimesInfoMessage"+this.idSuffix,i.className="sponsorTimesInfoMessage",i.innerText=e,document.querySelector("#sponsorSkipNotice"+this.idSuffix+" > tbody").insertBefore(i,document.getElementById("sponsorSkipNoticeSpacer"+this.idSuffix)),void 0!==t){const e=document.createElement("p");e.id="sponsorTimesInfoMessage"+this.idSuffix+"2",e.className="sponsorTimesInfoMessage",e.innerText=t,document.querySelector("#sponsorSkipNotice"+this.idSuffix+" > tbody").insertBefore(e,document.getElementById("sponsorSkipNoticeSpacer"+this.idSuffix))}}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);class i extends o.Component{constructor(e){super(e)}render(){const e={};return this.props.onClick&&(e.cursor="pointer",e.textDecoration="underline"),o.createElement("p",{id:"sponsorTimesInfoMessage"+this.props.idSuffix,onClick:this.props.onClick,style:e,className:"sponsorTimesInfoMessage"},this.props.text)}}t.default=i},,,function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),s=n(3),r=new(n(2).default),a=n(11),c=n(14),l=n(15),u=n(21),d=n(24),p=n(5),m=n(25),h=n(26);r.wait(()=>null!==i.default.config,5e3,10).then((function(){!r.isFirefox()&&i.default.config.invidiousInstances.includes(new URL(document.URL).host)&&window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementsByTagName("head")[0];for(const t of r.css){const n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=chrome.extension.getURL(t),e.appendChild(n)}})}));let g=!1,f=null,y=null;const v=[];let S,T,k=null,b=null,C=null,w=[],E=null;const x=[],N=[];let M,I,L,B=null,O=!1,U=0,R=-1,D=!1,P=null,A=null,V=null;const j={};r.wait(()=>null!==i.default.config,1e3,1).then(()=>$(se(document.URL))),document.addEventListener("keydown",Re);let F=0,_=[],H=!1,q=null,W=!1;const K=()=>({vote:Me,dontShowNoticeAgain:Ie,unskipSponsorTime:pe,sponsorTimes:f,sponsorTimesSubmitting:_,skipNotices:v,v:T,sponsorVideoID:y,reskipSponsorTime:me,updatePreviewBar:re,onMobileYouTube:I,sponsorSubmissionNotice:q,resetSponsorSubmissionNotice:Le,updateEditButtonsOnPlayer:Se,previewTime:le,videoInfo:b,getRealCurrentTime:Te});function G(e,t,n){switch(e.message){case"update":$(se(document.URL));break;case"sponsorStart":ke(),n({creatingSegment:Ce()});break;case"isInfoFound":n({found:g,sponsorTimes:f}),!e.updating&&H&&null!=document.getElementById("sponsorBlockPopupContainer")&&xe(),H=!0;break;case"getVideoID":n({videoID:y,creatingSegment:Ce()});break;case"getChannelID":n({channelID:S.id});break;case"isChannelWhitelisted":n({value:D});break;case"whitelistChange":D=e.value,ne(y);break;case"submitTimes":Be();break;case"refreshSegments":return ne(y,!1).then(()=>n({found:g,sponsorTimes:f})),!0}}function Y(e){for(const t in e)switch(t){case"hideVideoPlayerControls":case"hideInfoButtonPlayerControls":case"hideDeleteButtonPlayerControls":ve()}}function $(e){return o(this,void 0,void 0,(function*(){if(y!==e&&(y=e,function(){U=0,R=-1,f=null,F=0,w=[],b=null,D=!1,S={status:s.ChannelIDStatus.Fetching,id:null},null!==P&&P.clear(),g=!1,B=null!==B,O=!0,W=!1;for(let e=0;e<v.length;e++)v.pop().close();null==A||A.disable()}(),e)){if(yield r.wait(()=>null!==i.default.config,5e3,1),i.default.config.checkForUnlistedVideos){if(!confirm("SponsorBlock: You have the setting 'Ignore Unlisted/Private Videos' enabled. Due to a change in how segment fetching works, this setting is not needed anymore as it cannot leak your video ID to the server. It instead sends just the first 4 characters of a longer hash of the videoID to the server, and filters through a subset of the database. More info about this implementation can be found here: https://github.com/ajayyy/SponsorBlockServer/issues/25\n\nPlease click okay to confirm that you acknowledge this and continue using SponsorBlock."))return;i.default.config.checkForUnlistedVideos=!1}if(function(){o(this,void 0,void 0,(function*(){const e=i.default.config.whitelistedChannels,t=()=>{var e,t,n,o,i,s,r,a,c,l,u;return null!==(a=null!==(i=null!==(t=null===(e=null==b?void 0:b.videoDetails)||void 0===e?void 0:e.channelId)&&void 0!==t?t:null===(o=null===(n=document.querySelector(".ytd-channel-name a"))||void 0===n?void 0:n.getAttribute("href"))||void 0===o?void 0:o.replace(/\/.+\//,""))&&void 0!==i?i:null===(r=null===(s=document.querySelector(".ytp-title-channel-logo"))||void 0===s?void 0:s.getAttribute("href"))||void 0===r?void 0:r.replace(/https:\/.+\//,""))&&void 0!==a?a:null===(u=null===(l=null===(c=document.querySelector("a > .channel-profile"))||void 0===c?void 0:c.parentElement)||void 0===l?void 0:l.getAttribute("href"))||void 0===u?void 0:u.replace(/\/.+\//,"")};try{yield r.wait(()=>!!t(),6e3,20),S={status:s.ChannelIDStatus.Found,id:t().match(/^\/?([^\s/]+)/)[0]}}catch(e){return void(S={status:s.ChannelIDStatus.Failed,id:null})}null!=e&&S.status===s.ChannelIDStatus.Found&&e.includes(S.id)&&(D=!0),i.default.config.forceChannelCheck&&(null==f?void 0:f.length)>0&&ie()}))}(),null===P)if(I){const e=new MutationObserver(z);let t=null;r.wait(()=>(t=document.getElementById("player-control-container"),null!==t)).then(()=>{e.observe(document.getElementById("player-control-container"),{attributes:!0,childList:!0,subtree:!0})}).catch()}else r.wait(fe).then(J);xe(),ne(e),ve(),_=[],we()}}))}function z(){if(ve(),null!==P){if(document.body.contains(P.container)){const t=document.querySelector(".progress-bar-background");return void(null!==t&&(e=t,null===document.getElementById("previewbar")&&P.createElement(e)))}P.remove(),P=null}var e;J()}function J(){if(null!==P)return;const e=[".progress-bar-background",".ytp-progress-bar-container",".no-model.cue-range-markers",".vjs-progress-holder"];for(const t of e){const e=document.querySelector(t);if(e){P=new c.default(e,I,M),re();break}}}function X(){De(),re()}function Q(){null!==C&&(clearTimeout(C),C=null)}function Z(e=!1,t,n=!0){var o;if(Q(),W)return R=-1,void(U=0);if(!T||T.paused)return;if(i.default.config.disableSkipping||D||S.status===s.ChannelIDStatus.Fetching&&i.default.config.forceChannelCheck)return;if(ee())return;null==t&&(t=T.currentTime);const a=function(e,t,n){const o=ce(f,t,n),i=ce(f,t,n,e,!0,!0),s=o.indexOf(Math.min(...i)),r=ae(f,s),a=ce(_,t,n),c=ce(_,t,n,e,!1,!1),l=a.indexOf(Math.min(...c)),u=ae(_,l);return-1===l&&-1!==s||o[s]<a[l]?{array:f,index:s,endIndex:r,openNotice:!0}:{array:_,index:l,endIndex:u,openNotice:!1}}(t,e,n);if(-1===a.index)return;const c=a.array[a.index],l=[c.segment[0],a.array[a.endIndex].segment[1]],u=l[0]-t,d=y;let p=[a.array[a.index]];if(a.index!==a.endIndex){p=[];for(const e of a.array)ge(e)&&e.segment[0]>=l[0]&&e.segment[1]<=l[1]&&p.push(e)}if((null===(o=r.getCategorySelection(c.category))||void 0===o?void 0:o.option)===s.CategorySkipOption.ShowOverlay&&a.array!==_)return;const m=()=>{var e;let t=null,n=!1,o=!0;ee(d,c)||(T.currentTime>=l[0]&&T.currentTime<l[1]&&(de({v:T,skipTime:l,skippingSegments:p,openNotice:a.openNotice}),(null===(e=r.getCategorySelection(c.category))||void 0===e?void 0:e.option)===s.CategorySkipOption.ManualSkip?t=l[0]+.001:(t=l[1],n=!0,o=!1)),Z(n,t,o))};u<=0?m():C=setTimeout(m,1e3*u*(1/T.playbackRate))}function ee(e,t){const n=se(document.URL);return(n!==(e||y)||!(!t||f&&f.includes(t)||_.includes(t)))&&(console.error("[SponsorBlock] The videoID recorded when trying to skip is different than what it should be."),console.error("[SponsorBlock] VideoID recorded: "+y+". Actual VideoID: "+n),$(n),!0)}function te(){const e=document.querySelector("video");e&&e!==T&&(T=e,x.includes(T)||(x.push(T),T.addEventListener("durationchange",X),i.default.config.disableSkipping||(B=!1,T.addEventListener("play",()=>{B=!1,(O||0!==T.currentTime)&&(O=!1,De(),(Math.abs(R-T.currentTime)>.3||R!==T.currentTime&&Date.now()-U>2e3)&&(U=Date.now(),R=T.currentTime,Z()))}),T.addEventListener("playing",()=>{(Math.abs(R-T.currentTime)>.3||R!==T.currentTime&&Date.now()-U>2e3)&&(U=Date.now(),R=T.currentTime,Z())}),T.addEventListener("seeking",()=>{if(T.paused||(U=Date.now(),R=T.currentTime,Z()),!i.default.config.dontShowNotice){const e=f.find(e=>p.getCategoryActionType(e.category)===s.CategoryActionType.POI&&T.currentTime-e.segment[0]>0&&T.currentTime-e.segment[0]<.006*T.duration);e&&!v.some(t=>t.segments.some(t=>t.UUID===e.UUID))&&de({v:T,skipTime:e.segment,skippingSegments:[e],openNotice:!0,forceAutoSkip:!0})}}),T.addEventListener("ratechange",()=>Z()),T.addEventListener("videoSpeed_ratechange",()=>Z()),T.addEventListener("pause",()=>{R=-1,U=0,Q()}),Z()),function(){A||(A=new m.SkipButtonControlBar({skip:e=>de({v:T,skipTime:e.segment,skippingSegments:[e],openNotice:!0,forceAutoSkip:!0})}));A.attachToPage()}()))}function ne(e,t=!0){var n,a;return o(this,void 0,void 0,(function*(){if(T||te(),!T)return void setTimeout(()=>ne(e),100);!function(){const e=document.querySelector(".html5-video-container");e&&null===E&&!M&&(E=new MutationObserver(te),E.observe(e,{attributes:!0,childList:!0,subtree:!0}))}();let o=!1;const c=[];for(const e of i.default.config.categorySelections)c.push(e.name);const l=(yield r.getHash(e,1)).substr(0,4),u=yield r.asyncRequestToServer("GET","/api/skipSegments/"+l,{categories:c,userAgent:`${chrome.runtime.id}`});if(null==u?void 0:u.ok){const o=null===(a=null===(n=JSON.parse(u.responseText))||void 0===n?void 0:n.filter(t=>t.videoID===e))||void 0===a?void 0:a.map(e=>e.segments)[0];if(!o||!o.length)return void oe();if(g=!0,null!==f&&t)for(let e=0;e<f.length;e++)f[e].source===s.SponsorSourceType.Local&&o.push(f[e]);const r=f||[];if(f=o,0!==i.default.config.minDuration)for(let e=0;e<f.length;e++)f[e].segment[1]-f[e].segment[0]<i.default.config.minDuration&&(f[e].hidden=s.SponsorHideType.MinimumDuration);if(t)for(const e of r){const t=f.find(t=>e.UUID===t.UUID);t&&(t.hidden=e.hidden,t.category=e.category)}ie(),(L==e||null==L&&!isNaN(T.duration))&&re(),F=0}else 404===(null==u?void 0:u.status)?oe():F<15&&!o&&(o=!0,setTimeout(()=>{y&&0===(null==f?void 0:f.length)&&ne(y)},5e3+15e3*Math.random()+5e3*F),F++)}))}function oe(){i.default.config.refetchWhenNotFound&&(g=!1,setTimeout(()=>{y&&0===(null==f?void 0:f.length)&&ne(y)},1e4+3e4*Math.random()),F=0)}function ie(){var e;if(!B){let t=-1,n=null;for(const e of f)if(e.segment[0]<=T.currentTime&&e.segment[0]>t&&e.segment[1]>T.currentTime&&p.getCategoryActionType(e.category)===s.CategoryActionType.Skippable){t=e.segment[0],n=e;break}if(-1===t)for(const e of _)if(e.segment[0]<=T.currentTime&&e.segment[0]>t&&e.segment[1]>T.currentTime&&p.getCategoryActionType(e.category)===s.CategoryActionType.Skippable){t=e.segment[0],n=e;break}const o=f.filter(e=>e.segment[1]>T.currentTime&&p.getCategoryActionType(e.category)===s.CategoryActionType.POI).sort((e,t)=>t.segment[0]-e.segment[0]);for(const t of o){const n=null===(e=r.getCategorySelection(t.category))||void 0===e?void 0:e.option;if(n!==s.CategorySkipOption.ShowOverlay&&(de({v:T,skipTime:t.segment,skippingSegments:[t],openNotice:!0,unskipTime:T.currentTime}),n===s.CategorySkipOption.AutoSkip))break}-1!==t?Z(void 0,t):Z()}}function se(e){e.startsWith("https://www.youtube.com/tv#/")&&(e=e.replace("#",""));let t=null;try{t=new URL(e)}catch(t){return console.error("[SB] Unable to parse URL: "+e),!1}if(i.default.config&&i.default.config.invidiousInstances.includes(t.host))M=!0;else if("m.youtube.com"===t.host)I=!0;else if(!["m.youtube.com","www.youtube.com","www.youtube-nocookie.com","music.youtube.com"].includes(t.host))return i.default.config||r.wait(()=>null!==i.default.config).then(()=>$(se(e))),!1;if(t.searchParams.has("v")&&["/watch","/watch/"].includes(t.pathname)||t.pathname.startsWith("/tv/watch")){const e=t.searchParams.get("v");return 11==e.length&&e}if(t.pathname.startsWith("/embed/"))try{return t.pathname.substr(7,11)}catch(t){return console.error("[SB] Video ID not valid for "+e),!1}return!1}function re(){if(null===P)return;if(W)return void P.clear();if(null===T)return;const e=[];if(f&&f.forEach(t=>{t.hidden===s.SponsorHideType.Visible&&e.push({segment:t.segment,category:t.category,unsubmitted:!1,showLarger:p.getCategoryActionType(t.category)===s.CategoryActionType.POI})}),_.forEach(t=>{e.push({segment:t.segment,category:t.category,unsubmitted:!0,showLarger:p.getCategoryActionType(t.category)===s.CategoryActionType.POI})}),P.set(e,T.duration),i.default.config.showTimeWithSkips){!function(e){if(I||M)return;(isNaN(e)||e<0)&&(e=0);const t=document.querySelector(".ytp-time-display.notranslate");if(!t)return;let n=document.getElementById("sponsorBlockDurationAfterSkips");null===n&&(n=document.createElement("span"),n.id="sponsorBlockDurationAfterSkips",n.classList.add("ytp-time-duration"),t.appendChild(n));const o=r.getFormattedTime(T.duration-e);n.innerText=null==o||e<=0?"":" ("+o+")"}(r.getTimestampsDuration(e.map(({segment:e})=>e)))}L=y}function ae(e,t,n=!0){if(-1==t||ge(e[t]))return t;let o=t;for(let t=0;t<(null==e?void 0:e.length);t++){const i=e[t].segment,r=e[o].segment[1];i[0]<=r&&i[1]>r&&(!n||e[t].hidden===s.SponsorHideType.Visible)&&ge(e[t])&&(o=t)}return o!==t&&(o=ae(e,o,n)),o}function ce(e,t,n,o,i=!1,a=!1){if(null===e)return[];const c=[];for(let l=0;l<(null==e?void 0:e.length);l++)!(void 0===o||n&&e[l].segment[0]>=o||t&&e[l].segment[0]<o&&e[l].segment[1]>o)||i&&r.getCategorySelection(e[l].category).option===s.CategorySkipOption.ShowOverlay||a&&e[l].hidden!==s.SponsorHideType.Visible||p.getCategoryActionType(e[l].category)!==s.CategoryActionType.Skippable||c.push(e[l].segment[0]);return c}function le(e,t=!0){T.currentTime=e,t&&T.paused&&T.play()}function ue(e,t,n){if(!i.default.config.trackViewCount||!i.default.config.trackViewCountInPrivate&&chrome.extension.inIncognitoContext)return;let o=!1;for(const s of e){const e=f.indexOf(s);-1===e||w[e]||(w[e]=!0,o||(i.default.config.minutesSaved=i.default.config.minutesSaved+t/60,i.default.config.skipCount=i.default.config.skipCount+1,o=!0),n&&r.asyncRequestToServer("POST","/api/viewedVideoSponsorTime?UUID="+s.UUID))}}function de({v:e,skipTime:t,skippingSegments:n,openNotice:o,forceAutoSkip:r,unskipTime:a}){const c=r||ge(n[0]);if((c||_.includes(n[0]))&&e.currentTime!==t[1]&&(e.loop&&e.duration>1&&t[1]>=e.duration-1?e.currentTime=0:e.currentTime=t[1]),c||1!==n.length||p.getCategoryActionType(n[0].category)!==s.CategoryActionType.POI){if(o&&(!i.default.config.dontShowNotice||!c)){const e=new l.default(n,c,K,a);v.push(e),null==k||k.setShowKeybindHint(!1),k=e}}else A.enable(n[0],i.default.config.highlightCategoryUpdate?0:15),i.default.config.highlightCategoryUpdate||(new h.Tooltip({text:chrome.i18n.getMessage("highlightNewFeature"),link:"https://blog.ajay.app/highlight-sponsorblock",referenceNode:A.getElement().parentElement,prependElement:A.getElement(),timeout:15}),i.default.config.highlightCategoryUpdate=!0),null==k||k.setShowKeybindHint(!1),k=A;c&&ue(n,t[1]-t[0],!0)}function pe(e,t=null){console.log(t),T.currentTime=null!=t?t:e.segment[0]+.001}function me(e){const t=Math.max(e.segment[1]-T.currentTime,0),n=t/(e.segment[1]-e.segment[0])>.5;T.currentTime=e.segment[1],ue([e],t,n),Z(!0,e.segment[1],!1)}function he(e,t,n,o,i=!1){const s=document.getElementById(e+"Button");if(null!==s)return s;const r=document.createElement("button");r.draggable=i,r.id=e+"Button",r.classList.add("playerButton"),r.classList.add("ytp-button"),r.setAttribute("title",chrome.i18n.getMessage(t)),r.addEventListener("click",()=>{n()});const a=document.createElement("img");return r.draggable=i,a.id=e+"Image",a.className="playerButtonImage",a.src=chrome.extension.getURL("icons/"+o),r.appendChild(a),V&&V.prepend(r),j[e]={button:r,image:a,setupListener:!1},r}function ge(e){var t;return(null===(t=r.getCategorySelection(e.category))||void 0===t?void 0:t.option)===s.CategorySkipOption.AutoSkip||i.default.config.autoSkipOnMusicVideos&&f.some(e=>"music_offtopic"===e.category)}function fe(){const e=[".ytp-right-controls",".player-controls-top",".vjs-control-bar"];for(const t of e){const e=document.querySelectorAll(t);if(e&&e.length>0)return e[e.length-1]}return!1}function ye(){var e;return o(this,void 0,void 0,(function*(){if(I)return;V=yield r.wait(fe).catch(),he("startSegment","sponsorStart",()=>Ne(()=>ke()),"PlayerStartIconSponsorBlocker.svg"),he("cancelSegment","sponsorCancel",()=>Ne(()=>function(){Ce()&&(_.splice(_.length-1,1),i.default.config.segmentTimes.set(y,_),_.length<=0&&Le());Se(),we(!1)}()),"PlayerCancelSegmentIconSponsorBlocker.svg"),he("delete","clearTimes",()=>Ne(()=>function(){const e=y,t=i.default.config.segmentTimes.get(e);if(null!=t&&t.length>0){const n=chrome.i18n.getMessage("clearThis")+Ue(t)+"\n"+chrome.i18n.getMessage("confirmMSG");if(!confirm(n))return;Le(),i.default.config.segmentTimes.delete(e),_=[],re(),Se()}}()),"PlayerDeleteIconSponsorBlocker.svg"),he("submit","SubmitTimes",Be,"PlayerUploadIconSponsorBlocker.svg"),he("info","openPopup",Ee,"PlayerInfoIconSponsorBlocker.svg");const t=fe();i.default.config.autoHideInfoButton&&!M&&t&&(null===(e=j.info)||void 0===e?void 0:e.button)&&!N.includes(t)&&(N.push(t),j.info.button.classList.add("hidden"),t.addEventListener("mouseenter",()=>{j.info.button.classList.remove("hidden")}),t.addEventListener("mouseleave",()=>{j.info.button.classList.add("hidden")}))}))}function ve(){return o(this,void 0,void 0,(function*(){y&&!I&&(yield ye(),Se(),i.default.config.hideInfoButtonPlayerControls||document.URL.includes("/embed/")||M?j.info.button.style.display="none":j.info.button.style.removeProperty("display"))}))}function Se(){if(!y||I)return;const e=!i.default.config.hideVideoPlayerControls&&!M;let t=!1,n=!1,o=!1;e&&(t=Ce(),n=_.length>0,o=_.length>1||_.length>0&&!t),j.startSegment.button.style.display=e?"unset":"none",j.cancelSegment.button.style.display=e&&t?"unset":"none",e&&(t?(j.startSegment.image.src=chrome.extension.getURL("icons/PlayerStopIconSponsorBlocker.svg"),j.startSegment.button.setAttribute("title",chrome.i18n.getMessage("sponsorEnd"))):(j.startSegment.image.src=chrome.extension.getURL("icons/PlayerStartIconSponsorBlocker.svg"),j.startSegment.button.setAttribute("title",chrome.i18n.getMessage("sponsorStart")))),j.submit.button.style.display=n&&!i.default.config.hideUploadButtonPlayerControls?"unset":"none",j.delete.button.style.display=o&&!i.default.config.hideDeleteButtonPlayerControls?"unset":"none"}function Te(){var e,t;return"M 18,11 V 7 l -5,5 5,5 v -4 c 3.3,0 6,2.7 6,6 0,3.3 -2.7,6 -6,6 -3.3,0 -6,-2.7 -6,-6 h -2 c 0,4.4 3.6,8 8,8 4.4,0 8,-3.6 8,-8 0,-4.4 -3.6,-8 -8,-8 z"===(null===(t=null===(e=document.querySelector(".ytp-play-button"))||void 0===e?void 0:e.querySelector(".ytp-svg-fill"))||void 0===t?void 0:t.getAttribute("d"))?T.duration:T.currentTime}function ke(){if(Ce()){const e=be(),t=e.segment[0],n=Te();e.segment=[Math.min(t,n),Math.max(t,n)]}else _.push({segment:[Te()],UUID:null,category:i.default.config.defaultCategory,source:s.SponsorSourceType.Local});i.default.config.segmentTimes.set(y,_),ne(y),Se(),we(!1)}function be(){return _[_.length-1]}function Ce(){var e;const t=be();return t&&2!==(null===(e=null==t?void 0:t.segment)||void 0===e?void 0:e.length)}function we(e=!0){const t=i.default.config.segmentTimes.get(y);if(e&&null!=t){_=[];for(const e of t)_.push({segment:e.segment,UUID:e.UUID,category:e.category,source:e.source})}re(),null!==T&&Z(),null!==q&&q.update()}function Ee(){null==document.getElementById("sponsorBlockPopupContainer")&&(H=!1,j.info&&(j.info.button.style.display="none"),function(e,t,n){const o=new XMLHttpRequest;o.open(e,t,!0),null!=n&&(o.onreadystatechange=function(){n(o,!1)},o.onerror=function(){n(o,!0)});o.send()}("GET",chrome.extension.getURL("popup.html"),(function(e){if(4==e.readyState&&200==e.status){const t=document.createElement("div");t.id="sponsorBlockPopupContainer";let n=e.responseText;n=n.replace(/<head>[\S\s]*<\/head>/gi,""),n=n.replace(/<body/gi,"<div"),n=n.replace(/<\/body/gi,"</div"),n=n.replace(/<html/gi,"<div"),n=n.replace(/<\/html/gi,"</div"),t.innerHTML=n;const o=document.createElement("div");o.innerText=chrome.i18n.getMessage("closePopup"),o.classList.add("smallLink"),o.setAttribute("align","center"),o.addEventListener("click",xe),o.style.color="var(--yt-spec-text-primary)",t.prepend(o);const i=document.querySelectorAll("#secondary");let s=null;for(let e=0;e<i.length;e++)null!==i[e].firstElementChild&&(s=i[e]);null==s&&(s=document.getElementById("watch7-sidebar-contents"));const r=t.querySelector("#sponsorBlockPopupLogo"),c=t.querySelector("#sbPopupIconSettings"),l=t.querySelector("#sbPopupIconEdit"),u=t.querySelector("#sbPopupIconCheck"),d=t.querySelector("#refreshSegments");r.src=chrome.extension.getURL("icons/IconSponsorBlocker256px.png"),c.src=chrome.extension.getURL("icons/settings.svg"),l.src=chrome.extension.getURL("icons/pencil.svg"),u.src=chrome.extension.getURL("icons/check.svg"),d.src=chrome.extension.getURL("icons/refresh.svg"),s.insertBefore(t,s.firstChild),a.default(G)}})))}function xe(){const e=document.getElementById("sponsorBlockPopupContainer");null!==e&&(e.remove(),!document.URL.includes("/embed/")&&j.info&&(j.info.button.style.display="unset"))}function Ne(e){return xe(),e()}function Me(e,t,n,o){null!=o&&(o.addVoteButtonInfo.bind(o)(chrome.i18n.getMessage("Loading")),o.setNoticeInfoMessage.bind(o)());const s=r.getSponsorIndexFromUUID(f,t);if(-1!=s&&null!==f[s].UUID){if(0===e&&w[s]||1===e&&!w[s]){let t=1;0==e&&(t=-1,w[s]=!1),i.default.config.minutesSaved=i.default.config.minutesSaved+t*(f[s].segment[1]-f[s].segment[0])/60,i.default.config.skipCount=i.default.config.skipCount+t}chrome.runtime.sendMessage({message:"submitVote",type:e,UUID:t,category:n},(function(i){null!=i&&null!=o&&(1==i.successType||-1==i.successType&&429==i.statusCode?o.afterVote.bind(o)(r.getSponsorTimeFromUUID(f,t),e,n):-1==i.successType&&(403===i.statusCode&&i.responseText.startsWith("Vote rejected due to a warning from a moderator.")?o.setNoticeInfoMessageWithOnClick.bind(o)(()=>{d.openWarningChat(i.responseText),o.closeListener.call(o)},chrome.i18n.getMessage("voteRejectedWarning")):o.setNoticeInfoMessage.bind(o)(r.getErrorMessage(i.statusCode,i.responseText)),o.resetVoteButtonInfo.bind(o)()))}))}}function Ie(){i.default.config.dontShowNotice=!0,function(){const e=document.getElementsByClassName("sponsorSkipNotice");for(let t=0;t<e.length;t++)e[t].remove()}()}function Le(){null==q||q.close(),q=null}function Be(){null===q&&void 0!==_&&_.length>0&&(q=new u.default(K,Oe))}function Oe(){return o(this,void 0,void 0,(function*(){j.submit.image.src=chrome.extension.getURL("icons/PlayerUploadIconSponsorBlocker.svg");const e=r.applyLoadingAnimation(j.submit.button,1,()=>Se());for(let e=0;e<_.length;e++)_[e].segment[1]>T.duration&&(_[e].segment[1]=T.duration);if(i.default.config.segmentTimes.set(y,_),i.default.config.minDuration>0)for(let e=0;e<_.length;e++)if(_[e].segment[1]-_[e].segment[0]<i.default.config.minDuration){const e=chrome.i18n.getMessage("shortCheck")+"\n\n"+Ue(_);if(!confirm(e))return}const t=yield r.asyncRequestToServer("POST","/api/skipSegments",{videoID:y,userID:i.default.config.userID,segments:_,videoDuration:null==T?void 0:T.duration,userAgent:`${chrome.runtime.id}/v${chrome.runtime.getManifest().version}`});if(200===t.status){e(),i.default.config.segmentTimes.delete(y);const n=_;try{const e=JSON.parse(t.responseText);if((null==e?void 0:e.length)===n.length)for(let t=0;t<e.length;t++)n[t].UUID=e[t].UUID}catch(e){}f=(f||[]).concat(n),i.default.config.sponsorTimesContributed=i.default.config.sponsorTimesContributed+_.length,i.default.config.submissionCountSinceCategories=i.default.config.submissionCountSinceCategories+1,_=[],re()}else j.submit.button.style.animation="unset",j.submit.image.src=chrome.extension.getURL("icons/PlayerUploadFailedIconSponsorBlocker.svg"),403===t.status&&t.responseText.startsWith("Submission rejected due to a warning from a moderator.")?d.openWarningChat(t.responseText):alert(r.getErrorMessage(t.status,t.responseText))}))}function Ue(e){let t="";for(let n=0;n<e.length;n++)for(let o=0;o<e[n].segment.length;o++){let i=r.getFormattedTime(e[n].segment[o]);1==o?i=" to "+i:n>0&&(i=", "+i),t+=i}return t}function Re(e){var t,n,o,s,r;if(["textarea","input"].includes(null===(n=null===(t=document.activeElement)||void 0===t?void 0:t.tagName)||void 0===n?void 0:n.toLowerCase())||(null===(r=null===(s=null===(o=document.activeElement)||void 0===o?void 0:o.id)||void 0===s?void 0:s.toLowerCase())||void 0===r?void 0:r.includes("editable")))return;const a=e.key,c=i.default.config.skipKeybind,l=i.default.config.startSponsorKeybind,u=i.default.config.submitKeybind;switch(a){case c:k&&k.toggleSkip.call(k);break;case l:ke();break;case u:Be()}}function De(){const e=W;W=document.getElementsByClassName("ad-showing").length>0,e!=W&&(re(),ve())}chrome.runtime.onMessage.addListener(G),i.default.configListeners.includes(Y)||i.default.configListeners.push(Y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),i=new(n(2).default);t.default=class{constructor(e,t,n){this.segments=[],this.videoDuration=0,this.container=document.createElement("ul"),this.container.id="previewbar",this.parent=e,this.onMobileYouTube=t,this.onInvidious=n,this.createElement(e),this.setupHoverText()}setupHoverText(){if(this.onMobileYouTube||this.onInvidious)return;this.categoryTooltip=document.createElement("div"),this.categoryTooltip.className="ytp-tooltip-title sponsorCategoryTooltip";const e=document.querySelector(".ytp-tooltip-text-wrapper");if(!e||!e.parentElement)return;this.tooltipContainer=e.parentElement;const t=e.querySelector(".ytp-tooltip-title");if(!this.tooltipContainer||!t)return;e.insertBefore(this.categoryTooltip,t.nextSibling);const n=document.querySelector(".ytp-progress-bar-container");if(!n)return;let o=!1;n.addEventListener("mouseenter",()=>{o=!0}),n.addEventListener("mouseleave",()=>{o=!1}),new MutationObserver(t=>{if(!o||!this.categoryTooltip||!this.tooltipContainer)return;if(1===t.length&&t[0].target.classList.contains("sponsorCategoryTooltip"))return;const n=e.querySelectorAll(".ytp-tooltip-text");let s=null,r=!1;for(const e of n){e.classList.contains("ytp-tooltip-text-no-title")&&(r=!0);const t=e.textContent;if(null!==t&&0!==t.length&&(s=i.getFormattedTimeToSeconds(t),null!==s))break}if(null===s)return;let a=null,c=1/0;for(const e of this.segments){const t=e.segment[1]-e.segment[0],n=0!==t?e.segment[0]:Math.floor(e.segment[0]),o=0!==t?e.segment[1]:Math.ceil(e.segment[1]);n<=s&&o>=s&&t<c&&(c=t,a=e)}null===a&&this.tooltipContainer.classList.contains("sponsorCategoryTooltipVisible")?this.tooltipContainer.classList.remove("sponsorCategoryTooltipVisible"):null!==a&&(this.tooltipContainer.classList.add("sponsorCategoryTooltipVisible"),a.unsubmitted?this.categoryTooltip.textContent=chrome.i18n.getMessage("unsubmitted")+" "+i.shortCategoryName(a.category):this.categoryTooltip.textContent=i.shortCategoryName(a.category),this.categoryTooltip.classList.toggle("ytp-tooltip-text-no-title",r))}).observe(e,{childList:!0,subtree:!0})}createElement(e){this.parent=e,this.onMobileYouTube?(e.style.backgroundColor="rgba(255, 255, 255, 0.3)",e.style.opacity="1",this.container.style.transform="none"):this.onInvidious||(this.parent.addEventListener("mouseenter",()=>this.container.classList.add("hovered")),this.parent.addEventListener("mouseleave",()=>this.container.classList.remove("hovered"))),this.parent.prepend(this.container)}clear(){for(this.videoDuration=0,this.segments=[];this.container.firstChild;)this.container.removeChild(this.container.firstChild)}set(e,t){this.clear(),e&&(this.segments=e,this.videoDuration=t,this.segments.sort(({segment:e},{segment:t})=>t[1]-t[0]-(e[1]-e[0])).forEach(e=>{const t=this.createBar(e);this.container.appendChild(t)}))}createBar({category:e,unsubmitted:t,segment:n,showLarger:i}){var s,r;const a=document.createElement("li");a.classList.add("previewbar"),a.innerHTML=i?"&nbsp;&nbsp;":"&nbsp;";const c=(t?"preview-":"")+e;return a.setAttribute("sponsorblock-category",c),a.style.backgroundColor=null===(s=o.default.config.barTypes[c])||void 0===s?void 0:s.color,this.onMobileYouTube||(a.style.opacity=null===(r=o.default.config.barTypes[c])||void 0===r?void 0:r.opacity),a.style.position="absolute",n[1]-n[0]>0&&(a.style.width=this.timeToPercentage(n[1]-n[0])),a.style.left=this.timeToPercentage(n[0]),a}remove(){this.container.remove(),this.categoryTooltip&&(this.categoryTooltip.remove(),this.categoryTooltip=void 0),this.tooltipContainer&&(this.tooltipContainer.classList.remove("sponsorCategoryTooltipVisible"),this.tooltipContainer=void 0)}timeToPercentage(e){return Math.min(100,e/this.videoDuration*100)+"%"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),i=n(6),s=new(n(2).default),r=n(20),a=n(3),c=n(0);t.default=class{constructor(e,t=!1,n,l=null){this.skipNoticeRef=o.createRef(),this.segments=e,this.autoSkip=t,this.contentContainer=n;const u=s.findReferenceNode(),d=document.getElementsByClassName("sponsorSkipNotice").length;let p="";for(const e of this.segments)p+=e.UUID;p+=d,this.noticeElement=document.createElement("div"),this.noticeElement.id="sponsorSkipNoticeContainer"+p,u.prepend(this.noticeElement),i.render(o.createElement(r.default,{segments:e,autoSkip:t,contentContainer:n,ref:this.skipNoticeRef,closeListener:()=>this.close(),smaller:c.default.config.noticeVisibilityMode>=a.NoticeVisbilityMode.MiniForAll||c.default.config.noticeVisibilityMode>=a.NoticeVisbilityMode.MiniForAutoSkip&&t,unskipTime:l}),this.noticeElement)}setShowKeybindHint(e){this.skipNoticeRef.current.setState({showKeybindHint:e})}close(){i.unmountComponentAtNode(this.noticeElement),this.noticeElement.remove();const e=this.contentContainer().skipNotices;e.splice(e.indexOf(this),1)}toggleSkip(){this.skipNoticeRef.current.prepAction(r.SkipNoticeAction.Unskip)}}},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkipNoticeAction=void 0;const o=n(1),i=n(4),s=n(0),r=n(3),a=n(9),c=n(10),l=n(5);var u;!function(e){e[e.None=0]="None",e[e.Upvote=1]="Upvote",e[e.Downvote=2]="Downvote",e[e.CategoryVote=3]="CategoryVote",e[e.Unskip=4]="Unskip"}(u=t.SkipNoticeAction||(t.SkipNoticeAction={}));class d extends o.Component{constructor(e){var t,n;super(e),this.noticeRef=o.createRef(),this.categoryOptionRef=o.createRef(),this.segments=e.segments,this.autoSkip=e.autoSkip,this.contentContainer=e.contentContainer,this.audio=null;const i=l.getSkippingText(this.segments,this.props.autoSkip),r=document.getElementsByClassName("sponsorSkipNoticeParent");this.amountOfPreviousNotices=r.length,this.showInSecondSlot=r.length>0&&[...r].some(e=>!e.classList.contains("secondSkipNotice")),this.segments.length>1&&this.segments.sort((e,t)=>e.segment[0]-t.segment[0]);for(const e of this.segments)this.idSuffix+=e.UUID;this.idSuffix+=this.amountOfPreviousNotices,this.state={noticeTitle:i,messages:[],messageOnClick:null,maxCountdownTime:()=>s.default.config.skipNoticeDuration,countdownTime:s.default.config.skipNoticeDuration,countdownText:null,unskipText:chrome.i18n.getMessage("unskip"),unskipCallback:e=>this.unskip(e),downvoting:!1,choosingCategory:!1,thanksForVotingText:null,actionState:u.None,showKeybindHint:null===(t=this.props.showKeybindHint)||void 0===t||t,smaller:null!==(n=this.props.smaller)&&void 0!==n&&n},this.autoSkip||Object.assign(this.state,this.getUnskippedModeInfo(0,chrome.i18n.getMessage("skip")))}componentDidMount(){s.default.config.audioNotificationOnSkip&&this.audio&&(this.audio.volume=.1*this.contentContainer().v.volume,this.autoSkip&&this.audio.play())}render(){const e={};this.contentContainer().onMobileYouTube&&(e.bottom="4em",e.transform="scale(0.8) translate(10%, 10%)");const t=this.props.smaller?this.getSkipButton():null;return o.createElement(a.default,{noticeTitle:this.state.noticeTitle,amountOfPreviousNotices:this.amountOfPreviousNotices,showInSecondSlot:this.showInSecondSlot,idSuffix:this.idSuffix,fadeIn:!0,startFaded:s.default.config.noticeVisibilityMode>=r.NoticeVisbilityMode.FadedForAll||s.default.config.noticeVisibilityMode>=r.NoticeVisbilityMode.FadedForAutoSkip&&this.autoSkip,timed:!0,maxCountdownTime:this.state.maxCountdownTime,videoSpeed:()=>{var e;return null===(e=this.contentContainer().v)||void 0===e?void 0:e.playbackRate},style:e,ref:this.noticeRef,closeListener:()=>this.closeListener(),smaller:this.state.smaller,firstColumn:t,bottomRow:[...this.getMessageBoxes(),...this.getBottomRow()],onMouseEnter:()=>this.onMouseEnter()},s.default.config.audioNotificationOnSkip&&o.createElement("audio",{ref:e=>{this.audio=e}},o.createElement("source",{src:chrome.extension.getURL("icons/beep.ogg"),type:"audio/ogg"})))}getBottomRow(){return[o.createElement("tr",{id:"sponsorSkipNoticeSecondRow"+this.idSuffix,key:0},this.state.thanksForVotingText?o.createElement("td",{id:"sponsorTimesVoteButtonInfoMessage"+this.idSuffix,className:"sponsorTimesInfoMessage sponsorTimesVoteButtonMessage",style:{marginRight:"10px"}},this.state.thanksForVotingText):o.createElement("td",{id:"sponsorTimesVoteButtonsContainer"+this.idSuffix,className:"sponsorTimesVoteButtonsContainer"},o.createElement("img",{id:"sponsorTimesDownvoteButtonsContainer"+this.idSuffix,className:"sponsorSkipObject voteButton",style:{marginRight:"10px"},src:chrome.extension.getURL("icons/thumbs_up.svg"),title:chrome.i18n.getMessage("upvoteButtonInfo"),onClick:()=>this.prepAction(u.Upvote)}),o.createElement("img",{id:"sponsorTimesDownvoteButtonsContainer"+this.idSuffix,className:"sponsorSkipObject voteButton",src:chrome.extension.getURL("icons/thumbs_down.svg"),title:chrome.i18n.getMessage("reportButtonInfo"),onClick:()=>this.adjustDownvotingState(!0)})),this.props.smaller?null:this.getSkipButton(),this.autoSkip?o.createElement("td",{className:"sponsorSkipNoticeRightSection",key:1},o.createElement("button",{className:"sponsorSkipObject sponsorSkipNoticeButton sponsorSkipNoticeRightButton",onClick:this.contentContainer().dontShowNoticeAgain},chrome.i18n.getMessage("Hide"))):""),this.state.downvoting&&o.createElement("tr",{id:"sponsorSkipNoticeDownvoteOptionsRow"+this.idSuffix,key:2},o.createElement("td",{id:"sponsorTimesDownvoteOptionsContainer"+this.idSuffix},o.createElement("button",{className:"sponsorSkipObject sponsorSkipNoticeButton",onClick:()=>this.prepAction(u.Downvote)},chrome.i18n.getMessage("downvoteDescription")),o.createElement("button",{className:"sponsorSkipObject sponsorSkipNoticeButton",onClick:()=>this.openCategoryChooser()},chrome.i18n.getMessage("incorrectCategory")))),this.state.choosingCategory&&o.createElement("tr",{id:"sponsorSkipNoticeCategoryChooserRow"+this.idSuffix,key:3},o.createElement("td",null,o.createElement("select",{id:"sponsorTimeCategories"+this.idSuffix,className:"sponsorTimeCategories",defaultValue:this.segments[0].category,ref:this.categoryOptionRef},this.getCategoryOptions()),1===this.segments.length&&o.createElement("button",{className:"sponsorSkipObject sponsorSkipNoticeButton",onClick:()=>this.prepAction(u.CategoryVote)},chrome.i18n.getMessage("submit")))),this.state.actionState!==u.None&&o.createElement("tr",{id:"sponsorSkipNoticeSubmissionOptionsRow"+this.idSuffix,key:4},o.createElement("td",{id:"sponsorTimesSubmissionOptionsContainer"+this.idSuffix},this.getSubmissionChooser()))]}getSkipButton(){if(this.segments.length>1||l.getCategoryActionType(this.segments[0].category)!==r.CategoryActionType.POI||this.props.unskipTime)return o.createElement("span",{className:"sponsorSkipNoticeUnskipSection"},o.createElement("button",{id:"sponsorSkipUnskipButton"+this.idSuffix,className:"sponsorSkipObject sponsorSkipNoticeButton",style:{marginLeft:"4px"},onClick:()=>this.prepAction(u.Unskip)},this.state.unskipText+(this.state.showKeybindHint?" ("+s.default.config.skipKeybind+")":"")))}getSubmissionChooser(){const e=[];for(let t=0;t<this.segments.length;t++)e.push(o.createElement("button",{className:"sponsorSkipObject sponsorSkipNoticeButton",onClick:()=>this.performAction(t),key:"submission"+t+this.segments[t].category+this.idSuffix},t+1+". "+chrome.i18n.getMessage("category_"+this.segments[t].category)));return e}onMouseEnter(){this.state.smaller&&this.setState({smaller:!1})}prepAction(e){1===this.segments.length?this.performAction(0,e):this.setState({actionState:e})}getMessageBoxes(){if(0===this.state.messages.length)return[o.createElement("tr",{id:"sponsorSkipNoticeSpacer"+this.idSuffix,className:"sponsorBlockSpacer",key:"messageBoxSpacer"})];const e=[];for(let t=0;t<this.state.messages.length;t++)e.push(o.createElement("tr",null,o.createElement("td",null,o.createElement(c.default,{idSuffix:this.idSuffix,text:this.state.messages[t],onClick:this.state.messageOnClick,key:t+"_messageBox"}))));return e}performAction(e,t){switch(null!=t?t:this.state.actionState){case u.None:break;case u.Upvote:this.contentContainer().vote(1,this.segments[e].UUID,void 0,this);break;case u.Downvote:this.contentContainer().vote(0,this.segments[e].UUID,void 0,this);break;case u.CategoryVote:this.contentContainer().vote(void 0,this.segments[e].UUID,this.categoryOptionRef.current.value,this);break;case u.Unskip:this.state.unskipCallback(e)}this.setState({actionState:u.None})}adjustDownvotingState(e){e||this.clearConfigListener(),this.setState({downvoting:e,choosingCategory:!1})}clearConfigListener(){this.configListener&&(s.default.configListeners.splice(s.default.configListeners.indexOf(this.configListener),1),this.configListener=null)}openCategoryChooser(){this.configListener=()=>this.forceUpdate(),s.default.configListeners.push(this.configListener),this.setState({choosingCategory:!0,downvoting:!1},()=>{this.segments.length>1&&this.prepAction(u.CategoryVote)})}getCategoryOptions(){const e=[],t=i.categoryList.filter(e=>l.getCategoryActionType(e)===r.CategoryActionType.Skippable);for(const n of t)e.push(o.createElement("option",{value:n,key:n},chrome.i18n.getMessage("category_"+n)));return e}unskip(e){this.contentContainer().unskipSponsorTime(this.segments[e],this.props.unskipTime),this.unskippedMode(e,chrome.i18n.getMessage("reskip"))}unskippedMode(e,t){this.setState(this.getUnskippedModeInfo(e,t),()=>{this.noticeRef.current.resetCountdown()})}getUnskippedModeInfo(e,t){const n=l.getCategoryActionType(this.segments[e].category)===r.CategoryActionType.Skippable?()=>{const t=this.segments[e],n=Math.round((t.segment[1]-this.contentContainer().v.currentTime)*(1/this.contentContainer().v.playbackRate));return Math.max(n,s.default.config.skipNoticeDuration)}:this.state.maxCountdownTime;return{unskipText:t,unskipCallback:e=>this.reskip(e),maxCountdownTime:n,countdownTime:n()}}reskip(e){this.contentContainer().reskipSponsorTime(this.segments[e]);const t={unskipText:chrome.i18n.getMessage("unskip"),unskipCallback:this.unskip.bind(this),maxCountdownTime:()=>s.default.config.skipNoticeDuration,countdownTime:s.default.config.skipNoticeDuration};this.autoSkip||(t.noticeTitle=chrome.i18n.getMessage("noticeTitle")),this.setState(t,()=>{this.noticeRef.current.resetCountdown()})}afterVote(e,t,n){this.addVoteButtonInfo(chrome.i18n.getMessage("voted")),0===t&&(this.setNoticeInfoMessage(chrome.i18n.getMessage("hitGoBack")),this.adjustDownvotingState(!1)),e&&(0===t?e.hidden=r.SponsorHideType.Downvoted:n&&(e.category=n),this.contentContainer().updatePreviewBar())}setNoticeInfoMessageWithOnClick(e,...t){this.setState({messages:t,messageOnClick:t=>e(t)})}setNoticeInfoMessage(...e){this.setState({messages:e})}addVoteButtonInfo(e){this.setState({thanksForVotingText:e})}resetVoteButtonInfo(){this.setState({thanksForVotingText:null})}closeListener(){this.clearConfigListener(),this.props.closeListener()}}t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),i=n(6),s=new(n(2).default),r=n(22);t.default=class{constructor(e,t){this.noticeRef=o.createRef(),this.contentContainer=e,this.callback=t;const n=s.findReferenceNode();this.noticeElement=document.createElement("div"),this.noticeElement.id="submissionNoticeContainer",n.prepend(this.noticeElement),i.render(o.createElement(r.default,{contentContainer:e,callback:t,ref:this.noticeRef,closeListener:()=>this.close()}),this.noticeElement)}update(){this.noticeRef.current.forceUpdate()}close(){i.unmountComponentAtNode(this.noticeElement),this.noticeElement.remove()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),i=n(0),s=n(9),r=n(10),a=n(23);class c extends o.Component{constructor(e){super(e),this.noticeRef=o.createRef(),this.contentContainer=e.contentContainer,this.callback=e.callback;const t=chrome.i18n.getMessage("confirmNoticeTitle");this.state={noticeTitle:t,messages:[],idSuffix:"SubmissionNotice"}}componentDidMount(){this.videoObserver=new MutationObserver(()=>{this.forceUpdate()}),this.videoObserver.observe(this.contentContainer().v,{attributes:!0})}componentWillUnmount(){this.videoObserver&&this.videoObserver.disconnect()}render(){return o.createElement(s.default,{noticeTitle:this.state.noticeTitle,idSuffix:this.state.idSuffix,ref:this.noticeRef,closeListener:this.cancel.bind(this),zIndex:5e4},this.getMessageBoxes(),o.createElement("tr",{id:"sponsorSkipNoticeMiddleRow"+this.state.idSuffix,className:"sponsorTimeMessagesRow",style:{maxHeight:this.contentContainer().v.offsetHeight-200+"px"}},o.createElement("td",{style:{width:"100%"}},this.getSponsorTimeMessages())),o.createElement("tr",{id:"sponsorSkipNoticeSecondRow"+this.state.idSuffix},o.createElement("td",{className:"sponsorSkipNoticeRightSection",style:{position:"relative"}},o.createElement("button",{className:"sponsorSkipObject sponsorSkipNoticeButton sponsorSkipNoticeRightButton",onClick:()=>window.open("https://wiki.sponsor.ajay.app/index.php/Guidelines")},chrome.i18n.getMessage(i.default.config.submissionCountSinceCategories>3?"guidelines":"readTheGuidelines")),o.createElement("button",{className:"sponsorSkipObject sponsorSkipNoticeButton sponsorSkipNoticeRightButton",onClick:this.submit.bind(this)},chrome.i18n.getMessage("submit")))))}getSponsorTimeMessages(){const e=[];this.timeEditRefs=[];const t=this.props.contentContainer().sponsorTimesSubmitting;for(let n=0;n<t.length;n++){const t=o.createRef();e.push(o.createElement(a.default,{key:n,idSuffix:this.state.idSuffix+n,index:n,contentContainer:this.props.contentContainer,submissionNotice:this,ref:t})),this.timeEditRefs.push(t)}return e}getMessageBoxes(){const e=[];for(let t=0;t<this.state.messages.length;t++)e.push(o.createElement(r.default,{idSuffix:this.state.idSuffix+t,text:this.state.messages[t],key:t}));return e}cancel(){this.noticeRef.current.close(!0),this.contentContainer().resetSponsorSubmissionNotice(),this.props.closeListener()}submit(){var e,t,n;for(const e of this.timeEditRefs)e.current.saveEditTimes();const o=this.props.contentContainer().sponsorTimesSubmitting;for(const e of o)if("chooseACategory"===e.category)return void alert(chrome.i18n.getMessage("youMustSelectACategory"));if("Music"===(null===(n=null===(t=null===(e=this.contentContainer().videoInfo)||void 0===e?void 0:e.microformat)||void 0===t?void 0:t.playerMicroformatRenderer)||void 0===n?void 0:n.category))for(const e of o)if("sponsor"===e.category){if(!confirm(chrome.i18n.getMessage("nonMusicCategoryOnMusic")))return;break}this.props.callback(),this.cancel()}}t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),i=n(0),s=n(4),r=n(2),a=n(3),c=n(5),l=new r.default;class u extends o.Component{constructor(e){super(e),this.categoryOptionRef=o.createRef(),this.idSuffix=this.props.idSuffix,this.state={editing:!1,sponsorTimeEdits:[null,null]}}componentDidMount(){document.getElementById("sponsorTimesContainer"+this.idSuffix).addEventListener("keydown",(function(e){e.stopPropagation()})),this.configUpdateListener||(this.configUpdateListener=()=>this.configUpdate(),i.default.configListeners.push(this.configUpdate.bind(this)))}componentWillUnmount(){this.configUpdateListener&&i.default.configListeners.splice(i.default.configListeners.indexOf(this.configUpdate.bind(this)),1)}render(){const e={textAlign:"center"};0!=this.props.index&&(e.marginTop="15px");const t=e=>{e&&(e.style.setProperty("color","black","important"),e.style.setProperty("text-shadow","none","important"))};let n;const i=this.props.contentContainer().sponsorTimesSubmitting[this.props.index],s=i.segment;return n=this.state.editing?o.createElement("div",{id:"sponsorTimesContainer"+this.idSuffix,className:"sponsorTimeDisplay"},o.createElement("span",{id:"nowButton0"+this.idSuffix,className:"sponsorNowButton",onClick:()=>this.setTimeToNow(0)},chrome.i18n.getMessage("bracketNow")),o.createElement("input",{id:"submittingTime0"+this.idSuffix,className:"sponsorTimeEdit sponsorTimeEditInput",ref:t,type:"text",value:this.state.sponsorTimeEdits[0],onChange:e=>{const t=this.state.sponsorTimeEdits;t[0]=e.target.value,c.getCategoryActionType(i.category)===a.CategoryActionType.POI&&(t[1]=e.target.value),this.setState({sponsorTimeEdits:t}),this.saveEditTimes()}}),c.getCategoryActionType(i.category)===a.CategoryActionType.Skippable?o.createElement("span",null,o.createElement("span",null," "+chrome.i18n.getMessage("to")+" "),o.createElement("input",{id:"submittingTime1"+this.idSuffix,className:"sponsorTimeEdit sponsorTimeEditInput",ref:t,type:"text",value:this.state.sponsorTimeEdits[1],onChange:e=>{const t=this.state.sponsorTimeEdits;t[1]=e.target.value,this.setState({sponsorTimeEdits:t}),this.saveEditTimes()}}),o.createElement("span",{id:"nowButton1"+this.idSuffix,className:"sponsorNowButton",onClick:()=>this.setTimeToNow(1)},chrome.i18n.getMessage("bracketNow")),o.createElement("span",{id:"endButton"+this.idSuffix,className:"sponsorNowButton",onClick:()=>this.setTimeToEnd()},chrome.i18n.getMessage("bracketEnd"))):""):o.createElement("div",{id:"sponsorTimesContainer"+this.idSuffix,className:"sponsorTimeDisplay",onClick:this.toggleEditTime.bind(this)},l.getFormattedTime(s[0],!0)+(isNaN(s[1])||c.getCategoryActionType(i.category)!==a.CategoryActionType.Skippable?"":" "+chrome.i18n.getMessage("to")+" "+l.getFormattedTime(s[1],!0))),o.createElement("div",{style:e},n,o.createElement("div",{style:{position:"relative"}},o.createElement("select",{id:"sponsorTimeCategories"+this.idSuffix,className:"sponsorTimeCategories",defaultValue:i.category,ref:this.categoryOptionRef,onChange:this.categorySelectionChange.bind(this)},this.getCategoryOptions()),o.createElement("a",{href:"https://wiki.sponsor.ajay.app/index.php/Segment_Categories",target:"_blank",rel:"noreferrer"},o.createElement("img",{id:"sponsorTimeCategoriesHelpButton"+this.idSuffix,className:"helpButton",src:chrome.extension.getURL("icons/help.svg"),title:chrome.i18n.getMessage("categoryGuidelines")}))),o.createElement("br",null),o.createElement("span",{id:"sponsorTimeDeleteButton"+this.idSuffix,className:"sponsorTimeEditButton",onClick:this.deleteTime.bind(this)},chrome.i18n.getMessage("delete")),isNaN(s[1])||c.getCategoryActionType(i.category)!==a.CategoryActionType.Skippable?"":o.createElement("span",{id:"sponsorTimePreviewButton"+this.idSuffix,className:"sponsorTimeEditButton",onClick:this.previewTime.bind(this)},chrome.i18n.getMessage("preview")),isNaN(s[1])?"":o.createElement("span",{id:"sponsorTimeInspectButton"+this.idSuffix,className:"sponsorTimeEditButton",onClick:this.inspectTime.bind(this)},chrome.i18n.getMessage("inspect")),isNaN(s[1])?"":o.createElement("span",{id:"sponsorTimeEditButton"+this.idSuffix,className:"sponsorTimeEditButton",onClick:this.toggleEditTime.bind(this)},this.state.editing?chrome.i18n.getMessage("save"):chrome.i18n.getMessage("edit")))}getCategoryOptions(){var e;const t=[o.createElement("option",{value:"chooseACategory",key:"chooseACategory"},chrome.i18n.getMessage("chooseACategory"))];for(const n of null!==(e=this.props.categoryList)&&void 0!==e?e:s.categoryList)t.push(o.createElement("option",{value:n,key:n},chrome.i18n.getMessage("category_"+n)));return t}categorySelectionChange(e){if("chooseACategory"!==e.target.value&&!i.default.config.categorySelections.some(t=>t.name===e.target.value)){const t=e.target.value;return e.target.value="chooseACategory",void(confirm(chrome.i18n.getMessage("enableThisCategoryFirst").replace("{0}",chrome.i18n.getMessage("category_"+t)))&&chrome.runtime.sendMessage({message:"openConfig",hash:t+"OptionsName"}))}c.getCategoryActionType(e.target.value)===a.CategoryActionType.POI&&(this.setTimeTo(1,null),this.props.contentContainer().updateEditButtonsOnPlayer()),this.saveEditTimes()}setTimeToNow(e){this.setTimeTo(e,this.props.contentContainer().getRealCurrentTime())}setTimeToEnd(){this.setTimeTo(1,this.props.contentContainer().v.duration)}setTimeTo(e,t){const n=this.props.contentContainer().sponsorTimesSubmitting[this.props.index];null===t&&(t=n.segment[0]),n.segment[e]=t,c.getCategoryActionType(n.category)===a.CategoryActionType.POI&&(n.segment[1]=t),this.setState({sponsorTimeEdits:this.getFormattedSponsorTimesEdits(n)},this.saveEditTimes)}toggleEditTime(){if(this.state.editing)this.setState({editing:!1}),this.saveEditTimes();else{const e=this.props.contentContainer().sponsorTimesSubmitting[this.props.index];this.setState({editing:!0,sponsorTimeEdits:this.getFormattedSponsorTimesEdits(e)})}}getFormattedSponsorTimesEdits(e){return[l.getFormattedTime(e.segment[0],!0),l.getFormattedTime(e.segment[1],!0)]}saveEditTimes(){const e=this.props.contentContainer().sponsorTimesSubmitting;if(this.state.editing){const t=l.getFormattedTimeToSeconds(this.state.sponsorTimeEdits[0]),n=l.getFormattedTimeToSeconds(this.state.sponsorTimeEdits[1]);null!==t&&null!==n&&(e[this.props.index].segment=[t,n])}e[this.props.index].category=this.categoryOptionRef.current.value,i.default.config.segmentTimes.set(this.props.contentContainer().sponsorVideoID,e),this.props.contentContainer().updatePreviewBar()}previewTime(){const e=this.props.contentContainer().sponsorTimesSubmitting[this.props.index].segment[0];this.props.contentContainer().previewTime(e-2)}inspectTime(){const e=this.props.contentContainer().sponsorTimesSubmitting[this.props.index].segment[0];this.props.contentContainer().previewTime(e+1e-4,!1)}deleteTime(){const e=this.props.contentContainer().sponsorTimesSubmitting,t=this.props.index,n=e[t].segment.length<2;e.splice(t,1),i.default.config.segmentTimes.set(this.props.contentContainer().sponsorVideoID,e),this.props.contentContainer().updatePreviewBar(),0==e.length?this.props.submissionNotice.cancel():this.props.submissionNotice.forceUpdate(),(0===e.length||n)&&this.props.contentContainer().updateEditButtonsOnPlayer()}configUpdate(){this.forceUpdate()}}t.default=u},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.openWarningChat=t.openChat=void 0;const i=n(0),s=new(n(2).default);function r(e){const t=document.createElement("div");t.classList.add("sbChatNotice"),t.style.zIndex="2000";const n=document.createElement("iframe");n.src="https://chat.sponsor.ajay.app/#"+s.objectToURI("",e,!1),t.appendChild(n);const o=document.createElement("img");o.classList.add("sbChatClose"),o.src=chrome.extension.getURL("icons/close.png"),o.addEventListener("click",()=>{t.remove(),o.remove()}),t.appendChild(o),s.findReferenceNode().prepend(t)}t.openChat=r,t.openWarningChat=function(e){return o(this,void 0,void 0,(function*(){const t=yield s.asyncRequestToServer("GET","/api/getUsername?userID="+i.default.config.userID),n=t.ok?JSON.parse(t.responseText).userName:"",o=yield s.getHash(i.default.config.userID);r({displayName:`${n||""}${n!==o?` | ${o}`:""}`,composerInitialValue:` Warning reason: ${e.match(/Warning reason: '(.+)'/)[1]}`,customDescription:chrome.i18n.getMessage("warningChatInfo")})}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkipButtonControlBar=void 0;const o=n(0),i=n(5);t.SkipButtonControlBar=class{constructor(e){this.showKeybindHint=!0,this.duration=0,this.skip=e.skip,this.container=document.createElement("div"),this.container.classList.add("skipButtonControlBarContainer"),this.container.classList.add("hidden"),this.skipIcon=document.createElement("img"),this.skipIcon.src=chrome.runtime.getURL("icons/skipIcon.svg"),this.skipIcon.classList.add("ytp-button"),this.skipIcon.id="sbSkipIconControlBarImage",this.textContainer=document.createElement("div"),this.container.appendChild(this.skipIcon),this.container.appendChild(this.textContainer),this.container.addEventListener("click",()=>this.toggleSkip()),this.container.addEventListener("mouseenter",()=>this.stopTimer()),this.container.addEventListener("mouseleave",()=>this.startTimer())}getElement(){return this.container}attachToPage(){const e=document.querySelector(".ytp-left-controls");this.chapterText=document.querySelector(".ytp-chapter-container"),e.contains(this.container)||e.insertBefore(this.container,this.chapterText)}enable(e,t){t&&(this.duration=t),this.segment=e,this.refreshText(),this.startTimer()}refreshText(){var e,t;this.segment&&(null===(t=null===(e=this.chapterText)||void 0===e?void 0:e.classList)||void 0===t||t.add("hidden"),this.container.classList.remove("hidden"),this.textContainer.innerText=i.getSkippingText([this.segment],!1)+(this.showKeybindHint?" ("+o.default.config.skipKeybind+")":""))}setShowKeybindHint(e){this.showKeybindHint=e,this.refreshText()}stopTimer(){this.timeout&&clearTimeout(this.timeout)}startTimer(){this.stopTimer(),this.timeout=setTimeout(()=>this.disable(),1e3*Math.max(o.default.config.skipNoticeDuration,this.duration))}disable(){var e,t;this.container.classList.add("hidden"),null===(t=null===(e=this.chapterText)||void 0===e?void 0:e.classList)||void 0===t||t.remove("hidden")}toggleSkip(){this.skip(this.segment),this.disable()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0;const o=n(1),i=n(6);t.Tooltip=class{constructor(e){var t;null!==(t=e.bottomOffset)&&void 0!==t||(e.bottomOffset="70px"),this.text=e.text,this.container=document.createElement("div"),this.container.id="sponsorTooltip"+e.text,this.container.style.display="relative",e.prependElement?e.referenceNode.insertBefore(this.container,e.prependElement):e.referenceNode.appendChild(this.container),e.timeout&&(this.timer=setTimeout(()=>this.close(),1e3*e.timeout)),i.render(o.createElement("div",{style:{bottom:e.bottomOffset},className:"sponsorBlockTooltip"},o.createElement("div",null,o.createElement("img",{className:"sponsorSkipLogo sponsorSkipObject",src:chrome.extension.getURL("icons/IconSponsorBlocker256px.png")}),o.createElement("span",{className:"sponsorSkipObject"},this.text+(e.link?". ":""),e.link?o.createElement("a",{style:{textDecoration:"underline"},target:"_blank",rel:"noopener noreferrer",href:e.link},chrome.i18n.getMessage("LearnMore")):null)),o.createElement("button",{className:"sponsorSkipObject sponsorSkipNoticeButton",style:{float:"right"},onClick:()=>this.close()},chrome.i18n.getMessage("GotIt"))),this.container)}close(){i.unmountComponentAtNode(this.container),this.container.remove(),this.timer&&clearTimeout(this.timer)}}}]);