class Content{constructor(){this.maxVolume=600,this.vizualizeContent=null,this.run(),this.updateVolume=this.updateVolume.bind(this)}run(){this.initListeners(),this.createHtml()}initListeners(){this.initMessageListeners()}initMessageListeners(){chrome.runtime.onMessage.addListener(b=>{switch(b.action){case"showGain":this.updateVolume(b.volume);break;default:}})}createHtml(){this.vizualizeContent||(this.vizualizeContent=$("\n                <div id=\"volume-booster-visusalizer\">\n                    <div class=\"sound\">\n                        <div class=\"sound-icon\"></div>\n                        <div class=\"sound-wave sound-wave_one\"></div>\n                        <div class=\"sound-wave sound-wave_two\"></div>\n                        <div class=\"sound-wave sound-wave_three\"></div>\n                    </div>\n                    <div class=\"segments-box\">\n                        <div data-range=\"1-20\" class=\"segment\"><span></span></div>\n                        <div data-range=\"21-40\" class=\"segment\"><span></span></div>\n                        <div data-range=\"41-60\" class=\"segment\"><span></span></div>\n                        <div data-range=\"61-80\" class=\"segment\"><span></span></div>\n                        <div data-range=\"81-100\" class=\"segment\"><span></span></div>\n                    </div>\n                </div>\n            "),this.vizualizeContent.appendTo("body"))}updateVolume(b){const e=+b,a=Number.isInteger(e);if(a){const b=parseInt(100*e/this.maxVolume);this.vizualizeContent.css({display:"flex",opacity:1}),clearInterval(this._fadeInterval),clearTimeout(this._fadeTimeout),this.updateSegments(b),this.vizualizeContent.find(".sound").toggleClass("sound-mute",1>b),this.hideVisualizer()}}updateSegments(e){this.vizualizeContent.find(".segment").each(function(){const f=$(this),a=$(this).find("span"),b=+f.data("range").split("-")[0],c=+f.data("range").split("-")[1];e>c?a.css("height","100%"):e>=b&&e<=c?a.css("height",`${100-100*(c-e)/20}%`):a.css("height","0")})}hideVisualizer(){this._fadeTimeout=setTimeout(()=>{this._fadeInterval=setInterval(()=>{this.vizualizeContent[0].style.opacity||(fadeTarget.style.opacity=1),0<this.vizualizeContent[0].style.opacity?this.vizualizeContent[0].style.opacity-=.01:(this.vizualizeContent.css("display","none"),clearInterval(this._fadeInterval))},10)},800)}}const content=new Content;