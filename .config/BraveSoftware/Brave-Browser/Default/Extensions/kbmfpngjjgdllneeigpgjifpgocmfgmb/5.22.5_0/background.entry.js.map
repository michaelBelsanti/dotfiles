{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/lodash-es/_root.js","webpack:///./node_modules/lodash-es/isArray.js","webpack:///./node_modules/lodash-es/isObject.js","webpack:///./node_modules/lodash-es/_assignValue.js","webpack:///./node_modules/lodash-es/_baseSet.js","webpack:///./node_modules/lodash-es/_basePickBy.js","webpack:///./node_modules/lodash-es/_basePick.js","webpack:///./node_modules/lodash-es/_isFlattenable.js","webpack:///./node_modules/lodash-es/_baseFlatten.js","webpack:///./node_modules/lodash-es/flatten.js","webpack:///./node_modules/lodash-es/_flatRest.js","webpack:///./node_modules/lodash-es/pick.js","webpack:///./node_modules/lodash-es/_copyObject.js","webpack:///./node_modules/lodash-es/_isIterateeCall.js","webpack:///./node_modules/lodash-es/_createAssigner.js","webpack:///./node_modules/lodash-es/_nativeKeysIn.js","webpack:///./node_modules/lodash-es/_baseKeysIn.js","webpack:///./node_modules/lodash-es/keysIn.js","webpack:///./node_modules/lodash-es/assignIn.js","webpack:///./lib/utils/dom.js","webpack:///./node_modules/lodash-es/last.js","webpack:///./node_modules/lodash-es/_parent.js","webpack:///./node_modules/lodash-es/_baseUnset.js","webpack:///./node_modules/lodash-es/_basePullAt.js","webpack:///./node_modules/lodash-es/remove.js","webpack:///./node_modules/lodash-es/now.js","webpack:///./node_modules/lodash-es/debounce.js","webpack:///./node_modules/lodash-es/_baseIndexOfWith.js","webpack:///./node_modules/lodash-es/_basePullAll.js","webpack:///./node_modules/lodash-es/pullAll.js","webpack:///./node_modules/lodash-es/pull.js","webpack:///./lib/utils/generator.js","webpack:///./lib/utils/async.js","webpack:///./node_modules/lodash-es/isObjectLike.js","webpack:///./node_modules/lodash-es/_Symbol.js","webpack:///./node_modules/lodash-es/_baseIsMatch.js","webpack:///./node_modules/lodash-es/_isStrictComparable.js","webpack:///./node_modules/lodash-es/_getMatchData.js","webpack:///./node_modules/lodash-es/_matchesStrictComparable.js","webpack:///./node_modules/lodash-es/_baseMatches.js","webpack:///./node_modules/lodash-es/get.js","webpack:///./node_modules/lodash-es/_baseMatchesProperty.js","webpack:///./node_modules/lodash-es/_basePropertyDeep.js","webpack:///./node_modules/lodash-es/property.js","webpack:///./node_modules/lodash-es/_baseIteratee.js","webpack:///./node_modules/lodash-es/_coreJsData.js","webpack:///./node_modules/lodash-es/_isMasked.js","webpack:///./node_modules/lodash-es/_baseIsNative.js","webpack:///./node_modules/lodash-es/_getValue.js","webpack:///./node_modules/lodash-es/_getNative.js","webpack:///./node_modules/lodash-es/_toKey.js","webpack:///./node_modules/lodash-es/_isIndex.js","webpack:///./node_modules/lodash-es/_getRawTag.js","webpack:///./node_modules/lodash-es/_objectToString.js","webpack:///./node_modules/lodash-es/_baseGetTag.js","webpack:///./node_modules/lodash-es/_arrayAggregator.js","webpack:///./node_modules/lodash-es/_createBaseEach.js","webpack:///./node_modules/lodash-es/_baseEach.js","webpack:///./node_modules/lodash-es/_baseAggregator.js","webpack:///./node_modules/lodash-es/_createAggregator.js","webpack:///./node_modules/lodash-es/partition.js","webpack:///./lib/utils/location.js","webpack:///./node_modules/lodash-es/isArrayLike.js","webpack:///./node_modules/lodash-es/_memoizeCapped.js","webpack:///./node_modules/lodash-es/_stringToPath.js","webpack:///./node_modules/lodash-es/_baseToString.js","webpack:///./node_modules/lodash-es/toString.js","webpack:///./node_modules/lodash-es/_castPath.js","webpack:///./lib/utils/flow.js","webpack:///./node_modules/lodash-es/_toSource.js","webpack:///./node_modules/lodash-es/identity.js","webpack:///./node_modules/lodash-es/isSymbol.js","webpack:///./node_modules/lodash-es/_baseGet.js","webpack:///./node_modules/lodash-es/eq.js","webpack:///./node_modules/lodash-es/_arrayMap.js","webpack:///./node_modules/lodash-es/_baseAssignValue.js","webpack:///./node_modules/lodash-es/_baseCreate.js","webpack:///./node_modules/lodash-es/_apply.js","webpack:///./node_modules/lodash-es/_listCacheClear.js","webpack:///./node_modules/lodash-es/_assocIndexOf.js","webpack:///./node_modules/lodash-es/_listCacheDelete.js","webpack:///./node_modules/lodash-es/_listCacheGet.js","webpack:///./node_modules/lodash-es/_listCacheHas.js","webpack:///./node_modules/lodash-es/_listCacheSet.js","webpack:///./node_modules/lodash-es/_ListCache.js","webpack:///./node_modules/lodash-es/_createBaseFor.js","webpack:///./node_modules/lodash-es/_baseFor.js","webpack:///./node_modules/lodash-es/_baseForOwn.js","webpack:///./node_modules/lodash-es/_Map.js","webpack:///./node_modules/lodash-es/_Set.js","webpack:///./node_modules/lodash-es/isBuffer.js","webpack:///./node_modules/lodash-es/_nativeCreate.js","webpack:///./node_modules/lodash-es/_hashClear.js","webpack:///./node_modules/lodash-es/_hashDelete.js","webpack:///./node_modules/lodash-es/_hashGet.js","webpack:///./node_modules/lodash-es/_hashHas.js","webpack:///./node_modules/lodash-es/_hashSet.js","webpack:///./node_modules/lodash-es/_Hash.js","webpack:///./node_modules/lodash-es/_mapCacheClear.js","webpack:///./node_modules/lodash-es/_isKeyable.js","webpack:///./node_modules/lodash-es/_getMapData.js","webpack:///./node_modules/lodash-es/_mapCacheDelete.js","webpack:///./node_modules/lodash-es/_mapCacheGet.js","webpack:///./node_modules/lodash-es/_mapCacheHas.js","webpack:///./node_modules/lodash-es/_mapCacheSet.js","webpack:///./node_modules/lodash-es/_MapCache.js","webpack:///./node_modules/lodash-es/_WeakMap.js","webpack:///./node_modules/lodash-es/_isKey.js","webpack:///./node_modules/lodash-es/isFunction.js","webpack:///./node_modules/lodash-es/isLength.js","webpack:///./node_modules/lodash-es/_setToArray.js","webpack:///./node_modules/lodash-es/_copyArray.js","webpack:///./node_modules/lodash-es/_baseRest.js","webpack:///./node_modules/lodash-es/_arraySome.js","webpack:///./node_modules/lodash-es/_equalArrays.js","webpack:///./node_modules/lodash-es/_Uint8Array.js","webpack:///./node_modules/lodash-es/_mapToArray.js","webpack:///./node_modules/lodash-es/_equalByTag.js","webpack:///./node_modules/lodash-es/_baseGetAllKeys.js","webpack:///./node_modules/lodash-es/stubArray.js","webpack:///./node_modules/lodash-es/_getSymbols.js","webpack:///./node_modules/lodash-es/_getAllKeys.js","webpack:///./node_modules/lodash-es/_equalObjects.js","webpack:///./node_modules/lodash-es/_DataView.js","webpack:///./node_modules/lodash-es/_Promise.js","webpack:///./node_modules/lodash-es/_getTag.js","webpack:///./node_modules/lodash-es/_baseIsEqualDeep.js","webpack:///./node_modules/lodash-es/_baseIsEqual.js","webpack:///./node_modules/lodash-es/_nativeKeys.js","webpack:///./node_modules/lodash-es/_baseKeys.js","webpack:///./node_modules/lodash-es/keys.js","webpack:///./node_modules/lodash-es/constant.js","webpack:///./node_modules/lodash-es/_baseSetToString.js","webpack:///./node_modules/lodash-es/_setToString.js","webpack:///./node_modules/lodash-es/_baseIsTypedArray.js","webpack:///./node_modules/lodash-es/isTypedArray.js","webpack:///./node_modules/lodash-es/_baseIsArguments.js","webpack:///./node_modules/lodash-es/isArguments.js","webpack:///./node_modules/lodash-es/_defineProperty.js","webpack:///./node_modules/lodash-es/_stackClear.js","webpack:///./node_modules/lodash-es/_stackDelete.js","webpack:///./node_modules/lodash-es/_stackGet.js","webpack:///./node_modules/lodash-es/_stackHas.js","webpack:///./node_modules/lodash-es/_stackSet.js","webpack:///./node_modules/lodash-es/_Stack.js","webpack:///./node_modules/lodash-es/_baseSlice.js","webpack:///./lib/utils/pagePhases.js","webpack:///./node_modules/lodash-es/_trimmedEndIndex.js","webpack:///./node_modules/lodash-es/_baseTrim.js","webpack:///./node_modules/lodash-es/toNumber.js","webpack:///./node_modules/lodash-es/toFinite.js","webpack:///./node_modules/lodash-es/toInteger.js","webpack:///./node_modules/lodash-es/_freeGlobal.js","webpack:///./node_modules/lodash-es/_baseUnary.js","webpack:///./node_modules/lodash-es/_cacheHas.js","webpack:///./node_modules/lodash-es/_arrayPush.js","webpack:///./node_modules/lodash-es/_arrayLikeKeys.js","webpack:///./node_modules/lodash-es/_baseTimes.js","webpack:///./node_modules/lodash-es/_isPrototype.js","webpack:///./node_modules/lodash-es/_overArg.js","webpack:///./node_modules/lodash-es/_arrayFilter.js","webpack:///./node_modules/lodash-es/_baseProperty.js","webpack:///./node_modules/lodash-es/noop.js","webpack:///./node_modules/lodash-es/_shortOut.js","webpack:///./node_modules/lodash-es/_arrayEach.js","webpack:///./node_modules/lodash-es/_arrayIncludes.js","webpack:///./node_modules/lodash-es/_overRest.js","webpack:///./lib/utils/time.js","webpack:///./lib/utils/array.js","webpack:///./node_modules/lodash-es/_baseFindIndex.js","webpack:///./node_modules/lodash-es/_baseIsNaN.js","webpack:///./node_modules/lodash-es/_strictIndexOf.js","webpack:///./node_modules/lodash-es/_baseIndexOf.js","webpack:///./node_modules/lodash-es/_setCacheAdd.js","webpack:///./node_modules/lodash-es/_setCacheHas.js","webpack:///./node_modules/lodash-es/_SetCache.js","webpack:///./node_modules/lodash-es/_baseHasIn.js","webpack:///./node_modules/lodash-es/_hasPath.js","webpack:///./node_modules/lodash-es/hasIn.js","webpack:///./node_modules/lodash-es/_nodeUtil.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./node_modules/lodash-es/memoize.js","webpack:///./node_modules/lodash-es/stubFalse.js","webpack:///./images/css-off.png","webpack:///./images/css-off-small.png","webpack:///./images/css-on.png","webpack:///./images/css-on-small.png","webpack:///./node_modules/fast-levenshtein/levenshtein.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/fastest-levenshtein/index.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./node_modules/lodash-es/fromPairs.js","webpack:///./lib/environment/utils/messaging.js","webpack:///./lib/environment/utils/api.js","webpack:///./lib/environment/background/messaging.js","webpack:///./lib/environment/background/ajax.js","webpack:///./lib/environment/background/auth.js","webpack:///./lib/environment/background/download.js","webpack:///./lib/environment/background/history.js","webpack:///./node_modules/lodash-es/mapValues.js","webpack:///./locales/locales/index.js","webpack:///./locales/index.js","webpack:///./lib/environment/background/i18n.js","webpack:///./lib/environment/background/loadScript.js","webpack:///./lib/environment/background/localePersistor.js","webpack:///./lib/environment/background/multicast.js","webpack:///./lib/environment/background/pageAction.js","webpack:///./lib/environment/background/permissions.js","webpack:///./lib/environment/background/session.js","webpack:///./lib/environment/background/storage.js","webpack:///./lib/environment/background/tabs.js","webpack:///./lib/utils/Cache.js","webpack:///./lib/environment/background/xhrCache.js","webpack:///./lib/environment/background/ajax.js?f9d8","webpack:///./node_modules/lodash-es/_arrayIncludesWith.js","webpack:///./node_modules/lodash-es/_createSet.js","webpack:///./node_modules/lodash-es/_baseUniq.js","webpack:///./node_modules/lodash-es/uniqBy.js","webpack:///./node_modules/lodash-es/mapKeys.js","webpack:///./node_modules/lodash-es/_baseWhile.js","webpack:///./node_modules/lodash-es/takeRightWhile.js","webpack:///./node_modules/lodash-es/isArrayLikeObject.js","webpack:///./node_modules/lodash-es/unzip.js","webpack:///./node_modules/lodash-es/unzipWith.js","webpack:///./node_modules/lodash-es/zipWith.js","webpack:///./lib/utils/html.js","webpack:///./lib/utils/string.js","webpack:///./lib/utils/user.js","webpack:///./lib/environment/foreground/context.js","webpack:///./lib/environment/foreground/messaging.js","webpack:///./lib/environment/foreground/privateBrowsing.js","webpack:///./lib/environment/foreground/history.js","webpack:///./lib/environment/foreground/xhrCache.js","webpack:///./lib/environment/foreground/ajax.js","webpack:///./lib/environment/foreground/download.js","webpack:///./lib/environment/foreground/id.js","webpack:///./lib/constants/localStorage.js","webpack:///./build/buildToken.js","webpack:///./lib/environment/foreground/i18n.js","webpack:///./lib/environment/foreground/loadScript.js","webpack:///./lib/environment/foreground/permissions.js","webpack:///./lib/environment/foreground/auth.js","webpack:///./lib/environment/foreground/multicast.js","webpack:///./lib/environment/foreground/tabs.js","webpack:///./lib/environment/foreground/pageAction.js","webpack:///./lib/environment/foreground/session.js","webpack:///./node_modules/lodash-es/_getPrototype.js","webpack:///./node_modules/lodash-es/transform.js","webpack:///./lib/utils/object.js","webpack:///./lib/environment/foreground/storage.js","webpack:///./lib/environment/index.js","webpack:///./lib/core/modules/storage.js","webpack:///./lib/core/module.js","webpack:///./lib/core/options/storage.js","webpack:///./node_modules/lodash-es/isEqual.js","webpack:///./lib/core/migrate/migrators.js","webpack:///./lib/core/migrate/migrate.js","webpack:///./lib/background.entry.js","webpack:///./lib/utils/Thing.js","webpack:///./lib/utils/watchers.js","webpack:///./node_modules/lodash-es/_metaMap.js","webpack:///./node_modules/lodash-es/_baseSetData.js","webpack:///./node_modules/lodash-es/_createCtor.js","webpack:///./node_modules/lodash-es/_createBind.js","webpack:///./node_modules/lodash-es/_composeArgs.js","webpack:///./node_modules/lodash-es/_composeArgsRight.js","webpack:///./node_modules/lodash-es/_countHolders.js","webpack:///./node_modules/lodash-es/_baseLodash.js","webpack:///./node_modules/lodash-es/_LazyWrapper.js","webpack:///./node_modules/lodash-es/_getData.js","webpack:///./node_modules/lodash-es/_realNames.js","webpack:///./node_modules/lodash-es/_getFuncName.js","webpack:///./node_modules/lodash-es/_LodashWrapper.js","webpack:///./node_modules/lodash-es/_wrapperClone.js","webpack:///./node_modules/lodash-es/wrapperLodash.js","webpack:///./node_modules/lodash-es/_isLaziable.js","webpack:///./node_modules/lodash-es/_setData.js","webpack:///./node_modules/lodash-es/_getWrapDetails.js","webpack:///./node_modules/lodash-es/_insertWrapDetails.js","webpack:///./node_modules/lodash-es/_updateWrapDetails.js","webpack:///./node_modules/lodash-es/_setWrapToString.js","webpack:///./node_modules/lodash-es/_createRecurry.js","webpack:///./node_modules/lodash-es/_getHolder.js","webpack:///./node_modules/lodash-es/_reorder.js","webpack:///./node_modules/lodash-es/_replaceHolders.js","webpack:///./node_modules/lodash-es/_createHybrid.js","webpack:///./node_modules/lodash-es/_createCurry.js","webpack:///./node_modules/lodash-es/_createPartial.js","webpack:///./node_modules/lodash-es/_mergeData.js","webpack:///./node_modules/lodash-es/_createWrap.js","webpack:///./node_modules/lodash-es/curryRight.js","webpack:///./node_modules/lodash-es/before.js","webpack:///./node_modules/lodash-es/once.js"],"names":["freeSelf","self","Object","root","freeGlobal","Function","isArray","Array","isObject","value","type","objectProto","prototype","hasOwnProperty","assignValue","object","key","objValue","call","eq","undefined","baseAssignValue","baseSet","path","customizer","castPath","index","length","nested","toKey","newValue","isIndex","basePickBy","paths","predicate","result","baseGet","basePick","hasIn","spreadableSymbol","Symbol","isConcatSpreadable","isFlattenable","isArguments","baseFlatten","array","depth","isStrict","arrayPush","flatten","flatRest","func","setToString","overRest","pick","copyObject","source","props","isNew","isIterateeCall","isArrayLike","createAssigner","assigner","baseRest","sources","guard","nativeKeysIn","push","baseKeysIn","isProto","isPrototype","keysIn","arrayLikeKeys","assignIn","waitForEvent","ele","events","Promise","race","map","event","resolve","addEventListener","fire","e","removeEventListener","waitForChild","selector","child","from","children","find","matches","observer","MutationObserver","mutations","mutation","node","addedNodes","nodeType","Node","ELEMENT_NODE","disconnect","downcast","HTMLElement","observe","childList","watchForChildren","callback","filter","watchForFutureChildren","waitForDescendant","querySelector","subtree","waitForDescendantChange","found","target","removedNodes","waitForAttach","parent","el","cancel","contains","reject","then","Error","waitForDetach","document","documentElement","watchForDescendants","ignoreChildrenIfAddedNodeMatches","querySelectorAll","watchForFutureDescendants","Set","add","waitForSelectorMatch","attributes","empty","lastChild","removeChild","click","obj","button","dispatchEvent","MouseEvent","bubbles","cancelable","detail","screenX","screenY","clientX","clientY","isProgrammaticEvent","getViewportSize","memoize","window","cache","clear","visualViewport","viewportSizedElement","createElement","style","width","height","position","body","appendChild","getBoundingClientRect","remove","elementInViewport","offsetParent","top","left","bottom","right","getViewportDimensions","headerOffset","getHeaderOffset","pageXOffset","pageYOffset","yOffset","getPercentageVisibleYAxis","rect","Math","max","min","padBottom","once","element","scrollTop","viewportHeight","currentPadding","clientHeight","paddingRequired","scrollHeight","append","recentScroll","scrollInvokationToken","scrollToElement","to","scrollStyle","restrictDirectionTo","direction","selectedDirection","anchor","waitTillVisible","_scrollInvokationToken","requestAnimationFrame","arguments","console","error","diff","scrollBy","viewport","compensateHeader","scrollY","fromTop","buffer","newScrollY","viewportDirection","scollDirection","scrollTo","headerIds","fullWidth","partialWidth","_addHeaderId","elementId","includePartialWidthHeaders","headers","id","getElementById","reduce","a","b","getD2xBodyOffset","offsetTop","addCSS","css","addStyle","textContent","head","isLastNodeInDOM","_last","nextSibling","parentNode","preventCloning","attribute","Date","now","elements","WeakSet","watchForThings","require","thing","entry","has","immediate","setAttribute","last","baseSlice","baseUnset","arrayProto","splice","basePullAt","indexes","lastIndex","previous","baseIteratee","FUNC_ERROR_TEXT","nativeMax","nativeMin","debounce","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","toNumber","invokeFunc","time","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","clearTimeout","flush","debounced","isInvoking","baseIndexOfWith","fromIndex","comparator","basePullAll","values","iteratee","indexOf","baseIndexOf","seen","copyArray","arrayMap","baseUnary","computed","pullAll","pull","range","start","end","i","zip","iterables","generators","it","iterator","results","gen","next","some","r","done","waitFor","interval","repeat","val","forEachChunked","queues","run","frameThrottle","performance","generator","return","curryRight","collection","iterable","batch","size","delay","flushBeforeUnload","invoke","batchAccumulator","entries","promises","addPromise","startNewBatch","timeout","throttle","lastPromise","currentBatch","always","promise","fastAsync","arg","throwing","throw","err","Reflect","asyncFlow","firstFn","fns","accum","fn","reifyPromise","x","get","keyedMutex","keyResolver","Map","tail","set","delete","mutex","queue","frameDebounce","remaining","update","res","rej","throttleQueuePositionReset","queued","idleThrottle","requestIdleCallback","isObjectLike","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","baseIsMatch","matchData","noCustomizer","data","srcValue","stack","Stack","baseIsEqual","isStrictComparable","getMatchData","keys","matchesStrictComparable","baseMatches","defaultValue","baseMatchesProperty","isKey","basePropertyDeep","property","baseProperty","identity","coreJsData","maskSrcKey","uid","exec","IE_PROTO","isMasked","reRegExpChar","reIsHostCtor","funcProto","funcToString","toString","reIsNative","RegExp","replace","baseIsNative","pattern","isFunction","test","toSource","getValue","getNative","INFINITY","isSymbol","MAX_SAFE_INTEGER","reIsUint","nativeObjectToString","symToStringTag","toStringTag","getRawTag","isOwn","tag","unmasked","objectToString","nullTag","undefinedTag","baseGetTag","arrayAggregator","setter","accumulator","createBaseEach","eachFunc","fromRight","baseEach","baseForOwn","baseAggregator","createAggregator","initializer","partition","matchesPageLocation","includes","excludes","includeStrings","includeRegExps","excludeStrings","excludeRegExps","isPageType","isAppType","matchesPageRegex","regexes","frontpage","comments","commentsLinklist","inbox","profile","profile2x","profileCommentsPage","submit","prefs","account","wiki","stylesheet","search","commentPermalink","duplicates","subreddit","subredditAbout","modqueue","multireddit","domain","composeMessage","liveThread","execRegexes","match","appType","hasAttribute","getAttribute","types","thisApp","appPageTypes","r2","default","pageTypes","d2x","pageType","spec","location","pathname","thisPage","regexps","regex","currentSubreddit","isCurrentSubreddit","subreddits","sub","toLowerCase","v","currentMultireddit","isCurrentMultireddit","multireddits","multi","currentDomain","currentUserProfile","fullLocation","slice","join","COMMENT_CODE_REGEX","isCommentCode","link","href","emptyText","isEmptyLink","startsWith","inQuarantinedSubreddit","classList","isLength","MAX_MEMOIZE_SIZE","memoizeCapped","rePropName","reEscapeChar","stringToPath","string","charCodeAt","number","quote","subString","symbolProto","symbolToString","baseToString","ty","symbolTag","other","defineProperty","objectCreate","create","baseCreate","proto","listCacheClear","__data__","assocIndexOf","listCacheDelete","pop","listCacheGet","listCacheHas","listCacheSet","ListCache","createBaseFor","keysFunc","baseFor","freeExports","exports","freeModule","module","moduleExports","Buffer","nativeIsBuffer","isBuffer","stubFalse","nativeCreate","hashClear","hashDelete","HASH_UNDEFINED","hashGet","hashHas","hashSet","Hash","mapCacheClear","isKeyable","getMapData","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","WeakMap","reIsDeepProp","reIsPlainProp","asyncTag","funcTag","genTag","proxyTag","setToArray","forEach","arraySome","equalArrays","bitmask","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","SetCache","arrValue","othValue","compared","othIndex","cacheHas","Uint8Array","mapToArray","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","arrayBufferTag","dataViewTag","symbolValueOf","valueOf","equalByTag","byteLength","byteOffset","name","message","convert","stacked","baseGetAllKeys","symbolsFunc","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","getSymbols","arrayFilter","symbol","getAllKeys","equalObjects","objProps","objLength","othProps","objStacked","skipCtor","objCtor","constructor","othCtor","DataView","objectTag","promiseTag","weakMapTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","Ctor","ctorString","argsTag","arrayTag","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","isTypedArray","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","nativeKeys","overArg","baseKeys","constant","baseSetToString","shortOut","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","nodeIsTypedArray","nodeUtil","baseIsArguments","stackClear","stackDelete","stackGet","stackHas","LARGE_ARRAY_SIZE","stackSet","pairs","bodyStart","contentStart","contentLoaded","readyState","loadComplete","reWhitespace","trimmedEndIndex","charAt","reTrimStart","baseTrim","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","isBinary","MAX_INTEGER","toFinite","sign","toInteger","remainder","global","offset","inherited","isArr","isArg","isBuff","isType","skipIndexes","baseTimes","String","n","transform","resIndex","noop","HOT_COUNT","HOT_SPAN","nativeNow","count","lastCalled","stamp","arrayEach","arrayIncludes","otherArgs","MINUTE","HOUR","DAY","WEEK","fromSecondsToTime","timeInSeconds","minutes","floor","hours","unshift","part","padStart","forEachSeq","asyncFilter","shouldKeep","all","asyncReduce","initialValue","asyncFind","concurrentFold","baseCase","onResolve","onReject","asyncSome","asyncEvery","filterMap","mapped","baseFindIndex","baseIsNaN","strictIndexOf","setCacheAdd","setCacheHas","baseHasIn","hasPath","hasFunc","freeProcess","process","binding","originalModule","webpackPolyfill","enumerable","l","resolver","memoized","Cache","collator","Intl","Collator","sensitivity","log","levenshtein","prevRow","str2Char","Levenshtein","str1","str2","useCollator","str1Len","str2Len","curCol","nextCol","j","tmp","strCmp","compare","fromCharCode","distance","define","postMessage","importScripts","deprecate","peq","Uint32Array","myers_32","m","lst","pv","mv","sc","xv","myers_x","mhc","phc","hsize","ceil","vsize","score","k","pb","mb","xh","ph","mh","closest","str","arr","min_distance","Infinity","min_index","dist","fromPairs","pair","MessageHandlerError","createMessageHandler","_sendMessage","errorOnUnrecognizedTypes","listeners","_handleMessage","sendResponse","context","listener","response","sendMessage","newData","addListener","apiToPromise","chrome","runtime","lastError","tabs","tabId","onMessage","sender","method","url","credentials","rawResponse","fetch","ok","status","text","clientId","scope","interactive","redirectUri","URL","searchParams","emulateAuthFlowInNewWindow","emulateAuthFlowInBackground","windows","updateListener","updates","stopListening","removeListener","onUpdated","onRemoved","headersListener","redirectUrl","webRequest","onBeforeRedirect","urls","filename","tab","incognito","downloads","download","history","addUrl","visits","getVisits","mapValues","de","en","en_lolcat","en_pirate","en_CA","en_GB","es","es_419","he","nl_NL","pl","pt","pt_BR","pt_PT","redditLocaleToTransifexLocale","redditLocale","normalized","inx","toUpperCase","getLocaleDictionary","localeName","transifexLocale","mergedLocales","locales","locale","frameId","executeScript","file","runAt","lastRedditLocale","navigator","language","crossContext","CONTEXT_KEY","redditTabs","query","nonSelfTabsInSameContext","pageAction","onClicked","operation","state","show","setIcon","cssOnSmall","cssOffSmall","cssOn","cssOff","setTitle","title","hide","handleMessage","permissions","origins","request","catch","makePromptWindow","origin","JSON","stringify","screen","parse","session","__set","items","storage","local","_set","__get","_get","oldValue","storedValue","focusIndex","active","openerTabId","LRUCache","capacity","maxAge","createTime","hitTime","sort","arrayIncludesWith","createSet","baseUniq","isCommon","outer","seenIndex","uniqBy","mapKeys","baseWhile","isDrop","takeRightWhile","isArrayLikeObject","unzip","group","unzipWith","zipWith","arrays","escapeLookups","escapeHTML","stringTagFunction","valueTransform","strings","s","encode","encodeURIComponent","escape","safe","__safe__","MAX_DISTANCE_RATIO","areSimilar","regexRegex","htmlTagFunction","html","markup","template","innerHTML","childElementCount","firstElementChild","_html","isLoggedIn","loggedInUser","documentLoggedInUser","findFirstTextNode","childNodes","concat","username","isModeratorAnywhere","loggedInUserHash","hashEle","HTMLInputElement","userInfo","loggedInUserInfo","modhash","ajax","usernameRE","usernameSelector","getUsernameFromLink","HTMLAnchorElement","endsWith","split","getUserInfo","cacheFor","userHash","protocol","hash","retrieveFromParent","assign","isPrivateBrowsing","extension","inIncognitoContext","addURLToHistory","isURLVisited","check","delete_","FetchError","sameOrigin","buildRequestParams","cached","XhrCache","processResponse","invalidate","siteOrigin","requestURL","sameSite","hostname","URLSearchParams","getExtensionId","getURL","getOptionsURL","isOptionsPage","CACHED_LANG_KEY","CACHED_MESSAGES_KEY","CACHED_MESSAGES_TOKEN_KEY","REDDIT_LANGUAGES","SPECIAL_LANGUAGES","isValidLocale","localeString","toLocaleString","getRedditLocale","messages","_loadI18n","localStorage","getItem","buildToken","setItem","removeItem","i18n","messageName","substitutions","loadScript","filterPerms","perms","p","granted","launchAuthFlow","warnUserInteraction","Permissions","resAuth","responseUrl","token","callbacks","multicast","localOnly","openNewTab","focus","openNewTabs","clickListeners","onClick","getPrototype","getPrototypeOf","isArrLike","extendDeep","_delete","_clear","withLockOn","getAll","getMultiple","defaults","setMultiple","valueMap","compareAndSet","patch","extended","patchShallow","deletePaths","stored","deleteMultiple","sentinel","random","Wrapper","def","_key","_default","deletePath","wrap","keyGenerator","PrefixWrapper","prefix","keyMapper","batching","_prefix","_keyMapper","getMultipleNullable","_keyGen","getNullable","everything","acc","rawValues","wrapPrefix","destructiveKeyMapper","BlobWrapper","rootKey","_rootKey","wrapBlob","Storage","setEnabled","moduleId","enable","Module","moduleID","moduleName","category","description","descriptionRaw","keywords","bodyClass","include","exclude","shouldRun","onToggle","onSaveSettings","hidden","disabledByDefault","alwaysEnabled","onInit","beforeLoad","go","afterLoad","requiredPermissions","getModuleId","opaqueId","loadRaw","optionKey","option","isEqual","updateOption","optionName","formerDefaultValue","valueOrFunction","Options","optionMatchesFormerDefaultValue","updateValue","forceUpdateOption","moveOption","oldModuleID","oldOptionName","newModuleID","newOptionName","moveStorageToOption","oldKey","migrations","versionNumber","Migrators","macroVersion","previewOptions","commentingAs","keyboardShortcuts","subredditAutocomplete","macros","macro","storedComments","newFormat","storedComment","urlSplit","thisID","userTags","updateTagStorageCaseInsensitive","substr","tags","usernames","lower","destination","votes","color","ignore","notificationsOptions","sticky","keyNavOptions","fg","focusFGColorNight","bg","focusBGColorNight","backgroundColor","fgCalculated","bgCalculated","updateFadeSpeed","isNaN","toFixed","rows","modId","notificationId","cacheKeyParts","sectionLinks","row","hideFloatingPauseButton","every","shouldHideTagline","filteredRows","notificationTypes","Modules","remappedTags","remappedEntries","launchFromMenu","hiddenThings","page","collapsedThings","updateTime","subscriptions","subscriptionDate","votesUp","votesDown","deleteProperty","ignored","selectedEntry","convertPatt","patt","f","visible","filters","criterion","customFilters","of","traverseAndUpdate","customFiltersP","customFiltersC","ondemand","opts","ignoredUsers","migrateFilters","effects","sideEffects","lastUsed","migrateRepair","allHidden","hardIgnoreOption","hardIgnore","usersMatchAction","instances","instance","firstRunStorage","versions","localeCompare","numerical","_migrationsToRun","getMigrationsToRun","migrate","currentMigration","lastMigratedVersion","getLastMigratedVersion","RESOptionsVersion","warn","elementMap","things","SECRET_TOKEN","Thing","doc","thingElements","checkedFrom","visibleThingElements","visibleThings","thingElement","thingSelector","entrySelector","tasks","completed","byId","refreshPartialVisibility","toggle","isHiddenByFilter","_p","parentElement","runTasks","runSurroundingTasks","margin","idx","isVisible","setHideFilter","isComment","getParents","setFilterReasons","old","prepend","getDirectionOf","compareDocumentPosition","DOCUMENT_POSITION_FOLLOWING","getThreadTop","current","parents","level","getNext","excludeMoreChildren","_target","getNextSibling","getClosest","getClosestVisible","isMessage","isSubreddit","isPost","isLinkPost","isSelfPost","isTopLevelComment","getTitle","getTitleElement","getTitleUrl","getPostLink","getPostUrl","dataset","getTextBody","getCommentsLink","getCommentPermalink","getHideElement","getButtons","getNumberOfChildren","numChildrenElem","_parseScore","scoreEle","getScore","_getActiveScoreElement","getAllScoreElements","toScoreTuple","getAuthor","getAuthorElement","getAuthorUrl","author","getSubreddit","getSubredditLink","getPostDomain","getPostDomainLink","getPostDomainText","getPostDomainUrl","getCommentCount","getCommentCountElement","getPostThumbnailUrl","thumbnail","getPostThumbnailElement","src","getPostFlairText","getPostFlairElement","getUserFlairText","getUserFlairElement","getCrosspostBadgeElement","getUpvoteButton","_getVoteButton","getDownvoteButton","previousSibling","tagName","getTimestamp","getTimestampElement","getPostEditTimestamp","getPostEditTimestampElement","getFullname","getUserattrsElement","getRank","rank","getRankElement","getTaglineElement","getCommentCollapseToggleElement","setCommentCollapse","reason","openOnlyWhenSameReason","isCollapsed","removeAttribute","getPostTime","getPostTimeElement","isNSFW","isSpoiler","isCrosspost","isLocked","isDeleted","partialAsFiltered","isContentVisible","isSelected","isUpvoted","isDownvoted","isUnvoted","elementWatchers","selfText","thingWatchers","comment","post","runCallback","addCallback","actingOnElement","task","registerElement","registered","dupeSet","registerThing","existing","thingWatcherCallbacks","watchForElements","registerPage","HIDE_FOLLOWING_CLASS","cleanHideClasses","getElementsByClassName","r2WatcherContentStart","initialProcessSize","availHeight","devicePixelRatio","container","setInterval","filterTask","nextCheck","Boolean","io","IntersectionObserver","isIntersecting","unobserve","rootMargin","getReadyThingElements","previousElementSibling","r2WatcherContentLoaded","commentarea","watchList","metaMap","baseSetData","createCtor","thisBinding","WRAP_BIND_FLAG","createBind","wrapper","composeArgs","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","composeArgsRight","holdersIndex","rightIndex","rightLength","countHolders","placeholder","baseLodash","MAX_ARRAY_LENGTH","LazyWrapper","__wrapped__","__actions__","__dir__","__filtered__","__iteratees__","__takeCount__","__views__","getData","realNames","getFuncName","otherFunc","LodashWrapper","chainAll","__chain__","__index__","__values__","wrapperClone","clone","lodash","isLaziable","funcName","setData","reWrapDetails","reSplitDetails","getWrapDetails","reWrapComment","insertWrapDetails","details","WRAP_BIND_KEY_FLAG","WRAP_CURRY_FLAG","WRAP_CURRY_RIGHT_FLAG","WRAP_PARTIAL_FLAG","WRAP_PARTIAL_RIGHT_FLAG","WRAP_ARY_FLAG","WRAP_REARG_FLAG","WRAP_FLIP_FLAG","wrapFlags","updateWrapDetails","setWrapToString","reference","WRAP_CURRY_BOUND_FLAG","createRecurry","wrapFunc","argPos","ary","arity","isCurry","newHolders","newHoldersRight","newPartials","newPartialsRight","getHolder","reorder","oldArray","PLACEHOLDER","replaceHolders","createHybrid","partialsRight","holdersRight","isBindKey","holdersCount","reverse","createCurry","createPartial","mergeData","srcBitmask","newBitmask","isCombo","createWrap","before"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFA;AAGA,GAAIA,SAAQ,CAAG,MAAOC,KAAP,EAAe,QAAf,EAA2BA,IAA3B,EAAmCA,IAAI,CAACC,MAAL,GAAgBA,MAAnD,EAA6DD,IAA5E,CAGA,GAAIE,KAAI,CAAGC,8DAAU,EAAIJ,QAAd,EAA0BK,QAAQ,CAAC,aAAD,CAAR,EAArC,CAEeF,6DAAf,E;;;;;;;ACeA,GAAIG,QAAO,CAAGC,KAAK,CAACD,OAApB,CAEeA,gEAAf,E;;;;;;;ACAA,QAASE,SAAT,CAAkBC,KAAlB,CAAyB,CACvB,GAAIC,KAAI,CAAG,MAAOD,MAAlB,CACA,MAAOA,MAAK,EAAI,IAAT,GAAkBC,IAAI,EAAI,QAAR,EAAoBA,IAAI,EAAI,UAA9C,CAAP,CACD,CAEcF,iEAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BA,GAAIG,YAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,4BAAc,CAAGF,WAAW,CAACE,cAAjC,CAYA,QAASC,YAAT,CAAqBC,MAArB,CAA6BC,GAA7B,CAAkCP,KAAlC,CAAyC,CACvC,GAAIQ,SAAQ,CAAGF,MAAM,CAACC,GAAD,CAArB,CACA,GAAI,EAAEH,2BAAc,CAACK,IAAf,CAAoBH,MAApB,CAA4BC,GAA5B,GAAoCG,6BAAE,CAACF,QAAD,CAAWR,KAAX,CAAxC,GACCA,KAAK,GAAKW,SAAV,EAAuB,EAAEJ,GAAG,GAAID,OAAT,CAD5B,CAC+C,CAC7CM,2CAAe,CAACN,MAAD,CAASC,GAAT,CAAcP,KAAd,CAAf,CACD,CACF,CAEcK,4DAAf,E;;;;;;;;;;;;;;ACXA,QAASQ,QAAT,CAAiBP,MAAjB,CAAyBQ,IAAzB,CAA+Bd,KAA/B,CAAsCe,UAAtC,CAAkD,CAChD,GAAI,CAAChB,mCAAQ,CAACO,MAAD,CAAb,CAAuB,CACrB,MAAOA,OAAP,CACD,CACDQ,IAAI,CAAGE,oCAAQ,CAACF,IAAD,CAAOR,MAAP,CAAf,CAEA,GAAIW,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGJ,IAAI,CAACI,MADlB,CAGIC,MAAM,CAAGb,MAHb,CAKA,MAAOa,MAAM,EAAI,IAAV,EAAkB,EAAEF,KAAF,CAAUC,MAAnC,CAA2C,CACzC,GAAIX,IAAG,CAAGa,iCAAK,CAACN,IAAI,CAACG,KAAD,CAAL,CAAf,CACII,QAAQ,CAAGrB,KADf,CAGA,GAAIO,GAAG,GAAK,WAAR,EAAuBA,GAAG,GAAK,aAA/B,EAAgDA,GAAG,GAAK,WAA5D,CAAyE,CACvE,MAAOD,OAAP,CACD,CAED,GAAIW,KAAK,EAXKC,MAAM,CAAG,CAWvB,CAAwB,CACtB,GAAIV,SAAQ,CAAGW,MAAM,CAACZ,GAAD,CAArB,CACAc,QAAQ,CAAGN,UAAU,CAAGA,UAAU,CAACP,QAAD,CAAWD,GAAX,CAAgBY,MAAhB,CAAb,CAAuCR,SAA5D,CACA,GAAIU,QAAQ,GAAKV,SAAjB,CAA4B,CAC1BU,QAAQ,CAAGtB,mCAAQ,CAACS,QAAD,CAAR,CACPA,QADO,CAENc,mCAAO,CAACR,IAAI,CAACG,KAAK,CAAG,CAAT,CAAL,CAAP,CAA2B,EAA3B,CAAgC,EAFrC,CAGD,CACF,CACDZ,YAAW,CAACc,MAAD,CAASZ,GAAT,CAAcc,QAAd,CAAX,CACAF,MAAM,CAAGA,MAAM,CAACZ,GAAD,CAAf,CACD,CACD,MAAOD,OAAP,CACD,CAEcO,oDAAf,E;;ACrCA,QAASU,WAAT,CAAoBjB,MAApB,CAA4BkB,KAA5B,CAAmCC,SAAnC,CAA8C,CAC5C,GAAIR,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGM,KAAK,CAACN,MADnB,CAEIQ,MAAM,CAAG,EAFb,CAIA,MAAO,EAAET,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIJ,KAAI,CAAGU,KAAK,CAACP,KAAD,CAAhB,CACIjB,KAAK,CAAG2B,mCAAO,CAACrB,MAAD,CAASQ,IAAT,CADnB,CAGA,GAAIW,SAAS,CAACzB,KAAD,CAAQc,IAAR,CAAb,CAA4B,CAC1BD,QAAO,CAACa,MAAD,CAASV,oCAAQ,CAACF,IAAD,CAAOR,MAAP,CAAjB,CAAiCN,KAAjC,CAAP,CACD,CACF,CACD,MAAO0B,OAAP,CACD,CAEcH,0DAAf,E;;;;;ACjBA,QAASK,SAAT,CAAkBtB,MAAlB,CAA0BkB,KAA1B,CAAiC,CAC/B,MAAOD,YAAU,CAACjB,MAAD,CAASkB,KAAT,CAAgB,SAASxB,KAAT,CAAgBc,IAAhB,CAAsB,CACrD,MAAOe,iCAAK,CAACvB,MAAD,CAASQ,IAAT,CAAZ,CACD,CAFgB,CAAjB,CAGD,CAEcc,sDAAf,E;;;;;;;;;;;;;;ACbA,GAAIE,iBAAgB,CAAGC,0BAAM,CAAGA,0BAAM,CAACC,kBAAV,CAA+BrB,SAA5D,CASA,QAASsB,cAAT,CAAuBjC,KAAvB,CAA8B,CAC5B,MAAOH,mCAAO,CAACG,KAAD,CAAP,EAAkBkC,sCAAW,CAAClC,KAAD,CAA7B,EACL,CAAC,EAAE8B,gBAAgB,EAAI9B,KAApB,EAA6BA,KAAK,CAAC8B,gBAAD,CAApC,CADH,CAED,CAEcG,gEAAf,E;;ACLA,QAASE,YAAT,CAAqBC,KAArB,CAA4BC,KAA5B,CAAmCZ,SAAnC,CAA8Ca,QAA9C,CAAwDZ,MAAxD,CAAgE,CAC9D,GAAIT,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGkB,KAAK,CAAClB,MADnB,CAGAO,SAAS,GAAKA,SAAS,CAAGQ,cAAjB,CAAT,CACAP,MAAM,GAAKA,MAAM,CAAG,EAAd,CAAN,CAEA,MAAO,EAAET,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIlB,MAAK,CAAGoC,KAAK,CAACnB,KAAD,CAAjB,CACA,GAAIoB,KAAK,CAAG,CAAR,EAAaZ,SAAS,CAACzB,KAAD,CAA1B,CAAmC,CACjC,GAAIqC,KAAK,CAAG,CAAZ,CAAe,CAEbF,WAAW,CAACnC,KAAD,CAAQqC,KAAK,CAAG,CAAhB,CAAmBZ,SAAnB,CAA8Ba,QAA9B,CAAwCZ,MAAxC,CAAX,CACD,CAHD,IAGO,CACLa,qCAAS,CAACb,MAAD,CAAS1B,KAAT,CAAT,CACD,CACF,CAPD,IAOO,IAAI,CAACsC,QAAL,CAAe,CACpBZ,MAAM,CAACA,MAAM,CAACR,MAAR,CAAN,CAAwBlB,KAAxB,CACD,CACF,CACD,MAAO0B,OAAP,CACD,CAEcS,4DAAf,E;;ACrBA,QAASK,QAAT,CAAiBJ,KAAjB,CAAwB,CACtB,GAAIlB,OAAM,CAAGkB,KAAK,EAAI,IAAT,CAAgB,CAAhB,CAAoBA,KAAK,CAAClB,MAAvC,CACA,MAAOA,OAAM,CAAGiB,YAAW,CAACC,KAAD,CAAQ,CAAR,CAAd,CAA2B,EAAxC,CACD,CAEcI,6DAAf,E;;;;;;;;ACVA,QAASC,SAAT,CAAkBC,IAAlB,CAAwB,CACtB,MAAOC,wCAAW,CAACC,oCAAQ,CAACF,IAAD,CAAO/B,SAAP,CAAkB6B,iBAAlB,CAAT,CAAqCE,IAAI,CAAG,EAA5C,CAAlB,CACD,CAEcD,sDAAf,E;;ACKA,GAAII,KAAI,CAAGJ,SAAQ,CAAC,SAASnC,MAAT,CAAiBkB,KAAjB,CAAwB,CAC1C,MAAOlB,OAAM,EAAI,IAAV,CAAiB,EAAjB,CAAsBsB,SAAQ,CAACtB,MAAD,CAASkB,KAAT,CAArC,CACD,CAFkB,CAAnB,CAIeqB,uDAAf,E;;;;;ACXA,QAASC,WAAT,CAAoBC,MAApB,CAA4BC,KAA5B,CAAmC1C,MAAnC,CAA2CS,UAA3C,CAAuD,CACrD,GAAIkC,MAAK,CAAG,CAAC3C,MAAb,CACAA,MAAM,GAAKA,MAAM,CAAG,EAAd,CAAN,CAEA,GAAIW,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAG8B,KAAK,CAAC9B,MADnB,CAGA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIX,IAAG,CAAGyC,KAAK,CAAC/B,KAAD,CAAf,CAEA,GAAII,SAAQ,CAAGN,UAAU,CACrBA,UAAU,CAACT,MAAM,CAACC,GAAD,CAAP,CAAcwC,MAAM,CAACxC,GAAD,CAApB,CAA2BA,GAA3B,CAAgCD,MAAhC,CAAwCyC,MAAxC,CADW,CAErBpC,SAFJ,CAIA,GAAIU,QAAQ,GAAKV,SAAjB,CAA4B,CAC1BU,QAAQ,CAAG0B,MAAM,CAACxC,GAAD,CAAjB,CACD,CACD,GAAI0C,KAAJ,CAAW,CACTrC,2CAAe,CAACN,MAAD,CAASC,GAAT,CAAcc,QAAd,CAAf,CACD,CAFD,IAEO,CACLhB,YAAW,CAACC,MAAD,CAASC,GAAT,CAAcc,QAAd,CAAX,CACD,CACF,CACD,MAAOf,OAAP,CACD,CAEcwC,0DAAf,E;;;;;;;;ACxBA,QAASI,eAAT,CAAwBlD,KAAxB,CAA+BiB,KAA/B,CAAsCX,MAAtC,CAA8C,CAC5C,GAAI,CAACP,mCAAQ,CAACO,MAAD,CAAb,CAAuB,CACrB,MAAO,MAAP,CACD,CACD,GAAIL,KAAI,CAAG,MAAOgB,MAAlB,CACA,GAAIhB,IAAI,EAAI,QAAR,CACKkD,sCAAW,CAAC7C,MAAD,CAAX,EAAuBgB,mCAAO,CAACL,KAAD,CAAQX,MAAM,CAACY,MAAf,CADnC,CAEKjB,IAAI,EAAI,QAAR,EAAoBgB,KAAK,GAAIX,OAFtC,CAGM,CACJ,MAAOI,8BAAE,CAACJ,MAAM,CAACW,KAAD,CAAP,CAAgBjB,KAAhB,CAAT,CACD,CACD,MAAO,MAAP,CACD,CAEckD,kEAAf,E;;ACnBA,QAASE,eAAT,CAAwBC,QAAxB,CAAkC,CAChC,MAAOC,qCAAQ,CAAC,SAAShD,MAAT,CAAiBiD,OAAjB,CAA0B,CACxC,GAAItC,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGqC,OAAO,CAACrC,MADrB,CAEIH,UAAU,CAAGG,MAAM,CAAG,CAAT,CAAaqC,OAAO,CAACrC,MAAM,CAAG,CAAV,CAApB,CAAmCP,SAFpD,CAGI6C,KAAK,CAAGtC,MAAM,CAAG,CAAT,CAAaqC,OAAO,CAAC,CAAD,CAApB,CAA0B5C,SAHtC,CAKAI,UAAU,CAAIsC,QAAQ,CAACnC,MAAT,CAAkB,CAAlB,EAAuB,MAAOH,WAAP,EAAqB,UAA7C,EACRG,MAAM,GAAIH,UADF,EAETJ,SAFJ,CAIA,GAAI6C,KAAK,EAAIN,eAAc,CAACK,OAAO,CAAC,CAAD,CAAR,CAAaA,OAAO,CAAC,CAAD,CAApB,CAAyBC,KAAzB,CAA3B,CAA4D,CAC1DzC,UAAU,CAAGG,MAAM,CAAG,CAAT,CAAaP,SAAb,CAAyBI,UAAtC,CACAG,MAAM,CAAG,CAAT,CACD,CACDZ,MAAM,CAAGb,MAAM,CAACa,MAAD,CAAf,CACA,MAAO,EAAEW,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAI6B,OAAM,CAAGQ,OAAO,CAACtC,KAAD,CAApB,CACA,GAAI8B,MAAJ,CAAY,CACVM,QAAQ,CAAC/C,MAAD,CAASyC,MAAT,CAAiB9B,KAAjB,CAAwBF,UAAxB,CAAR,CACD,CACF,CACD,MAAOT,OAAP,CACD,CAtBc,CAAf,CAuBD,CAEc8C,kEAAf,E;;;;;;;;AC3BA,QAASK,aAAT,CAAsBnD,MAAtB,CAA8B,CAC5B,GAAIoB,OAAM,CAAG,EAAb,CACA,GAAIpB,MAAM,EAAI,IAAd,CAAoB,CAClB,IAAK,GAAIC,IAAT,GAAgBd,OAAM,CAACa,MAAD,CAAtB,CAAgC,CAC9BoB,MAAM,CAACgC,IAAP,CAAYnD,GAAZ,EACD,CACF,CACD,MAAOmB,OAAP,CACD,CAEc+B,8DAAf,E;;ACdA,GAAIvD,wBAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,2BAAc,CAAGF,uBAAW,CAACE,cAAjC,CASA,QAASuD,WAAT,CAAoBrD,MAApB,CAA4B,CAC1B,GAAI,CAACP,mCAAQ,CAACO,MAAD,CAAb,CAAuB,CACrB,MAAOmD,cAAY,CAACnD,MAAD,CAAnB,CACD,CACD,GAAIsD,QAAO,CAAGC,uCAAW,CAACvD,MAAD,CAAzB,CACIoB,MAAM,CAAG,EADb,CAGA,IAAK,GAAInB,IAAT,GAAgBD,OAAhB,CAAwB,CACtB,GAAI,EAAEC,GAAG,EAAI,aAAP,GAAyBqD,OAAO,EAAI,CAACxD,0BAAc,CAACK,IAAf,CAAoBH,MAApB,CAA4BC,GAA5B,CAArC,CAAF,CAAJ,CAA+E,CAC7EmB,MAAM,CAACgC,IAAP,CAAYnD,GAAZ,EACD,CACF,CACD,MAAOmB,OAAP,CACD,CAEciC,0DAAf,E;;ACLA,QAASG,OAAT,CAAgBxD,MAAhB,CAAwB,CACtB,MAAO6C,uCAAW,CAAC7C,MAAD,CAAX,CAAsByD,yCAAa,CAACzD,MAAD,CAAS,IAAT,CAAnC,CAAoDqD,WAAU,CAACrD,MAAD,CAArE,CACD,CAEcwD,2DAAf,E;;ACIA,GAAIE,SAAQ,CAAGZ,eAAc,CAAC,SAAS9C,MAAT,CAAiByC,MAAjB,CAAyB,CACrDD,WAAU,CAACC,MAAD,CAASe,gBAAM,CAACf,MAAD,CAAf,CAAyBzC,MAAzB,CAAV,CACD,CAF4B,CAA7B,CAIe0D,+DAAf,E;;;;;ACrCA;AACA;AAEO,SAASC,YAAT,CAAsBC,GAAtB,EAAwC,GAAGC,MAA3C,EAA6E;AACnF,SAAOC,OAAO,CAACC,IAAR,CAAaF,MAAM,CAACG,GAAP,CAAWC,KAAK,IACnC,IAAIH,OAAJ,CAAYI,OAAO,IAAI;AACtBN,OAAG,CAACO,gBAAJ,CAAqBF,KAArB,EAA4B,SAASG,IAAT,CAAcC,CAAd,EAAiB;AAC5CT,SAAG,CAACU,mBAAJ,CAAwBL,KAAxB,EAA+BG,IAA/B;AACAF,aAAO,CAACG,CAAD,CAAP;AACA,KAHD;AAIA,GALD,CADmB,CAAb,CAAP;AAQA;AAEM,SAASE,YAAT,CAAsBX,GAAtB,EAAoCY,QAApC,EAA4E;AAClF,SAAO,IAAIV,OAAJ,CAAYI,OAAO,IAAI;AAC7B,UAAMO,KAAK,GAAGjF,KAAK,CAACkF,IAAN,CAAWd,GAAG,CAACe,QAAf,EAAyBC,IAAzB,CAA8BH,KAAK,IAAIA,KAAK,CAACI,OAAN,CAAcL,QAAd,CAAvC,CAAd;;AACA,QAAIC,KAAJ,EAAW;AACVP,aAAO,CAACO,KAAD,CAAP;AACA;AACA;;AAED,UAAMK,QAAQ,GAAG,IAAIC,gBAAJ,CAAqBC,SAAS,IAAI;AAClD,WAAK,MAAMC,QAAX,IAAuBD,SAAvB,EAAkC;AACjC,aAAK,MAAME,IAAX,IAAmBD,QAAQ,CAACE,UAA5B,EAAwC;AACvC,cAAID,IAAI,CAACE,QAAL,KAAkBC,IAAI,CAACC,YAAvB,IAAwCJ,IAAD,CAAYL,OAAZ,CAAoBL,QAApB,CAA3C,EAA0E;AACzEM,oBAAQ,CAACS,UAAT;AACArB,mBAAO,CAACsB,gCAAQ,CAACN,IAAD,EAAOO,WAAP,CAAT,CAAP;AACA;AACA;AACD;AACD;AACD,KAVgB,CAAjB;AAWAX,YAAQ,CAACY,OAAT,CAAiB9B,GAAjB,EAAsB;AAAE+B,eAAS,EAAE;AAAb,KAAtB;AACA,GAnBM,CAAP;AAoBA;AAEM,SAASC,gBAAT,CAA0BhC,GAA1B,EAAwCY,QAAxC,EAA0DqB,QAA1D,EAAqG;AAC3G,OAAK,MAAMpB,KAAX,IAAoBjF,KAAK,CAACkF,IAAN,CAAWd,GAAG,CAACe,QAAf,EAAyBmB,MAAzB,CAAgCrB,KAAK,IAAIA,KAAK,CAACI,OAAN,CAAcL,QAAd,CAAzC,CAApB,EAAuF;AACtFqB,YAAQ,CAACpB,KAAD,CAAR;AACA;;AAEDsB,wBAAsB,CAACnC,GAAD,EAAMY,QAAN,EAAgBqB,QAAhB,CAAtB;AACA;AAEM,SAASE,sBAAT,CAAgCnC,GAAhC,EAA8CY,QAA9C,EAAgEqB,QAAhE,EAA2G;AACjH,MAAId,gBAAJ,CAAqBC,SAAS,IAAI;AACjC,SAAK,MAAMC,QAAX,IAAuBD,SAAvB,EAAkC;AACjC,WAAK,MAAME,IAAX,IAAmBD,QAAQ,CAACE,UAA5B,EAAwC;AACvC,YAAID,IAAI,CAACE,QAAL,KAAkBC,IAAI,CAACC,YAAvB,IAAwCJ,IAAD,CAAYL,OAAZ,CAAoBL,QAApB,CAA3C,EAA0E;AACzEqB,kBAAQ,CAACL,gCAAQ,CAACN,IAAD,EAAOO,WAAP,CAAT,CAAR;AACA;AACD;AACD;AACD,GARD,EAQGC,OARH,CAQW9B,GARX,EAQgB;AAAE+B,aAAS,EAAE;AAAb,GARhB;AASA;AAEM,SAASK,iBAAT,CAA2BpC,GAA3B,EAAyCY,QAAzC,EAAiF;AACvF,SAAO,IAAIV,OAAJ,CAAYI,OAAO,IAAI;AAC7B,UAAMO,KAAK,GAAGb,GAAG,CAACqC,aAAJ,CAAkBzB,QAAlB,CAAd;;AACA,QAAIC,KAAJ,EAAW;AACVP,aAAO,CAACO,KAAD,CAAP;AACA;AACA;;AAED,UAAMK,QAAQ,GAAG,IAAIC,gBAAJ,CAAqBC,SAAS,IAAI;AAClD,WAAK,MAAMC,QAAX,IAAuBD,SAAvB,EAAkC;AACjC,aAAK,MAAME,IAAX,IAAmBD,QAAQ,CAACE,UAA5B,EAAwC;AACvC,cAAID,IAAI,CAACE,QAAL,KAAkBC,IAAI,CAACC,YAA3B,EAAyC;AAGxC,kBAAMb,KAAK,GAAGb,GAAG,CAACqC,aAAJ,CAAkBzB,QAAlB,CAAd;;AACA,gBAAIC,KAAJ,EAAW;AACVK,sBAAQ,CAACS,UAAT;AACArB,qBAAO,CAACO,KAAD,CAAP;AACA;;AAED;AACA;AACD;AACD;AACD,KAhBgB,CAAjB;AAiBAK,YAAQ,CAACY,OAAT,CAAiB9B,GAAjB,EAAsB;AAAE+B,eAAS,EAAE,IAAb;AAAmBO,aAAO,EAAE;AAA5B,KAAtB;AACA,GAzBM,CAAP;AA0BA;AAEM,SAASC,uBAAT,CAAiCvC,GAAjC,EAA+CY,QAA/C,EAAgF;AACtF,SAAO,IAAIV,OAAJ,CAAYI,OAAO,IAAI;AAC7B,UAAMkC,KAAK,GAAG,MAAM;AACnBtB,cAAQ,CAACS,UAAT;AACArB,aAAO;AACP,KAHD;;AAKA,UAAMY,QAAQ,GAAG,IAAIC,gBAAJ,CAAqBC,SAAS,IAAI;AAClD,WAAK,MAAMC,QAAX,IAAuBD,SAAvB,EAAkC;AACjC,YAAKC,QAAQ,CAACoB,MAAV,CAAuBxB,OAAvB,CAA+BL,QAA/B,CAAJ,EAA8C,OAAO4B,KAAK,EAAZ;;AAC9C,aAAK,MAAMlB,IAAX,IAAmBD,QAAQ,CAACE,UAA5B,EAAwC;AACvC,cAAID,IAAI,CAACE,QAAL,KAAkBC,IAAI,CAACC,YAAvB,IAAwCJ,IAAD,CAAYe,aAAZ,CAA0BzB,QAA1B,CAA3C,EAAgF,OAAO4B,KAAK,EAAZ;AAChF;;AACD,aAAK,MAAMlB,IAAX,IAAmBD,QAAQ,CAACqB,YAA5B,EAA0C;AACzC,cAAIpB,IAAI,CAACE,QAAL,KAAkBC,IAAI,CAACC,YAAvB,IAAwCJ,IAAD,CAAYe,aAAZ,CAA0BzB,QAA1B,CAA3C,EAAgF,OAAO4B,KAAK,EAAZ;AAChF;AACD;AACD,KAVgB,CAAjB;AAYAtB,YAAQ,CAACY,OAAT,CAAiB9B,GAAjB,EAAsB;AAAE+B,eAAS,EAAE,IAAb;AAAmBO,aAAO,EAAE;AAA5B,KAAtB;AACA,GAnBM,CAAP;AAoBA;AAEM,SAASK,aAAT,CAAuBC,MAAvB,EAA4CC,EAA5C,EAA6DC,MAA7D,EAAiG;AACvG,MAAIF,MAAM,CAACG,QAAP,CAAgBF,EAAhB,CAAJ,EAAyB,OAAO3C,OAAO,CAACI,OAAR,EAAP;AAEzB,SAAO,IAAIJ,OAAJ,CAAY,CAACI,OAAD,EAAU0C,MAAV,KAAqB;AACvC,UAAM9B,QAAQ,GAAG,IAAIC,gBAAJ,CAAqB,MAAM;AAC3C,UAAIyB,MAAM,CAACG,QAAP,CAAgBF,EAAhB,CAAJ,EAAyB;AACxBvC,eAAO;AACPY,gBAAQ,CAACS,UAAT;AACA;AACD,KALgB,CAAjB;AAOAT,YAAQ,CAACY,OAAT,CAAiBc,MAAjB,EAAyB;AAAEN,aAAO,EAAE,IAAX;AAAiBP,eAAS,EAAE;AAA5B,KAAzB;AACA,QAAIe,MAAJ,EAAYA,MAAM,CAACG,IAAP,CAAY,MAAM;AAAE/B,cAAQ,CAACS,UAAT;AAAuBqB,YAAM,CAAC,IAAIE,KAAJ,CAAU,UAAV,CAAD,CAAN;AAAgC,KAA3E;AACZ,GAVM,CAAP;AAWA;AAEM,SAASC,aAAT,CAAuBN,EAAvB,EAAwCC,MAAxC,EAA4E;AAElF,QAAMF,MAAM,GAAGQ,QAAQ,CAACC,eAAxB;AAEA,MAAI,CAACT,MAAM,CAACG,QAAP,CAAgBF,EAAhB,CAAL,EAA0B,OAAO3C,OAAO,CAACI,OAAR,EAAP;AAE1B,SAAO,IAAIJ,OAAJ,CAAY,CAACI,OAAD,EAAU0C,MAAV,KAAqB;AACvC,UAAM9B,QAAQ,GAAG,IAAIC,gBAAJ,CAAqB,MAAM;AAC3C,UAAI,CAACyB,MAAM,CAACG,QAAP,CAAgBF,EAAhB,CAAL,EAA0B;AACzBvC,eAAO;AACPY,gBAAQ,CAACS,UAAT;AACA;AACD,KALgB,CAAjB;AAOAT,YAAQ,CAACY,OAAT,CAAiBc,MAAjB,EAAyB;AAAEN,aAAO,EAAE,IAAX;AAAiBP,eAAS,EAAE;AAA5B,KAAzB;AACA,QAAIe,MAAJ,EAAYA,MAAM,CAACG,IAAP,CAAY,MAAM;AAAE/B,cAAQ,CAACS,UAAT;AAAuBqB,YAAM,CAAC,IAAIE,KAAJ,CAAU,UAAV,CAAD,CAAN;AAAgC,KAA3E;AACZ,GAVM,CAAP;AAWA;AAEM,SAASI,mBAAT,CAA6BtD,GAA7B,EAA2CY,QAA3C,EAA6DqB,QAA7D,EAAkGsB,gCAAyC,GAAG,KAA9I,EAA2J;AACjK,OAAK,MAAM1C,KAAX,IAAoBb,GAAG,CAACwD,gBAAJ,CAAqB5C,QAArB,CAApB,EAAoD;AACnDqB,YAAQ,CAACpB,KAAD,CAAR;AACA;;AAED4C,2BAAyB,CAACzD,GAAD,EAAMY,QAAN,EAAgBqB,QAAhB,EAA0BsB,gCAA1B,CAAzB;AACA;AAEM,SAASE,yBAAT,CAAmCzD,GAAnC,EAAiDY,QAAjD,EAAmEqB,QAAnE,EAAwGsB,gCAAyC,GAAG,KAApJ,EAAiK;AACvK,MAAIpC,gBAAJ,CAAqBC,SAAS,IAAI;AAGjC,UAAML,QAAQ,GAAG,IAAI2C,GAAJ,EAAjB;;AACA,SAAK,MAAMrC,QAAX,IAAuBD,SAAvB,EAAkC;AACjC,WAAK,MAAME,IAAX,IAAmBD,QAAQ,CAACE,UAA5B,EAAwC;AACvC,YAAID,IAAI,CAACE,QAAL,KAAkBC,IAAI,CAACC,YAA3B,EAAyC;AAExC,cAAKJ,IAAD,CAAYL,OAAZ,CAAoBL,QAApB,CAAJ,EAAmC;AAClCG,oBAAQ,CAAC4C,GAAT,CAAarC,IAAb;AACA,gBAAIiC,gCAAJ,EAAsC;AACtC;;AAED,eAAK,MAAM1C,KAAX,IAAqBS,IAAD,CAAYkC,gBAAZ,CAA6B5C,QAA7B,CAApB,EAA4D;AAC3DG,oBAAQ,CAAC4C,GAAT,CAAa9C,KAAb;AACA;AACD;AACD;AACD;;AACD,SAAK,MAAMA,KAAX,IAAoBE,QAApB,EAA8B;AAC7BkB,cAAQ,CAACL,gCAAQ,CAACf,KAAD,EAAQgB,WAAR,CAAT,CAAR;AACA;AACD,GAtBD,EAsBGC,OAtBH,CAsBW9B,GAtBX,EAsBgB;AAAE+B,aAAS,EAAE,IAAb;AAAmBO,WAAO,EAAE;AAA5B,GAtBhB;AAuBA;AAGM,SAASsB,oBAAT,CAA8B5D,GAA9B,EAAgDY,QAAhD,EAAiF;AACvF,MAAIZ,GAAG,CAACiB,OAAJ,CAAYL,QAAZ,CAAJ,EAA2B,OAAOV,OAAO,CAACI,OAAR,EAAP;AAE3B,SAAO,IAAIJ,OAAJ,CAAYI,OAAO,IAAI;AAC7B,UAAMY,QAAQ,GAAG,IAAIC,gBAAJ,CAAqB,MAAM;AAC3C,UAAInB,GAAG,CAACiB,OAAJ,CAAYL,QAAZ,CAAJ,EAA2B;AAC1BN,eAAO;AACPY,gBAAQ,CAACS,UAAT;AACA;AACD,KALgB,CAAjB;AAOAT,YAAQ,CAACY,OAAT,CAAiB9B,GAAjB,EAAsB;AAAE6D,gBAAU,EAAE;AAAd,KAAtB;AACA,GATM,CAAP;AAUA;AAEM,SAASC,KAAT,CAA2BlB,MAA3B,EAAyC;AAC/C,SAAOA,MAAM,CAACmB,SAAd,EAAyBnB,MAAM,CAACoB,WAAP,CAAmBpB,MAAM,CAACmB,SAA1B;;AACzB,SAAOnB,MAAP;AACA;AAEM,SAASqB,KAAT,CAAeC,GAAf,EAAiCC,MAAc,GAAG,CAAlD,EAA2D;AACjED,KAAG,CAACE,aAAJ,CAAkB,IAAIC,UAAJ,CAAe,OAAf,EAAwB;AACzCC,WAAO,EAAE,IADgC;AAEzCC,cAAU,EAAE,IAF6B;AAGzCC,UAAM,EAAE,CAHiC;AAIzCC,WAAO,EAAE,CAJgC;AAKzCC,WAAO,EAAE,CALgC;AAMzCC,WAAO,EAAE,CANgC;AAOzCC,WAAO,EAAE,CAPgC;AAQzCT;AARyC,GAAxB,CAAlB;AAUA;;AAEDF,KAAK,CAACY,mBAAN,GAA6BpE,CAAD,IAA4BA,CAAC,CAACkE,OAAF,KAAc,CAAd,IAAmBlE,CAAC,CAACmE,OAAF,KAAc,CAAzF;;AAEO,MAAME,eAAe,GAAGC,kCAAO,CAAC,MAAyC;AAC/EhF,cAAY,CAACiF,MAAD,EAAS,QAAT,CAAZ,CAA+B/B,IAA/B,CAAoC,MAAM;AAAE6B,mBAAe,CAACG,KAAhB,CAAsBC,KAAtB;AAAgC,GAA5E;AAEA,MAAIC,cAAJ;;AAEA,MAAIH,MAAM,CAACG,cAAX,EAA2B;AAC1BA,kBAAc,GAAGH,MAAM,CAACG,cAAxB;AACA,GAFD,MAEO;AACN,UAAMC,oBAAoB,GAAGhC,QAAQ,CAACiC,aAAT,CAAuB,KAAvB,CAA7B;AACAD,wBAAoB,CAACE,KAArB,CAA2BC,KAA3B,GAAmCH,oBAAoB,CAACE,KAArB,CAA2BE,MAA3B,GAAoC,MAAvE;AACAJ,wBAAoB,CAACE,KAArB,CAA2BG,QAA3B,GAAsC,OAAtC;AACArC,YAAQ,CAACsC,IAAT,CAAcC,WAAd,CAA0BP,oBAA1B;AACAD,kBAAc,GAAGC,oBAAoB,CAACQ,qBAArB,EAAjB;;AAGA,QAAI,CAACT,cAAc,CAACK,MAAhB,IAA0B,CAACL,cAAc,CAACI,KAA9C,EAAqD;AACpDJ,oBAAc,GAAG/B,QAAQ,CAACC,eAAT,CAAyBuC,qBAAzB,EAAjB;AACA;;AAEDR,wBAAoB,CAACS,MAArB;AACA;;AAED,SAAOlH,cAAI,CAACwG,cAAD,EAAiB,CAAC,QAAD,EAAW,OAAX,CAAjB,CAAX;AACA,CAvBqC,CAA/B;AAyBA,SAASW,iBAAT,CAA2B9F,GAA3B,EAAsD;AAC5D,MAAI,CAACA,GAAD,IAAQ,CAACA,GAAG,CAAC+F,YAAjB,EAA+B,OAAO,KAAP;AAE/B,QAAM;AAAEC,OAAF;AAAOC,QAAP;AAAaC,UAAb;AAAqBC;AAArB,MAA+BnG,GAAG,CAAC4F,qBAAJ,EAArC;AAEA,SACCI,GAAG,IAAI,CAAP,IACAC,IAAI,IAAI,CADR,IAEAC,MAAM,IAAIpB,eAAe,GAAGU,MAF5B,IAGAW,KAAK,IAAIrB,eAAe,GAAGS,KAJ5B;AAMA;;AAED,SAASa,qBAAT,GAAiC;AAChC,QAAMC,YAAY,GAAGC,eAAe,EAApC;AACA,QAAML,IAAI,GAAGjB,MAAM,CAACuB,WAApB;AACA,QAAMP,GAAG,GAAGhB,MAAM,CAACwB,WAAP,GAAqBH,YAAjC;AACA,QAAMd,KAAK,GAAGT,eAAe,GAAGS,KAAhC;AACA,QAAMC,MAAM,GAAGV,eAAe,GAAGU,MAAlB,GAA2Ba,YAA1C;AAEA,SAAO;AACNI,WAAO,EAAEJ,YADH;AAENJ,QAFM;AAGND,OAHM;AAINE,UAAM,EAAEF,GAAG,GAAGR,MAJR;AAKNW,SAAK,EAAEF,IAAI,GAAGV,KALR;AAMNA,SANM;AAONC;AAPM,GAAP;AASA;;AAKM,SAASkB,yBAAT,CAAmCxC,GAAnC,EAAyD;AAC/D,QAAMyC,IAAI,GAAGzC,GAAG,CAAC0B,qBAAJ,EAAb;AACA,QAAMI,GAAG,GAAGY,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYF,IAAI,CAACT,MAAL,GAAcS,IAAI,CAACnB,MAA/B,CAAZ;AACA,QAAMU,MAAM,GAAGU,IAAI,CAACE,GAAL,CAAShC,eAAe,GAAGU,MAA3B,EAAmCmB,IAAI,CAACT,MAAxC,CAAf;;AACA,MAAIS,IAAI,CAACnB,MAAL,KAAgB,CAApB,EAAuB;AACtB,WAAO,CAAP;AACA;;AACD,SAAOoB,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,CAACX,MAAM,GAAGF,GAAV,IAAiBW,IAAI,CAACnB,MAAlC,CAAP;AACA;AAED,MAAMuB,SAAS,GAAGC,+BAAI,CAAC,MAAM;AAC5B,QAAMC,OAAO,GAAG7D,QAAQ,CAACiC,aAAT,CAAuB,KAAvB,CAAhB;AACA4B,SAAO,CAAC3B,KAAR,CAAcJ,KAAd,GAAsB,MAAtB;AAEA,SAAO,CAACgC,SAAD,EAAYC,cAAZ,KAA+B;AACrC,UAAMC,cAAc,GAAGH,OAAO,CAACI,YAA/B;AACA,UAAMC,eAAe,GAHD,EAGI,GACvB,EAAElE,QAAQ,CAACC,eAAT,CAAyBkE,YAAzB,GAAwCL,SAAxC,GAAoDC,cAApD,GAAqEC,cAAvE,CADD;AAEA,QAAIE,eAAe,GAAG,CAAtB,EAAyBlE,QAAQ,CAACsC,IAAT,CAAc8B,MAAd,CAAqBP,OAArB,EAAzB,KACKA,OAAO,CAACpB,MAAR;AACLoB,WAAO,CAAC3B,KAAR,CAAcE,MAAd,GAAwB,GAAE8B,eAAgB,IAA1C;AACA,GAPD;AAQA,CAZqB,CAAtB;AAcA,IAAIG,YAAY,GAAG,KAAnB;AACA,IAAIC,qBAAJ;AAMO,SAASC,eAAT,CAAyBC,EAAzB,EAA0C9G,IAA1C,EAA8D;AACpE+G,aADoE;AAEpEC,qBAFoE;AAGpEC,WAAS,EAAEC,iBAHyD;AAIpEC,QAJoE;AAKpEC;AALoE,CAA9D,EAYH;AACH,QAAMC,sBAAsB,GAAGT,qBAAqB,GAAG,EAAvD;;AAEA,MAAIG,WAAW,KAAK,MAAhB,IAA0B,CAACI,MAA/B,EAAuC;AACtC;AACA;;AAED,MAAIC,eAAe,IAAI,CAACN,EAAE,CAAC7B,YAA3B,EAAyC;AAExCqC,yBAAqB,CAAC,MAAM;AAC3B,UAAIV,qBAAqB,KAAKS,sBAA9B,EAAsDR,eAAe,CAAC,GAAGU,SAAJ,CAAf;AACtD,KAFoB,CAArB;AAGA;AACA;;AAED,MAAI,CAACT,EAAE,CAAC7B,YAAR,EAAsB;AACrBuC,WAAO,CAACC,KAAR,CAAc,yBAAd;AACA;AACA;;AAED,MAAIV,WAAW,KAAK,MAAhB,IAA0BI,MAA9B,EAAsC;AACrC,UAAMO,IAAI,GAAGZ,EAAE,CAAChC,qBAAH,GAA2BI,GAA3B,GAAiCiC,MAAM,CAACL,EAArD;AACA,QAAIY,IAAJ,EAAUxD,MAAM,CAACyD,QAAP,CAAgB,CAAhB,EAAmBD,IAAnB;AACV;;AAED,QAAME,QAAQ,GAAGtC,qBAAqB,EAAtC;AAEA,QAAM3D,MAAM,GAAG3C,kBAAQ,CAAC,EAAD,EAAK8H,EAAE,CAAChC,qBAAH,EAAL,CAAvB;AACAnD,QAAM,CAACuD,GAAP,IAAc0C,QAAQ,CAACjC,OAAvB;AACAhE,QAAM,CAACyD,MAAP,IAAiBwC,QAAQ,CAACjC,OAA1B;AAEA,QAAMT,GAAG,GAAG0C,QAAQ,CAAC1C,GAAT,GAAevD,MAAM,CAACuD,GAAtB,GAA4B,CAAxC;;AAEA,MAAI6B,WAAW,KAAK,QAAhB,IAA4BpF,MAAM,CAAC+C,MAAP,IAAiBkD,QAAQ,CAAClD,MAA1D,EAAkE;AACjEqC,eAAW,GAAG,KAAd;AACA;;AAED,MAAIc,gBAAgB,GAAG,IAAvB;AACA,MAAIC,OAAJ;;AAEA,MAAIf,WAAW,KAAK,KAApB,EAA2B;AAE1Bd,aAAS,GAAGf,GAAH,EAAQ0C,QAAQ,CAAClD,MAAjB,CAAT;AACAoD,WAAO,GAAG5C,GAAV;AACA,GAJD,MAIO,IAAIlF,IAAI,IAAI+G,WAAW,KAAK,OAA5B,EAAqC;AAE3C,UAAMgB,OAAO,GAAGZ,MAAM,IAAI,OAAOA,MAAM,CAACnH,IAAd,KAAuB,QAAjC,GACfmH,MAAM,CAACnH,IADQ,GAEfA,IAAI,CAAC8E,qBAAL,GAA6BI,GAF9B;AAGA,QAAIwC,IAAI,GAAGZ,EAAE,CAAChC,qBAAH,GAA2BI,GAA3B,GAAiC6C,OAA5C;;AAEA,QAAIA,OAAO,GAAG,CAAd,EAAiB;AAEhBL,UAAI,IAAIK,OAAR;AACA,KAHD,MAGO,IAAIA,OAAO,GAAGH,QAAQ,CAAClD,MAAT,GAAkB,EAAhC,EAAoC;AAE1CgD,UAAI,IAAIK,OAAO,GAAGH,QAAQ,CAAClD,MAAnB,GAA4B,EAApC;AACA;;AAEDoD,WAAO,GAAG5D,MAAM,CAAC4D,OAAP,GAAiBJ,IAA3B;AACAG,oBAAgB,GAAG,KAAnB;AACA,GAjBM,MAiBA,IAAId,WAAW,KAAK,QAApB,EAA8B;AACpC,UAAMiB,MAAM,GAAG,CAACJ,QAAQ,CAAClD,MAAT,GAAkB/C,MAAM,CAAC+C,MAA1B,IAAoC,CAAnD;AACA,UAAMuD,UAAU,GAAG/C,GAAG,GAAG8C,MAAzB;;AAEA,QAAIhD,iBAAiB,CAAC8B,EAAD,CAArB,EAA2B;AAC1B,YAAMoB,iBAAiB,GAAGD,UAAU,IAAI/D,MAAM,CAAC4D,OAArB,GAA+B,MAA/B,GAAwC,IAAlE;AAEA,UAAII,iBAAiB,KAAKhB,iBAA1B,EAA6C;AAC7C;;AAEDY,WAAO,GAAGG,UAAV;AACA,GAXM,MAWA,IAAItG,MAAM,CAACuD,GAAP,IAAc,CAAd,IAAmBvD,MAAM,CAACyD,MAAP,IAAiBwC,QAAQ,CAAClD,MAAjD,EAAyD,CAI/D,CAJM,MAIA,IAAIqC,WAAW,KAAK,QAApB,EAA8B;AAEpCe,WAAO,GAAG5C,GAAV;AACA,GAHM,MAGA,IAAIvD,MAAM,CAACuD,GAAP,GAAa0C,QAAQ,CAACjC,OAA1B,EAAmC;AAGzCmC,WAAO,GAAG5C,GAAV;AACA,GAJM,MAIA,IAAI0C,QAAQ,CAAClD,MAAT,GAAkB/C,MAAM,CAACyD,MAAzB,IACVzD,MAAM,CAAC+C,MAAP,GAAgBkD,QAAQ,CAAClD,MADnB,EAC2B;AAEjC,QAAIqC,WAAW,KAAK,MAApB,EAA4B;AAC3Be,aAAO,GAAG5C,GAAV;AACA,KAFD,MAEO;AAEN4C,aAAO,GAAGF,QAAQ,CAAC1C,GAAT,GAAevD,MAAM,CAACyD,MAAtB,GAA+BwC,QAAQ,CAAClD,MAAlD;AACA;AACD,GATM,MASA;AAGNoD,WAAO,GAAG5C,GAAV;AACA;;AAED,MAAI4C,OAAO,KAAKnM,SAAhB,EAA2B;AAC1B,QAAIkM,gBAAJ,EAAsBC,OAAO,IAAItC,eAAe,EAA1B;AACtB,UAAM2C,cAAc,GAAGL,OAAO,GAAGF,QAAQ,CAAC1C,GAAnB,GAAyB,MAAzB,GAAkC,IAAzD;AACA,QAAI0C,QAAQ,CAAC1C,GAAT,KAAiB4C,OAAjB,IAA6Bd,mBAAmB,IAAIA,mBAAmB,KAAKmB,cAAhF,EAAiG;AACjGjE,UAAM,CAACkE,QAAP,CAAgB,CAAhB,EAAmBN,OAAnB;AACAnB,gBAAY,GAAG,IAAf;AACA1H,gBAAY,CAACiF,MAAD,EAAS,QAAT,CAAZ,CAA+B/B,IAA/B,CAAoC,MAAM;AAAEwE,kBAAY,GAAG,KAAf;AAAuB,KAAnE;AACA;AACD;;AAEDE,eAAe,CAAC9C,mBAAhB,GAAsC,MAAe4C,YAArD;;AAEA,MAAM0B,SAAS,GAAG;AAAEC,WAAS,EAAE,EAAb;AAAiBC,cAAY,EAAE;AAA/B,CAAlB;AAEO,SAASC,YAAT,CAAsBC,SAAtB,EAAyCF,YAAqB,GAAG,KAAjE,EAAwE;AAC9EF,WAAS,CAACE,YAAY,GAAG,cAAH,GAAoB,WAAjC,CAAT,CAAuD7J,IAAvD,CAA4D+J,SAA5D;AACA;AAEM,MAAMjD,eAAe,GAAGvB,kCAAO,CAAC,CAACyE,0BAAoC,GAAG,KAAxC,KAA0D;AAChG,QAAMC,OAAO,GAAG,CACf,GAAGN,SAAS,CAACC,SADE,EAEf,IAAII,0BAA0B,GAAGL,SAAS,CAACE,YAAb,GAA4B,EAA1D,CAFe,CAAhB;AAKA,SAAOI,OAAO,CACZrJ,GADK,CACDsJ,EAAE,IAAItG,QAAQ,CAACuG,cAAT,CAAwBD,EAAxB,CADL,EAELE,MAFK,CAEE,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAAC,CAAClE,qBAAF,GAA0BJ,MAF1C,EAEkD,CAFlD,CAAP;AAGA,CATqC,CAA/B;AAWA,MAAMuE,gBAAgB,GAAGhF,kCAAO,CAAC,MAAM;AAC7C,MAAI;AACH,WAAO3B,QAAQ,CAACuG,cAAT,CAAwB,cAAxB,EAAwCK,SAA/C;AACA,GAFD,CAEE,OAAOvJ,CAAP,EAAU;AACX,WAAO,EAAP;AACA;AACD,CANsC,CAAhC;AAQA,SAASwJ,MAAT,CAAgBC,GAAhB,EAA6B;AACnC,MAAI5E,KAAK,GAAG6E,QAAQ,CAACD,GAAD,CAApB;AACA,SAAO;AACNrE,UAAM,GAAG;AACR,UAAI,CAACP,KAAL,EAAY;AACZA,WAAK,CAACO,MAAN;AACAP,WAAK,CAAC8E,WAAN,GAAoB,EAApB;AACA9E,WAAK,GAAG7I,SAAR;AACA;;AANK,GAAP;AAQA;;AAED,SAAS0N,QAAT,CAAkBD,GAAlB,EAAuB;AACtB,QAAM5E,KAAK,GAAGlC,QAAQ,CAACiC,aAAT,CAAuB,OAAvB,CAAd;AACAC,OAAK,CAAC8E,WAAN,GAAoBF,GAApB;AAEA,GAAC9G,QAAQ,CAACiH,IAAT,IAAiBjH,QAAQ,CAACC,eAA3B,EAA4CsC,WAA5C,CAAwDL,KAAxD;AAEA,SAAOA,KAAP;AACA;;AAEM,MAAMgF,eAAe,GAAIhJ,IAAD,IAAgB;AAC9C,MAAIiJ,KAAK,GAAGjJ,IAAZ;;AACA,KAAG;AACF,QAAIiJ,KAAK,CAACC,WAAV,EAAuB;AACvB,GAFD,QAEUD,KAAK,GAAGA,KAAK,CAACE,UAFxB;;AAGA,SAAO,CAACF,KAAR;AACA,CANM;AAUA,MAAMG,cAAc,GAAG,CAAC,MAAM;AAEpC,MAAI,OAAO1F,MAAP,KAAkB,WAAtB,EAAmC,OAAQvE,CAAD,IAAUA,CAAjB;AAEnC,QAAMkK,SAAS,GAAI,uBAAsBC,IAAI,CAACC,GAAL,EAAW,EAApD;AACA,QAAMC,QAAQ,GAAG,IAAIC,OAAJ,EAAjB;AAIAhL,cAAY,CAACiF,MAAD,EAAS,kBAAT,EAA6B,MAA7B,CAAZ,CAAiD/B,IAAjD,CAAsD,MAAM;AAC3D,UAAM;AAAE+H;AAAF,QAAqBC,mBAAO,CAAC,GAAD,CAAlC;;AACAD,kBAAc,CAAC,IAAD,EAAOE,KAAK,IAAI;AAC7B,WAAK,MAAMlL,GAAX,IAAkB,CAAC,GAAGkL,KAAK,CAACC,KAAN,CAAY3H,gBAAZ,CAA8B,IAAGmH,SAAU,GAA3C,CAAJ,CAAlB,EAAuE;AAAE,YAAI,CAACG,QAAQ,CAACM,GAAT,CAAapL,GAAb,CAAL,EAAwBA,GAAG,CAAC6F,MAAJ;AAAe;AAChH,KAFa,EAEX;AAAEwF,eAAS,EAAE;AAAb,KAFW,CAAd;AAGA,GALD;AAOA,SAAQpE,OAAD,IAA0B;AAChCA,WAAO,CAACqE,YAAR,CAAqBX,SAArB,EAAgC,EAAhC;AACAG,YAAQ,CAACnH,GAAT,CAAasD,OAAb;AACA,WAAOA,OAAP;AACA,GAJD;AAKA,CArB6B,GAAvB,C;;;;;;;;;;;;;;;;;;;;;;;;;;ACtdP,QAASsE,KAAT,CAAcrN,KAAd,CAAqB,CACnB,GAAIlB,OAAM,CAAGkB,KAAK,EAAI,IAAT,CAAgB,CAAhB,CAAoBA,KAAK,CAAClB,MAAvC,CACA,MAAOA,OAAM,CAAGkB,KAAK,CAAClB,MAAM,CAAG,CAAV,CAAR,CAAuBP,SAApC,CACD,CAEc8O,uDAAf,E;;;;;;;;ACRA,QAAS3I,eAAT,CAAgBxG,MAAhB,CAAwBQ,IAAxB,CAA8B,CAC5B,MAAOA,KAAI,CAACI,MAAL,CAAc,CAAd,CAAkBZ,MAAlB,CAA2BqB,mCAAO,CAACrB,MAAD,CAASoP,qCAAS,CAAC5O,IAAD,CAAO,CAAP,CAAU,CAAC,CAAX,CAAlB,CAAzC,CACD,CAEcgG,0DAAf,E;;;;;ACFA,QAAS6I,UAAT,CAAmBrP,MAAnB,CAA2BQ,IAA3B,CAAiC,CAC/BA,IAAI,CAAGE,oCAAQ,CAACF,IAAD,CAAOR,MAAP,CAAf,CACAA,MAAM,CAAGwG,OAAM,CAACxG,MAAD,CAASQ,IAAT,CAAf,CACA,MAAOR,OAAM,EAAI,IAAV,EAAkB,MAAOA,OAAM,CAACc,iCAAK,CAACqO,cAAI,CAAC3O,IAAD,CAAL,CAAN,CAAtC,CACD,CAEc6O,wDAAf,E;;;;;ACfA,GAAIC,WAAU,CAAG9P,KAAK,CAACK,SAAvB,CAGA,GAAI0P,OAAM,CAAGD,UAAU,CAACC,MAAxB,CAWA,QAASC,WAAT,CAAoB1N,KAApB,CAA2B2N,OAA3B,CAAoC,CAClC,GAAI7O,OAAM,CAAGkB,KAAK,CAAG2N,OAAO,CAAC7O,MAAX,CAAoB,CAAtC,CACI8O,SAAS,CAAG9O,MAAM,CAAG,CADzB,CAGA,MAAOA,MAAM,EAAb,CAAiB,CACf,GAAID,MAAK,CAAG8O,OAAO,CAAC7O,MAAD,CAAnB,CACA,GAAIA,MAAM,EAAI8O,SAAV,EAAuB/O,KAAK,GAAKgP,QAArC,CAA+C,CAC7C,GAAIA,SAAQ,CAAGhP,KAAf,CACA,GAAIK,mCAAO,CAACL,KAAD,CAAX,CAAoB,CAClB4O,MAAM,CAACpP,IAAP,CAAY2B,KAAZ,CAAmBnB,KAAnB,CAA0B,CAA1B,EACD,CAFD,IAEO,CACL0O,UAAS,CAACvN,KAAD,CAAQnB,KAAR,CAAT,CACD,CACF,CACF,CACD,MAAOmB,MAAP,CACD,CAEc0N,0DAAf,E;;ACLA,QAAS/F,OAAT,CAAgB3H,KAAhB,CAAuBX,SAAvB,CAAkC,CAChC,GAAIC,OAAM,CAAG,EAAb,CACA,GAAI,EAAEU,KAAK,EAAIA,KAAK,CAAClB,MAAjB,CAAJ,CAA8B,CAC5B,MAAOQ,OAAP,CACD,CACD,GAAIT,MAAK,CAAG,CAAC,CAAb,CACI8O,OAAO,CAAG,EADd,CAEI7O,MAAM,CAAGkB,KAAK,CAAClB,MAFnB,CAIAO,SAAS,CAAGyO,wCAAY,CAACzO,SAAD,CAAY,CAAZ,CAAxB,CACA,MAAO,EAAER,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIlB,MAAK,CAAGoC,KAAK,CAACnB,KAAD,CAAjB,CACA,GAAIQ,SAAS,CAACzB,KAAD,CAAQiB,KAAR,CAAemB,KAAf,CAAb,CAAoC,CAClCV,MAAM,CAACgC,IAAP,CAAY1D,KAAZ,EACA+P,OAAO,CAACrM,IAAR,CAAazC,KAAb,EACD,CACF,CACD6O,WAAU,CAAC1N,KAAD,CAAQ2N,OAAR,CAAV,CACA,MAAOrO,OAAP,CACD,CAEcqI,2DAAf,E;;;;;;;;;;;;;;AClCA,GAAIgF,IAAG,CAAG,UAAW,CACnB,MAAOrP,yBAAI,CAACoP,IAAL,CAAUC,GAAV,EAAP,CACD,CAFD,CAIeA,qDAAf,E;;;;;ACjBA,GAAIoB,gBAAe,CAAG,qBAAtB,CAGA,GAAIC,UAAS,CAAGtF,IAAI,CAACC,GAArB,CACIsF,SAAS,CAAGvF,IAAI,CAACE,GADrB,CAyDA,QAASsF,SAAT,CAAkB5N,IAAlB,CAAwB6N,IAAxB,CAA8BC,OAA9B,CAAuC,CACrC,GAAIC,SAAJ,CACIC,QADJ,CAEIC,OAFJ,CAGIjP,MAHJ,CAIIkP,OAJJ,CAKIC,YALJ,CAMIC,cAAc,CAAG,CANrB,CAOIC,OAAO,CAAG,KAPd,CAQIC,MAAM,CAAG,KARb,CASIC,QAAQ,CAAG,IATf,CAWA,GAAI,MAAOvO,KAAP,EAAe,UAAnB,CAA+B,CAC7B,KAAM,IAAIwO,UAAJ,CAAcf,eAAd,CAAN,CACD,CACDI,IAAI,CAAGY,mCAAQ,CAACZ,IAAD,CAAR,EAAkB,CAAzB,CACA,GAAIxQ,mCAAQ,CAACyQ,OAAD,CAAZ,CAAuB,CACrBO,OAAO,CAAG,CAAC,CAACP,OAAO,CAACO,OAApB,CACAC,MAAM,CAAG,WAAaR,QAAtB,CACAG,OAAO,CAAGK,MAAM,CAAGZ,SAAS,CAACe,mCAAQ,CAACX,OAAO,CAACG,OAAT,CAAR,EAA6B,CAA9B,CAAiCJ,IAAjC,CAAZ,CAAqDI,OAArE,CACAM,QAAQ,CAAG,YAAcT,QAAd,CAAwB,CAAC,CAACA,OAAO,CAACS,QAAlC,CAA6CA,QAAxD,CACD,CAED,QAASG,WAAT,CAAoBC,IAApB,CAA0B,CACxB,GAAIC,KAAI,CAAGb,QAAX,CACIc,OAAO,CAAGb,QADd,CAGAD,QAAQ,CAAGC,QAAQ,CAAG/P,SAAtB,CACAmQ,cAAc,CAAGO,IAAjB,CACA3P,MAAM,CAAGgB,IAAI,CAAC8O,KAAL,CAAWD,OAAX,CAAoBD,IAApB,CAAT,CACA,MAAO5P,OAAP,CACD,CAED,QAAS+P,YAAT,CAAqBJ,IAArB,CAA2B,CAEzBP,cAAc,CAAGO,IAAjB,CAEAT,OAAO,CAAGc,UAAU,CAACC,YAAD,CAAepB,IAAf,CAApB,CAEA,MAAOQ,QAAO,CAAGK,UAAU,CAACC,IAAD,CAAb,CAAsB3P,MAApC,CACD,CAED,QAASkQ,cAAT,CAAuBP,IAAvB,CAA6B,CAC3B,GAAIQ,kBAAiB,CAAGR,IAAI,CAAGR,YAA/B,CACIiB,mBAAmB,CAAGT,IAAI,CAAGP,cADjC,CAEIiB,WAAW,CAAGxB,IAAI,CAAGsB,iBAFzB,CAIA,MAAOb,OAAM,CACTX,SAAS,CAAC0B,WAAD,CAAcpB,OAAO,CAAGmB,mBAAxB,CADA,CAETC,WAFJ,CAGD,CAED,QAASC,aAAT,CAAsBX,IAAtB,CAA4B,CAC1B,GAAIQ,kBAAiB,CAAGR,IAAI,CAAGR,YAA/B,CACIiB,mBAAmB,CAAGT,IAAI,CAAGP,cADjC,CAMA,MAAQD,aAAY,GAAKlQ,SAAjB,EAA+BkR,iBAAiB,EAAItB,IAApD,EACLsB,iBAAiB,CAAG,CADf,EACsBb,MAAM,EAAIc,mBAAmB,EAAInB,OAD/D,CAED,CAED,QAASgB,aAAT,EAAwB,CACtB,GAAIN,KAAI,CAAGtC,aAAG,EAAd,CACA,GAAIiD,YAAY,CAACX,IAAD,CAAhB,CAAwB,CACtB,MAAOY,aAAY,CAACZ,IAAD,CAAnB,CACD,CAEDT,OAAO,CAAGc,UAAU,CAACC,YAAD,CAAeC,aAAa,CAACP,IAAD,CAA5B,CAApB,CACD,CAED,QAASY,aAAT,CAAsBZ,IAAtB,CAA4B,CAC1BT,OAAO,CAAGjQ,SAAV,CAIA,GAAIsQ,QAAQ,EAAIR,QAAhB,CAA0B,CACxB,MAAOW,WAAU,CAACC,IAAD,CAAjB,CACD,CACDZ,QAAQ,CAAGC,QAAQ,CAAG/P,SAAtB,CACA,MAAOe,OAAP,CACD,CAED,QAASsF,OAAT,EAAkB,CAChB,GAAI4J,OAAO,GAAKjQ,SAAhB,CAA2B,CACzBuR,YAAY,CAACtB,OAAD,CAAZ,CACD,CACDE,cAAc,CAAG,CAAjB,CACAL,QAAQ,CAAGI,YAAY,CAAGH,QAAQ,CAAGE,OAAO,CAAGjQ,SAA/C,CACD,CAED,QAASwR,MAAT,EAAiB,CACf,MAAOvB,QAAO,GAAKjQ,SAAZ,CAAwBe,MAAxB,CAAiCuQ,YAAY,CAAClD,aAAG,EAAJ,CAApD,CACD,CAED,QAASqD,UAAT,EAAqB,CACnB,GAAIf,KAAI,CAAGtC,aAAG,EAAd,CACIsD,UAAU,CAAGL,YAAY,CAACX,IAAD,CAD7B,CAGAZ,QAAQ,CAAGlE,SAAX,CACAmE,QAAQ,CAAG,IAAX,CACAG,YAAY,CAAGQ,IAAf,CAEA,GAAIgB,UAAJ,CAAgB,CACd,GAAIzB,OAAO,GAAKjQ,SAAhB,CAA2B,CACzB,MAAO8Q,YAAW,CAACZ,YAAD,CAAlB,CACD,CACD,GAAIG,MAAJ,CAAY,CAEVkB,YAAY,CAACtB,OAAD,CAAZ,CACAA,OAAO,CAAGc,UAAU,CAACC,YAAD,CAAepB,IAAf,CAApB,CACA,MAAOa,WAAU,CAACP,YAAD,CAAjB,CACD,CACF,CACD,GAAID,OAAO,GAAKjQ,SAAhB,CAA2B,CACzBiQ,OAAO,CAAGc,UAAU,CAACC,YAAD,CAAepB,IAAf,CAApB,CACD,CACD,MAAO7O,OAAP,CACD,CACD0Q,SAAS,CAACpL,MAAV,CAAmBA,MAAnB,CACAoL,SAAS,CAACD,KAAV,CAAkBA,KAAlB,CACA,MAAOC,UAAP,CACD,CAEc9B,+DAAf,E;;;;;;;;;;;ACpLA,QAASgC,gBAAT,CAAyBlQ,KAAzB,CAAgCpC,KAAhC,CAAuCuS,SAAvC,CAAkDC,UAAlD,CAA8D,CAC5D,GAAIvR,MAAK,CAAGsR,SAAS,CAAG,CAAxB,CACIrR,MAAM,CAAGkB,KAAK,CAAClB,MADnB,CAGA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIsR,UAAU,CAACpQ,KAAK,CAACnB,KAAD,CAAN,CAAejB,KAAf,CAAd,CAAqC,CACnC,MAAOiB,MAAP,CACD,CACF,CACD,MAAO,CAAC,CAAR,CACD,CAEcqR,oEAAf,E;;;;;;;;ACfA,GAAI1C,wBAAU,CAAG9P,KAAK,CAACK,SAAvB,CAGA,GAAI0P,oBAAM,CAAGD,uBAAU,CAACC,MAAxB,CAaA,QAAS4C,YAAT,CAAqBrQ,KAArB,CAA4BsQ,MAA5B,CAAoCC,QAApC,CAA8CH,UAA9C,CAA0D,CACxD,GAAII,QAAO,CAAGJ,UAAU,CAAGF,gBAAH,CAAqBO,+BAA7C,CACI5R,KAAK,CAAG,CAAC,CADb,CAEIC,MAAM,CAAGwR,MAAM,CAACxR,MAFpB,CAGI4R,IAAI,CAAG1Q,KAHX,CAKA,GAAIA,KAAK,GAAKsQ,MAAd,CAAsB,CACpBA,MAAM,CAAGK,qCAAS,CAACL,MAAD,CAAlB,CACD,CACD,GAAIC,QAAJ,CAAc,CACZG,IAAI,CAAGE,oCAAQ,CAAC5Q,KAAD,CAAQ6Q,qCAAS,CAACN,QAAD,CAAjB,CAAf,CACD,CACD,MAAO,EAAE1R,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIqR,UAAS,CAAG,CAAhB,CACIvS,KAAK,CAAG0S,MAAM,CAACzR,KAAD,CADlB,CAEIiS,QAAQ,CAAGP,QAAQ,CAAGA,QAAQ,CAAC3S,KAAD,CAAX,CAAqBA,KAF5C,CAIA,MAAO,CAACuS,SAAS,CAAGK,OAAO,CAACE,IAAD,CAAOI,QAAP,CAAiBX,SAAjB,CAA4BC,UAA5B,CAApB,EAA+D,CAAC,CAAvE,CAA0E,CACxE,GAAIM,IAAI,GAAK1Q,KAAb,CAAoB,CAClByN,mBAAM,CAACpP,IAAP,CAAYqS,IAAZ,CAAkBP,SAAlB,CAA6B,CAA7B,EACD,CACD1C,mBAAM,CAACpP,IAAP,CAAY2B,KAAZ,CAAmBmQ,SAAnB,CAA8B,CAA9B,EACD,CACF,CACD,MAAOnQ,MAAP,CACD,CAEcqQ,4DAAf,E;;AC5BA,QAASU,QAAT,CAAiB/Q,KAAjB,CAAwBsQ,MAAxB,CAAgC,CAC9B,MAAQtQ,MAAK,EAAIA,KAAK,CAAClB,MAAf,EAAyBwR,MAAzB,EAAmCA,MAAM,CAACxR,MAA3C,CACHuR,YAAW,CAACrQ,KAAD,CAAQsQ,MAAR,CADR,CAEHtQ,KAFJ,CAGD,CAEc+Q,6DAAf,E;;ACFA,GAAIC,KAAI,CAAG9P,oCAAQ,CAAC6P,iBAAD,CAAnB,CAEeC,uDAAf,E;;AC1BO,UAAUC,KAAV,CAAgBC,KAAhB,EAA+BC,GAA/B,EAA8D;AACpE,OAAK,IAAIC,CAAC,GAAGF,KAAb,EAAoBE,CAAC,GAAGD,GAAxB,EAA6B,EAAEC,CAA/B,EAAkC;AACjC,UAAMA,CAAN;AACA;AACD;AAQM,UAAUC,GAAV,CAAc,GAAGC,SAAjB,EAA4B;AAClC,QAAMC,UAAU,GAAGD,SAAS,CAACpP,GAAV,CAAcsP,EAAE,IAAIA,EAAE,CAAC7R,MAAM,CAAC8R,QAAR,CAAF,EAApB,CAAnB;AACA,MAAIC,OAAJ;;AAEA,SAAO,CAACA,OAAO,GAAGH,UAAU,CAACrP,GAAX,CAAeyP,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAAtB,CAAX,EAA8CC,IAA9C,CAAmDC,CAAC,IAAI,CAACA,CAAC,CAACC,IAA3D,CAAP,EAAyE;AACxE,UAAML,OAAO,CAACxP,GAAR,CAAY4P,CAAC,IAAIA,CAAC,CAAClU,KAAnB,CAAN;AACA;AACD,C;;ACnBD;AACA;AAEO,SAASoU,OAAT,CAAoBjO,QAApB,EAAwCkO,QAAiB,GAAG,CAA5D,EAA2E;AACjF,SAAO,IAAIjQ,OAAJ,CAAYI,OAAO,IAAI;AAC7B,KAAC,SAAS8P,MAAT,GAAkB;AAClB,YAAMC,GAAG,GAAGpO,QAAQ,EAApB;;AACA,UAAI,CAACoO,GAAL,EAAU;AACT7C,kBAAU,CAAC4C,MAAD,EAASD,QAAT,CAAV;AACA;AACA;;AACD7P,aAAO,CAAC+P,GAAD,CAAP;AACA,KAPD;AAQA,GATM,CAAP;AAUA;AASM,MAAMC,cAAc,GAAG,CAAC,MAAM;AAIpC,QAAMC,MAAM,GAAG,EAAf;AAEA,QAAMC,GAAG,GAAGC,aAAa,CAAC,MAAM;AAC/B,UAAMrB,KAAK,GAAGsB,WAAW,CAAC7F,GAAZ,EAAd;;AACA,OAAG;AACFhF,sBAAM,CAAC0K,MAAD,EAAS,CAAC;AAAEI,iBAAF;AAAa1O,gBAAb;AAAuB3B,eAAvB;AAAgC0C;AAAhC,OAAD,KAA8D;AAC5E,cAAM;AAAElH,eAAF;AAASmU;AAAT,YAAkBU,SAAS,CAACb,IAAV,EAAxB;;AAEA,YAAIG,IAAJ,EAAU;AACT3P,iBAAO;AACP,iBAAO,IAAP;AACA;;AAED,YAAI;AACH2B,kBAAQ,CAACnG,KAAD,CAAR;AACA,SAFD,CAEE,OAAO2E,CAAP,EAAU;AACX,cAAIkQ,SAAS,CAACC,MAAd,EAAsBD,SAAS,CAACC,MAAV;AACtB5N,gBAAM,CAACvC,CAAD,CAAN;AACA,iBAAO,IAAP;AACA;AACD,OAfK,CAAN;;AAiBA,UAAI,CAAC8P,MAAM,CAACvT,MAAZ,EAAoB;AACnB;AACA;AACD,KArBD,QAqBS0T,WAAW,CAAC7F,GAAZ,KAAoBuE,KAApB,GA3BQ,OADA,EAOjB;;AAsBAoB,OAAG;AACH,GAzBwB,CAAzB;AA2BA,SAAOK,qCAAU,CAAC,CAAIC,UAAJ,EAA6B7O,QAA7B,KACjB,IAAI/B,OAAJ,CAAY,CAACI,OAAD,EAAU0C,MAAV,KAAqB;AAChC,UAAM+N,QAAQ,GAAIlT,MAAM,CAAC8R,QAAP,IAAmBmB,UAApB,GAAkCA,UAAlC,GAA+ClV,KAAK,CAACkF,IAAN,CAAWgQ,UAAX,CAAhE;AAEAP,UAAM,CAAC/Q,IAAP,CAAY;AAAEmR,eAAS,EAAEI,QAAQ,CAAClT,MAAM,CAAC8R,QAAR,CAAR,EAAb;AAA0C1N,cAA1C;AAAoD3B,aAApD;AAA6D0C;AAA7D,KAAZ;AACAwN,OAAG;AACH,GALD,CADgB,CAAjB;AAQA,CAzC6B,GAAvB;AAiDA,SAASQ,KAAT,CAAqB/O,QAArB,EAAqG;AAAEgP,MAAI,GAAG,GAAT;AAAcC,OAAK,GAAG,EAAtB;AAA0BC,mBAAiB,GAAG;AAA9C,IAA0H,EAA/N,EAAyP;AAC/P,MAAIC,MAAJ;;AAEA,YAAUC,gBAAV,GAA6B;AAC5B,UAAMC,OAAO,GAAG,EAAhB;AACA,UAAMC,QAAQ,GAAG,EAAjB;;AAEA,aAASC,UAAT,GAAkC;AACjC,UAAIF,OAAO,CAACtU,MAAZ,EAAoB;AACnB,eAAO,IAAIkD,OAAJ,CAAY,CAACI,OAAD,EAAU0C,MAAV,KAAqB;AAAEuO,kBAAQ,CAAC/R,IAAT,CAAc;AAAEc,mBAAF;AAAW0C;AAAX,WAAd;AAAqC,SAAxE,CAAP;AACA,OAFD,MAEO;AACN,eAAQvG,SAAR;AACA;AACD;;AAED2U,UAAM,GAAGpK,+BAAI,CAAC,YAAY;AACzByK,mBAAa;AACb,UAAI,CAACH,OAAO,CAACtU,MAAb,EAAqB;;AACrB,UAAI;AACH,cAAM4S,OAAO,GAAG,OAAM3N,QAAQ,CAACqP,OAAD,CAAd,KAA2B,EAA3C;;AACA,aAAK,MAAM,CAAC;AAAEhR,iBAAF;AAAW0C;AAAX,SAAD,EAAsBxF,MAAtB,CAAX,IAA4C+R,GAAG,CAACgC,QAAD,EAAW3B,OAAX,CAA/C,EAAoE;AACnE,cAAIpS,MAAM,YAAY0F,KAAtB,EAA6BF,MAAM,CAACxF,MAAD,CAAN,CAA7B,KACK8C,OAAO,CAAC9C,MAAD,CAAP;AACL;AACD,OAND,CAME,OAAOiD,CAAP,EAAU;AACX,aAAK,MAAM;AAAEuC;AAAF,SAAX,IAAyBuO,QAAzB,EAAmC;AAClCvO,gBAAM,CAACvC,CAAD,CAAN;AACA;AACD;AACD,KAdY,CAAb;AAgBA,UAAMiR,OAAO,GAAGR,KAAK,GAAG9E,kBAAQ,CAACgF,MAAD,EAASF,KAAT,CAAX,GAA6BS,QAAQ,CAACP,MAAD,CAA1D;;AAEA,WAAOE,OAAO,CAACtU,MAAR,GAAiBiU,IAAxB,EAA8B;AAC7B,YAAM9F,KAAK,GAAG,MAAMqG,UAAU,EAA9B;AACA,UAAIrG,KAAK,KAAK1O,SAAd,EAAyB,MAAM,IAAIyG,KAAJ,CAAU,uCAAV,CAAN;AACzBoO,aAAO,CAAC9R,IAAR,CAAa2L,KAAb;AACAuG,aAAO;AACP;;AAED,UAAME,WAAW,GAAGJ,UAAU,EAA9B;AACAJ,UAAM;AACN,UAAMQ,WAAN;AACA;;AAED,MAAIC,YAAJ;;AAEA,WAASJ,aAAT,GAAyB;AACxBI,gBAAY,GAAGR,gBAAgB,EAA/B;AACAQ,gBAAY,CAAC/B,IAAb;AACA;;AAED2B,eAAa;AAEb,MAAIN,iBAAJ,EAAuBnM,MAAM,CAACzE,gBAAP,CAAwB,cAAxB,EAAwC,MAAM;AAAE6Q,UAAM;AAAK,GAA3D,EAA6D,IAA7D;AAEvB,SAAOjG,KAAK,IAAI;AACf,UAAM;AAAErP;AAAF,QAAY+V,YAAY,CAAC/B,IAAb,CAAkB3E,KAAlB,CAAlB;AACA,QAAIrP,KAAK,KAAKW,SAAd,EAAyB,MAAM,IAAIyG,KAAJ,CAAU,mDAAV,CAAN;AACzB,WAAOpH,KAAP;AACA,GAJD;AAKA;;AAED,SAASgW,MAAT,CAAmBC,OAAnB,EAAwC9P,QAAxC,EAAiG;AAChG,SAAO8P,OAAO,CAAC9O,IAAR,CAAahB,QAAb,EAAuBA,QAAvB,CAAP;AACA;;AAIM,SAAS+P,SAAT,CACN/P,QADM,EAEyD;AAC/D,SAAO,UAAS,GAAGmL,IAAZ,EAAkB;AACxB,WAAQ,SAAS0C,IAAT,CAAca,SAAd,EAAyBsB,GAAzB,EAA8BC,QAA9B,EAAwC;AAC/C,YAAM;AAAEpW,aAAF;AAASmU;AAAT,UAAkB,CAACiC,QAAD,GAAYvB,SAAS,CAACb,IAAV,CAAemC,GAAf,CAAZ,GAAkCtB,SAAS,CAACwB,KAAV,CAAgBF,GAAhB,CAA1D;;AAEA,UAAIhC,IAAJ,EAAU;AACT,eAAOnU,KAAP;AACA,OAFD,MAEO,IAAI,EAAEA,KAAK,YAAYoE,OAAnB,CAAJ,EAAiC;AACvC,eAAO4P,IAAI,CAACa,SAAD,EAAY7U,KAAZ,EAAmB,KAAnB,CAAX;AACA,OAFM,MAEA;AACN,eAAOA,KAAK,CAACmH,IAAN,CACNoN,GAAG,IAAIP,IAAI,CAACa,SAAD,EAAYN,GAAZ,EAAiB,KAAjB,CADL,EAEN+B,GAAG,IAAItC,IAAI,CAACa,SAAD,EAAYyB,GAAZ,EAAiB,IAAjB,CAFL,CAAP;AAIA;AACD,KAbM,CAaJC,OAAO,CAAC/E,KAAR,CAAcrL,QAAd,EAAwB,IAAxB,EAA8BmL,IAA9B,CAbI,EAaiC3Q,SAbjC,EAa4C,KAb5C,CAAP;AAcA,GAfD;AAgBA;AAgBM,SAAS6V,SAAT,CAAmBC,OAAnB,EAA4B,GAAGC,GAA/B,EAAoC;AAC1C,SAAOR,SAAS,CAAC,WAAU,GAAG5E,IAAb,EAAmB;AACnC,QAAIqF,KAAK,GAAGF,OAAO,CAAC,GAAGnF,IAAJ,CAAnB;;AACA,SAAK,MAAMsF,EAAX,IAAiBF,GAAjB,EAAsB;AACrBC,WAAK,GAAGC,EAAE,CAAC,MAAMD,KAAP,CAAV;AACA;;AACD,WAAOA,KAAP;AACA,GANe,CAAhB;AAOA;AAIM,SAASE,YAAT,CAAyBZ,OAAzB,EAAyE;AAC/E,MAAI1B,GAAG,GAAG0B,OAAV;AACAA,SAAO,CAAC9O,IAAR,CAAa2P,CAAC,IAAI;AAAEvC,OAAG,GAAGuC,CAAN;AAAU,GAA9B;AACA,SAAO;AAAEC,OAAG,EAAE,MAAMxC;AAAb,GAAP;AACA;AAEM,SAASyC,UAAT,CACN7Q,QADM,EAEN8Q,WAAqC,GAAGH,CAAC,IAAIA,CAFvC,EAGF;AACJ,QAAMrC,MAAM,GAAG,IAAIyC,GAAJ,EAAf;AAEA,SAAQ,UAAS,GAAG5F,IAAZ,EAAkB;AACzB,UAAM/Q,GAAG,GAAG0W,WAAW,CAAC,GAAG3F,IAAJ,CAAvB;AAGA,UAAM6F,IAAI,GAAG1C,MAAM,CAACnF,GAAP,CAAW/O,GAAX,IACZyV,MAAM,CAACvB,MAAM,CAACsC,GAAP,CAAWxW,GAAX,CAAD,EAA+C,MAAMgW,OAAO,CAAC/E,KAAR,CAAcrL,QAAd,EAAwB,IAAxB,EAA8BmL,IAA9B,CAArD,CADM,GAEZiF,OAAO,CAAC/E,KAAR,CAAcrL,QAAd,EAAwB,IAAxB,EAA8BmL,IAA9B,CAFD;;AAIA,QAAI6F,IAAI,YAAY/S,OAApB,EAA6B;AAC5BqQ,YAAM,CAAC2C,GAAP,CAAW7W,GAAX,EAAgB4W,IAAhB;AAEAnB,YAAM,CAACmB,IAAD,EAAO,MAAM;AAClB,YAAI1C,MAAM,CAACsC,GAAP,CAAWxW,GAAX,MAAoB4W,IAAxB,EAA8B1C,MAAM,CAAC4C,MAAP,CAAc9W,GAAd;AAC9B,OAFK,CAAN;AAGA;;AAED,WAAO4W,IAAP;AACA,GAjBD;AAkBA;AAEM,SAASG,KAAT,CAAsDnR,QAAtD,EAAsE;AAC5E,MAAIoR,KAAJ;AAEA,SAAQ,UAAS,GAAGjG,IAAZ,EAAkB;AACzB,UAAM6F,IAAI,GAAGI,KAAK,GACjBvB,MAAM,CAACuB,KAAD,EAAQ,MAAMhB,OAAO,CAAC/E,KAAR,CAAcrL,QAAd,EAAwB,IAAxB,EAA8BmL,IAA9B,CAAd,CADW,GAEjBiF,OAAO,CAAC/E,KAAR,CAAcrL,QAAd,EAAwB,IAAxB,EAA8BmL,IAA9B,CAFD;;AAIA,QAAI6F,IAAI,YAAY/S,OAApB,EAA6B;AAC5BmT,WAAK,GAAGJ,IAAR;AAEAnB,YAAM,CAACmB,IAAD,EAAO,MAAM;AAClB,YAAII,KAAK,KAAKJ,IAAd,EAAoBI,KAAK,GAAG5W,SAAR;AACpB,OAFK,CAAN;AAGA;;AAED,WAAOwW,IAAP;AACA,GAdD;AAeA;AAIM,SAAStB,QAAT,CAAkB1P,QAAlB,EAA6E;AACnF,MAAI8P,OAAJ;AAEA,SAAO,MAAM;AACZA,WAAO,GAAGA,OAAO,IAAI7R,OAAO,CAACI,OAAR,GAAkB2C,IAAlB,CAAuB,MAAM;AACjD8O,aAAO,GAAG,IAAV;AACA9P,cAAQ;AACR,KAHoB,CAArB;AAIA,WAAO8P,OAAP;AACA,GAND;AAOA;AAGM,SAASuB,aAAT,CAAuBrR,QAAvB,EAA4CmK,QAAgB,GAAG,CAA/D,EAA8E;AACpF,MAAImH,SAAJ;AAEA,QAAMC,MAAM,GAAG/C,aAAa,CAAC,MAAM;AAClC,QAAI8C,SAAJ,EAAenL,qBAAqB,CAAC,MAAM;AAAEoL,YAAM;AAAK,KAApB,CAArB,CAAf,KACKvR,QAAQ;AACbsR,aAAS,IAAI,CAAb;AACA,GAJ2B,CAA5B;AAMA,SAAO,MAAM;AACZA,aAAS,GAAGnH,QAAZ;AACAhE,yBAAqB,CAAC,MAAM;AAAEoL,YAAM;AAAK,KAApB,CAArB;AACA,GAHD;AAIA;AAMM,SAAS/C,aAAT,CAA0BxO,QAA1B,EAAuF;AAC7F,MAAImL,IAAI,GAAG,EAAX;AACA,MAAI2E,OAAJ;AAEA,SAAO,CAAC,GAAGlI,CAAJ,KAAU;AAChBuD,QAAI,GAAGvD,CAAP;AACAkI,WAAO,GAAGA,OAAO,IAAI,IAAI7R,OAAJ,CAAY,CAACuT,GAAD,EAAMC,GAAN,KAAc;AAC9CtL,2BAAqB,CAAC,MAAM;AAC3B2J,eAAO,GAAG,IAAV;;AACA,YAAI;AACH0B,aAAG,CAACxR,QAAQ,CAAC,GAAGmL,IAAJ,CAAT,CAAH;AACA,SAFD,CAEE,OAAO3M,CAAP,EAAU;AACXiT,aAAG,CAACjT,CAAD,CAAH;AACA;AACD,OAPoB,CAArB;AAQA,KAToB,CAArB;AAUA,WAAOsR,OAAP;AACA,GAbD;AAcA;AAMM,MAAM4B,0BAA0B,GAAG,CAAC,MAAM;AAChD,MAAIpD,MAAM,GAAG,EAAb;AAEA,QAAMC,GAAG,GAAGmB,QAAQ,CAAC,MAAM;AAC1B,SAAK,MAAMe,EAAX,IAAiBnC,MAAjB,EAAyB;AACxB,UAAI;AACHmC,UAAE;AACF,OAFD,CAEE,OAAOjS,CAAP,EAAU,CAAe;AAC3B;;AACD8P,UAAM,GAAG,EAAT;AACA,GAPmB,CAApB;AASA,SAAO,UAAStO,QAAT,EAA+B;AAErC,QAAI2R,MAAM,GAAG,KAAb;AAOA,WAAO,CAAC,GAAG/J,CAAJ,KAAoB;AAG1B,UAAI+J,MAAJ,EAAY;AACX1E,sBAAI,CAACqB,MAAD,EAAStO,QAAT,CAAJ;AACA,OAFD,MAEO;AACN2R,cAAM,GAAG,IAAT;AACA;;AAEDrD,YAAM,CAAC/Q,IAAP,CAAYyC,QAAZ;AACAuO,SAAG;AACH,KAXD;AAYA,GArBD;AAsBA,CAlCyC,GAAnC;AAwCA,SAASqD,YAAT,CAAyB5R,QAAzB,EAAsF;AAC5F,MAAImL,IAAI,GAAG,EAAX;AACA,MAAI2E,OAAJ;AAEA,SAAO,CAAC,GAAGlI,CAAJ,KAAU;AAChBuD,QAAI,GAAGvD,CAAP;AACAkI,WAAO,GAAGA,OAAO,IAAI,IAAI7R,OAAJ,CAAY,CAACuT,GAAD,EAAMC,GAAN,KAAc;AAC9CI,yBAAmB,CAAC,MAAM;AACzB/B,eAAO,GAAG,IAAV;;AACA,YAAI;AACH0B,aAAG,CAACxR,QAAQ,CAAC,GAAGmL,IAAJ,CAAT,CAAH;AACA,SAFD,CAEE,OAAO3M,CAAP,EAAU;AACXiT,aAAG,CAACjT,CAAD,CAAH;AACA;AACD,OAPkB,CAAnB;AAQA,KAToB,CAArB;AAUA,WAAOsR,OAAP;AACA,GAbD;AAcA,C;;;;;;;;AC9UD,QAASgC,aAAT,CAAsBjY,KAAtB,CAA6B,CAC3B,MAAOA,MAAK,EAAI,IAAT,EAAiB,MAAOA,MAAP,EAAgB,QAAxC,CACD,CAEciY,qEAAf,E;;;;;;;AC5BA;AAGA,GAAIlW,OAAM,CAAGrC,wDAAI,CAACqC,MAAlB,CAEeA,+DAAf,E;;;;;;;;;;;;;;;ACDA,GAAImW,qBAAoB,CAAG,CAA3B,CACIC,sBAAsB,CAAG,CAD7B,CAaA,QAASC,YAAT,CAAqB9X,MAArB,CAA6ByC,MAA7B,CAAqCsV,SAArC,CAAgDtX,UAAhD,CAA4D,CAC1D,GAAIE,MAAK,CAAGoX,SAAS,CAACnX,MAAtB,CACIA,MAAM,CAAGD,KADb,CAEIqX,YAAY,CAAG,CAACvX,UAFpB,CAIA,GAAIT,MAAM,EAAI,IAAd,CAAoB,CAClB,MAAO,CAACY,MAAR,CACD,CACDZ,MAAM,CAAGb,MAAM,CAACa,MAAD,CAAf,CACA,MAAOW,KAAK,EAAZ,CAAgB,CACd,GAAIsX,KAAI,CAAGF,SAAS,CAACpX,KAAD,CAApB,CACA,GAAKqX,YAAY,EAAIC,IAAI,CAAC,CAAD,CAArB,CACIA,IAAI,CAAC,CAAD,CAAJ,GAAYjY,MAAM,CAACiY,IAAI,CAAC,CAAD,CAAL,CADtB,CAEI,EAAEA,IAAI,CAAC,CAAD,CAAJ,EAAWjY,OAAb,CAFR,CAGM,CACJ,MAAO,MAAP,CACD,CACF,CACD,MAAO,EAAEW,KAAF,CAAUC,MAAjB,CAAyB,CACvBqX,IAAI,CAAGF,SAAS,CAACpX,KAAD,CAAhB,CACA,GAAIV,IAAG,CAAGgY,IAAI,CAAC,CAAD,CAAd,CACI/X,QAAQ,CAAGF,MAAM,CAACC,GAAD,CADrB,CAEIiY,QAAQ,CAAGD,IAAI,CAAC,CAAD,CAFnB,CAIA,GAAID,YAAY,EAAIC,IAAI,CAAC,CAAD,CAAxB,CAA6B,CAC3B,GAAI/X,QAAQ,GAAKG,SAAb,EAA0B,EAAEJ,GAAG,GAAID,OAAT,CAA9B,CAAgD,CAC9C,MAAO,MAAP,CACD,CACF,CAJD,IAIO,CACL,GAAImY,MAAK,CAAG,GAAIC,0BAAJ,EAAZ,CACA,GAAI3X,UAAJ,CAAgB,CACd,GAAIW,OAAM,CAAGX,UAAU,CAACP,QAAD,CAAWgY,QAAX,CAAqBjY,GAArB,CAA0BD,MAA1B,CAAkCyC,MAAlC,CAA0C0V,KAA1C,CAAvB,CACD,CACD,GAAI,EAAE/W,MAAM,GAAKf,SAAX,CACEgY,uCAAW,CAACH,QAAD,CAAWhY,QAAX,CAAqB0X,oBAAoB,CAAGC,sBAA5C,CAAoEpX,UAApE,CAAgF0X,KAAhF,CADb,CAEE/W,MAFJ,CAAJ,CAGO,CACL,MAAO,MAAP,CACD,CACF,CACF,CACD,MAAO,KAAP,CACD,CAEc0W,4DAAf,E;;;;;ACnDA,QAASQ,mBAAT,CAA4B5Y,KAA5B,CAAmC,CACjC,MAAOA,MAAK,GAAKA,KAAV,EAAmB,CAACD,mCAAQ,CAACC,KAAD,CAAnC,CACD,CAEc4Y,0EAAf,E;;;;;ACJA,QAASC,aAAT,CAAsBvY,MAAtB,CAA8B,CAC5B,GAAIoB,OAAM,CAAGoX,+BAAI,CAACxY,MAAD,CAAjB,CACIY,MAAM,CAAGQ,MAAM,CAACR,MADpB,CAGA,MAAOA,MAAM,EAAb,CAAiB,CACf,GAAIX,IAAG,CAAGmB,MAAM,CAACR,MAAD,CAAhB,CACIlB,KAAK,CAAGM,MAAM,CAACC,GAAD,CADlB,CAGAmB,MAAM,CAACR,MAAD,CAAN,CAAiB,CAACX,GAAD,CAAMP,KAAN,CAAa4Y,mBAAkB,CAAC5Y,KAAD,CAA/B,CAAjB,CACD,CACD,MAAO0B,OAAP,CACD,CAEcmX,8DAAf,E;;ACdA,QAASE,wBAAT,CAAiCxY,GAAjC,CAAsCiY,QAAtC,CAAgD,CAC9C,MAAO,UAASlY,MAAT,CAAiB,CACtB,GAAIA,MAAM,EAAI,IAAd,CAAoB,CAClB,MAAO,MAAP,CACD,CACD,MAAOA,OAAM,CAACC,GAAD,CAAN,GAAgBiY,QAAhB,GACJA,QAAQ,GAAK7X,SAAb,EAA2BJ,GAAG,GAAId,OAAM,CAACa,MAAD,CADpC,CAAP,CAED,CAND,CAOD,CAEcyY,oFAAf,E;;ACRA,QAASC,YAAT,CAAqBjW,MAArB,CAA6B,CAC3B,GAAIsV,UAAS,CAAGQ,aAAY,CAAC9V,MAAD,CAA5B,CACA,GAAIsV,SAAS,CAACnX,MAAV,EAAoB,CAApB,EAAyBmX,SAAS,CAAC,CAAD,CAAT,CAAa,CAAb,CAA7B,CAA8C,CAC5C,MAAOU,yBAAuB,CAACV,SAAS,CAAC,CAAD,CAAT,CAAa,CAAb,CAAD,CAAkBA,SAAS,CAAC,CAAD,CAAT,CAAa,CAAb,CAAlB,CAA9B,CACD,CACD,MAAO,UAAS/X,MAAT,CAAiB,CACtB,MAAOA,OAAM,GAAKyC,MAAX,EAAqBqV,YAAW,CAAC9X,MAAD,CAASyC,MAAT,CAAiBsV,SAAjB,CAAvC,CACD,CAFD,CAGD,CAEcW,4DAAf,E;;;;;ACMA,QAASjC,IAAT,CAAazW,MAAb,CAAqBQ,IAArB,CAA2BmY,YAA3B,CAAyC,CACvC,GAAIvX,OAAM,CAAGpB,MAAM,EAAI,IAAV,CAAiBK,SAAjB,CAA6BgB,mCAAO,CAACrB,MAAD,CAASQ,IAAT,CAAjD,CACA,MAAOY,OAAM,GAAKf,SAAX,CAAuBsY,YAAvB,CAAsCvX,MAA7C,CACD,CAEcqV,qDAAf,E;;;;;;;;;;;ACvBA,GAAImB,0CAAoB,CAAG,CAA3B,CACIC,2CAAsB,CAAG,CAD7B,CAWA,QAASe,oBAAT,CAA6BpY,IAA7B,CAAmC0X,QAAnC,CAA6C,CAC3C,GAAIW,iCAAK,CAACrY,IAAD,CAAL,EAAe8X,mBAAkB,CAACJ,QAAD,CAArC,CAAiD,CAC/C,MAAOO,yBAAuB,CAAC3X,iCAAK,CAACN,IAAD,CAAN,CAAc0X,QAAd,CAA9B,CACD,CACD,MAAO,UAASlY,MAAT,CAAiB,CACtB,GAAIE,SAAQ,CAAGuW,aAAG,CAACzW,MAAD,CAASQ,IAAT,CAAlB,CACA,MAAQN,SAAQ,GAAKG,SAAb,EAA0BH,QAAQ,GAAKgY,QAAxC,CACH3W,gCAAK,CAACvB,MAAD,CAASQ,IAAT,CADF,CAEH6X,uCAAW,CAACH,QAAD,CAAWhY,QAAX,CAAqB0X,yCAAoB,CAAGC,2CAA5C,CAFf,CAGD,CALD,CAMD,CAEce,4EAAf,E;;;;;;;;;;;ACvBA,QAASE,iBAAT,CAA0BtY,IAA1B,CAAgC,CAC9B,MAAO,UAASR,MAAT,CAAiB,CACtB,MAAOqB,oCAAO,CAACrB,MAAD,CAASQ,IAAT,CAAd,CACD,CAFD,CAGD,CAEcsY,sEAAf,E;;ACYA,QAASC,SAAT,CAAkBvY,IAAlB,CAAwB,CACtB,MAAOqY,kCAAK,CAACrY,IAAD,CAAL,CAAcwY,wCAAY,CAAClY,iCAAK,CAACN,IAAD,CAAN,CAA1B,CAA0CsY,iBAAgB,CAACtY,IAAD,CAAjE,CACD,CAEcuY,+DAAf,E;;AClBA,QAASnJ,aAAT,CAAsBlQ,KAAtB,CAA6B,CAG3B,GAAI,MAAOA,MAAP,EAAgB,UAApB,CAAgC,CAC9B,MAAOA,MAAP,CACD,CACD,GAAIA,KAAK,EAAI,IAAb,CAAmB,CACjB,MAAOuZ,4BAAP,CACD,CACD,GAAI,MAAOvZ,MAAP,EAAgB,QAApB,CAA8B,CAC5B,MAAOH,mCAAO,CAACG,KAAD,CAAP,CACHkZ,oBAAmB,CAAClZ,KAAK,CAAC,CAAD,CAAN,CAAWA,KAAK,CAAC,CAAD,CAAhB,CADhB,CAEHgZ,YAAW,CAAChZ,KAAD,CAFf,CAGD,CACD,MAAOqZ,mBAAQ,CAACrZ,KAAD,CAAf,CACD,CAEckQ,yFAAf,E;;;;;;;;;;;;;;;AC3BA,GAAIsJ,WAAU,CAAG9Z,wBAAI,CAAC,oBAAD,CAArB,CAEe8Z,0DAAf,E;;ACFA,GAAIC,WAAU,CAAI,UAAW,CAC3B,GAAIC,IAAG,CAAG,SAASC,IAAT,CAAcH,WAAU,EAAIA,WAAU,CAACV,IAAzB,EAAiCU,WAAU,CAACV,IAAX,CAAgBc,QAAjD,EAA6D,EAA3E,CAAV,CACA,MAAOF,IAAG,CAAI,iBAAmBA,GAAvB,CAA8B,EAAxC,CACD,CAHiB,EAAlB,CAYA,QAASG,SAAT,CAAkBnX,IAAlB,CAAwB,CACtB,MAAO,CAAC,CAAC+W,UAAF,EAAiBA,UAAU,GAAI/W,KAAtC,CACD,CAEcmX,sDAAf,E;;;;;;;;ACVA,GAAIC,aAAY,CAAG,qBAAnB,CAGA,GAAIC,aAAY,CAAG,6BAAnB,CAGA,GAAIC,UAAS,CAAGpa,QAAQ,CAACO,SAAzB,CACID,WAAW,CAAGT,MAAM,CAACU,SADzB,CAIA,GAAI8Z,aAAY,CAAGD,SAAS,CAACE,QAA7B,CAGA,GAAI9Z,6BAAc,CAAGF,WAAW,CAACE,cAAjC,CAGA,GAAI+Z,WAAU,CAAGC,MAAM,CAAC,IACtBH,YAAY,CAACxZ,IAAb,CAAkBL,4BAAlB,EAAkCia,OAAlC,CAA0CP,YAA1C,CAAwD,MAAxD,EACCO,OADD,CACS,wDADT,CACmE,OADnE,CADsB,CAEwD,GAFzD,CAAvB,CAaA,QAASC,aAAT,CAAsBta,KAAtB,CAA6B,CAC3B,GAAI,CAACD,mCAAQ,CAACC,KAAD,CAAT,EAAoB6Z,SAAQ,CAAC7Z,KAAD,CAAhC,CAAyC,CACvC,MAAO,MAAP,CACD,CACD,GAAIua,QAAO,CAAGC,qCAAU,CAACxa,KAAD,CAAV,CAAoBma,UAApB,CAAiCJ,YAA/C,CACA,MAAOQ,QAAO,CAACE,IAAR,CAAaC,oCAAQ,CAAC1a,KAAD,CAArB,CAAP,CACD,CAEcsa,8DAAf,E;;ACtCA,QAASK,SAAT,CAAkBra,MAAlB,CAA0BC,GAA1B,CAA+B,CAC7B,MAAOD,OAAM,EAAI,IAAV,CAAiBK,SAAjB,CAA6BL,MAAM,CAACC,GAAD,CAA1C,CACD,CAEcoa,sDAAf,E;;ACDA,QAASC,UAAT,CAAmBta,MAAnB,CAA2BC,GAA3B,CAAgC,CAC9B,GAAIP,MAAK,CAAG2a,SAAQ,CAACra,MAAD,CAASC,GAAT,CAApB,CACA,MAAO+Z,cAAY,CAACta,KAAD,CAAZ,CAAsBA,KAAtB,CAA8BW,SAArC,CACD,CAEcia,mFAAf,E;;;;;;;AChBA;AAGA,GAAIC,SAAQ,CAAG,EAAI,CAAnB,CASA,QAASzZ,MAAT,CAAepB,KAAf,CAAsB,CACpB,GAAI,MAAOA,MAAP,EAAgB,QAAhB,EAA4B8a,oEAAQ,CAAC9a,KAAD,CAAxC,CAAiD,CAC/C,MAAOA,MAAP,CACD,CACD,GAAI0B,OAAM,CAAI1B,KAAK,CAAG,EAAtB,CACA,MAAQ0B,OAAM,EAAI,GAAV,EAAkB,EAAI1B,KAAL,EAAe,CAAC6a,QAAlC,CAA8C,IAA9C,CAAqDnZ,MAA5D,CACD,CAEcN,8DAAf,E;;;;;;;ACnBA,GAAI2Z,iBAAgB,CAAG,gBAAvB,CAGA,GAAIC,SAAQ,CAAG,kBAAf,CAUA,QAAS1Z,QAAT,CAAiBtB,KAAjB,CAAwBkB,MAAxB,CAAgC,CAC9B,GAAIjB,KAAI,CAAG,MAAOD,MAAlB,CACAkB,MAAM,CAAGA,MAAM,EAAI,IAAV,CAAiB6Z,gBAAjB,CAAoC7Z,MAA7C,CAEA,MAAO,CAAC,CAACA,MAAF,GACJjB,IAAI,EAAI,QAAR,EACEA,IAAI,EAAI,QAAR,EAAoB+a,QAAQ,CAACP,IAAT,CAAcza,KAAd,CAFlB,GAGAA,KAAK,CAAG,CAAC,CAAT,EAAcA,KAAK,CAAG,CAAR,EAAa,CAA3B,EAAgCA,KAAK,CAAGkB,MAH/C,CAID,CAEcI,gEAAf,E;;;;;;;;;;;;ACrBA,GAAIpB,YAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,0BAAc,CAAGF,WAAW,CAACE,cAAjC,CAOA,GAAI6a,qBAAoB,CAAG/a,WAAW,CAACga,QAAvC,CAGA,GAAIgB,eAAc,CAAGnZ,0BAAM,CAAGA,0BAAM,CAACoZ,WAAV,CAAwBxa,SAAnD,CASA,QAASya,UAAT,CAAmBpb,KAAnB,CAA0B,CACxB,GAAIqb,MAAK,CAAGjb,yBAAc,CAACK,IAAf,CAAoBT,KAApB,CAA2Bkb,cAA3B,CAAZ,CACII,GAAG,CAAGtb,KAAK,CAACkb,cAAD,CADf,CAGA,GAAI,CACFlb,KAAK,CAACkb,cAAD,CAAL,CAAwBva,SAAxB,CACA,GAAI4a,SAAQ,CAAG,IAAf,CACD,CAAC,MAAO5W,CAAP,CAAU,CAAE,CAEd,GAAIjD,OAAM,CAAGuZ,oBAAoB,CAACxa,IAArB,CAA0BT,KAA1B,CAAb,CACA,GAAIub,QAAJ,CAAc,CACZ,GAAIF,KAAJ,CAAW,CACTrb,KAAK,CAACkb,cAAD,CAAL,CAAwBI,GAAxB,CACD,CAFD,IAEO,CACL,MAAOtb,MAAK,CAACkb,cAAD,CAAZ,CACD,CACF,CACD,MAAOxZ,OAAP,CACD,CAEc0Z,wDAAf,E;;AC5CA,GAAIlb,4BAAW,CAAGT,MAAM,CAACU,SAAzB,CAOA,GAAI8a,qCAAoB,CAAG/a,2BAAW,CAACga,QAAvC,CASA,QAASsB,eAAT,CAAwBxb,KAAxB,CAA+B,CAC7B,MAAOib,qCAAoB,CAACxa,IAArB,CAA0BT,KAA1B,CAAP,CACD,CAEcwb,kEAAf,E;;AChBA,GAAIC,QAAO,CAAG,eAAd,CACIC,YAAY,CAAG,oBADnB,CAIA,GAAIR,2BAAc,CAAGnZ,0BAAM,CAAGA,0BAAM,CAACoZ,WAAV,CAAwBxa,SAAnD,CASA,QAASgb,WAAT,CAAoB3b,KAApB,CAA2B,CACzB,GAAIA,KAAK,EAAI,IAAb,CAAmB,CACjB,MAAOA,MAAK,GAAKW,SAAV,CAAsB+a,YAAtB,CAAqCD,OAA5C,CACD,CACD,MAAQP,2BAAc,EAAIA,0BAAc,GAAIzb,OAAM,CAACO,KAAD,CAA3C,CACHob,UAAS,CAACpb,KAAD,CADN,CAEHwb,eAAc,CAACxb,KAAD,CAFlB,CAGD,CAEc2b,qFAAf,E;;;;;;;;;;;;;;;;;;ACjBA,QAASC,gBAAT,CAAyBxZ,KAAzB,CAAgCyZ,MAAhC,CAAwClJ,QAAxC,CAAkDmJ,WAAlD,CAA+D,CAC7D,GAAI7a,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGkB,KAAK,EAAI,IAAT,CAAgB,CAAhB,CAAoBA,KAAK,CAAClB,MADvC,CAGA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIlB,MAAK,CAAGoC,KAAK,CAACnB,KAAD,CAAjB,CACA4a,MAAM,CAACC,WAAD,CAAc9b,KAAd,CAAqB2S,QAAQ,CAAC3S,KAAD,CAA7B,CAAsCoC,KAAtC,CAAN,CACD,CACD,MAAO0Z,YAAP,CACD,CAEcF,oEAAf,E;;;;;;;;ACXA,QAASG,eAAT,CAAwBC,QAAxB,CAAkCC,SAAlC,CAA6C,CAC3C,MAAO,UAASjH,UAAT,CAAqBrC,QAArB,CAA+B,CACpC,GAAIqC,UAAU,EAAI,IAAlB,CAAwB,CACtB,MAAOA,WAAP,CACD,CACD,GAAI,CAAC7R,sCAAW,CAAC6R,UAAD,CAAhB,CAA8B,CAC5B,MAAOgH,SAAQ,CAAChH,UAAD,CAAarC,QAAb,CAAf,CACD,CACD,GAAIzR,OAAM,CAAG8T,UAAU,CAAC9T,MAAxB,CACID,KAAK,CAAGgb,SAAS,CAAG/a,MAAH,CAAY,CAAC,CADlC,CAEI+T,QAAQ,CAAGxV,MAAM,CAACuV,UAAD,CAFrB,CAIA,MAAQiH,SAAS,CAAGhb,KAAK,EAAR,CAAa,EAAEA,KAAF,CAAUC,MAAxC,CAAiD,CAC/C,GAAIyR,QAAQ,CAACsC,QAAQ,CAAChU,KAAD,CAAT,CAAkBA,KAAlB,CAAyBgU,QAAzB,CAAR,GAA+C,KAAnD,CAA0D,CACxD,MACD,CACF,CACD,MAAOD,WAAP,CACD,CAjBD,CAkBD,CAEc+G,kEAAf,E;;ACpBA,GAAIG,SAAQ,CAAGH,eAAc,CAACI,8BAAD,CAA7B,CAEeD,sDAAf,E;;ACAA,QAASE,eAAT,CAAwBpH,UAAxB,CAAoC6G,MAApC,CAA4ClJ,QAA5C,CAAsDmJ,WAAtD,CAAmE,CACjEI,SAAQ,CAAClH,UAAD,CAAa,SAAShV,KAAT,CAAgBO,GAAhB,CAAqByU,UAArB,CAAiC,CACpD6G,MAAM,CAACC,WAAD,CAAc9b,KAAd,CAAqB2S,QAAQ,CAAC3S,KAAD,CAA7B,CAAsCgV,UAAtC,CAAN,CACD,CAFO,CAAR,CAGA,MAAO8G,YAAP,CACD,CAEcM,kEAAf,E;;;;;;;;ACPA,QAASC,iBAAT,CAA0BR,MAA1B,CAAkCS,WAAlC,CAA+C,CAC7C,MAAO,UAAStH,UAAT,CAAqBrC,QAArB,CAA+B,CACpC,GAAIjQ,KAAI,CAAG7C,kCAAO,CAACmV,UAAD,CAAP,CAAsB4G,gBAAtB,CAAwCQ,eAAnD,CACIN,WAAW,CAAGQ,WAAW,CAAGA,WAAW,EAAd,CAAmB,EADhD,CAGA,MAAO5Z,KAAI,CAACsS,UAAD,CAAa6G,MAAb,CAAqB3L,wCAAY,CAACyC,QAAD,CAAW,CAAX,CAAjC,CAAgDmJ,WAAhD,CAAX,CACD,CALD,CAMD,CAEcO,sEAAf,E;;ACgBA,GAAIE,UAAS,CAAGF,iBAAgB,CAAC,SAAS3a,MAAT,CAAiB1B,KAAjB,CAAwBO,GAAxB,CAA6B,CAC5DmB,MAAM,CAACnB,GAAG,CAAG,CAAH,CAAO,CAAX,CAAN,CAAoBmD,IAApB,CAAyB1D,KAAzB,EACD,CAF+B,CAE7B,UAAW,CAAE,MAAO,CAAC,EAAD,CAAK,EAAL,CAAP,CAAkB,CAFF,CAAhC,CAIeuc,iEAAf,E;;;;;;;;;;;ACxCA;AACA;AAEO,SAASC,mBAAT,CAA6BC,QAA7B,EAA2EC,QAA4C,GAAG,EAA1H,EAAuI;AAC7I,QAAM,CAACC,cAAD,EAAiBC,cAAjB,IAAwCL,mBAAS,CAACE,QAAD,EAAY3F,CAAD,IAAiC,OAAOA,CAAP,KAAa,QAAzD,CAAvD;AACA,QAAM,CAAC+F,cAAD,EAAiBC,cAAjB,IAAwCP,mBAAS,CAACG,QAAD,EAAY5F,CAAD,IAAiC,OAAOA,CAAP,KAAa,QAAzD,CAAvD;AAEA,SAAO,CACN,CAAC4F,QAAQ,CAACxb,MAAV,IACA,EAAE6b,UAAU,CAAC,GAAGF,cAAJ,CAAV,IAAiCG,SAAS,CAAC,GAAGH,cAAJ,CAA1C,IAAiEI,gBAAgB,CAAC,GAAGH,cAAJ,CAAnF,CAFM,MAIN,CAACL,QAAQ,CAACvb,MAAV,IACC6b,UAAU,CAAC,GAAGJ,cAAJ,CAAV,IAAiCK,SAAS,CAAC,GAAGL,cAAJ,CAA1C,IAAiEM,gBAAgB,CAAC,GAAGL,cAAJ,CAL5E,CAAP;AAOA;AAGM,MAAMM,OAA6B,GAAG;AAC5CC,WAAS,EAAS,mDAD0B;AAE5CC,UAAQ,EAAU,4EAF0B;AAG5CC,kBAAgB,EAAE,uDAH0B;AAI5CC,OAAK,EAAa,wCAJ0B;AAK5CC,SAAO,EAAW,gDAL0B;AAM5CC,WAAS,EAAS,gDAN0B;AAO5CC,qBAAmB,EAAE,oDAPuB;AAQ5CC,QAAM,EAAY,yCAR0B;AAS5CC,OAAK,EAAa,mBAT0B;AAU5CC,SAAO,EAAW,8BAV0B;AAW5CC,MAAI,EAAc,qCAX0B;AAY5CC,YAAU,EAAQ,iDAZ0B;AAa5CC,QAAM,EAAY,gGAb0B;AAc5CC,kBAAgB,EAAE,2EAd0B;AAe5CC,YAAU,EAAQ,2CAf0B;AAgB5CC,WAAS,EAAS,4BAhB0B;AAiB5CC,gBAAc,EAAI,6EAjB0B;AAkB5CC,UAAQ,EAAU,2FAlB0B;AAmB5CC,aAAW,EAAO,qDAnB0B;AAoB5CC,QAAM,EAAY,+BApB0B;AAqB5CC,gBAAc,EAAI,mDArB0B;AAsB5CC,YAAU,EAAQ;AAtB0B,CAAtC;AA0BA,MAAMC,WAAsD,GAAG;AACrErB,UAAQ,EAAEtc,IAAI,IAAI;AACjB,UAAM4d,KAAK,GAAGxB,OAAO,CAACE,QAAR,CAAiBzD,IAAjB,CAAsB7Y,IAAtB,CAAd;AACA,QAAI,CAAC4d,KAAL,EAAY,OAAOA,KAAP;AACZA,SAAK,CAAC7O,MAAN,CAAa,CAAb,EAAgB,CAAhB,EAAmB6O,KAAK,CAAC,CAAD,CAAL,IAAYA,KAAK,CAAC,CAAD,CAAL,IAAYA,KAAK,CAAC,CAAD,CAAL,CAASrE,OAAT,CAAiB,QAAjB,EAA2B,IAA3B,CAA3C;AACA,WAAOqE,KAAP;AACA;AANoE,CAA/D;AAYA,MAAMC,OAAO,GAAGzT,+BAAI,CAAC,MAAe;AAC1C,MAAI5D,QAAQ,CAACC,eAAT,CAAyBqX,YAAzB,CAAsC,aAAtC,CAAJ,EAA0D;AACzD,WAAO,SAAP;AACA;;AACD,MAAItX,QAAQ,CAACC,eAAT,CAAyBsX,YAAzB,CAAsC,OAAtC,CAAJ,EAAoD;AACnD,WAAO,IAAP;AACA;;AACD,SAAO,KAAP;AACA,CAR0B,CAApB;AAUA,SAAS7B,SAAT,CAAmB,GAAG8B,KAAtB,EAAiD;AACvD,QAAMC,OAAO,GAAGJ,OAAO,EAAvB;AACA,SAAOG,KAAK,CAAC7K,IAAN,CAAWhU,IAAI,IAAIA,IAAI,KAAK8e,OAA5B,CAAP;AACA;AAED,MAAMC,YAA4E,GAAG;AACpFC,IAAE,EAAE;AACHC,WAAO,EAAE,UADN;AAEHC,aAAS,EAAE,CAAC,MAAD,EAAS,QAAT,EAAmB,YAAnB,EAAiC,UAAjC,EAA6C,gBAA7C,EAA+D,UAA/D,EAA2E,kBAA3E,EAA+F,SAA/F,EAA0G,YAA1G,EAAwH,OAAxH,EAAiI,QAAjI,EAA2I,SAA3I,EAAsJ,OAAtJ;AAFR,GADgF;AAKpFC,KAAG,EAAE;AACJD,aAAS,EAAE,CAAC,WAAD,EAAc,qBAAd,EAAqC,QAArC;AADP,GAL+E;AAQpF3O,SAAO,EAAE;AACR2O,aAAS,EAAE;AADH;AAR2E,CAArF;AAaO,MAAME,QAAQ,GAAGpW,kCAAO,CAAC,MAAiB;AAChDhF,qCAAY,CAACqD,QAAD,EAAW,mBAAX,CAAZ,CAA4CH,IAA5C,CAAiD,MAAM;AACtDkY,YAAQ,CAAClW,KAAT,CAAeC,KAAf;AACA,GAFD;AAGA,QAAMkW,IAAI,GAAGN,YAAY,CAACL,OAAO,EAAR,CAAzB;AACA,SAAOW,IAAI,CAACH,SAAL,CAAeja,IAAf,CAAoBma,QAAQ,IAAInC,OAAO,CAACmC,QAAD,CAAP,CAAkB5E,IAAlB,CAAuB8E,QAAQ,CAACC,QAAhC,CAAhC,KAA8EF,IAAI,CAACJ,OAA1F;AACA,CAN8B,CAAxB;AAQA,SAASnC,UAAT,CAAoB,GAAG+B,KAAvB,EAAmD;AACzD,QAAMW,QAAQ,GAAGJ,QAAQ,EAAzB;AACA,SAAOP,KAAK,CAAC7K,IAAN,CAAWhU,IAAI,IAAIA,IAAI,KAAKwf,QAA5B,CAAP;AACA;AAEM,SAASxC,gBAAT,CAA0B,GAAGyC,OAA7B,EAAyD;AAC/D,SAAOA,OAAO,CAACzL,IAAR,CAAa0L,KAAK,IAAIA,KAAK,CAAClF,IAAN,CAAW8E,QAAQ,CAACC,QAApB,CAAtB,CAAP;AACA;AAEM,MAAMI,gBAAgB,GAAG1U,+BAAI,CAAC,MAAqB;AACzD,QAAMwT,KAAK,GAAGa,QAAQ,CAACC,QAAT,CAAkBd,KAAlB,CAAwBxB,OAAO,CAACgB,SAAhC,CAAd;AACA,MAAIQ,KAAJ,EAAW,OAAOA,KAAK,CAAC,CAAD,CAAZ;AACX,CAHmC,CAA7B;AAKA,SAASmB,kBAAT,CAA4B,GAAGC,UAA/B,EAA8D;AACpE,QAAMC,GAAG,GAAG,CAACH,gBAAgB,MAAM,EAAvB,EAA2BI,WAA3B,EAAZ;AACA,MAAI,CAACD,GAAL,EAAU,OAAO,KAAP;AACV,SAAOD,UAAU,CAAC7L,IAAX,CAAgBgM,CAAC,IAAIA,CAAC,CAACD,WAAF,OAAoBD,GAAzC,CAAP;AACA;AAEM,MAAMG,kBAAkB,GAAGhV,+BAAI,CAAC,MAAqB;AAC3D,QAAMwT,KAAK,GAAGa,QAAQ,CAACC,QAAT,CAAkBd,KAAlB,CAAwBxB,OAAO,CAACmB,WAAhC,CAAd;AACA,MAAIK,KAAJ,EAAW,OAAOA,KAAK,CAAC,CAAD,CAAZ;AACX,CAHqC,CAA/B;AAKA,SAASyB,oBAAT,CAA8B,GAAGC,YAAjC,EAAkE;AACxE,QAAMC,KAAK,GAAG,CAACH,kBAAkB,MAAM,EAAzB,EAA6BF,WAA7B,EAAd;AACA,MAAI,CAACK,KAAL,EAAY,OAAO,KAAP;AACZ,SAAOD,YAAY,CAACnM,IAAb,CAAkBgM,CAAC,IAAIA,CAAC,CAACD,WAAF,OAAoBK,KAA3C,CAAP;AACA;AAEM,MAAMC,aAAa,GAAGpV,+BAAI,CAAC,MAAqB;AACtD,QAAMwT,KAAK,GAAGa,QAAQ,CAACC,QAAT,CAAkBd,KAAlB,CAAwBxB,OAAO,CAACoB,MAAhC,CAAd;AACA,MAAII,KAAJ,EAAW,OAAOA,KAAK,CAAC,CAAD,CAAZ;AACX,CAHgC,CAA1B;AAKA,MAAM6B,kBAAkB,GAAGrV,+BAAI,CAAC,MAAqB;AAC3D,QAAMwT,KAAK,GAAGa,QAAQ,CAACC,QAAT,CAAkBd,KAAlB,CAAwBxB,OAAO,CAACK,OAAhC,CAAd;AACA,MAAImB,KAAJ,EAAW,OAAOA,KAAK,CAAC,CAAD,CAAZ;AACX,CAHqC,CAA/B;AAKA,MAAM8B,YAAY,GAAG,CAAChB,QAAgB,GAAGD,QAAQ,CAACC,QAA7B,KAA0C;AACrE,QAAMG,KAAK,GAAGlgB,MAAM,CAACqZ,IAAP,CAAYoE,OAAZ,EAAqBhY,IAArB,CAA0B3E,GAAG,IAAIif,QAAQ,CAACd,KAAT,CAAexB,OAAO,CAAC3c,GAAD,CAAtB,CAAjC,CAAd;AACA,MAAI,CAACof,KAAL,EAAY,OAAOH,QAAQ,CAACQ,WAAT,EAAP;AAGZ,SAAO,CACNL,KADM,EAEN,GAAG,CAACH,QAAQ,CAACd,KAAT,CAAexB,OAAO,CAACyC,KAAD,CAAtB,KAAkC,EAAnC,EAAuCc,KAAvC,CAA6C,CAA7C,CAFG,EAILra,MAJK,CAIE6Z,CAAC,IAAIA,CAJP,EAKLS,IALK,CAKA,GALA,EAMLV,WANK,EAAP;AAOA,CAZM;AAuBP,MAAMW,kBAAkB,GAAG,WAA3B;AAEO,SAASC,aAAT,CAAuBC,IAAvB,EAAyD;AAM/D,QAAMC,IAAI,GAAGD,IAAI,CAAChC,YAAL,CAAkB,MAAlB,CAAb;AAEA,QAAMkC,SAAS,GAAGF,IAAI,CAACvS,WAAL,CAAiBpN,MAAjB,KAA4B,CAA9C;AACA,QAAM0f,aAAa,GAAGD,kBAAkB,CAAClG,IAAnB,CAAwBqG,IAAxB,CAAtB;AAEA,SAAOC,SAAS,IAAIH,aAApB;AACA;AAEM,SAASI,WAAT,CAAqBH,IAArB,EAAuD;AAG7D,QAAMC,IAAI,GAAGD,IAAI,CAAChC,YAAL,CAAkB,MAAlB,CAAb;AACA,SAAO,OAAOiC,IAAP,KAAgB,QAAhB,IAA4BA,IAAI,CAACG,UAAL,CAAgB,aAAhB,CAA5B,IAA8DH,IAAI,KAAK,GAA9E;AACA;AAEM,MAAMI,sBAAsB,GAAGhW,+BAAI,CAAC,MAAM5D,QAAQ,CAACsC,IAAT,CAAcuX,SAAd,CAAwBla,QAAxB,CAAiC,YAAjC,CAAP,CAAnC,C;;;;;;;ACpLP;AAAA;AA4BA,QAAS9D,YAAT,CAAqBnD,KAArB,CAA4B,CAC1B,MAAOA,MAAK,EAAI,IAAT,EAAiBohB,oEAAQ,CAACphB,KAAK,CAACkB,MAAP,CAAzB,EAA2C,CAACsZ,sEAAU,CAACxa,KAAD,CAA7D,CACD,CAEcmD,oEAAf,E;;;;;;;;;;;;;;;;;;AC7BA,GAAIke,iBAAgB,CAAG,GAAvB,CAUA,QAASC,cAAT,CAAuB5e,IAAvB,CAA6B,CAC3B,GAAIhB,OAAM,CAAGuH,kCAAO,CAACvG,IAAD,CAAO,SAASnC,GAAT,CAAc,CACvC,GAAI4I,KAAK,CAACgM,IAAN,GAAekM,gBAAnB,CAAqC,CACnClY,KAAK,CAACC,KAAN,GACD,CACD,MAAO7I,IAAP,CACD,CALmB,CAApB,CAOA,GAAI4I,MAAK,CAAGzH,MAAM,CAACyH,KAAnB,CACA,MAAOzH,OAAP,CACD,CAEc4f,gEAAf,E;;ACtBA,GAAIC,WAAU,CAAG,kGAAjB,CAGA,GAAIC,aAAY,CAAG,UAAnB,CASA,GAAIC,aAAY,CAAGH,cAAa,CAAC,SAASI,MAAT,CAAiB,CAChD,GAAIhgB,OAAM,CAAG,EAAb,CACA,GAAIggB,MAAM,CAACC,UAAP,CAAkB,CAAlB,IAAyB,EAA7B,CAAyC,CACvCjgB,MAAM,CAACgC,IAAP,CAAY,EAAZ,EACD,CACDge,MAAM,CAACrH,OAAP,CAAekH,UAAf,CAA2B,SAAS7C,KAAT,CAAgBkD,MAAhB,CAAwBC,KAAxB,CAA+BC,SAA/B,CAA0C,CACnEpgB,MAAM,CAACgC,IAAP,CAAYme,KAAK,CAAGC,SAAS,CAACzH,OAAV,CAAkBmH,YAAlB,CAAgC,IAAhC,CAAH,CAA4CI,MAAM,EAAIlD,KAAvE,EACD,CAFD,EAGA,MAAOhd,OAAP,CACD,CAT+B,CAAhC,CAWe+f,8DAAf,E;;;;;;;;;;;ACpBA,GAAI5G,SAAQ,CAAG,EAAI,CAAnB,CAGA,GAAIkH,YAAW,CAAGhgB,0BAAM,CAAGA,0BAAM,CAAC5B,SAAV,CAAsBQ,SAA9C,CACIqhB,cAAc,CAAGD,WAAW,CAAGA,WAAW,CAAC7H,QAAf,CAA0BvZ,SAD1D,CAWA,QAASshB,aAAT,CAAsBjiB,KAAtB,CAA6B,CAE3B,GAAI,MAAOA,MAAP,EAAgB,QAApB,CAA8B,CAC5B,MAAOA,MAAP,CACD,CACD,GAAIH,kCAAO,CAACG,KAAD,CAAX,CAAoB,CAElB,MAAOgT,qCAAQ,CAAChT,KAAD,CAAQiiB,YAAR,CAAR,CAAgC,EAAvC,CACD,CACD,GAAInH,mCAAQ,CAAC9a,KAAD,CAAZ,CAAqB,CACnB,MAAOgiB,eAAc,CAAGA,cAAc,CAACvhB,IAAf,CAAoBT,KAApB,CAAH,CAAgC,EAArD,CACD,CACD,GAAI0B,OAAM,CAAI1B,KAAK,CAAG,EAAtB,CACA,MAAQ0B,OAAM,EAAI,GAAV,EAAkB,EAAI1B,KAAL,EAAe,CAAC6a,QAAlC,CAA8C,IAA9C,CAAqDnZ,MAA5D,CACD,CAEcugB,8DAAf,E;;ACbA,QAAS/H,kBAAT,CAAkBla,KAAlB,CAAyB,CACvB,MAAOA,MAAK,EAAI,IAAT,CAAgB,EAAhB,CAAqBiiB,aAAY,CAACjiB,KAAD,CAAxC,CACD,CAEcka,wEAAf,E;;ACdA,QAASlZ,SAAT,CAAkBhB,KAAlB,CAAyBM,MAAzB,CAAiC,CAC/B,GAAIT,kCAAO,CAACG,KAAD,CAAX,CAAoB,CAClB,MAAOA,MAAP,CACD,CACD,MAAOmZ,kCAAK,CAACnZ,KAAD,CAAQM,MAAR,CAAL,CAAuB,CAACN,KAAD,CAAvB,CAAiCyhB,aAAY,CAACvH,kBAAQ,CAACla,KAAD,CAAT,CAApD,CACD,CAEcgB,iFAAf,E;;;;;;;ACXA;AAAO,SAAS8E,QAAT,CAAkByO,GAAlB,EAAuB2N,EAAvB,EAA2B;AAMhC,SAAO3N,GAAP;AAID,C;;;;;;;AClBD,GAAIyF,UAAS,CAAGpa,QAAQ,CAACO,SAAzB,CAGA,GAAI8Z,aAAY,CAAGD,SAAS,CAACE,QAA7B,CASA,QAASQ,SAAT,CAAkBhY,IAAlB,CAAwB,CACtB,GAAIA,IAAI,EAAI,IAAZ,CAAkB,CAChB,GAAI,CACF,MAAOuX,aAAY,CAACxZ,IAAb,CAAkBiC,IAAlB,CAAP,CACD,CAAC,MAAOiC,CAAP,CAAU,CAAE,CACd,GAAI,CACF,MAAQjC,KAAI,CAAG,EAAf,CACD,CAAC,MAAOiC,CAAP,CAAU,CAAE,CACf,CACD,MAAO,EAAP,CACD,CAEc+V,iEAAf,E;;;;;;;ACTA,QAASnB,SAAT,CAAkBvZ,KAAlB,CAAyB,CACvB,MAAOA,MAAP,CACD,CAEcuZ,iEAAf,E;;;;;;;ACpBA;AAAA;AAIA,GAAI4I,UAAS,CAAG,iBAAhB,CAmBA,QAASrH,SAAT,CAAkB9a,KAAlB,CAAyB,CACvB,MAAO,OAAOA,MAAP,EAAgB,QAAhB,EACJiY,wEAAY,CAACjY,KAAD,CAAZ,EAAuB2b,sEAAU,CAAC3b,KAAD,CAAV,EAAqBmiB,SAD/C,CAED,CAEcrH,iEAAf,E;;;;;;;AC5BA;AAAA;AAWA,QAASnZ,QAAT,CAAiBrB,MAAjB,CAAyBQ,IAAzB,CAA+B,CAC7BA,IAAI,CAAGE,oEAAQ,CAACF,IAAD,CAAOR,MAAP,CAAf,CAEA,GAAIW,MAAK,CAAG,CAAZ,CACIC,MAAM,CAAGJ,IAAI,CAACI,MADlB,CAGA,MAAOZ,MAAM,EAAI,IAAV,EAAkBW,KAAK,CAAGC,MAAjC,CAAyC,CACvCZ,MAAM,CAAGA,MAAM,CAACc,iEAAK,CAACN,IAAI,CAACG,KAAK,EAAN,CAAL,CAAN,CAAf,CACD,CACD,MAAQA,MAAK,EAAIA,KAAK,EAAIC,MAAnB,CAA6BZ,MAA7B,CAAsCK,SAA7C,CACD,CAEcgB,gEAAf,E;;;;;;;ACSA,QAASjB,GAAT,CAAYV,KAAZ,CAAmBoiB,KAAnB,CAA0B,CACxB,MAAOpiB,MAAK,GAAKoiB,KAAV,EAAoBpiB,KAAK,GAAKA,KAAV,EAAmBoiB,KAAK,GAAKA,KAAxD,CACD,CAEc1hB,2DAAf,E;;;;;;;AC3BA,QAASsS,SAAT,CAAkB5Q,KAAlB,CAAyBuQ,QAAzB,CAAmC,CACjC,GAAI1R,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGkB,KAAK,EAAI,IAAT,CAAgB,CAAhB,CAAoBA,KAAK,CAAClB,MADvC,CAEIQ,MAAM,CAAG5B,KAAK,CAACoB,MAAD,CAFlB,CAIA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvBQ,MAAM,CAACT,KAAD,CAAN,CAAgB0R,QAAQ,CAACvQ,KAAK,CAACnB,KAAD,CAAN,CAAeA,KAAf,CAAsBmB,KAAtB,CAAxB,CACD,CACD,MAAOV,OAAP,CACD,CAEcsR,iEAAf,E;;;;;;;ACpBA;AAWA,QAASpS,gBAAT,CAAyBN,MAAzB,CAAiCC,GAAjC,CAAsCP,KAAtC,CAA6C,CAC3C,GAAIO,GAAG,EAAI,WAAP,EAAsB8hB,kEAA1B,CAA0C,CACxCA,0EAAc,CAAC/hB,MAAD,CAASC,GAAT,CAAc,CAC1B,eAAgB,IADU,CAE1B,aAAc,IAFY,CAG1B,QAASP,KAHiB,CAI1B,WAAY,IAJc,CAAd,CAAd,CAMD,CAPD,IAOO,CACLM,MAAM,CAACC,GAAD,CAAN,CAAcP,KAAd,CACD,CACF,CAEcY,wEAAf,E;;;;;;;ACxBA;AAGA,GAAI0hB,aAAY,CAAG7iB,MAAM,CAAC8iB,MAA1B,CAUA,GAAIC,WAAU,CAAI,UAAW,CAC3B,QAASliB,OAAT,EAAkB,CAAE,CACpB,MAAO,UAASmiB,KAAT,CAAgB,CACrB,GAAI,CAAC1iB,oEAAQ,CAAC0iB,KAAD,CAAb,CAAsB,CACpB,MAAO,EAAP,CACD,CACD,GAAIH,YAAJ,CAAkB,CAChB,MAAOA,aAAY,CAACG,KAAD,CAAnB,CACD,CACDniB,MAAM,CAACH,SAAP,CAAmBsiB,KAAnB,CACA,GAAI/gB,OAAM,CAAG,GAAIpB,OAAJ,EAAb,CACAA,MAAM,CAACH,SAAP,CAAmBQ,SAAnB,CACA,MAAOe,OAAP,CACD,CAXD,CAYD,CAdiB,EAAlB,CAgBe8gB,mEAAf,E;;;;;;;ACnBA,QAAShR,MAAT,CAAe9O,IAAf,CAAqB6O,OAArB,CAA8BD,IAA9B,CAAoC,CAClC,OAAQA,IAAI,CAACpQ,MAAb,EACE,IAAK,EAAL,CAAQ,MAAOwB,KAAI,CAACjC,IAAL,CAAU8Q,OAAV,CAAP,CACR,IAAK,EAAL,CAAQ,MAAO7O,KAAI,CAACjC,IAAL,CAAU8Q,OAAV,CAAmBD,IAAI,CAAC,CAAD,CAAvB,CAAP,CACR,IAAK,EAAL,CAAQ,MAAO5O,KAAI,CAACjC,IAAL,CAAU8Q,OAAV,CAAmBD,IAAI,CAAC,CAAD,CAAvB,CAA4BA,IAAI,CAAC,CAAD,CAAhC,CAAP,CACR,IAAK,EAAL,CAAQ,MAAO5O,KAAI,CAACjC,IAAL,CAAU8Q,OAAV,CAAmBD,IAAI,CAAC,CAAD,CAAvB,CAA4BA,IAAI,CAAC,CAAD,CAAhC,CAAqCA,IAAI,CAAC,CAAD,CAAzC,CAAP,CAJV,CAMA,MAAO5O,KAAI,CAAC8O,KAAL,CAAWD,OAAX,CAAoBD,IAApB,CAAP,CACD,CAEcE,8DAAf,E;;;;;;;;;ACbA,QAASkR,eAAT,EAA0B,CACxB,KAAKC,QAAL,CAAgB,EAAhB,CACA,KAAKxN,IAAL,CAAY,CAAZ,CACD,CAEcuN,kEAAf,E;;;;;ACFA,QAASE,aAAT,CAAsBxgB,KAAtB,CAA6B7B,GAA7B,CAAkC,CAChC,GAAIW,OAAM,CAAGkB,KAAK,CAAClB,MAAnB,CACA,MAAOA,MAAM,EAAb,CAAiB,CACf,GAAIR,6BAAE,CAAC0B,KAAK,CAAClB,MAAD,CAAL,CAAc,CAAd,CAAD,CAAmBX,GAAnB,CAAN,CAA+B,CAC7B,MAAOW,OAAP,CACD,CACF,CACD,MAAO,CAAC,CAAR,CACD,CAEc0hB,8DAAf,E;;ACjBA,GAAIhT,WAAU,CAAG9P,KAAK,CAACK,SAAvB,CAGA,GAAI0P,OAAM,CAAGD,UAAU,CAACC,MAAxB,CAWA,QAASgT,gBAAT,CAAyBtiB,GAAzB,CAA8B,CAC5B,GAAIgY,KAAI,CAAG,KAAKoK,QAAhB,CACI1hB,KAAK,CAAG2hB,aAAY,CAACrK,IAAD,CAAOhY,GAAP,CADxB,CAGA,GAAIU,KAAK,CAAG,CAAZ,CAAe,CACb,MAAO,MAAP,CACD,CACD,GAAI+O,UAAS,CAAGuI,IAAI,CAACrX,MAAL,CAAc,CAA9B,CACA,GAAID,KAAK,EAAI+O,SAAb,CAAwB,CACtBuI,IAAI,CAACuK,GAAL,GACD,CAFD,IAEO,CACLjT,MAAM,CAACpP,IAAP,CAAY8X,IAAZ,CAAkBtX,KAAlB,CAAyB,CAAzB,EACD,CACD,EAAE,KAAKkU,IAAP,CACA,MAAO,KAAP,CACD,CAEc0N,oEAAf,E;;ACvBA,QAASE,aAAT,CAAsBxiB,GAAtB,CAA2B,CACzB,GAAIgY,KAAI,CAAG,KAAKoK,QAAhB,CACI1hB,KAAK,CAAG2hB,aAAY,CAACrK,IAAD,CAAOhY,GAAP,CADxB,CAGA,MAAOU,MAAK,CAAG,CAAR,CAAYN,SAAZ,CAAwB4X,IAAI,CAACtX,KAAD,CAAJ,CAAY,CAAZ,CAA/B,CACD,CAEc8hB,8DAAf,E;;ACPA,QAASC,aAAT,CAAsBziB,GAAtB,CAA2B,CACzB,MAAOqiB,cAAY,CAAC,KAAKD,QAAN,CAAgBpiB,GAAhB,CAAZ,CAAmC,CAAC,CAA3C,CACD,CAEcyiB,8DAAf,E;;ACHA,QAASC,aAAT,CAAsB1iB,GAAtB,CAA2BP,KAA3B,CAAkC,CAChC,GAAIuY,KAAI,CAAG,KAAKoK,QAAhB,CACI1hB,KAAK,CAAG2hB,aAAY,CAACrK,IAAD,CAAOhY,GAAP,CADxB,CAGA,GAAIU,KAAK,CAAG,CAAZ,CAAe,CACb,EAAE,KAAKkU,IAAP,CACAoD,IAAI,CAAC7U,IAAL,CAAU,CAACnD,GAAD,CAAMP,KAAN,CAAV,EACD,CAHD,IAGO,CACLuY,IAAI,CAACtX,KAAD,CAAJ,CAAY,CAAZ,EAAiBjB,KAAjB,CACD,CACD,MAAO,KAAP,CACD,CAEcijB,8DAAf,E;;ACZA,QAASC,UAAT,CAAmB1N,OAAnB,CAA4B,CAC1B,GAAIvU,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGsU,OAAO,EAAI,IAAX,CAAkB,CAAlB,CAAsBA,OAAO,CAACtU,MAD3C,CAGA,KAAKkI,KAAL,GACA,MAAO,EAAEnI,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAImO,MAAK,CAAGmG,OAAO,CAACvU,KAAD,CAAnB,CACA,KAAKmW,GAAL,CAAS/H,KAAK,CAAC,CAAD,CAAd,CAAmBA,KAAK,CAAC,CAAD,CAAxB,EACD,CACF,CAGD6T,SAAS,CAAC/iB,SAAV,CAAoBiJ,KAApB,CAA4BsZ,eAA5B,CACAQ,SAAS,CAAC/iB,SAAV,CAAoB,QAApB,EAAgC0iB,gBAAhC,CACAK,SAAS,CAAC/iB,SAAV,CAAoB4W,GAApB,CAA0BgM,aAA1B,CACAG,SAAS,CAAC/iB,SAAV,CAAoBmP,GAApB,CAA0B0T,aAA1B,CACAE,SAAS,CAAC/iB,SAAV,CAAoBiX,GAApB,CAA0B6L,aAA1B,CAEeC,mFAAf,E;;;;;;;;;ACxBA,QAASC,cAAT,CAAuBlH,SAAvB,CAAkC,CAChC,MAAO,UAAS3b,MAAT,CAAiBqS,QAAjB,CAA2ByQ,QAA3B,CAAqC,CAC1C,GAAIniB,MAAK,CAAG,CAAC,CAAb,CACIgU,QAAQ,CAAGxV,MAAM,CAACa,MAAD,CADrB,CAEI0C,KAAK,CAAGogB,QAAQ,CAAC9iB,MAAD,CAFpB,CAGIY,MAAM,CAAG8B,KAAK,CAAC9B,MAHnB,CAKA,MAAOA,MAAM,EAAb,CAAiB,CACf,GAAIX,IAAG,CAAGyC,KAAK,CAACiZ,SAAS,CAAG/a,MAAH,CAAY,EAAED,KAAxB,CAAf,CACA,GAAI0R,QAAQ,CAACsC,QAAQ,CAAC1U,GAAD,CAAT,CAAgBA,GAAhB,CAAqB0U,QAArB,CAAR,GAA2C,KAA/C,CAAsD,CACpD,MACD,CACF,CACD,MAAO3U,OAAP,CACD,CAbD,CAcD,CAEc6iB,gEAAf,E;;ACXA,GAAIE,QAAO,CAAGF,cAAa,EAA3B,CAEeE,oDAAf,E;;;;;ACJA,QAASlH,WAAT,CAAoB7b,MAApB,CAA4BqS,QAA5B,CAAsC,CACpC,MAAOrS,OAAM,EAAI+iB,QAAO,CAAC/iB,MAAD,CAASqS,QAAT,CAAmBmG,uBAAnB,CAAxB,CACD,CAEcqD,qFAAf,E;;;;;;;ACfA;AAAA;AAIA,GAAIjF,IAAG,CAAG0D,qEAAS,CAAClb,wDAAD,CAAO,KAAP,CAAnB,CAEewX,4DAAf,E;;;;;;;ACNA;AAAA;AAIA,GAAItP,IAAG,CAAGgT,qEAAS,CAAClb,wDAAD,CAAO,KAAP,CAAnB,CAEekI,4DAAf,E;;;;;;;ACNA;AAAA;AAIA,GAAI0b,YAAW,CAAG,MAAOC,QAAP,EAAkB,QAAlB,EAA8BA,OAA9B,EAAyC,CAACA,OAAO,CAAC7d,QAAlD,EAA8D6d,OAAhF,CAGA,GAAIC,WAAU,CAAGF,WAAW,EAAI,MAAOG,OAAP,EAAiB,QAAhC,EAA4CA,MAA5C,EAAsD,CAACA,MAAM,CAAC/d,QAA9D,EAA0E+d,MAA3F,CAGA,GAAIC,cAAa,CAAGF,UAAU,EAAIA,UAAU,CAACD,OAAX,GAAuBD,WAAzD,CAGA,GAAIK,OAAM,CAAGD,aAAa,CAAGhkB,wDAAI,CAACikB,MAAR,CAAiBhjB,SAA3C,CAGA,GAAIijB,eAAc,CAAGD,MAAM,CAAGA,MAAM,CAACE,QAAV,CAAqBljB,SAAhD,CAmBA,GAAIkjB,SAAQ,CAAGD,cAAc,EAAIE,6DAAjC,CAEeD,iEAAf,E;;;;;;;;;;;;;AClCA,GAAIE,aAAY,CAAGnJ,qCAAS,CAACnb,MAAD,CAAS,QAAT,CAA5B,CAEeskB,8DAAf,E;;ACIA,QAASC,UAAT,EAAqB,CACnB,KAAKrB,QAAL,CAAgBoB,aAAY,CAAGA,aAAY,CAAC,IAAD,CAAf,CAAwB,EAApD,CACA,KAAK5O,IAAL,CAAY,CAAZ,CACD,CAEc6O,wDAAf,E;;ACJA,QAASC,WAAT,CAAoB1jB,GAApB,CAAyB,CACvB,GAAImB,OAAM,CAAG,KAAK4N,GAAL,CAAS/O,GAAT,GAAiB,MAAO,MAAKoiB,QAAL,CAAcpiB,GAAd,CAArC,CACA,KAAK4U,IAAL,EAAazT,MAAM,CAAG,CAAH,CAAO,CAA1B,CACA,MAAOA,OAAP,CACD,CAEcuiB,0DAAf,E;;ACbA,GAAIC,eAAc,CAAG,2BAArB,CAGA,GAAIhkB,YAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,wBAAc,CAAGF,WAAW,CAACE,cAAjC,CAWA,QAAS+jB,QAAT,CAAiB5jB,GAAjB,CAAsB,CACpB,GAAIgY,KAAI,CAAG,KAAKoK,QAAhB,CACA,GAAIoB,aAAJ,CAAkB,CAChB,GAAIriB,OAAM,CAAG6W,IAAI,CAAChY,GAAD,CAAjB,CACA,MAAOmB,OAAM,GAAKwiB,cAAX,CAA4BvjB,SAA5B,CAAwCe,MAA/C,CACD,CACD,MAAOtB,wBAAc,CAACK,IAAf,CAAoB8X,IAApB,CAA0BhY,GAA1B,EAAiCgY,IAAI,CAAChY,GAAD,CAArC,CAA6CI,SAApD,CACD,CAEcwjB,oDAAf,E;;AC1BA,GAAIjkB,qBAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,wBAAc,CAAGF,oBAAW,CAACE,cAAjC,CAWA,QAASgkB,QAAT,CAAiB7jB,GAAjB,CAAsB,CACpB,GAAIgY,KAAI,CAAG,KAAKoK,QAAhB,CACA,MAAOoB,cAAY,CAAIxL,IAAI,CAAChY,GAAD,CAAJ,GAAcI,SAAlB,CAA+BP,uBAAc,CAACK,IAAf,CAAoB8X,IAApB,CAA0BhY,GAA1B,CAAlD,CACD,CAEc6jB,oDAAf,E;;ACnBA,GAAIF,wBAAc,CAAG,2BAArB,CAYA,QAASG,QAAT,CAAiB9jB,GAAjB,CAAsBP,KAAtB,CAA6B,CAC3B,GAAIuY,KAAI,CAAG,KAAKoK,QAAhB,CACA,KAAKxN,IAAL,EAAa,KAAK7F,GAAL,CAAS/O,GAAT,EAAgB,CAAhB,CAAoB,CAAjC,CACAgY,IAAI,CAAChY,GAAD,CAAJ,CAAawjB,aAAY,EAAI/jB,KAAK,GAAKW,SAA3B,CAAwCujB,uBAAxC,CAAyDlkB,KAArE,CACA,MAAO,KAAP,CACD,CAEcqkB,oDAAf,E;;ACTA,QAASC,KAAT,CAAc9O,OAAd,CAAuB,CACrB,GAAIvU,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGsU,OAAO,EAAI,IAAX,CAAkB,CAAlB,CAAsBA,OAAO,CAACtU,MAD3C,CAGA,KAAKkI,KAAL,GACA,MAAO,EAAEnI,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAImO,MAAK,CAAGmG,OAAO,CAACvU,KAAD,CAAnB,CACA,KAAKmW,GAAL,CAAS/H,KAAK,CAAC,CAAD,CAAd,CAAmBA,KAAK,CAAC,CAAD,CAAxB,EACD,CACF,CAGDiV,IAAI,CAACnkB,SAAL,CAAeiJ,KAAf,CAAuB4a,UAAvB,CACAM,IAAI,CAACnkB,SAAL,CAAe,QAAf,EAA2B8jB,WAA3B,CACAK,IAAI,CAACnkB,SAAL,CAAe4W,GAAf,CAAqBoN,QAArB,CACAG,IAAI,CAACnkB,SAAL,CAAemP,GAAf,CAAqB8U,QAArB,CACAE,IAAI,CAACnkB,SAAL,CAAeiX,GAAf,CAAqBiN,QAArB,CAEeC,8CAAf,E;;;;;;;;ACpBA,QAASC,cAAT,EAAyB,CACvB,KAAKpP,IAAL,CAAY,CAAZ,CACA,KAAKwN,QAAL,CAAgB,CACd,OAAQ,GAAI2B,MAAJ,EADM,CAEd,MAAO,IAAKpN,uBAAG,EAAIgM,6BAAZ,GAFO,CAGd,SAAU,GAAIoB,MAAJ,EAHI,CAAhB,CAKD,CAEcC,gEAAf,E;;ACbA,QAASC,UAAT,CAAmBxkB,KAAnB,CAA0B,CACxB,GAAIC,KAAI,CAAG,MAAOD,MAAlB,CACA,MAAQC,KAAI,EAAI,QAAR,EAAoBA,IAAI,EAAI,QAA5B,EAAwCA,IAAI,EAAI,QAAhD,EAA4DA,IAAI,EAAI,SAArE,CACFD,KAAK,GAAK,WADR,CAEFA,KAAK,GAAK,IAFf,CAGD,CAEcwkB,wDAAf,E;;ACJA,QAASC,WAAT,CAAoBngB,GAApB,CAAyB/D,GAAzB,CAA8B,CAC5B,GAAIgY,KAAI,CAAGjU,GAAG,CAACqe,QAAf,CACA,MAAO6B,WAAS,CAACjkB,GAAD,CAAT,CACHgY,IAAI,CAAC,MAAOhY,IAAP,EAAc,QAAd,CAAyB,QAAzB,CAAoC,MAArC,CADD,CAEHgY,IAAI,CAACjU,GAFT,CAGD,CAEcmgB,0DAAf,E;;ACNA,QAASC,eAAT,CAAwBnkB,GAAxB,CAA6B,CAC3B,GAAImB,OAAM,CAAG+iB,WAAU,CAAC,IAAD,CAAOlkB,GAAP,CAAV,CAAsB,QAAtB,EAAgCA,GAAhC,CAAb,CACA,KAAK4U,IAAL,EAAazT,MAAM,CAAG,CAAH,CAAO,CAA1B,CACA,MAAOA,OAAP,CACD,CAEcgjB,kEAAf,E;;ACNA,QAASC,YAAT,CAAqBpkB,GAArB,CAA0B,CACxB,MAAOkkB,YAAU,CAAC,IAAD,CAAOlkB,GAAP,CAAV,CAAsBwW,GAAtB,CAA0BxW,GAA1B,CAAP,CACD,CAEcokB,4DAAf,E;;ACJA,QAASC,YAAT,CAAqBrkB,GAArB,CAA0B,CACxB,MAAOkkB,YAAU,CAAC,IAAD,CAAOlkB,GAAP,CAAV,CAAsB+O,GAAtB,CAA0B/O,GAA1B,CAAP,CACD,CAEcqkB,4DAAf,E;;ACHA,QAASC,YAAT,CAAqBtkB,GAArB,CAA0BP,KAA1B,CAAiC,CAC/B,GAAIuY,KAAI,CAAGkM,WAAU,CAAC,IAAD,CAAOlkB,GAAP,CAArB,CACI4U,IAAI,CAAGoD,IAAI,CAACpD,IADhB,CAGAoD,IAAI,CAACnB,GAAL,CAAS7W,GAAT,CAAcP,KAAd,EACA,KAAKmV,IAAL,EAAaoD,IAAI,CAACpD,IAAL,EAAaA,IAAb,CAAoB,CAApB,CAAwB,CAArC,CACA,MAAO,KAAP,CACD,CAEc0P,4DAAf,E;;ACRA,QAASC,SAAT,CAAkBtP,OAAlB,CAA2B,CACzB,GAAIvU,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGsU,OAAO,EAAI,IAAX,CAAkB,CAAlB,CAAsBA,OAAO,CAACtU,MAD3C,CAGA,KAAKkI,KAAL,GACA,MAAO,EAAEnI,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAImO,MAAK,CAAGmG,OAAO,CAACvU,KAAD,CAAnB,CACA,KAAKmW,GAAL,CAAS/H,KAAK,CAAC,CAAD,CAAd,CAAmBA,KAAK,CAAC,CAAD,CAAxB,EACD,CACF,CAGDyV,QAAQ,CAAC3kB,SAAT,CAAmBiJ,KAAnB,CAA2Bmb,cAA3B,CACAO,QAAQ,CAAC3kB,SAAT,CAAmB,QAAnB,EAA+BukB,eAA/B,CACAI,QAAQ,CAAC3kB,SAAT,CAAmB4W,GAAnB,CAAyB4N,YAAzB,CACAG,QAAQ,CAAC3kB,SAAT,CAAmBmP,GAAnB,CAAyBsV,YAAzB,CACAE,QAAQ,CAAC3kB,SAAT,CAAmBiX,GAAnB,CAAyByN,YAAzB,CAEeC,iFAAf,E;;;;;;;AC/BA;AAAA;AAIA,GAAIC,QAAO,CAAGnK,qEAAS,CAAClb,wDAAD,CAAO,SAAP,CAAvB,CAEeqlB,gEAAf,E;;;;;;;ACNA;AAAA;AAIA,GAAIC,aAAY,CAAG,kDAAnB,CACIC,aAAa,CAAG,OADpB,CAWA,QAAS9L,MAAT,CAAenZ,KAAf,CAAsBM,MAAtB,CAA8B,CAC5B,GAAIT,mEAAO,CAACG,KAAD,CAAX,CAAoB,CAClB,MAAO,MAAP,CACD,CACD,GAAIC,KAAI,CAAG,MAAOD,MAAlB,CACA,GAAIC,IAAI,EAAI,QAAR,EAAoBA,IAAI,EAAI,QAA5B,EAAwCA,IAAI,EAAI,SAAhD,EACAD,KAAK,EAAI,IADT,EACiB8a,oEAAQ,CAAC9a,KAAD,CAD7B,CACsC,CACpC,MAAO,KAAP,CACD,CACD,MAAOilB,cAAa,CAACxK,IAAd,CAAmBza,KAAnB,GAA6B,CAACglB,YAAY,CAACvK,IAAb,CAAkBza,KAAlB,CAA9B,EACJM,MAAM,EAAI,IAAV,EAAkBN,KAAK,GAAIP,OAAM,CAACa,MAAD,CADpC,CAED,CAEc6Y,8DAAf,E;;;;;;;AC5BA;AAAA;AAIA,GAAI+L,SAAQ,CAAG,wBAAf,CACIC,OAAO,CAAG,mBADd,CAEIC,MAAM,CAAG,4BAFb,CAGIC,QAAQ,CAAG,gBAHf,CAsBA,QAAS7K,WAAT,CAAoBxa,KAApB,CAA2B,CACzB,GAAI,CAACD,oEAAQ,CAACC,KAAD,CAAb,CAAsB,CACpB,MAAO,MAAP,CACD,CAGD,GAAIsb,IAAG,CAAGK,sEAAU,CAAC3b,KAAD,CAApB,CACA,MAAOsb,IAAG,EAAI6J,OAAP,EAAkB7J,GAAG,EAAI8J,MAAzB,EAAmC9J,GAAG,EAAI4J,QAA1C,EAAsD5J,GAAG,EAAI+J,QAApE,CACD,CAEc7K,mEAAf,E;;;;;;;ACnCA,GAAIO,iBAAgB,CAAG,gBAAvB,CA4BA,QAASqG,SAAT,CAAkBphB,KAAlB,CAAyB,CACvB,MAAO,OAAOA,MAAP,EAAgB,QAAhB,EACLA,KAAK,CAAG,CAAC,CADJ,EACSA,KAAK,CAAG,CAAR,EAAa,CADtB,EAC2BA,KAAK,EAAI+a,gBAD3C,CAED,CAEcqG,iEAAf,E;;;;;;;AC3BA,QAASkE,WAAT,CAAoBlO,GAApB,CAAyB,CACvB,GAAInW,MAAK,CAAG,CAAC,CAAb,CACIS,MAAM,CAAG5B,KAAK,CAACsX,GAAG,CAACjC,IAAL,CADlB,CAGAiC,GAAG,CAACmO,OAAJ,CAAY,SAASvlB,KAAT,CAAgB,CAC1B0B,MAAM,CAAC,EAAET,KAAH,CAAN,CAAkBjB,KAAlB,CACD,CAFD,EAGA,MAAO0B,OAAP,CACD,CAEc4jB,mEAAf,E;;;;;;;ACTA,QAASvS,UAAT,CAAmBhQ,MAAnB,CAA2BX,KAA3B,CAAkC,CAChC,GAAInB,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAG6B,MAAM,CAAC7B,MADpB,CAGAkB,KAAK,GAAKA,KAAK,CAAGtC,KAAK,CAACoB,MAAD,CAAlB,CAAL,CACA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvBkB,KAAK,CAACnB,KAAD,CAAL,CAAe8B,MAAM,CAAC9B,KAAD,CAArB,CACD,CACD,MAAOmB,MAAP,CACD,CAEc2Q,kEAAf,E;;;;;;;ACnBA;AAAA;AAAA;AAYA,QAASzP,SAAT,CAAkBZ,IAAlB,CAAwB4Q,KAAxB,CAA+B,CAC7B,MAAO3Q,wEAAW,CAACC,oEAAQ,CAACF,IAAD,CAAO4Q,KAAP,CAAciG,4DAAd,CAAT,CAAkC7W,IAAI,CAAG,EAAzC,CAAlB,CACD,CAEcY,iEAAf,E;;;;;;;;;;;;;;;ACNA,QAASkiB,UAAT,CAAmBpjB,KAAnB,CAA0BX,SAA1B,CAAqC,CACnC,GAAIR,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGkB,KAAK,EAAI,IAAT,CAAgB,CAAhB,CAAoBA,KAAK,CAAClB,MADvC,CAGA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIO,SAAS,CAACW,KAAK,CAACnB,KAAD,CAAN,CAAeA,KAAf,CAAsBmB,KAAtB,CAAb,CAA2C,CACzC,MAAO,KAAP,CACD,CACF,CACD,MAAO,MAAP,CACD,CAEcojB,wDAAf,E;;;;;ACjBA,GAAItN,qBAAoB,CAAG,CAA3B,CACIC,sBAAsB,CAAG,CAD7B,CAgBA,QAASsN,YAAT,CAAqBrjB,KAArB,CAA4BggB,KAA5B,CAAmCsD,OAAnC,CAA4C3kB,UAA5C,CAAwD4kB,SAAxD,CAAmElN,KAAnE,CAA0E,CACxE,GAAImN,UAAS,CAAGF,OAAO,CAAGxN,oBAA1B,CACI2N,SAAS,CAAGzjB,KAAK,CAAClB,MADtB,CAEI4kB,SAAS,CAAG1D,KAAK,CAAClhB,MAFtB,CAIA,GAAI2kB,SAAS,EAAIC,SAAb,EAA0B,EAAEF,SAAS,EAAIE,SAAS,CAAGD,SAA3B,CAA9B,CAAqE,CACnE,MAAO,MAAP,CACD,CAED,GAAIE,WAAU,CAAGtN,KAAK,CAAC1B,GAAN,CAAU3U,KAAV,CAAjB,CACA,GAAI4jB,WAAU,CAAGvN,KAAK,CAAC1B,GAAN,CAAUqL,KAAV,CAAjB,CACA,GAAI2D,UAAU,EAAIC,UAAlB,CAA8B,CAC5B,MAAOD,WAAU,EAAI3D,KAAd,EAAuB4D,UAAU,EAAI5jB,KAA5C,CACD,CACD,GAAInB,MAAK,CAAG,CAAC,CAAb,CACIS,MAAM,CAAG,IADb,CAEIoR,IAAI,CAAI4S,OAAO,CAAGvN,sBAAX,CAAqC,GAAI8N,6BAAJ,EAArC,CAAoDtlB,SAF/D,CAIA8X,KAAK,CAACrB,GAAN,CAAUhV,KAAV,CAAiBggB,KAAjB,EACA3J,KAAK,CAACrB,GAAN,CAAUgL,KAAV,CAAiBhgB,KAAjB,EAGA,MAAO,EAAEnB,KAAF,CAAU4kB,SAAjB,CAA4B,CAC1B,GAAIK,SAAQ,CAAG9jB,KAAK,CAACnB,KAAD,CAApB,CACIklB,QAAQ,CAAG/D,KAAK,CAACnhB,KAAD,CADpB,CAGA,GAAIF,UAAJ,CAAgB,CACd,GAAIqlB,SAAQ,CAAGR,SAAS,CACpB7kB,UAAU,CAAColB,QAAD,CAAWD,QAAX,CAAqBjlB,KAArB,CAA4BmhB,KAA5B,CAAmChgB,KAAnC,CAA0CqW,KAA1C,CADU,CAEpB1X,UAAU,CAACmlB,QAAD,CAAWC,QAAX,CAAqBllB,KAArB,CAA4BmB,KAA5B,CAAmCggB,KAAnC,CAA0C3J,KAA1C,CAFd,CAGD,CACD,GAAI2N,QAAQ,GAAKzlB,SAAjB,CAA4B,CAC1B,GAAIylB,QAAJ,CAAc,CACZ,SACD,CACD1kB,MAAM,CAAG,KAAT,CACA,MACD,CAED,GAAIoR,IAAJ,CAAU,CACR,GAAI,CAAC0S,UAAS,CAACpD,KAAD,CAAQ,SAAS+D,QAAT,CAAmBE,QAAnB,CAA6B,CAC7C,GAAI,CAACC,oCAAQ,CAACxT,IAAD,CAAOuT,QAAP,CAAT,GACCH,QAAQ,GAAKC,QAAb,EAAyBR,SAAS,CAACO,QAAD,CAAWC,QAAX,CAAqBT,OAArB,CAA8B3kB,UAA9B,CAA0C0X,KAA1C,CADnC,CAAJ,CAC0F,CACxF,MAAO3F,KAAI,CAACpP,IAAL,CAAU2iB,QAAV,CAAP,CACD,CACF,CALS,CAAd,CAKQ,CACN3kB,MAAM,CAAG,KAAT,CACA,MACD,CACF,CAVD,IAUO,IAAI,EACLwkB,QAAQ,GAAKC,QAAb,EACER,SAAS,CAACO,QAAD,CAAWC,QAAX,CAAqBT,OAArB,CAA8B3kB,UAA9B,CAA0C0X,KAA1C,CAFN,CAAJ,CAGA,CACL/W,MAAM,CAAG,KAAT,CACA,MACD,CACF,CACD+W,KAAK,CAAC,QAAD,CAAL,CAAgBrW,KAAhB,EACAqW,KAAK,CAAC,QAAD,CAAL,CAAgB2J,KAAhB,EACA,MAAO1gB,OAAP,CACD,CAEc+jB,4DAAf,E;;;;;;;;AChFA,GAAIc,WAAU,CAAG7mB,wBAAI,CAAC6mB,UAAtB,CAEeA,0DAAf,E;;;;;ACEA,QAASC,WAAT,CAAoBliB,GAApB,CAAyB,CACvB,GAAIrD,MAAK,CAAG,CAAC,CAAb,CACIS,MAAM,CAAG5B,KAAK,CAACwE,GAAG,CAAC6Q,IAAL,CADlB,CAGA7Q,GAAG,CAACihB,OAAJ,CAAY,SAASvlB,KAAT,CAAgBO,GAAhB,CAAqB,CAC/BmB,MAAM,CAAC,EAAET,KAAH,CAAN,CAAkB,CAACV,GAAD,CAAMP,KAAN,CAAlB,CACD,CAFD,EAGA,MAAO0B,OAAP,CACD,CAEc8kB,0DAAf,E;;;;;ACTA,GAAItO,iCAAoB,CAAG,CAA3B,CACIC,kCAAsB,CAAG,CAD7B,CAIA,GAAIsO,QAAO,CAAG,kBAAd,CACIC,OAAO,CAAG,eADd,CAEIC,QAAQ,CAAG,gBAFf,CAGIC,MAAM,CAAG,cAHb,CAIIC,SAAS,CAAG,iBAJhB,CAKIC,SAAS,CAAG,iBALhB,CAMIC,MAAM,CAAG,cANb,CAOIC,SAAS,CAAG,iBAPhB,CAQI7E,SAAS,CAAG,iBARhB,CAUA,GAAI8E,eAAc,CAAG,sBAArB,CACIC,WAAW,CAAG,mBADlB,CAIA,GAAInF,YAAW,CAAGhgB,0BAAM,CAAGA,0BAAM,CAAC5B,SAAV,CAAsBQ,SAA9C,CACIwmB,aAAa,CAAGpF,WAAW,CAAGA,WAAW,CAACqF,OAAf,CAAyBzmB,SADxD,CAoBA,QAAS0mB,WAAT,CAAoB/mB,MAApB,CAA4B8hB,KAA5B,CAAmC9G,GAAnC,CAAwCoK,OAAxC,CAAiD3kB,UAAjD,CAA6D4kB,SAA7D,CAAwElN,KAAxE,CAA+E,CAC7E,OAAQ6C,GAAR,EACE,IAAK4L,YAAL,CACE,GAAK5mB,MAAM,CAACgnB,UAAP,EAAqBlF,KAAK,CAACkF,UAA5B,EACChnB,MAAM,CAACinB,UAAP,EAAqBnF,KAAK,CAACmF,UADhC,CAC6C,CAC3C,MAAO,MAAP,CACD,CACDjnB,MAAM,CAAGA,MAAM,CAAC0M,MAAhB,CACAoV,KAAK,CAAGA,KAAK,CAACpV,MAAd,CAEF,IAAKia,eAAL,CACE,GAAK3mB,MAAM,CAACgnB,UAAP,EAAqBlF,KAAK,CAACkF,UAA5B,EACA,CAAC3B,SAAS,CAAC,GAAIY,YAAJ,CAAejmB,MAAf,CAAD,CAAyB,GAAIimB,YAAJ,CAAenE,KAAf,CAAzB,CADd,CAC+D,CAC7D,MAAO,MAAP,CACD,CACD,MAAO,KAAP,CAEF,IAAKqE,QAAL,CACA,IAAKC,QAAL,CACA,IAAKG,UAAL,CAGE,MAAOnmB,8BAAE,CAAC,CAACJ,MAAF,CAAU,CAAC8hB,KAAX,CAAT,CAEF,IAAKuE,SAAL,CACE,MAAOrmB,OAAM,CAACknB,IAAP,EAAepF,KAAK,CAACoF,IAArB,EAA6BlnB,MAAM,CAACmnB,OAAP,EAAkBrF,KAAK,CAACqF,OAA5D,CAEF,IAAKX,UAAL,CACA,IAAKE,UAAL,CAIE,MAAO1mB,OAAM,EAAK8hB,KAAK,CAAG,EAA1B,CAEF,IAAKwE,OAAL,CACE,GAAIc,QAAO,CAAGlB,WAAd,CAEF,IAAKO,OAAL,CACE,GAAInB,UAAS,CAAGF,OAAO,CAAGxN,gCAA1B,CACAwP,OAAO,GAAKA,OAAO,CAAGpC,8BAAf,CAAP,CAEA,GAAIhlB,MAAM,CAAC6U,IAAP,EAAeiN,KAAK,CAACjN,IAArB,EAA6B,CAACyQ,SAAlC,CAA6C,CAC3C,MAAO,MAAP,CACD,CAED,GAAI+B,QAAO,CAAGlP,KAAK,CAAC1B,GAAN,CAAUzW,MAAV,CAAd,CACA,GAAIqnB,OAAJ,CAAa,CACX,MAAOA,QAAO,EAAIvF,KAAlB,CACD,CACDsD,OAAO,EAAIvN,kCAAX,CAGAM,KAAK,CAACrB,GAAN,CAAU9W,MAAV,CAAkB8hB,KAAlB,EACA,GAAI1gB,OAAM,CAAG+jB,YAAW,CAACiC,OAAO,CAACpnB,MAAD,CAAR,CAAkBonB,OAAO,CAACtF,KAAD,CAAzB,CAAkCsD,OAAlC,CAA2C3kB,UAA3C,CAAuD4kB,SAAvD,CAAkElN,KAAlE,CAAxB,CACAA,KAAK,CAAC,QAAD,CAAL,CAAgBnY,MAAhB,EACA,MAAOoB,OAAP,CAEF,IAAKygB,UAAL,CACE,GAAIgF,aAAJ,CAAmB,CACjB,MAAOA,cAAa,CAAC1mB,IAAd,CAAmBH,MAAnB,GAA8B6mB,aAAa,CAAC1mB,IAAd,CAAmB2hB,KAAnB,CAArC,CACD,CA3DL,CA6DA,MAAO,MAAP,CACD,CAEciF,0DAAf,E;;;;;;;;ACjGA,QAASO,eAAT,CAAwBtnB,MAAxB,CAAgC8iB,QAAhC,CAA0CyE,WAA1C,CAAuD,CACrD,GAAInmB,OAAM,CAAG0hB,QAAQ,CAAC9iB,MAAD,CAArB,CACA,MAAOT,mCAAO,CAACS,MAAD,CAAP,CAAkBoB,MAAlB,CAA2Ba,qCAAS,CAACb,MAAD,CAASmmB,WAAW,CAACvnB,MAAD,CAApB,CAA3C,CACD,CAEcsnB,kEAAf,E;;;;;ACDA,QAASE,UAAT,EAAqB,CACnB,MAAO,EAAP,CACD,CAEcA,iEAAf,E;;AClBA,GAAI5nB,YAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAI4nB,qBAAoB,CAAG7nB,WAAW,CAAC6nB,oBAAvC,CAGA,GAAIC,iBAAgB,CAAGvoB,MAAM,CAACwoB,qBAA9B,CASA,GAAIC,WAAU,CAAG,CAACF,gBAAD,CAAoBF,mBAApB,CAAgC,SAASxnB,MAAT,CAAiB,CAChE,GAAIA,MAAM,EAAI,IAAd,CAAoB,CAClB,MAAO,EAAP,CACD,CACDA,MAAM,CAAGb,MAAM,CAACa,MAAD,CAAf,CACA,MAAO6nB,wCAAW,CAACH,gBAAgB,CAAC1nB,MAAD,CAAjB,CAA2B,SAAS8nB,MAAT,CAAiB,CAC5D,MAAOL,qBAAoB,CAACtnB,IAArB,CAA0BH,MAA1B,CAAkC8nB,MAAlC,CAAP,CACD,CAFiB,CAAlB,CAGD,CARD,CAUeF,0DAAf,E;;;;;AClBA,QAASG,WAAT,CAAoB/nB,MAApB,CAA4B,CAC1B,MAAOsnB,gBAAc,CAACtnB,MAAD,CAASwY,uBAAT,CAAeoP,WAAf,CAArB,CACD,CAEcG,0DAAf,E;;ACZA,GAAInQ,mCAAoB,CAAG,CAA3B,CAGA,GAAIhY,0BAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,6BAAc,CAAGF,yBAAW,CAACE,cAAjC,CAeA,QAASkoB,aAAT,CAAsBhoB,MAAtB,CAA8B8hB,KAA9B,CAAqCsD,OAArC,CAA8C3kB,UAA9C,CAA0D4kB,SAA1D,CAAqElN,KAArE,CAA4E,CAC1E,GAAImN,UAAS,CAAGF,OAAO,CAAGxN,kCAA1B,CACIqQ,QAAQ,CAAGF,WAAU,CAAC/nB,MAAD,CADzB,CAEIkoB,SAAS,CAAGD,QAAQ,CAACrnB,MAFzB,CAGIunB,QAAQ,CAAGJ,WAAU,CAACjG,KAAD,CAHzB,CAII0D,SAAS,CAAG2C,QAAQ,CAACvnB,MAJzB,CAMA,GAAIsnB,SAAS,EAAI1C,SAAb,EAA0B,CAACF,SAA/B,CAA0C,CACxC,MAAO,MAAP,CACD,CACD,GAAI3kB,MAAK,CAAGunB,SAAZ,CACA,MAAOvnB,KAAK,EAAZ,CAAgB,CACd,GAAIV,IAAG,CAAGgoB,QAAQ,CAACtnB,KAAD,CAAlB,CACA,GAAI,EAAE2kB,SAAS,CAAGrlB,GAAG,GAAI6hB,MAAV,CAAkBhiB,4BAAc,CAACK,IAAf,CAAoB2hB,KAApB,CAA2B7hB,GAA3B,CAA7B,CAAJ,CAAmE,CACjE,MAAO,MAAP,CACD,CACF,CAED,GAAImoB,WAAU,CAAGjQ,KAAK,CAAC1B,GAAN,CAAUzW,MAAV,CAAjB,CACA,GAAI0lB,WAAU,CAAGvN,KAAK,CAAC1B,GAAN,CAAUqL,KAAV,CAAjB,CACA,GAAIsG,UAAU,EAAI1C,UAAlB,CAA8B,CAC5B,MAAO0C,WAAU,EAAItG,KAAd,EAAuB4D,UAAU,EAAI1lB,MAA5C,CACD,CACD,GAAIoB,OAAM,CAAG,IAAb,CACA+W,KAAK,CAACrB,GAAN,CAAU9W,MAAV,CAAkB8hB,KAAlB,EACA3J,KAAK,CAACrB,GAAN,CAAUgL,KAAV,CAAiB9hB,MAAjB,EAEA,GAAIqoB,SAAQ,CAAG/C,SAAf,CACA,MAAO,EAAE3kB,KAAF,CAAUunB,SAAjB,CAA4B,CAC1BjoB,GAAG,CAAGgoB,QAAQ,CAACtnB,KAAD,CAAd,CACA,GAAIT,SAAQ,CAAGF,MAAM,CAACC,GAAD,CAArB,CACI4lB,QAAQ,CAAG/D,KAAK,CAAC7hB,GAAD,CADpB,CAGA,GAAIQ,UAAJ,CAAgB,CACd,GAAIqlB,SAAQ,CAAGR,SAAS,CACpB7kB,UAAU,CAAColB,QAAD,CAAW3lB,QAAX,CAAqBD,GAArB,CAA0B6hB,KAA1B,CAAiC9hB,MAAjC,CAAyCmY,KAAzC,CADU,CAEpB1X,UAAU,CAACP,QAAD,CAAW2lB,QAAX,CAAqB5lB,GAArB,CAA0BD,MAA1B,CAAkC8hB,KAAlC,CAAyC3J,KAAzC,CAFd,CAGD,CAED,GAAI,EAAE2N,QAAQ,GAAKzlB,SAAb,CACGH,QAAQ,GAAK2lB,QAAb,EAAyBR,SAAS,CAACnlB,QAAD,CAAW2lB,QAAX,CAAqBT,OAArB,CAA8B3kB,UAA9B,CAA0C0X,KAA1C,CADrC,CAEE2N,QAFJ,CAAJ,CAGO,CACL1kB,MAAM,CAAG,KAAT,CACA,MACD,CACDinB,QAAQ,GAAKA,QAAQ,CAAGpoB,GAAG,EAAI,aAAvB,CAAR,CACD,CACD,GAAImB,MAAM,EAAI,CAACinB,QAAf,CAAyB,CACvB,GAAIC,QAAO,CAAGtoB,MAAM,CAACuoB,WAArB,CACIC,OAAO,CAAG1G,KAAK,CAACyG,WADpB,CAIA,GAAID,OAAO,EAAIE,OAAX,EACC,eAAiBxoB,OAAjB,EAA2B,eAAiB8hB,MAD7C,EAEA,EAAE,MAAOwG,QAAP,EAAkB,UAAlB,EAAgCA,OAAO,WAAYA,QAAnD,EACA,MAAOE,QAAP,EAAkB,UADlB,EACgCA,OAAO,WAAYA,QADrD,CAFJ,CAGmE,CACjEpnB,MAAM,CAAG,KAAT,CACD,CACF,CACD+W,KAAK,CAAC,QAAD,CAAL,CAAgBnY,MAAhB,EACAmY,KAAK,CAAC,QAAD,CAAL,CAAgB2J,KAAhB,EACA,MAAO1gB,OAAP,CACD,CAEc4mB,8DAAf,E;;;;;ACrFA,GAAIS,SAAQ,CAAGnO,qCAAS,CAAClb,wBAAD,CAAO,UAAP,CAAxB,CAEeqpB,sDAAf,E;;;;;ACFA,GAAI3kB,QAAO,CAAGwW,qCAAS,CAAClb,wBAAD,CAAO,SAAP,CAAvB,CAEe0E,oDAAf,E;;;;;;;;;;;;;;ACGA,GAAIwiB,eAAM,CAAG,cAAb,CACIoC,SAAS,CAAG,iBADhB,CAEIC,UAAU,CAAG,kBAFjB,CAGIlC,cAAM,CAAG,cAHb,CAIImC,UAAU,CAAG,kBAJjB,CAMA,GAAIhC,oBAAW,CAAG,mBAAlB,CAGA,GAAIiC,mBAAkB,CAAGzO,oCAAQ,CAACqO,SAAD,CAAjC,CACIK,aAAa,CAAG1O,oCAAQ,CAACxD,uBAAD,CAD5B,CAEImS,iBAAiB,CAAG3O,oCAAQ,CAACtW,QAAD,CAFhC,CAGIklB,aAAa,CAAG5O,oCAAQ,CAAC9S,uBAAD,CAH5B,CAII2hB,iBAAiB,CAAG7O,oCAAQ,CAACqK,2BAAD,CAJhC,CAaA,GAAIyE,OAAM,CAAG7N,8BAAb,CAGA,GAAKoN,SAAQ,EAAIS,MAAM,CAAC,GAAIT,UAAJ,CAAa,GAAIU,YAAJ,CAAgB,CAAhB,CAAb,CAAD,CAAN,EAA4CvC,mBAAzD,EACChQ,uBAAG,EAAIsS,MAAM,CAAC,GAAItS,wBAAJ,EAAD,CAAN,EAAmB0P,cAD3B,EAECxiB,QAAO,EAAIolB,MAAM,CAACplB,QAAO,CAACI,OAAR,EAAD,CAAN,EAA6BykB,UAFzC,EAGCrhB,uBAAG,EAAI4hB,MAAM,CAAC,GAAI5hB,wBAAJ,EAAD,CAAN,EAAmBmf,cAH3B,EAIChC,2BAAO,EAAIyE,MAAM,CAAC,GAAIzE,4BAAJ,EAAD,CAAN,EAAuBmE,UAJvC,CAIoD,CAClDM,MAAM,CAAG,SAASxpB,KAAT,CAAgB,CACvB,GAAI0B,OAAM,CAAGia,sCAAU,CAAC3b,KAAD,CAAvB,CACI0pB,IAAI,CAAGhoB,MAAM,EAAIsnB,SAAV,CAAsBhpB,KAAK,CAAC6oB,WAA5B,CAA0CloB,SADrD,CAEIgpB,UAAU,CAAGD,IAAI,CAAGhP,oCAAQ,CAACgP,IAAD,CAAX,CAAoB,EAFzC,CAIA,GAAIC,UAAJ,CAAgB,CACd,OAAQA,UAAR,EACE,IAAKR,mBAAL,CAAyB,MAAOjC,oBAAP,CACzB,IAAKkC,cAAL,CAAoB,MAAOxC,eAAP,CACpB,IAAKyC,kBAAL,CAAwB,MAAOJ,WAAP,CACxB,IAAKK,cAAL,CAAoB,MAAOvC,eAAP,CACpB,IAAKwC,kBAAL,CAAwB,MAAOL,WAAP,CAL1B,CAOD,CACD,MAAOxnB,OAAP,CACD,CAfD,CAgBD,CAEc8nB,kDAAf,E;;;;;;;;AC/CA,GAAItR,sCAAoB,CAAG,CAA3B,CAGA,GAAI0R,QAAO,CAAG,oBAAd,CACIC,QAAQ,CAAG,gBADf,CAEIb,0BAAS,CAAG,iBAFhB,CAKA,GAAI9oB,6BAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,gCAAc,CAAGF,4BAAW,CAACE,cAAjC,CAgBA,QAAS0pB,gBAAT,CAAyBxpB,MAAzB,CAAiC8hB,KAAjC,CAAwCsD,OAAxC,CAAiD3kB,UAAjD,CAA6D4kB,SAA7D,CAAwElN,KAAxE,CAA+E,CAC7E,GAAIsR,SAAQ,CAAGlqB,kCAAO,CAACS,MAAD,CAAtB,CACI0pB,QAAQ,CAAGnqB,kCAAO,CAACuiB,KAAD,CADtB,CAEI6H,MAAM,CAAGF,QAAQ,CAAGF,QAAH,CAAcL,OAAM,CAAClpB,MAAD,CAFzC,CAGI4pB,MAAM,CAAGF,QAAQ,CAAGH,QAAH,CAAcL,OAAM,CAACpH,KAAD,CAHzC,CAKA6H,MAAM,CAAGA,MAAM,EAAIL,OAAV,CAAoBZ,0BAApB,CAAgCiB,MAAzC,CACAC,MAAM,CAAGA,MAAM,EAAIN,OAAV,CAAoBZ,0BAApB,CAAgCkB,MAAzC,CAEA,GAAIC,SAAQ,CAAGF,MAAM,EAAIjB,0BAAzB,CACIoB,QAAQ,CAAGF,MAAM,EAAIlB,0BADzB,CAEIqB,SAAS,CAAGJ,MAAM,EAAIC,MAF1B,CAIA,GAAIG,SAAS,EAAIxG,mCAAQ,CAACvjB,MAAD,CAAzB,CAAmC,CACjC,GAAI,CAACujB,mCAAQ,CAACzB,KAAD,CAAb,CAAsB,CACpB,MAAO,MAAP,CACD,CACD2H,QAAQ,CAAG,IAAX,CACAI,QAAQ,CAAG,KAAX,CACD,CACD,GAAIE,SAAS,EAAI,CAACF,QAAlB,CAA4B,CAC1B1R,KAAK,GAAKA,KAAK,CAAG,GAAIC,0BAAJ,EAAb,CAAL,CACA,MAAQqR,SAAQ,EAAIO,uCAAY,CAAChqB,MAAD,CAAzB,CACHmlB,YAAW,CAACnlB,MAAD,CAAS8hB,KAAT,CAAgBsD,OAAhB,CAAyB3kB,UAAzB,CAAqC4kB,SAArC,CAAgDlN,KAAhD,CADR,CAEH4O,WAAU,CAAC/mB,MAAD,CAAS8hB,KAAT,CAAgB6H,MAAhB,CAAwBvE,OAAxB,CAAiC3kB,UAAjC,CAA6C4kB,SAA7C,CAAwDlN,KAAxD,CAFd,CAGD,CACD,GAAI,EAAEiN,OAAO,CAAGxN,qCAAZ,CAAJ,CAAuC,CACrC,GAAIqS,aAAY,CAAGJ,QAAQ,EAAI/pB,+BAAc,CAACK,IAAf,CAAoBH,MAApB,CAA4B,aAA5B,CAA/B,CACIkqB,YAAY,CAAGJ,QAAQ,EAAIhqB,+BAAc,CAACK,IAAf,CAAoB2hB,KAApB,CAA2B,aAA3B,CAD/B,CAGA,GAAImI,YAAY,EAAIC,YAApB,CAAkC,CAChC,GAAIC,aAAY,CAAGF,YAAY,CAAGjqB,MAAM,CAACN,KAAP,EAAH,CAAoBM,MAAnD,CACIoqB,YAAY,CAAGF,YAAY,CAAGpI,KAAK,CAACpiB,KAAN,EAAH,CAAmBoiB,KADlD,CAGA3J,KAAK,GAAKA,KAAK,CAAG,GAAIC,0BAAJ,EAAb,CAAL,CACA,MAAOiN,UAAS,CAAC8E,YAAD,CAAeC,YAAf,CAA6BhF,OAA7B,CAAsC3kB,UAAtC,CAAkD0X,KAAlD,CAAhB,CACD,CACF,CACD,GAAI,CAAC4R,SAAL,CAAgB,CACd,MAAO,MAAP,CACD,CACD5R,KAAK,GAAKA,KAAK,CAAG,GAAIC,0BAAJ,EAAb,CAAL,CACA,MAAO4P,cAAY,CAAChoB,MAAD,CAAS8hB,KAAT,CAAgBsD,OAAhB,CAAyB3kB,UAAzB,CAAqC4kB,SAArC,CAAgDlN,KAAhD,CAAnB,CACD,CAEcqR,oEAAf,E;;;;;ACjEA,QAASnR,YAAT,CAAqB3Y,KAArB,CAA4BoiB,KAA5B,CAAmCsD,OAAnC,CAA4C3kB,UAA5C,CAAwD0X,KAAxD,CAA+D,CAC7D,GAAIzY,KAAK,GAAKoiB,KAAd,CAAqB,CACnB,MAAO,KAAP,CACD,CACD,GAAIpiB,KAAK,EAAI,IAAT,EAAiBoiB,KAAK,EAAI,IAA1B,EAAmC,CAACnK,uCAAY,CAACjY,KAAD,CAAb,EAAwB,CAACiY,uCAAY,CAACmK,KAAD,CAA5E,CAAsF,CACpF,MAAOpiB,MAAK,GAAKA,KAAV,EAAmBoiB,KAAK,GAAKA,KAApC,CACD,CACD,MAAO0H,iBAAe,CAAC9pB,KAAD,CAAQoiB,KAAR,CAAesD,OAAf,CAAwB3kB,UAAxB,CAAoC4X,WAApC,CAAiDF,KAAjD,CAAtB,CACD,CAEcE,uFAAf,E;;;;;;;;;;;;;;;;;;ACxBA,GAAIgS,WAAU,CAAGC,mCAAO,CAACnrB,MAAM,CAACqZ,IAAR,CAAcrZ,MAAd,CAAxB,CAEekrB,0DAAf,E;;ACDA,GAAIzqB,YAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,yBAAc,CAAGF,WAAW,CAACE,cAAjC,CASA,QAASyqB,SAAT,CAAkBvqB,MAAlB,CAA0B,CACxB,GAAI,CAACuD,uCAAW,CAACvD,MAAD,CAAhB,CAA0B,CACxB,MAAOqqB,YAAU,CAACrqB,MAAD,CAAjB,CACD,CACD,GAAIoB,OAAM,CAAG,EAAb,CACA,IAAK,GAAInB,IAAT,GAAgBd,OAAM,CAACa,MAAD,CAAtB,CAAgC,CAC9B,GAAIF,wBAAc,CAACK,IAAf,CAAoBH,MAApB,CAA4BC,GAA5B,GAAoCA,GAAG,EAAI,aAA/C,CAA8D,CAC5DmB,MAAM,CAACgC,IAAP,CAAYnD,GAAZ,EACD,CACF,CACD,MAAOmB,OAAP,CACD,CAEcmpB,sDAAf,E;;;;;ACGA,QAAS/R,KAAT,CAAcxY,MAAd,CAAsB,CACpB,MAAO6C,uCAAW,CAAC7C,MAAD,CAAX,CAAsByD,yCAAa,CAACzD,MAAD,CAAnC,CAA8CuqB,SAAQ,CAACvqB,MAAD,CAA7D,CACD,CAEcwY,kFAAf,E;;;;;;;;;ACjBA,QAASgS,SAAT,CAAkB9qB,KAAlB,CAAyB,CACvB,MAAO,WAAW,CAChB,MAAOA,MAAP,CACD,CAFD,CAGD,CAEc8qB,+DAAf,E;;;;;;;;ACbA,GAAIC,gBAAe,CAAG,CAAC1I,kCAAD,CAAkB9I,2BAAlB,CAA6B,SAAS7W,IAAT,CAAegf,MAAf,CAAuB,CACxE,MAAOW,2CAAc,CAAC3f,IAAD,CAAO,UAAP,CAAmB,CACtC,eAAgB,IADsB,CAEtC,aAAc,KAFwB,CAGtC,QAASooB,kBAAQ,CAACpJ,MAAD,CAHqB,CAItC,WAAY,IAJ0B,CAAnB,CAArB,CAMD,CAPD,CASeqJ,oEAAf,E;;;;;ACVA,GAAIpoB,YAAW,CAAGqoB,oCAAQ,CAACD,gBAAD,CAA1B,CAEepoB,uFAAf,E;;;;;;;;;;;;;;;;;;ACRA,GAAIinB,QAAO,CAAG,oBAAd,CACIC,QAAQ,CAAG,gBADf,CAEIpD,OAAO,CAAG,kBAFd,CAGIC,OAAO,CAAG,eAHd,CAIIC,QAAQ,CAAG,gBAJf,CAKIxB,OAAO,CAAG,mBALd,CAMIyB,MAAM,CAAG,cANb,CAOIC,SAAS,CAAG,iBAPhB,CAQImC,SAAS,CAAG,iBARhB,CASIlC,SAAS,CAAG,iBAThB,CAUIC,MAAM,CAAG,cAVb,CAWIC,SAAS,CAAG,iBAXhB,CAYIkC,UAAU,CAAG,kBAZjB,CAcA,GAAIjC,eAAc,CAAG,sBAArB,CACIC,WAAW,CAAG,mBADlB,CAEI+D,UAAU,CAAG,uBAFjB,CAGIC,UAAU,CAAG,uBAHjB,CAIIC,OAAO,CAAG,oBAJd,CAKIC,QAAQ,CAAG,qBALf,CAMIC,QAAQ,CAAG,qBANf,CAOIC,QAAQ,CAAG,qBAPf,CAQIC,eAAe,CAAG,4BARtB,CASIC,SAAS,CAAG,sBAThB,CAUIC,SAAS,CAAG,sBAVhB,CAaA,GAAIC,eAAc,CAAG,EAArB,CACAA,cAAc,CAACT,UAAD,CAAd,CAA6BS,cAAc,CAACR,UAAD,CAAd,CAC7BQ,cAAc,CAACP,OAAD,CAAd,CAA0BO,cAAc,CAACN,QAAD,CAAd,CAC1BM,cAAc,CAACL,QAAD,CAAd,CAA2BK,cAAc,CAACJ,QAAD,CAAd,CAC3BI,cAAc,CAACH,eAAD,CAAd,CAAkCG,cAAc,CAACF,SAAD,CAAd,CAClCE,cAAc,CAACD,SAAD,CAAd,CAA4B,IAJ5B,CAKAC,cAAc,CAAC9B,OAAD,CAAd,CAA0B8B,cAAc,CAAC7B,QAAD,CAAd,CAC1B6B,cAAc,CAACzE,cAAD,CAAd,CAAiCyE,cAAc,CAACjF,OAAD,CAAd,CACjCiF,cAAc,CAACxE,WAAD,CAAd,CAA8BwE,cAAc,CAAChF,OAAD,CAAd,CAC9BgF,cAAc,CAAC/E,QAAD,CAAd,CAA2B+E,cAAc,CAACvG,OAAD,CAAd,CAC3BuG,cAAc,CAAC9E,MAAD,CAAd,CAAyB8E,cAAc,CAAC7E,SAAD,CAAd,CACzB6E,cAAc,CAAC1C,SAAD,CAAd,CAA4B0C,cAAc,CAAC5E,SAAD,CAAd,CAC5B4E,cAAc,CAAC3E,MAAD,CAAd,CAAyB2E,cAAc,CAAC1E,SAAD,CAAd,CACzB0E,cAAc,CAACxC,UAAD,CAAd,CAA6B,KAP7B,CAgBA,QAASyC,iBAAT,CAA0B3rB,KAA1B,CAAiC,CAC/B,MAAOiY,wCAAY,CAACjY,KAAD,CAAZ,EACLohB,mCAAQ,CAACphB,KAAK,CAACkB,MAAP,CADH,EACqB,CAAC,CAACwqB,cAAc,CAAC/P,sCAAU,CAAC3b,KAAD,CAAX,CAD5C,CAED,CAEc2rB,sEAAf,E;;;;;;;;ACtDA,GAAIC,iBAAgB,CAAGC,4BAAQ,EAAIA,4BAAQ,CAACvB,YAA5C,CAmBA,GAAIA,aAAY,CAAGsB,gBAAgB,CAAG3Y,qCAAS,CAAC2Y,gBAAD,CAAZ,CAAiCD,iBAApE,CAEerB,kGAAf,E;;;;;;;;;;;;;;;ACtBA,GAAIV,QAAO,CAAG,oBAAd,CASA,QAASkC,gBAAT,CAAyB9rB,KAAzB,CAAgC,CAC9B,MAAOiY,wCAAY,CAACjY,KAAD,CAAZ,EAAuB2b,sCAAU,CAAC3b,KAAD,CAAV,EAAqB4pB,OAAnD,CACD,CAEckC,oEAAf,E;;ACbA,GAAI5rB,YAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,2BAAc,CAAGF,WAAW,CAACE,cAAjC,CAGA,GAAI2nB,qBAAoB,CAAG7nB,WAAW,CAAC6nB,oBAAvC,CAoBA,GAAI7lB,YAAW,CAAG4pB,gBAAe,CAAC,UAAW,CAAE,MAAOvf,UAAP,CAAmB,CAAhC,EAAD,CAAf,CAAsDuf,gBAAtD,CAAwE,SAAS9rB,KAAT,CAAgB,CACxG,MAAOiY,wCAAY,CAACjY,KAAD,CAAZ,EAAuBI,0BAAc,CAACK,IAAf,CAAoBT,KAApB,CAA2B,QAA3B,CAAvB,EACL,CAAC+nB,oBAAoB,CAACtnB,IAArB,CAA0BT,KAA1B,CAAiC,QAAjC,CADH,CAED,CAHD,CAKekC,gGAAf,E;;;;;;;ACnCA;AAEA,GAAImgB,eAAc,CAAI,UAAW,CAC/B,GAAI,CACF,GAAI3f,KAAI,CAAGkY,qEAAS,CAACnb,MAAD,CAAS,gBAAT,CAApB,CACAiD,IAAI,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAJ,CACA,MAAOA,KAAP,CACD,CAAC,MAAOiC,CAAP,CAAU,CAAE,CACf,CANqB,EAAtB,CAQe0d,uEAAf,E;;;;;;;;;;;;ACDA,QAAS0J,WAAT,EAAsB,CACpB,KAAKpJ,QAAL,CAAgB,GAAIO,8BAAJ,EAAhB,CACA,KAAK/N,IAAL,CAAY,CAAZ,CACD,CAEc4W,0DAAf,E;;ACLA,QAASC,YAAT,CAAqBzrB,GAArB,CAA0B,CACxB,GAAIgY,KAAI,CAAG,KAAKoK,QAAhB,CACIjhB,MAAM,CAAG6W,IAAI,CAAC,QAAD,CAAJ,CAAehY,GAAf,CADb,CAGA,KAAK4U,IAAL,CAAYoD,IAAI,CAACpD,IAAjB,CACA,MAAOzT,OAAP,CACD,CAEcsqB,4DAAf,E;;ACRA,QAASC,SAAT,CAAkB1rB,GAAlB,CAAuB,CACrB,MAAO,MAAKoiB,QAAL,CAAc5L,GAAd,CAAkBxW,GAAlB,CAAP,CACD,CAEc0rB,sDAAf,E;;ACJA,QAASC,SAAT,CAAkB3rB,GAAlB,CAAuB,CACrB,MAAO,MAAKoiB,QAAL,CAAcrT,GAAd,CAAkB/O,GAAlB,CAAP,CACD,CAEc2rB,sDAAf,E;;;;;;;;ACRA,GAAIC,iBAAgB,CAAG,GAAvB,CAYA,QAASC,SAAT,CAAkB7rB,GAAlB,CAAuBP,KAAvB,CAA8B,CAC5B,GAAIuY,KAAI,CAAG,KAAKoK,QAAhB,CACA,GAAIpK,IAAI,WAAY2K,8BAApB,CAA+B,CAC7B,GAAImJ,MAAK,CAAG9T,IAAI,CAACoK,QAAjB,CACA,GAAI,CAACzL,uBAAD,EAASmV,KAAK,CAACnrB,MAAN,CAAeirB,gBAAgB,CAAG,CAA/C,CAAmD,CACjDE,KAAK,CAAC3oB,IAAN,CAAW,CAACnD,GAAD,CAAMP,KAAN,CAAX,EACA,KAAKmV,IAAL,CAAY,EAAEoD,IAAI,CAACpD,IAAnB,CACA,MAAO,KAAP,CACD,CACDoD,IAAI,CAAG,KAAKoK,QAAL,CAAgB,GAAImC,6BAAJ,CAAauH,KAAb,CAAvB,CACD,CACD9T,IAAI,CAACnB,GAAL,CAAS7W,GAAT,CAAcP,KAAd,EACA,KAAKmV,IAAL,CAAYoD,IAAI,CAACpD,IAAjB,CACA,MAAO,KAAP,CACD,CAEciX,sDAAf,E;;ACnBA,QAAS1T,MAAT,CAAelD,OAAf,CAAwB,CACtB,GAAI+C,KAAI,CAAG,KAAKoK,QAAL,CAAgB,GAAIO,8BAAJ,CAAc1N,OAAd,CAA3B,CACA,KAAKL,IAAL,CAAYoD,IAAI,CAACpD,IAAjB,CACD,CAGDuD,KAAK,CAACvY,SAAN,CAAgBiJ,KAAhB,CAAwB2iB,WAAxB,CACArT,KAAK,CAACvY,SAAN,CAAgB,QAAhB,EAA4B6rB,YAA5B,CACAtT,KAAK,CAACvY,SAAN,CAAgB4W,GAAhB,CAAsBkV,SAAtB,CACAvT,KAAK,CAACvY,SAAN,CAAgBmP,GAAhB,CAAsB4c,SAAtB,CACAxT,KAAK,CAACvY,SAAN,CAAgBiX,GAAhB,CAAsBgV,SAAtB,CAEe1T,2EAAf,E;;;;;;;ACjBA,QAAShJ,UAAT,CAAmBtN,KAAnB,CAA0BkR,KAA1B,CAAiCC,GAAjC,CAAsC,CACpC,GAAItS,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGkB,KAAK,CAAClB,MADnB,CAGA,GAAIoS,KAAK,CAAG,CAAZ,CAAe,CACbA,KAAK,CAAG,CAACA,KAAD,CAASpS,MAAT,CAAkB,CAAlB,CAAuBA,MAAM,CAAGoS,KAAxC,CACD,CACDC,GAAG,CAAGA,GAAG,CAAGrS,MAAN,CAAeA,MAAf,CAAwBqS,GAA9B,CACA,GAAIA,GAAG,CAAG,CAAV,CAAa,CACXA,GAAG,EAAIrS,MAAP,CACD,CACDA,MAAM,CAAGoS,KAAK,CAAGC,GAAR,CAAc,CAAd,CAAoBA,GAAG,CAAGD,KAAP,GAAkB,CAA9C,CACAA,KAAK,IAAM,CAAX,CAEA,GAAI5R,OAAM,CAAG5B,KAAK,CAACoB,MAAD,CAAlB,CACA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvBQ,MAAM,CAACT,KAAD,CAAN,CAAgBmB,KAAK,CAACnB,KAAK,CAAGqS,KAAT,CAArB,CACD,CACD,MAAO5R,OAAP,CACD,CAEcgO,kEAAf,E;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEO,MAAM4c,SAAqB,GAAGznB,iEAAY,CAACyC,QAAQ,CAACC,eAAV,EAA2B,MAA3B,CAAZ,CAGnCJ,IAHmC,CAG9B,MAAMiN,8DAAO,CAAC,MAAM9M,QAAQ,CAACsC,IAAhB,EAAsB,EAAtB,CAHiB,CAA9B;AAKA,MAAM2iB,YAAwB,GAAGD,SAAS,CAC/CnlB,IADsC,CACjC,MAAM/C,OAAO,CAACC,IAAR,CAAa,CACxBioB,SAAS,CAACnlB,IAAV,CAAe,MAAMb,sEAAiB,CAACgB,QAAQ,CAACsC,IAAV,EAAgB,YAAhB,CAAtC,CADwB,EAExB4iB,aAFwB,CAAb,CAD2B,CAAjC;AAMA,MAAMA,aAAyB,GAAGF,SAAS,CAChDnlB,IADuC,CAClC,MAAM/C,OAAO,CAACC,IAAR,CAAa,CACxBJ,iEAAY,CAACiF,MAAD,EAAS,kBAAT,EAA6B,MAA7B,CADY,EAExBkL,8DAAO,CAAC,MAAM9M,QAAQ,CAACmlB,UAAT,KAAwB,aAAxB,IAAyCnlB,QAAQ,CAACmlB,UAAT,KAAwB,UAAxE,EAAoF,GAApF,CAFiB,CAAb,CAD4B,CAAlC;AAMA,MAAMC,YAAwB,GAAGJ,SAAS,CAC/CnlB,IADsC,CACjC,MAAM/C,OAAO,CAACC,IAAR,CAAa,CACxBJ,iEAAY,CAACiF,MAAD,EAAS,MAAT,CADY,EAExBkL,8DAAO,CAAC,MAAM9M,QAAQ,CAACmlB,UAAT,KAAwB,UAA/B,EAA2C,GAA3C,CAFiB,CAAb,CAD2B,CAAjC,C;;;;;;;;;ACrBP,GAAIE,aAAY,CAAG,IAAnB,CAUA,QAASC,gBAAT,CAAyBlL,MAAzB,CAAiC,CAC/B,GAAIzgB,MAAK,CAAGygB,MAAM,CAACxgB,MAAnB,CAEA,MAAOD,KAAK,IAAM0rB,YAAY,CAAClS,IAAb,CAAkBiH,MAAM,CAACmL,MAAP,CAAc5rB,KAAd,CAAlB,CAAlB,CAA2D,CAAE,CAC7D,MAAOA,MAAP,CACD,CAEc2rB,oEAAf,E;;ACfA,GAAIE,YAAW,CAAG,MAAlB,CASA,QAASC,SAAT,CAAkBrL,MAAlB,CAA0B,CACxB,MAAOA,OAAM,CACTA,MAAM,CAACjB,KAAP,CAAa,CAAb,CAAgBmM,gBAAe,CAAClL,MAAD,CAAf,CAA0B,CAA1C,EAA6CrH,OAA7C,CAAqDyS,WAArD,CAAkE,EAAlE,CADS,CAETpL,MAFJ,CAGD,CAEcqL,sDAAf,E;;;;;;;;ACbA,GAAIC,IAAG,CAAG,EAAI,CAAd,CAGA,GAAIC,WAAU,CAAG,oBAAjB,CAGA,GAAIC,WAAU,CAAG,YAAjB,CAGA,GAAIC,UAAS,CAAG,aAAhB,CAGA,GAAIC,aAAY,CAAGC,QAAnB,CAyBA,QAASlc,SAAT,CAAkBnR,KAAlB,CAAyB,CACvB,GAAI,MAAOA,MAAP,EAAgB,QAApB,CAA8B,CAC5B,MAAOA,MAAP,CACD,CACD,GAAI8a,mCAAQ,CAAC9a,KAAD,CAAZ,CAAqB,CACnB,MAAOgtB,IAAP,CACD,CACD,GAAIjtB,mCAAQ,CAACC,KAAD,CAAZ,CAAqB,CACnB,GAAIoiB,MAAK,CAAG,MAAOpiB,MAAK,CAAConB,OAAb,EAAwB,UAAxB,CAAqCpnB,KAAK,CAAConB,OAAN,EAArC,CAAuDpnB,KAAnE,CACAA,KAAK,CAAGD,mCAAQ,CAACqiB,KAAD,CAAR,CAAmBA,KAAK,CAAG,EAA3B,CAAiCA,KAAzC,CACD,CACD,GAAI,MAAOpiB,MAAP,EAAgB,QAApB,CAA8B,CAC5B,MAAOA,MAAK,GAAK,CAAV,CAAcA,KAAd,CAAsB,CAACA,KAA9B,CACD,CACDA,KAAK,CAAG+sB,SAAQ,CAAC/sB,KAAD,CAAhB,CACA,GAAIstB,SAAQ,CAAGJ,UAAU,CAACzS,IAAX,CAAgBza,KAAhB,CAAf,CACA,MAAQstB,SAAQ,EAAIH,SAAS,CAAC1S,IAAV,CAAeza,KAAf,CAAb,CACHotB,YAAY,CAACptB,KAAK,CAACygB,KAAN,CAAY,CAAZ,CAAD,CAAiB6M,QAAQ,CAAG,CAAH,CAAO,CAAhC,CADT,CAEFL,UAAU,CAACxS,IAAX,CAAgBza,KAAhB,EAAyBgtB,GAAzB,CAA+B,CAAChtB,KAFrC,CAGD,CAEcmR,0FAAf,E;;;;;;;;;;;;AC5DA,GAAI0J,SAAQ,CAAG,EAAI,CAAnB,CACI0S,WAAW,CAAG,uBADlB,CA0BA,QAASC,SAAT,CAAkBxtB,KAAlB,CAAyB,CACvB,GAAI,CAACA,KAAL,CAAY,CACV,MAAOA,MAAK,GAAK,CAAV,CAAcA,KAAd,CAAsB,CAA7B,CACD,CACDA,KAAK,CAAGmR,mCAAQ,CAACnR,KAAD,CAAhB,CACA,GAAIA,KAAK,GAAK6a,QAAV,EAAsB7a,KAAK,GAAK,CAAC6a,QAArC,CAA+C,CAC7C,GAAI4S,KAAI,CAAIztB,KAAK,CAAG,CAAR,CAAY,CAAC,CAAb,CAAiB,CAA7B,CACA,MAAOytB,KAAI,CAAGF,WAAd,CACD,CACD,MAAOvtB,MAAK,GAAKA,KAAV,CAAkBA,KAAlB,CAA0B,CAAjC,CACD,CAEcwtB,+DAAf,E;;ACbA,QAASE,UAAT,CAAmB1tB,KAAnB,CAA0B,CACxB,GAAI0B,OAAM,CAAG8rB,kBAAQ,CAACxtB,KAAD,CAArB,CACI2tB,SAAS,CAAGjsB,MAAM,CAAG,CADzB,CAGA,MAAOA,OAAM,GAAKA,MAAX,CAAqBisB,SAAS,CAAGjsB,MAAM,CAAGisB,SAAZ,CAAwBjsB,MAAtD,CAAgE,CAAvE,CACD,CAEcgsB,4FAAf,E;;;;;;;AClCA,GAAI/tB,WAAU,CAAG,MAAOiuB,OAAP,EAAiB,QAAjB,EAA6BA,MAA7B,EAAuCA,MAAM,CAACnuB,MAAP,GAAkBA,MAAzD,EAAmEmuB,MAApF,CAEejuB,mEAAf,E;;;;;;;ACIA,QAASsT,UAAT,CAAmBvQ,IAAnB,CAAyB,CACvB,MAAO,UAAS1C,KAAT,CAAgB,CACrB,MAAO0C,KAAI,CAAC1C,KAAD,CAAX,CACD,CAFD,CAGD,CAEciT,kEAAf,E;;;;;;;ACLA,QAASqT,SAAT,CAAkBnd,KAAlB,CAAyB5I,GAAzB,CAA8B,CAC5B,MAAO4I,MAAK,CAACmG,GAAN,CAAU/O,GAAV,CAAP,CACD,CAEc+lB,iEAAf,E;;;;;;;ACJA,QAAS/jB,UAAT,CAAmBH,KAAnB,CAA0BsQ,MAA1B,CAAkC,CAChC,GAAIzR,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGwR,MAAM,CAACxR,MADpB,CAEI2sB,MAAM,CAAGzrB,KAAK,CAAClB,MAFnB,CAIA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvBkB,KAAK,CAACyrB,MAAM,CAAG5sB,KAAV,CAAL,CAAwByR,MAAM,CAACzR,KAAD,CAA9B,CACD,CACD,MAAOmB,MAAP,CACD,CAEcG,kEAAf,E;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,GAAIrC,YAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,eAAc,CAAGF,WAAW,CAACE,cAAjC,CAUA,QAAS2D,cAAT,CAAuB/D,KAAvB,CAA8B8tB,SAA9B,CAAyC,CACvC,GAAIC,MAAK,CAAGluB,mEAAO,CAACG,KAAD,CAAnB,CACIguB,KAAK,CAAG,CAACD,KAAD,EAAU7rB,uEAAW,CAAClC,KAAD,CADjC,CAEIiuB,MAAM,CAAG,CAACF,KAAD,EAAU,CAACC,KAAX,EAAoBnK,oEAAQ,CAAC7jB,KAAD,CAFzC,CAGIkuB,MAAM,CAAG,CAACH,KAAD,EAAU,CAACC,KAAX,EAAoB,CAACC,MAArB,EAA+B3D,wEAAY,CAACtqB,KAAD,CAHxD,CAIImuB,WAAW,CAAGJ,KAAK,EAAIC,KAAT,EAAkBC,MAAlB,EAA4BC,MAJ9C,CAKIxsB,MAAM,CAAGysB,WAAW,CAAGC,qEAAS,CAACpuB,KAAK,CAACkB,MAAP,CAAemtB,MAAf,CAAZ,CAAqC,EAL7D,CAMIntB,MAAM,CAAGQ,MAAM,CAACR,MANpB,CAQA,IAAK,GAAIX,IAAT,GAAgBP,MAAhB,CAAuB,CACrB,GAAI,CAAC8tB,SAAS,EAAI1tB,cAAc,CAACK,IAAf,CAAoBT,KAApB,CAA2BO,GAA3B,CAAd,GACA,EAAE4tB,WAAW,GAEV5tB,GAAG,EAAI,QAAP,EAEC0tB,MAAM,GAAK1tB,GAAG,EAAI,QAAP,EAAmBA,GAAG,EAAI,QAA/B,CAFP,EAIC2tB,MAAM,GAAK3tB,GAAG,EAAI,QAAP,EAAmBA,GAAG,EAAI,YAA1B,EAA0CA,GAAG,EAAI,YAAtD,CAJP,EAMAe,mEAAO,CAACf,GAAD,CAAMW,MAAN,CARG,CAAb,CADJ,CAUQ,CACNQ,MAAM,CAACgC,IAAP,CAAYnD,GAAZ,EACD,CACF,CACD,MAAOmB,OAAP,CACD,CAEcqC,sEAAf,E;;;;;;;ACvCA,QAASqqB,UAAT,CAAmBE,CAAnB,CAAsB3b,QAAtB,CAAgC,CAC9B,GAAI1R,MAAK,CAAG,CAAC,CAAb,CACIS,MAAM,CAAG5B,KAAK,CAACwuB,CAAD,CADlB,CAGA,MAAO,EAAErtB,KAAF,CAAUqtB,CAAjB,CAAoB,CAClB5sB,MAAM,CAACT,KAAD,CAAN,CAAgB0R,QAAQ,CAAC1R,KAAD,CAAxB,CACD,CACD,MAAOS,OAAP,CACD,CAEc0sB,kEAAf,E;;;;;;;AClBA,GAAIluB,YAAW,CAAGT,MAAM,CAACU,SAAzB,CASA,QAAS0D,YAAT,CAAqB7D,KAArB,CAA4B,CAC1B,GAAI0pB,KAAI,CAAG1pB,KAAK,EAAIA,KAAK,CAAC6oB,WAA1B,CACIpG,KAAK,CAAI,MAAOiH,KAAP,EAAe,UAAf,EAA6BA,IAAI,CAACvpB,SAAnC,EAAiDD,WAD7D,CAGA,MAAOF,MAAK,GAAKyiB,KAAjB,CACD,CAEc5e,oEAAf,E;;;;;;;ACTA,QAAS+mB,QAAT,CAAiBloB,IAAjB,CAAuB6rB,SAAvB,CAAkC,CAChC,MAAO,UAASpY,GAAT,CAAc,CACnB,MAAOzT,KAAI,CAAC6rB,SAAS,CAACpY,GAAD,CAAV,CAAX,CACD,CAFD,CAGD,CAEcyU,gEAAf,E;;;;;;;ACLA,QAASzC,YAAT,CAAqB/lB,KAArB,CAA4BX,SAA5B,CAAuC,CACrC,GAAIR,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGkB,KAAK,EAAI,IAAT,CAAgB,CAAhB,CAAoBA,KAAK,CAAClB,MADvC,CAEIstB,QAAQ,CAAG,CAFf,CAGI9sB,MAAM,CAAG,EAHb,CAKA,MAAO,EAAET,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIlB,MAAK,CAAGoC,KAAK,CAACnB,KAAD,CAAjB,CACA,GAAIQ,SAAS,CAACzB,KAAD,CAAQiB,KAAR,CAAemB,KAAf,CAAb,CAAoC,CAClCV,MAAM,CAAC8sB,QAAQ,EAAT,CAAN,CAAqBxuB,KAArB,CACD,CACF,CACD,MAAO0B,OAAP,CACD,CAEcymB,oEAAf,E;;;;;;;ACjBA,QAAS7O,aAAT,CAAsB/Y,GAAtB,CAA2B,CACzB,MAAO,UAASD,MAAT,CAAiB,CACtB,MAAOA,OAAM,EAAI,IAAV,CAAiBK,SAAjB,CAA6BL,MAAM,CAACC,GAAD,CAA1C,CACD,CAFD,CAGD,CAEc+Y,qEAAf,E;;;;;;;ACDA,QAASmV,KAAT,EAAgB,CAEf,CAEcA,6DAAf,E;;;;;;;ACfA,GAAIC,UAAS,CAAG,GAAhB,CACIC,QAAQ,CAAG,EADf,CAIA,GAAIC,UAAS,CAAG9f,IAAI,CAACC,GAArB,CAWA,QAASic,SAAT,CAAkBtoB,IAAlB,CAAwB,CACtB,GAAImsB,MAAK,CAAG,CAAZ,CACIC,UAAU,CAAG,CADjB,CAGA,MAAO,WAAW,CAChB,GAAIC,MAAK,CAAGH,SAAS,EAArB,CACInX,SAAS,CAAGkX,QAAQ,EAAII,KAAK,CAAGD,UAAZ,CADxB,CAGAA,UAAU,CAAGC,KAAb,CACA,GAAItX,SAAS,CAAG,CAAhB,CAAmB,CACjB,GAAI,EAAEoX,KAAF,EAAWH,SAAf,CAA0B,CACxB,MAAOniB,UAAS,CAAC,CAAD,CAAhB,CACD,CACF,CAJD,IAIO,CACLsiB,KAAK,CAAG,CAAR,CACD,CACD,MAAOnsB,KAAI,CAAC8O,KAAL,CAAW7Q,SAAX,CAAsB4L,SAAtB,CAAP,CACD,CAbD,CAcD,CAEcye,iEAAf,E;;;;;;;AC3BA,QAASgE,UAAT,CAAmB5sB,KAAnB,CAA0BuQ,QAA1B,CAAoC,CAClC,GAAI1R,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGkB,KAAK,EAAI,IAAT,CAAgB,CAAhB,CAAoBA,KAAK,CAAClB,MADvC,CAGA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIyR,QAAQ,CAACvQ,KAAK,CAACnB,KAAD,CAAN,CAAeA,KAAf,CAAsBmB,KAAtB,CAAR,GAAyC,KAA7C,CAAoD,CAClD,MACD,CACF,CACD,MAAOA,MAAP,CACD,CAEc4sB,kEAAf,E;;;;;;;ACrBA;AAWA,QAASC,cAAT,CAAuB7sB,KAAvB,CAA8BpC,KAA9B,CAAqC,CACnC,GAAIkB,OAAM,CAAGkB,KAAK,EAAI,IAAT,CAAgB,CAAhB,CAAoBA,KAAK,CAAClB,MAAvC,CACA,MAAO,CAAC,CAACA,MAAF,EAAY2R,uEAAW,CAACzQ,KAAD,CAAQpC,KAAR,CAAe,CAAf,CAAX,CAA+B,CAAC,CAAnD,CACD,CAEcivB,sEAAf,E;;;;;;;AChBA;AAGA,GAAI7e,UAAS,CAAGtF,IAAI,CAACC,GAArB,CAWA,QAASnI,SAAT,CAAkBF,IAAlB,CAAwB4Q,KAAxB,CAA+Bib,SAA/B,CAA0C,CACxCjb,KAAK,CAAGlD,SAAS,CAACkD,KAAK,GAAK3S,SAAV,CAAuB+B,IAAI,CAACxB,MAAL,CAAc,CAArC,CAA0CoS,KAA3C,CAAkD,CAAlD,CAAjB,CACA,MAAO,WAAW,CAChB,GAAIhC,KAAI,CAAG/E,SAAX,CACItL,KAAK,CAAG,CAAC,CADb,CAEIC,MAAM,CAAGkP,SAAS,CAACkB,IAAI,CAACpQ,MAAL,CAAcoS,KAAf,CAAsB,CAAtB,CAFtB,CAGIlR,KAAK,CAAGtC,KAAK,CAACoB,MAAD,CAHjB,CAKA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvBkB,KAAK,CAACnB,KAAD,CAAL,CAAeqQ,IAAI,CAACgC,KAAK,CAAGrS,KAAT,CAAnB,CACD,CACDA,KAAK,CAAG,CAAC,CAAT,CACA,GAAIiuB,UAAS,CAAGpvB,KAAK,CAACwT,KAAK,CAAG,CAAT,CAArB,CACA,MAAO,EAAErS,KAAF,CAAUqS,KAAjB,CAAwB,CACtB4b,SAAS,CAACjuB,KAAD,CAAT,CAAmBqQ,IAAI,CAACrQ,KAAD,CAAvB,CACD,CACDiuB,SAAS,CAAC5b,KAAD,CAAT,CAAmBib,SAAS,CAACnsB,KAAD,CAA5B,CACA,MAAOoP,kEAAK,CAAC9O,IAAD,CAAO,IAAP,CAAawsB,SAAb,CAAZ,CACD,CAhBD,CAiBD,CAEctsB,iEAAf,E;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAA;AAAO,MAAMusB,MAAM,GAAG,OAAO,EAAtB;AACA,MAAMC,IAAI,GAAG,KAAKD,MAAlB;AACA,MAAME,GAAG,GAAG,KAAKD,IAAjB;AACA,MAAME,IAAI,GAAG,IAAID,GAAjB;AAEA,SAASE,iBAAT,CAA2BC,aAA3B,EAAkD;AAExD,QAAMC,OAAO,GAAG3kB,IAAI,CAAC4kB,KAAL,CAAWF,aAAa,GAAG,EAA3B,IAAiC,EAAjD;AACA,QAAMG,KAAK,GAAG7kB,IAAI,CAAC4kB,KAAL,CAAWF,aAAa,GAAG,IAA3B,CAAd;AAEA,QAAMne,IAAI,GAAG,CAACoe,OAAD,EAJGD,aAAa,GAAG,EAInB,CAAb;;AACA,MAAIG,KAAK,GAAG,CAAZ,EAAe;AACdte,QAAI,CAACue,OAAL,CAAaD,KAAb;AACA;;AAED,SAAOte,IAAI,CAAC/M,GAAL,CAASurB,IAAI,IAAIxB,MAAM,CAACwB,IAAD,CAAN,CAAaC,QAAb,CAAsB,CAAtB,EAAyB,GAAzB,CAAjB,EAAgDpP,IAAhD,CAAqD,GAArD,CAAP;AACA,C;;;;;;;ACjBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOO,eAAeqP,UAAf,CAA6B9a,QAA7B,EAAoD9O,QAApD,EAAuG;AAC7G,OAAK,MAAMoO,GAAX,IAAkBU,QAAlB,EAA4B;AAC3B,UAAM9O,QAAQ,CAACoO,GAAD,CAAd;AACA;AACD;AAEM,eAAeyb,WAAf,CAA8B5tB,KAA9B,EAA0CX,SAA1C,EAAgG;AACtG,QAAMwuB,UAAU,GAAG,MAAM7rB,OAAO,CAAC8rB,GAAR,CAAY9tB,KAAK,CAACkC,GAAN,CAAU7C,SAAV,CAAZ,CAAzB;AACA,SAAOW,KAAK,CAACgE,MAAN,CAAa,CAACzB,CAAD,EAAI6O,CAAJ,KAAUyc,UAAU,CAACzc,CAAD,CAAjC,CAAP;AACA;AAEM,eAAe2c,WAAf,CAAiClb,QAAjC,EAAwD9O,QAAxD,EAAgGiqB,YAAhG,EAA6H;AACnI,MAAItU,WAAW,GAAGsU,YAAlB;;AAEA,OAAK,MAAM7b,GAAX,IAAkBU,QAAlB,EAA4B;AAC3B6G,eAAW,GAAG,MAAM3V,QAAQ,CAAC2V,WAAD,EAAcvH,GAAd,CAA5B;AACA;;AAED,SAAOuH,WAAP;AACA;AAEM,MAAMuU,SAAS,GAAGna,gEAAS,CAAC,WAAuBjB,QAAvB,EAA8CxT,SAA9C,EAA2F;AAC7H,OAAK,MAAM8S,GAAX,IAAkBU,QAAlB,EAA4B;AAC3B,QAAI,MAAMxT,SAAS,CAAC8S,GAAD,CAAnB,EAA0B,OAAOA,GAAP;AAC1B;AACD,CAJiC,CAA3B;;AAcP,SAAS+b,cAAT,CAA8BluB,KAA9B,EAAmD0L,MAAnD,EAA8EsiB,YAA9E,EAA+FG,QAA/F,EAAwH;AACvH,MAAI,CAACnuB,KAAK,CAAClB,MAAX,EAAmB,OAAOkD,OAAO,CAACI,OAAR,CAAgB4rB,YAAhB,CAAP;AAEnB,SAAO,IAAIhsB,OAAJ,CAAY,CAACI,OAAD,EAAU0C,MAAV,KAAqB;AACvC,QAAIuQ,SAAS,GAAGrV,KAAK,CAAClB,MAAtB;AACA,QAAIyV,KAAK,GAAGyZ,YAAZ;;AAEA,aAASI,SAAT,CAAmB1Z,CAAnB,EAAsB;AACrB,UAAIW,SAAS,KAAK,CAAlB,EAAqB;AAErBd,WAAK,GAAG7I,MAAM,CAAC6I,KAAD,EAAQG,CAAR,CAAd;;AAEA,UAAIH,KAAK,KAAK4Z,QAAV,IAAsB,EAAE9Y,SAAF,KAAgB,CAA1C,EAA6C;AAC5CA,iBAAS,GAAG,CAAZ;AACAjT,eAAO,CAACmS,KAAD,CAAP;AACA;AACD;;AAED,aAAS8Z,QAAT,CAAkBna,GAAlB,EAAuB;AACtB,UAAImB,SAAS,KAAK,CAAlB,EAAqB;AAErBA,eAAS,GAAG,CAAZ;AACAvQ,YAAM,CAACoP,GAAD,CAAN;AACA;;AAEDlU,SAAK,CAACmjB,OAAN,CAActP,OAAO,IAAIA,OAAO,CAAC9O,IAAR,CAAaqpB,SAAb,EAAwBC,QAAxB,CAAzB;AACA,GAvBM,CAAP;AAwBA;;AAOM,SAASC,SAAT,CAAsBtuB,KAAtB,EAAkCX,SAAlC,EAA4F;AAClG,SAAO6uB,cAAc,CAACluB,KAAK,CAACkC,GAAN,CAAU7C,SAAV,CAAD,EAAuB,CAACsM,CAAD,EAAIC,CAAJ,KAAUD,CAAC,IAAI,CAAC,CAACC,CAAxC,EAA2C,KAA3C,EAAkD,IAAlD,CAArB;AACA;AAOM,SAAS2iB,UAAT,CAAuBvuB,KAAvB,EAAmCX,SAAnC,EAA6F;AACnG,SAAO6uB,cAAc,CAACluB,KAAK,CAACkC,GAAN,CAAU7C,SAAV,CAAD,EAAuB,CAACsM,CAAD,EAAIC,CAAJ,KAAUD,CAAC,IAAI,CAAC,CAACC,CAAxC,EAA2C,IAA3C,EAAiD,KAAjD,CAArB;AACA;AAIM,MAAM4iB,SAAS,GAAG7b,iEAAU,CAAC,CAAOE,QAAP,EAA8B9O,QAA9B,KAAgE;AACnG,QAAM0qB,MAAM,GAAG,EAAf;;AACA,OAAK,MAAM/Z,CAAX,IAAgB7B,QAAhB,EAA0B;AACzB,UAAMvT,MAAM,GAAGyE,QAAQ,CAAC2Q,CAAD,CAAvB;AACA,QAAIpV,MAAJ,EAAYmvB,MAAM,CAACntB,IAAP,CAAYhC,MAAM,CAAC,CAAD,CAAlB;AACZ;;AACD,SAAOmvB,MAAP;AACA,CAPkC,CAA5B,C;;;;;;;;;AClFP,QAASC,cAAT,CAAuB1uB,KAAvB,CAA8BX,SAA9B,CAAyC8Q,SAAzC,CAAoD0J,SAApD,CAA+D,CAC7D,GAAI/a,OAAM,CAAGkB,KAAK,CAAClB,MAAnB,CACID,KAAK,CAAGsR,SAAS,EAAI0J,SAAS,CAAG,CAAH,CAAO,CAAC,CAArB,CADrB,CAGA,MAAQA,SAAS,CAAGhb,KAAK,EAAR,CAAa,EAAEA,KAAF,CAAUC,MAAxC,CAAiD,CAC/C,GAAIO,SAAS,CAACW,KAAK,CAACnB,KAAD,CAAN,CAAeA,KAAf,CAAsBmB,KAAtB,CAAb,CAA2C,CACzC,MAAOnB,MAAP,CACD,CACF,CACD,MAAO,CAAC,CAAR,CACD,CAEc6vB,gEAAf,E;;AChBA,QAASC,UAAT,CAAmB/wB,KAAnB,CAA0B,CACxB,MAAOA,MAAK,GAAKA,KAAjB,CACD,CAEc+wB,wDAAf,E;;ACDA,QAASC,cAAT,CAAuB5uB,KAAvB,CAA8BpC,KAA9B,CAAqCuS,SAArC,CAAgD,CAC9C,GAAItR,MAAK,CAAGsR,SAAS,CAAG,CAAxB,CACIrR,MAAM,CAAGkB,KAAK,CAAClB,MADnB,CAGA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIkB,KAAK,CAACnB,KAAD,CAAL,GAAiBjB,KAArB,CAA4B,CAC1B,MAAOiB,MAAP,CACD,CACF,CACD,MAAO,CAAC,CAAR,CACD,CAEc+vB,gEAAf,E;;ACTA,QAASne,YAAT,CAAqBzQ,KAArB,CAA4BpC,KAA5B,CAAmCuS,SAAnC,CAA8C,CAC5C,MAAOvS,MAAK,GAAKA,KAAV,CACHgxB,cAAa,CAAC5uB,KAAD,CAAQpC,KAAR,CAAeuS,SAAf,CADV,CAEHue,cAAa,CAAC1uB,KAAD,CAAQ2uB,UAAR,CAAmBxe,SAAnB,CAFjB,CAGD,CAEcM,uFAAf,E;;;;;;;;;;;;AClBA,GAAIqR,eAAc,CAAG,2BAArB,CAYA,QAAS+M,YAAT,CAAqBjxB,KAArB,CAA4B,CAC1B,KAAK2iB,QAAL,CAAcvL,GAAd,CAAkBpX,KAAlB,CAAyBkkB,cAAzB,EACA,MAAO,KAAP,CACD,CAEc+M,4DAAf,E;;ACTA,QAASC,YAAT,CAAqBlxB,KAArB,CAA4B,CAC1B,MAAO,MAAK2iB,QAAL,CAAcrT,GAAd,CAAkBtP,KAAlB,CAAP,CACD,CAEckxB,4DAAf,E;;ACDA,QAASjL,SAAT,CAAkBvT,MAAlB,CAA0B,CACxB,GAAIzR,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGwR,MAAM,EAAI,IAAV,CAAiB,CAAjB,CAAqBA,MAAM,CAACxR,MADzC,CAGA,KAAKyhB,QAAL,CAAgB,GAAImC,6BAAJ,EAAhB,CACA,MAAO,EAAE7jB,KAAF,CAAUC,MAAjB,CAAyB,CACvB,KAAK2G,GAAL,CAAS6K,MAAM,CAACzR,KAAD,CAAf,EACD,CACF,CAGDglB,QAAQ,CAAC9lB,SAAT,CAAmB0H,GAAnB,CAAyBoe,QAAQ,CAAC9lB,SAAT,CAAmBuD,IAAnB,CAA0ButB,YAAnD,CACAhL,QAAQ,CAAC9lB,SAAT,CAAmBmP,GAAnB,CAAyB4hB,YAAzB,CAEejL,iFAAf,E;;;;;;;;;AClBA,QAASkL,UAAT,CAAmB7wB,MAAnB,CAA2BC,GAA3B,CAAgC,CAC9B,MAAOD,OAAM,EAAI,IAAV,EAAkBC,GAAG,GAAId,OAAM,CAACa,MAAD,CAAtC,CACD,CAEc6wB,wDAAf,E;;;;;;;;;;;;;;;;;;;;ACIA,QAASC,QAAT,CAAiB9wB,MAAjB,CAAyBQ,IAAzB,CAA+BuwB,OAA/B,CAAwC,CACtCvwB,IAAI,CAAGE,oCAAQ,CAACF,IAAD,CAAOR,MAAP,CAAf,CAEA,GAAIW,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGJ,IAAI,CAACI,MADlB,CAEIQ,MAAM,CAAG,KAFb,CAIA,MAAO,EAAET,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIX,IAAG,CAAGa,iCAAK,CAACN,IAAI,CAACG,KAAD,CAAL,CAAf,CACA,GAAI,EAAES,MAAM,CAAGpB,MAAM,EAAI,IAAV,EAAkB+wB,OAAO,CAAC/wB,MAAD,CAASC,GAAT,CAApC,CAAJ,CAAwD,CACtD,MACD,CACDD,MAAM,CAAGA,MAAM,CAACC,GAAD,CAAf,CACD,CACD,GAAImB,MAAM,EAAI,EAAET,KAAF,EAAWC,MAAzB,CAAiC,CAC/B,MAAOQ,OAAP,CACD,CACDR,MAAM,CAAGZ,MAAM,EAAI,IAAV,CAAiB,CAAjB,CAAqBA,MAAM,CAACY,MAArC,CACA,MAAO,CAAC,CAACA,MAAF,EAAYkgB,mCAAQ,CAAClgB,MAAD,CAApB,EAAgCI,mCAAO,CAACf,GAAD,CAAMW,MAAN,CAAvC,GACJrB,kCAAO,CAACS,MAAD,CAAP,EAAmB4B,sCAAW,CAAC5B,MAAD,CAD1B,CAAP,CAED,CAEc8wB,oDAAf,E;;ACTA,QAASvvB,MAAT,CAAevB,MAAf,CAAuBQ,IAAvB,CAA6B,CAC3B,MAAOR,OAAM,EAAI,IAAV,EAAkB8wB,QAAO,CAAC9wB,MAAD,CAASQ,IAAT,CAAeqwB,UAAf,CAAhC,CACD,CAEctvB,oFAAf,E;;;;;;;ACjCA;AAGA,GAAIyhB,YAAW,CAAG,MAAOC,QAAP,EAAkB,QAAlB,EAA8BA,OAA9B,EAAyC,CAACA,OAAO,CAAC7d,QAAlD,EAA8D6d,OAAhF,CAGA,GAAIC,WAAU,CAAGF,WAAW,EAAI,MAAOG,OAAP,EAAiB,QAAhC,EAA4CA,MAA5C,EAAsD,CAACA,MAAM,CAAC/d,QAA9D,EAA0E+d,MAA3F,CAGA,GAAIC,cAAa,CAAGF,UAAU,EAAIA,UAAU,CAACD,OAAX,GAAuBD,WAAzD,CAGA,GAAIgO,YAAW,CAAG5N,aAAa,EAAI/jB,8DAAU,CAAC4xB,OAA9C,CAGA,GAAI1F,SAAQ,CAAI,UAAW,CACzB,GAAI,CAEF,GAAI/M,MAAK,CAAG0E,UAAU,EAAIA,UAAU,CAACrU,OAAzB,EAAoCqU,UAAU,CAACrU,OAAX,CAAmB,MAAnB,EAA2B2P,KAA3E,CAEA,GAAIA,KAAJ,CAAW,CACT,MAAOA,MAAP,CACD,CAGD,MAAOwS,YAAW,EAAIA,WAAW,CAACE,OAA3B,EAAsCF,WAAW,CAACE,OAAZ,CAAoB,MAApB,CAA7C,CACD,CAAC,MAAO7sB,CAAP,CAAU,CAAE,CACf,CAZe,EAAhB,CAceknB,iEAAf,E;;;;;;;AC7BApI,MAAM,CAACF,OAAP,CAAiB,SAASkO,cAAT,CAAyB,CACzC,GAAI,CAACA,cAAc,CAACC,eAApB,CAAqC,CACpC,GAAIjO,OAAM,CAAGhkB,MAAM,CAAC8iB,MAAP,CAAckP,cAAd,CAAb,CAEA,GAAI,CAAChO,MAAM,CAACxe,QAAZ,CAAsBwe,MAAM,CAACxe,QAAP,CAAkB,EAAlB,CACtBxF,MAAM,CAAC4iB,cAAP,CAAsBoB,MAAtB,CAA8B,QAA9B,CAAwC,CACvCkO,UAAU,CAAE,IAD2B,CAEvC5a,GAAG,CAAE,UAAW,CACf,MAAO0M,OAAM,CAACmO,CAAd,CACA,CAJsC,CAAxC,EAMAnyB,MAAM,CAAC4iB,cAAP,CAAsBoB,MAAtB,CAA8B,IAA9B,CAAoC,CACnCkO,UAAU,CAAE,IADuB,CAEnC5a,GAAG,CAAE,UAAW,CACf,MAAO0M,OAAM,CAACjQ,CAAd,CACA,CAJkC,CAApC,EAMA/T,MAAM,CAAC4iB,cAAP,CAAsBoB,MAAtB,CAA8B,SAA9B,CAAyC,CACxCkO,UAAU,CAAE,IAD4B,CAAzC,EAGAlO,MAAM,CAACiO,eAAP,CAAyB,CAAzB,CACA,CACD,MAAOjO,OAAP,CACA,CAvBD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAGA,GAAItT,gBAAe,CAAG,qBAAtB,CA8CA,QAASlH,QAAT,CAAiBvG,IAAjB,CAAuBmvB,QAAvB,CAAiC,CAC/B,GAAI,MAAOnvB,KAAP,EAAe,UAAf,EAA8BmvB,QAAQ,EAAI,IAAZ,EAAoB,MAAOA,SAAP,EAAmB,UAAzE,CAAsF,CACpF,KAAM,IAAI3gB,UAAJ,CAAcf,eAAd,CAAN,CACD,CACD,GAAI2hB,SAAQ,CAAG,UAAW,CACxB,GAAIxgB,KAAI,CAAG/E,SAAX,CACIhM,GAAG,CAAGsxB,QAAQ,CAAGA,QAAQ,CAACrgB,KAAT,CAAe,IAAf,CAAqBF,IAArB,CAAH,CAAgCA,IAAI,CAAC,CAAD,CADtD,CAEInI,KAAK,CAAG2oB,QAAQ,CAAC3oB,KAFrB,CAIA,GAAIA,KAAK,CAACmG,GAAN,CAAU/O,GAAV,CAAJ,CAAoB,CAClB,MAAO4I,MAAK,CAAC4N,GAAN,CAAUxW,GAAV,CAAP,CACD,CACD,GAAImB,OAAM,CAAGgB,IAAI,CAAC8O,KAAL,CAAW,IAAX,CAAiBF,IAAjB,CAAb,CACAwgB,QAAQ,CAAC3oB,KAAT,CAAiBA,KAAK,CAACiO,GAAN,CAAU7W,GAAV,CAAemB,MAAf,GAA0ByH,KAA3C,CACA,MAAOzH,OAAP,CACD,CAXD,CAYAowB,QAAQ,CAAC3oB,KAAT,CAAiB,IAAKF,OAAO,CAAC8oB,KAAR,EAAiBjN,4DAAtB,GAAjB,CACA,MAAOgN,SAAP,CACD,CAGD7oB,OAAO,CAAC8oB,KAAR,CAAgBjN,4DAAhB,CAEe7b,gEAAf,E;;;;;;;AC3DA,QAAS6a,UAAT,EAAqB,CACnB,MAAO,MAAP,CACD,CAEcA,kEAAf,E;;;;;;ACjBA,iBAAiB,qBAAuB,iB;;;;;;ACAxC,iBAAiB,qBAAuB,uB;;;;;;ACAxC,iBAAiB,qBAAuB,gB;;;;;;ACAxC,iBAAiB,qBAAuB,sB;;;;;;ACAvC,2FAAW,CACV,aAEA,GAAIkO,SAAJ,CACA,GAAI,CACFA,QAAQ,CAAI,MAAOC,KAAP,GAAgB,WAAhB,EAA+B,MAAOA,KAAI,CAACC,QAAZ,GAAyB,WAAzD,CAAwED,IAAI,CAACC,QAAL,CAAc,SAAd,CAAyB,CAAEC,WAAW,CAAE,MAAf,CAAzB,CAAxE,CAA4H,IAAvI,CACD,CAAC,MAAO7b,GAAP,CAAW,CACX9J,OAAO,CAAC4lB,GAAR,CAAY,wDAAZ,EACD,CAED,GAAIC,YAAW,CAAGljB,mBAAO,CAAC,EAAD,CAAzB,CAGA,GAAImjB,QAAO,CAAG,EAAd,CACEC,QAAQ,CAAG,EADb,CAMA,GAAIC,YAAW,CAAG,CAUhBzb,GAAG,CAAE,SAAS0b,IAAT,CAAeC,IAAf,CAAqBliB,OAArB,CAA8B,CACjC,GAAImiB,YAAW,CAAIniB,OAAO,EAAIwhB,QAAX,EAAuBxhB,OAAO,CAACmiB,WAAlD,CAEA,GAAIA,WAAJ,CAAiB,CACf,GAAIC,QAAO,CAAGH,IAAI,CAACvxB,MAAnB,CACE2xB,OAAO,CAAGH,IAAI,CAACxxB,MADjB,CAIA,GAAI0xB,OAAO,GAAK,CAAhB,CAAmB,MAAOC,QAAP,CACnB,GAAIA,OAAO,GAAK,CAAhB,CAAmB,MAAOD,QAAP,CAGnB,GAAIE,OAAJ,CAAYC,OAAZ,CAAqBvf,CAArB,CAAwBwf,CAAxB,CAA2BC,GAA3B,CAGA,IAAKzf,CAAC,CAAC,CAAP,CAAUA,CAAC,CAACqf,OAAZ,CAAqB,EAAErf,CAAvB,CAA0B,CACxB8e,OAAO,CAAC9e,CAAD,CAAP,CAAaA,CAAb,CACA+e,QAAQ,CAAC/e,CAAD,CAAR,CAAckf,IAAI,CAAC/Q,UAAL,CAAgBnO,CAAhB,CAAd,CACD,CACD8e,OAAO,CAACO,OAAD,CAAP,CAAmBA,OAAnB,CAEA,GAAIK,OAAJ,CAEA,IAAK1f,CAAC,CAAG,CAAT,CAAYA,CAAC,CAAGof,OAAhB,CAAyB,EAAEpf,CAA3B,CAA8B,CAC5Buf,OAAO,CAAGvf,CAAC,CAAG,CAAd,CAEA,IAAKwf,CAAC,CAAG,CAAT,CAAYA,CAAC,CAAGH,OAAhB,CAAyB,EAAEG,CAA3B,CAA8B,CAC5BF,MAAM,CAAGC,OAAT,CAGAG,MAAM,CAAG,IAAMlB,QAAQ,CAACmB,OAAT,CAAiBV,IAAI,CAAC5F,MAAL,CAAYrZ,CAAZ,CAAjB,CAAiC6a,MAAM,CAAC+E,YAAP,CAAoBb,QAAQ,CAACS,CAAD,CAA5B,CAAjC,CAAf,CAEAD,OAAO,CAAGT,OAAO,CAACU,CAAD,CAAP,EAAcE,MAAM,CAAG,CAAH,CAAO,CAA3B,CAAV,CAGAD,GAAG,CAAGH,MAAM,CAAG,CAAf,CACA,GAAIC,OAAO,CAAGE,GAAd,CAAmB,CACjBF,OAAO,CAAGE,GAAV,CACD,CAEDA,GAAG,CAAGX,OAAO,CAACU,CAAC,CAAG,CAAL,CAAP,CAAiB,CAAvB,CACA,GAAID,OAAO,CAAGE,GAAd,CAAmB,CACjBF,OAAO,CAAGE,GAAV,CACD,CAGDX,OAAO,CAACU,CAAD,CAAP,CAAaF,MAAb,CACD,CAGDR,OAAO,CAACU,CAAD,CAAP,CAAaD,OAAb,CACD,CACD,MAAOA,QAAP,CACD,CACD,MAAOV,YAAW,CAACgB,QAAZ,CAAqBZ,IAArB,CAA2BC,IAA3B,CAAP,CACD,CAjEe,CAAlB,CAsEA,GAAI,OAAiCY,uBAAM,GAAK,IAA5C,EAAoDA,uBAAxD,CAAoE,CAClEA,mCAAO,UAAW,CAChB,MAAOd,YAAP,CACD,CAFK;AAAA,oGAAN,CAGD,CAJD,IAMK,IAAI,OAAiC/O,MAAM,GAAK,IAA5C,EAAoD,MAAOF,QAAP,GAAmB,WAAvE,EAAsFE,MAAM,CAACF,OAAP,GAAmBA,OAA7G,CAAsH,CACzHE,MAAM,CAACF,OAAP,CAAiBiP,WAAjB,CACD,CAFI,IAIA,IAAI,MAAOhzB,KAAP,GAAgB,WAAhB,EAA+B,MAAOA,KAAI,CAAC+zB,WAAZ,GAA4B,UAA3D,EAAyE,MAAO/zB,KAAI,CAACg0B,aAAZ,GAA8B,UAA3G,CAAuH,CAC1Hh0B,IAAI,CAACgzB,WAAL,CAAmBA,WAAnB,CACD,CAFI,IAIA,IAAI,MAAOtpB,OAAP,GAAkB,WAAlB,EAAiCA,MAAM,GAAK,IAAhD,CAAsD,CACzDA,MAAM,CAACspB,WAAP,CAAqBA,WAArB,CACD,CACF,CA1GA,GAAD,C;;;;;;;ACAA/O,MAAM,CAACF,OAAP,CAAiB,SAASE,MAAT,CAAiB,CACjC,GAAI,CAACA,MAAM,CAACiO,eAAZ,CAA6B,CAC5BjO,MAAM,CAACgQ,SAAP,CAAmB,UAAW,CAAE,CAAhC,CACAhQ,MAAM,CAACjiB,KAAP,CAAe,EAAf,CAEA,GAAI,CAACiiB,MAAM,CAACxe,QAAZ,CAAsBwe,MAAM,CAACxe,QAAP,CAAkB,EAAlB,CACtBxF,MAAM,CAAC4iB,cAAP,CAAsBoB,MAAtB,CAA8B,QAA9B,CAAwC,CACvCkO,UAAU,CAAE,IAD2B,CAEvC5a,GAAG,CAAE,UAAW,CACf,MAAO0M,OAAM,CAACmO,CAAd,CACA,CAJsC,CAAxC,EAMAnyB,MAAM,CAAC4iB,cAAP,CAAsBoB,MAAtB,CAA8B,IAA9B,CAAoC,CACnCkO,UAAU,CAAE,IADuB,CAEnC5a,GAAG,CAAE,UAAW,CACf,MAAO0M,OAAM,CAACjQ,CAAd,CACA,CAJkC,CAApC,EAMAiQ,MAAM,CAACiO,eAAP,CAAyB,CAAzB,CACA,CACD,MAAOjO,OAAP,CACA,CArBD,C;;;;;;;ACCA,KAAMiQ,IAAG,CAAG,GAAIC,YAAJ,CAAgB,OAAhB,CAAZ,CACA,KAAMC,SAAQ,CAAG,CAAC7lB,CAAD,CAAIC,CAAJ,GAAU,CACzB,KAAMsgB,EAAC,CAAGvgB,CAAC,CAAC7M,MAAZ,CACA,KAAM2yB,EAAC,CAAG7lB,CAAC,CAAC9M,MAAZ,CACA,KAAM4yB,IAAG,CAAG,GAAMxF,CAAC,CAAG,CAAtB,CACA,GAAIyF,GAAE,CAAG,CAAC,CAAV,CACA,GAAIC,GAAE,CAAG,CAAT,CACA,GAAIC,GAAE,CAAG3F,CAAT,CACA,GAAI9a,EAAC,CAAG8a,CAAR,CACA,MAAO9a,CAAC,EAAR,CAAY,CACVkgB,GAAG,CAAC3lB,CAAC,CAAC4T,UAAF,CAAanO,CAAb,CAAD,CAAH,EAAwB,GAAKA,CAA7B,CACD,CACD,IAAKA,CAAC,CAAG,CAAT,CAAYA,CAAC,CAAGqgB,CAAhB,CAAmBrgB,CAAC,EAApB,CAAwB,CACtB,GAAI9S,GAAE,CAAGgzB,GAAG,CAAC1lB,CAAC,CAAC2T,UAAF,CAAanO,CAAb,CAAD,CAAZ,CACA,KAAM0gB,GAAE,CAAGxzB,EAAE,CAAGszB,EAAhB,CACAtzB,EAAE,EAAK,CAACA,EAAE,CAAGqzB,EAAN,EAAYA,EAAb,CAAmBA,EAAzB,CACAC,EAAE,EAAI,EAAEtzB,EAAE,CAAGqzB,EAAP,CAAN,CACAA,EAAE,EAAIrzB,EAAN,CACA,GAAIszB,EAAE,CAAGF,GAAT,CAAc,CACZG,EAAE,GACH,CACD,GAAIF,EAAE,CAAGD,GAAT,CAAc,CACZG,EAAE,GACH,CACDD,EAAE,CAAIA,EAAE,EAAI,CAAP,CAAY,CAAjB,CACAD,EAAE,CAAIA,EAAE,EAAI,CAAP,CAAY,EAAEG,EAAE,CAAGF,EAAP,CAAjB,CACAA,EAAE,EAAIE,EAAN,CACD,CACD1gB,CAAC,CAAG8a,CAAJ,CACA,MAAO9a,CAAC,EAAR,CAAY,CACVkgB,GAAG,CAAC3lB,CAAC,CAAC4T,UAAF,CAAanO,CAAb,CAAD,CAAH,CAAuB,CAAvB,CACD,CACD,MAAOygB,GAAP,CACD,CAhCD,CAkCA,KAAME,QAAO,CAAG,CAACpmB,CAAD,CAAIC,CAAJ,GAAU,CACxB,KAAMsgB,EAAC,CAAGvgB,CAAC,CAAC7M,MAAZ,CACA,KAAM2yB,EAAC,CAAG7lB,CAAC,CAAC9M,MAAZ,CACA,KAAMkzB,IAAG,CAAG,EAAZ,CACA,KAAMC,IAAG,CAAG,EAAZ,CACA,KAAMC,MAAK,CAAGxpB,IAAI,CAACypB,IAAL,CAAUjG,CAAC,CAAG,EAAd,CAAd,CACA,KAAMkG,MAAK,CAAG1pB,IAAI,CAACypB,IAAL,CAAUV,CAAC,CAAG,EAAd,CAAd,CACA,GAAIY,MAAK,CAAGZ,CAAZ,CACA,IAAK,GAAIrgB,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG8gB,KAApB,CAA2B9gB,CAAC,EAA5B,CAAgC,CAC9B6gB,GAAG,CAAC7gB,CAAD,CAAH,CAAS,CAAC,CAAV,CACA4gB,GAAG,CAAC5gB,CAAD,CAAH,CAAS,CAAT,CACD,CACD,GAAIwf,EAAC,CAAG,CAAR,CACA,KAAOA,CAAC,CAAGwB,KAAK,CAAG,CAAnB,CAAsBxB,CAAC,EAAvB,CAA2B,CACzB,GAAIgB,GAAE,CAAG,CAAT,CACA,GAAID,GAAE,CAAG,CAAC,CAAV,CACA,KAAMzgB,MAAK,CAAG0f,CAAC,CAAG,EAAlB,CACA,KAAMzf,IAAG,CAAGzI,IAAI,CAACE,GAAL,CAAS,EAAT,CAAa6oB,CAAb,EAAkBvgB,KAA9B,CACA,IAAK,GAAIohB,EAAC,CAAGphB,KAAb,CAAoBohB,CAAC,CAAGnhB,GAAxB,CAA6BmhB,CAAC,EAA9B,CAAkC,CAChChB,GAAG,CAAC1lB,CAAC,CAAC2T,UAAF,CAAa+S,CAAb,CAAD,CAAH,EAAwB,GAAKA,CAA7B,CACD,CACDD,KAAK,CAAGZ,CAAR,CACA,IAAK,GAAIrgB,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG8a,CAApB,CAAuB9a,CAAC,EAAxB,CAA4B,CAC1B,KAAM9S,GAAE,CAAGgzB,GAAG,CAAC3lB,CAAC,CAAC4T,UAAF,CAAanO,CAAb,CAAD,CAAd,CACA,KAAMmhB,GAAE,CAAIN,GAAG,CAAE7gB,CAAC,CAAG,EAAL,CAAW,CAAZ,CAAH,GAAsBA,CAAvB,CAA4B,CAAvC,CACA,KAAMohB,GAAE,CAAIR,GAAG,CAAE5gB,CAAC,CAAG,EAAL,CAAW,CAAZ,CAAH,GAAsBA,CAAvB,CAA4B,CAAvC,CACA,KAAM0gB,GAAE,CAAGxzB,EAAE,CAAGszB,EAAhB,CACA,KAAMa,GAAE,CAAK,CAAC,CAACn0B,EAAE,CAAGk0B,EAAN,EAAYb,EAAb,EAAmBA,EAApB,CAA0BA,EAA3B,CAAiCrzB,EAAjC,CAAsCk0B,EAAjD,CACA,GAAIE,GAAE,CAAGd,EAAE,CAAG,EAAEa,EAAE,CAAGd,EAAP,CAAd,CACA,GAAIgB,GAAE,CAAGhB,EAAE,CAAGc,EAAd,CACA,GAAKC,EAAE,GAAK,EAAR,CAAcH,EAAlB,CAAsB,CACpBN,GAAG,CAAE7gB,CAAC,CAAG,EAAL,CAAW,CAAZ,CAAH,EAAqB,GAAKA,CAA1B,CACD,CACD,GAAKuhB,EAAE,GAAK,EAAR,CAAcH,EAAlB,CAAsB,CACpBR,GAAG,CAAE5gB,CAAC,CAAG,EAAL,CAAW,CAAZ,CAAH,EAAqB,GAAKA,CAA1B,CACD,CACDshB,EAAE,CAAIA,EAAE,EAAI,CAAP,CAAYH,EAAjB,CACAI,EAAE,CAAIA,EAAE,EAAI,CAAP,CAAYH,EAAjB,CACAb,EAAE,CAAGgB,EAAE,CAAG,EAAEb,EAAE,CAAGY,EAAP,CAAV,CACAd,EAAE,CAAGc,EAAE,CAAGZ,EAAV,CACD,CACD,IAAK,GAAIQ,EAAC,CAAGphB,KAAb,CAAoBohB,CAAC,CAAGnhB,GAAxB,CAA6BmhB,CAAC,EAA9B,CAAkC,CAChChB,GAAG,CAAC1lB,CAAC,CAAC2T,UAAF,CAAa+S,CAAb,CAAD,CAAH,CAAuB,CAAvB,CACD,CACF,CACD,GAAIV,GAAE,CAAG,CAAT,CACA,GAAID,GAAE,CAAG,CAAC,CAAV,CACA,KAAMzgB,MAAK,CAAG0f,CAAC,CAAG,EAAlB,CACA,KAAMzf,IAAG,CAAGzI,IAAI,CAACE,GAAL,CAAS,EAAT,CAAa6oB,CAAC,CAAGvgB,KAAjB,EAA0BA,KAAtC,CACA,IAAK,GAAIohB,EAAC,CAAGphB,KAAb,CAAoBohB,CAAC,CAAGnhB,GAAxB,CAA6BmhB,CAAC,EAA9B,CAAkC,CAChChB,GAAG,CAAC1lB,CAAC,CAAC2T,UAAF,CAAa+S,CAAb,CAAD,CAAH,EAAwB,GAAKA,CAA7B,CACD,CACDD,KAAK,CAAGZ,CAAR,CACA,IAAK,GAAIrgB,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG8a,CAApB,CAAuB9a,CAAC,EAAxB,CAA4B,CAC1B,KAAM9S,GAAE,CAAGgzB,GAAG,CAAC3lB,CAAC,CAAC4T,UAAF,CAAanO,CAAb,CAAD,CAAd,CACA,KAAMmhB,GAAE,CAAIN,GAAG,CAAE7gB,CAAC,CAAG,EAAL,CAAW,CAAZ,CAAH,GAAsBA,CAAvB,CAA4B,CAAvC,CACA,KAAMohB,GAAE,CAAIR,GAAG,CAAE5gB,CAAC,CAAG,EAAL,CAAW,CAAZ,CAAH,GAAsBA,CAAvB,CAA4B,CAAvC,CACA,KAAM0gB,GAAE,CAAGxzB,EAAE,CAAGszB,EAAhB,CACA,KAAMa,GAAE,CAAK,CAAC,CAACn0B,EAAE,CAAGk0B,EAAN,EAAYb,EAAb,EAAmBA,EAApB,CAA0BA,EAA3B,CAAiCrzB,EAAjC,CAAsCk0B,EAAjD,CACA,GAAIE,GAAE,CAAGd,EAAE,CAAG,EAAEa,EAAE,CAAGd,EAAP,CAAd,CACA,GAAIgB,GAAE,CAAGhB,EAAE,CAAGc,EAAd,CACAJ,KAAK,EAAKK,EAAE,GAAMjB,CAAC,CAAG,CAAb,CAAmB,CAA5B,CACAY,KAAK,EAAKM,EAAE,GAAMlB,CAAC,CAAG,CAAb,CAAmB,CAA5B,CACA,GAAKiB,EAAE,GAAK,EAAR,CAAcH,EAAlB,CAAsB,CACpBN,GAAG,CAAE7gB,CAAC,CAAG,EAAL,CAAW,CAAZ,CAAH,EAAqB,GAAKA,CAA1B,CACD,CACD,GAAKuhB,EAAE,GAAK,EAAR,CAAcH,EAAlB,CAAsB,CACpBR,GAAG,CAAE5gB,CAAC,CAAG,EAAL,CAAW,CAAZ,CAAH,EAAqB,GAAKA,CAA1B,CACD,CACDshB,EAAE,CAAIA,EAAE,EAAI,CAAP,CAAYH,EAAjB,CACAI,EAAE,CAAIA,EAAE,EAAI,CAAP,CAAYH,EAAjB,CACAb,EAAE,CAAGgB,EAAE,CAAG,EAAEb,EAAE,CAAGY,EAAP,CAAV,CACAd,EAAE,CAAGc,EAAE,CAAGZ,EAAV,CACD,CACD,IAAK,GAAIQ,EAAC,CAAGphB,KAAb,CAAoBohB,CAAC,CAAGnhB,GAAxB,CAA6BmhB,CAAC,EAA9B,CAAkC,CAChChB,GAAG,CAAC1lB,CAAC,CAAC2T,UAAF,CAAa+S,CAAb,CAAD,CAAH,CAAuB,CAAvB,CACD,CACD,MAAOD,MAAP,CACD,CA9ED,CAgFA,KAAMpB,SAAQ,CAAG,CAACtlB,CAAD,CAAIC,CAAJ,GAAU,CACzB,GAAID,CAAC,CAAC7M,MAAF,CAAW8M,CAAC,CAAC9M,MAAjB,CAAyB,CACvB,KAAM+xB,IAAG,CAAGjlB,CAAZ,CACAA,CAAC,CAAGD,CAAJ,CACAA,CAAC,CAAGklB,GAAJ,CACD,CACD,GAAIllB,CAAC,CAAC7M,MAAF,GAAa,CAAjB,CAAoB,CAClB,MAAO8M,EAAC,CAAC9M,MAAT,CACD,CACD,GAAI6M,CAAC,CAAC7M,MAAF,EAAY,EAAhB,CAAoB,CAClB,MAAO0yB,SAAQ,CAAC7lB,CAAD,CAAIC,CAAJ,CAAf,CACD,CACD,MAAOmmB,QAAO,CAACpmB,CAAD,CAAIC,CAAJ,CAAd,CACD,CAbD,CAeA,KAAMgnB,QAAO,CAAG,CAACC,GAAD,CAAMC,GAAN,GAAc,CAC5B,GAAIC,aAAY,CAAGC,QAAnB,CACA,GAAIC,UAAS,CAAG,CAAhB,CACA,IAAK,GAAI7hB,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG0hB,GAAG,CAACh0B,MAAxB,CAAgCsS,CAAC,EAAjC,CAAqC,CACnC,KAAM8hB,KAAI,CAAGjC,QAAQ,CAAC4B,GAAD,CAAMC,GAAG,CAAC1hB,CAAD,CAAT,CAArB,CACA,GAAI8hB,IAAI,CAAGH,YAAX,CAAyB,CACvBA,YAAY,CAAGG,IAAf,CACAD,SAAS,CAAG7hB,CAAZ,CACD,CACF,CACD,MAAO0hB,IAAG,CAACG,SAAD,CAAV,CACD,CAXD,CAaA5R,MAAM,CAACF,OAAP,CAAiB,CACfyR,OADe,CACN3B,QADM,CAAjB,C;;;;;;AChJA;AACA;AACA;;;;;;;ACFA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACcA,QAASkC,UAAT,CAAmBlJ,KAAnB,CAA0B,CACxB,GAAIprB,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGmrB,KAAK,EAAI,IAAT,CAAgB,CAAhB,CAAoBA,KAAK,CAACnrB,MADvC,CAEIQ,MAAM,CAAG,EAFb,CAIA,MAAO,EAAET,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIs0B,KAAI,CAAGnJ,KAAK,CAACprB,KAAD,CAAhB,CACAS,MAAM,CAAC8zB,IAAI,CAAC,CAAD,CAAL,CAAN,CAAkBA,IAAI,CAAC,CAAD,CAAtB,CACD,CACD,MAAO9zB,OAAP,CACD,CAEc6zB,iEAAf,E;;ACLA,MAAME,mBAAN,SAAkCruB,KAAlC,CAAwC;AACvCyhB,aAAW,CAACpB,OAAD,EAAUhP,KAAV,EAAiB;AAC3B;AACA,SAAKgP,OAAL,GAAeA,OAAf;AACA,SAAKhP,KAAL,GAAaA,KAAb;AACA;;AALsC;;AAQjC,SAASid,oBAAT,CAAmDC,YAAnD,EAAgGC,wBAAiC,GAAG,KAApI,EAIJ;AACF,QAAMC,SAAS,GAAG,IAAI3e,GAAJ,EAAlB;AAsDA,SAAO;AACN4e,kBAAc,EArCf,UAAwB;AAAE71B,UAAF;AAAQsY;AAAR,KAAxB,EAAwCwd,YAAxC,EAAsDC,OAAtD,EAA+D;AAC9D,YAAMC,QAAQ,GAAGJ,SAAS,CAAC9e,GAAV,CAAc9W,IAAd,CAAjB;;AACA,UAAI,CAACg2B,QAAL,EAAe;AACd,YAAIL,wBAAJ,EAA8B;AAC7BG,sBAAY,CAAC;AAAEtpB,iBAAK,EAAE;AAAEgb,qBAAO,EAAG,8BAA6BxnB,IAAK,EAA9C;AAAiDwY,mBAAK,EAAE;AAAxD;AAAT,WAAD,CAAZ;AACA;;AACD,eAAO,KAAP;AACA;;AAED,UAAIyd,QAAJ;;AAEA,UAAI;AACHA,gBAAQ,GAAGD,QAAQ,CAAC1d,IAAD,EAAOyd,OAAP,CAAnB;AACA,OAFD,CAEE,OAAOrxB,CAAP,EAAU;AACX6H,eAAO,CAACC,KAAR,CAAc9H,CAAd;AACAoxB,oBAAY,CAAC;AAAEtpB,eAAK,EAAE;AAAEgb,mBAAO,EAAE9iB,CAAC,CAAC8iB,OAAb;AAAsBhP,iBAAK,EAAE9T,CAAC,CAAC8T;AAA/B;AAAT,SAAD,CAAZ;AACA,eAAO,KAAP;AACA;;AAED,UAAIyd,QAAQ,YAAY9xB,OAAxB,EAAiC;AAChC8xB,gBAAQ,CACN/uB,IADF,CAEEoR,IAAI,IAAIwd,YAAY,CAAC;AAAExd;AAAF,SAAD,CAFtB,EAGE5T,CAAC,IAAI;AACJ6H,iBAAO,CAACC,KAAR,CAAc9H,CAAd;AACAoxB,sBAAY,CAAC;AAAEtpB,iBAAK,EAAE;AAAEgb,qBAAO,EAAE9iB,CAAC,CAAC8iB,OAAb;AAAsBhP,mBAAK,EAAE9T,CAAC,CAAC8T;AAA/B;AAAT,WAAD,CAAZ;AACA,SANH;AASA,eAAO,IAAP;AACA,OAXD,MAWO;AACNsd,oBAAY,CAAC;AAAExd,cAAI,EAAE2d;AAAR,SAAD,CAAZ;AACA,eAAO,KAAP;AACA;AACD,KAEM;AAENC,eAAW,EA/CZ,gBAA2Bl2B,IAA3B,EAAiCsY,IAAjC,EAAuCyd,OAAvC,EAAgD;AAC/C,YAAM;AAAEzd,YAAI,EAAE6d,OAAR;AAAiB3pB;AAAjB,UAA2B,MAAMkpB,YAAY,CAAC;AAAE11B,YAAF;AAAQsY;AAAR,OAAD,EAAiByd,OAAjB,CAAnD;;AACA,UAAIvpB,KAAJ,EAAW;AACV,cAAM,IAAIgpB,mBAAJ,CAAwBhpB,KAAK,CAACgb,OAA9B,EAAwC,GAAEhb,KAAK,CAACgM,KAAM,sBAAqBxY,IAAK,WAAhF,CAAN;AACA,OAFD,MAEO;AACN,eAAOm2B,OAAP;AACA;AACD,KAsCM;AAGNC,eAAW,EAvDZ,UAAqBp2B,IAArB,EAA2BkG,QAA3B,EAAqC;AACpC,UAAI0vB,SAAS,CAACvmB,GAAV,CAAcrP,IAAd,CAAJ,EAAyB;AACxB,cAAM,IAAImH,KAAJ,CAAW,iBAAgBnH,IAAK,mBAAhC,CAAN;AACA;;AACD41B,eAAS,CAACze,GAAV,CAAcnX,IAAd,EAAoBkG,QAApB;AACA;AA+CM,GAAP;AAKA,C;;AC5FM,SAASmwB,YAAT,CAAsB5zB,IAAtB,EAA4F;AAClG,SAAO,CAAC,GAAG4O,IAAJ,KACN,IAAIlN,OAAJ,CAAY,CAACI,OAAD,EAAU0C,MAAV,KAAqB;AAChCxE,QAAI,CAAC,GAAG4O,IAAJ,EAAU,CAAC,GAAGwC,OAAJ,KAAgB;AAC7B,UAAIyiB,MAAM,CAACC,OAAP,CAAeC,SAAnB,EAA8B;AAC7BvvB,cAAM,CAAC,IAAIE,KAAJ,CAAUmvB,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyBhP,OAAnC,CAAD,CAAN;AACA,OAFD,MAEO;AACNjjB,eAAO,CAACsP,OAAO,CAAC5S,MAAR,GAAiB,CAAjB,GAAqB4S,OAArB,GAA+BA,OAAO,CAAC,CAAD,CAAvC,CAAP;AACA;AACD,KANG,CAAJ;AAOA,GARD,CADD;AAUA,C;;ACXD;AACA;;AAEA,MAAM6hB,YAAY,GAAGW,YAAY,CAACC,MAAM,CAACG,IAAP,CAAYP,WAAb,CAAjC;;AAEA,MAAM;AACLL,gBADK;AAELK,aAFK;AAGLE;AAHK,IAIFX,oBAAoB,CAAC,CAACttB,GAAD,EAAMuuB,KAAN,KAAgBhB,YAAY,CAACgB,KAAD,EAAQvuB,GAAR,CAA7B,CAJxB;AAMAmuB,MAAM,CAACC,OAAP,CAAeI,SAAf,CAAyBP,WAAzB,CAAqC,CAACjuB,GAAD,EAAMyuB,MAAN,EAAcd,YAAd,KAA+BD,cAAc,CAAC1tB,GAAD,EAAM2tB,YAAN,EAAoBc,MAApB,CAAlF;;;ACXA;AACA;AAEAR,WAAW,CAAC,MAAD,EAAS,OAAO;AAAES,QAAF;AAAUC,KAAV;AAAeppB,SAAf;AAAwB4K,MAAxB;AAA8Bye;AAA9B,CAAP,KAAuD;AAC1E,QAAMC,WAAW,GAAG,MAAMC,KAAK,CAACH,GAAD,EAAM;AACpCD,UADoC;AAEpCnpB,WAFoC;AAGpCqpB,eAHoC;AAIpCptB,QAAI,EAAE2O;AAJ8B,GAAN,CAA/B;AAOA,SAAO;AACN4e,MAAE,EAAEF,WAAW,CAACE,EADV;AAENC,UAAM,EAAEH,WAAW,CAACG,MAFd;AAGNzpB,WAAO,EAAE4nB,mBAAS,CAACz1B,KAAK,CAACkF,IAAN,CAAWiyB,WAAW,CAACtpB,OAAZ,CAAoB6H,OAApB,EAAX,CAAD,CAHZ;AAIN6hB,QAAI,EAAE,MAAMJ,WAAW,CAACI,IAAZ;AAJN,GAAP;AAMA,CAdU,CAAX,C;;ACJA;AACA;AAEAhB,WAAW,CAAC,UAAD,EAAa,CAAC;AAAE/X,QAAF;AAAUgZ,UAAV;AAAoBC,OAApB;AAA2BC;AAA3B,CAAD,KAA8C;AACrE,QAAMC,WAAW,GAA4C,0CAA7D;AACA,QAAMV,GAAG,GAAG,IAAIW,GAAJ,CAAQpZ,MAAR,CAAZ;AACAyY,KAAG,CAACY,YAAJ,CAAiBvgB,GAAjB,CAAqB,WAArB,EAAkCkgB,QAAlC;AACAP,KAAG,CAACY,YAAJ,CAAiBvgB,GAAjB,CAAqB,OAArB,EAA8BmgB,KAA9B;AACAR,KAAG,CAACY,YAAJ,CAAiBvgB,GAAjB,CAAqB,eAArB,EAAsC,OAAtC;AACA2f,KAAG,CAACY,YAAJ,CAAiBvgB,GAAjB,CAAqB,cAArB,EAAqCqgB,WAArC;;AASC,MAAID,WAAJ,EAAiB;AAChB,WAAOI,0BAA0B,CAACb,GAAG,CAACjW,IAAL,EAAW2W,WAAX,CAAjC;AACA,GAFD,MAEO;AACN,WAAOI,2BAA2B,CAACd,GAAG,CAACjW,IAAL,CAAlC;AACA;AAKF,CAxBU,CAAX;;AA0BA,eAAe8W,0BAAf,CAA0Cb,GAA1C,EAAuDU,WAAvD,EAA6F;AAK5F,QAAM;AAAEf,QAAI,EAAE,CAAC;AAAE9oB;AAAF,KAAD;AAAR,MAAqB,MAAM0oB,YAAY,CAACC,MAAM,CAACuB,OAAP,CAAevV,MAAhB,CAAZ,CAAoC;AAAEwU,OAAF;AAAO92B,QAAI,EAAE;AAAb,GAApC,CAAjC;AAEA,SAAO,IAAImE,OAAJ,CAAY,CAACI,OAAD,EAAU0C,MAAV,KAAqB;AACvC,aAAS6wB,cAAT,CAAwBpB,KAAxB,EAA+BqB,OAA/B,EAAwC;AACvC,UAAIrB,KAAK,KAAK/oB,EAAd,EAAkB;;AAElB,UAAIoqB,OAAO,CAACjB,GAAR,IAAeiB,OAAO,CAACjB,GAAR,CAAY9V,UAAZ,CAAuBwW,WAAvB,CAAnB,EAAwD;AACvDQ,qBAAa;AACbzzB,eAAO,CAACwzB,OAAO,CAACjB,GAAT,CAAP;AACAT,oBAAY,CAACC,MAAM,CAACG,IAAP,CAAY3sB,MAAb,CAAZ,CAAiC6D,EAAjC;AACA;AACD;;AAED,aAASsqB,cAAT,CAAwBvB,KAAxB,EAA+B;AAC9B,UAAIA,KAAK,KAAK/oB,EAAd,EAAkB;AAClBqqB,mBAAa;AACb/wB,YAAM,CAAC,IAAIE,KAAJ,CAAU,kCAAV,CAAD,CAAN;AACA;;AAED,aAAS6wB,aAAT,GAAyB;AACxB1B,YAAM,CAACG,IAAP,CAAYyB,SAAZ,CAAsBD,cAAtB,CAAqCH,cAArC;AACAxB,YAAM,CAACG,IAAP,CAAY0B,SAAZ,CAAsBF,cAAtB,CAAqCA,cAArC;AACA;;AAED3B,UAAM,CAACG,IAAP,CAAYyB,SAAZ,CAAsB9B,WAAtB,CAAkC0B,cAAlC;AACAxB,UAAM,CAACG,IAAP,CAAY0B,SAAZ,CAAsB/B,WAAtB,CAAkC6B,cAAlC;AACA,GAxBM,CAAP;AAyBA;;AAED,SAASL,2BAAT,CAAqCd,GAArC,EAAmE;AAMlE,SAAO,IAAI3yB,OAAJ,CAAY,CAACI,OAAD,EAAU0C,MAAV,KAAqB;AACvC,aAASmxB,eAAT,CAAyB;AAAEC;AAAF,KAAzB,EAA0C;AACzCL,mBAAa;AACbzzB,aAAO,CAAC8zB,WAAD,CAAP;AACA;;AAED,aAASL,aAAT,GAAyB;AACxB1B,YAAM,CAACgC,UAAP,CAAkBC,gBAAlB,CAAmCN,cAAnC,CAAkDG,eAAlD;AACA;;AAED9B,UAAM,CAACgC,UAAP,CAAkBC,gBAAlB,CAAmCnC,WAAnC,CAA+CgC,eAA/C,EAAgE;AAAEI,UAAI,EAAE,CAAC1B,GAAD;AAAR,KAAhE;AAEAG,SAAK,CAACH,GAAD,EAAM;AAAEC,iBAAW,EAAE;AAAf,KAAN,CAAL,CACE7vB,IADF,CACO,MAAM;AACX8wB,mBAAa;AACb/wB,YAAM,CAAC,IAAIE,KAAJ,CAAU,+BAAV,CAAD,CAAN;AACA,KAJF,EAIIzC,CAAC,IAAI;AACPszB,mBAAa;AACb/wB,YAAM,CAAC,IAAIE,KAAJ,CAAW,2CAA0CzC,CAAC,CAAC8iB,OAAQ,EAA/D,CAAD,CAAN;AACAjb,aAAO,CAACC,KAAR,CAAc9H,CAAd;AACA,KARF;AASA,GArBM,CAAP;AAsBA,C;;AC1FD;AAEA0xB,WAAW,CAAC,UAAD,EAAa,CAAC;AAAEU,KAAF;AAAO2B;AAAP,CAAD,EAAoB;AAAEC,KAAG,EAAE;AAAEC;AAAF;AAAP,CAApB,KAA+C;AACtErC,QAAM,CAACsC,SAAP,CAAiBC,QAAjB,CAA0B;AAAE/B,OAAF;AAAO2B,YAAP;AAAiB,OAA6C;AAA9D,GAA1B;AACA,CAFU,CAAX,C;;ACFA;AACA;AAEArC,WAAW,CAAC,iBAAD,EAAoBU,GAAG,IAAI;AACrCR,QAAM,CAACwC,OAAP,CAAeC,MAAf,CAAsB;AAAEjC;AAAF,GAAtB;AACA,CAFU,CAAX;AAIAV,WAAW,CAAC,cAAD,EAAiB,MAAMU,GAAN,IAAa;AACxC,QAAMkC,MAAM,GAAG,MAAM3C,YAAY,CAACC,MAAM,CAACwC,OAAP,CAAeG,SAAhB,CAAZ,CAAuC;AAAEnC;AAAF,GAAvC,CAArB;AACA,SAAOkC,MAAM,CAAC/3B,MAAP,GAAgB,CAAvB;AACA,CAHU,CAAX,C;;;;;;;;;;;ACuBA,QAASi4B,UAAT,CAAmB74B,MAAnB,CAA2BqS,QAA3B,CAAqC,CACnC,GAAIjR,OAAM,CAAG,EAAb,CACAiR,QAAQ,CAAGzC,wCAAY,CAACyC,QAAD,CAAW,CAAX,CAAvB,CAEAwJ,sCAAU,CAAC7b,MAAD,CAAS,SAASN,KAAT,CAAgBO,GAAhB,CAAqBD,MAArB,CAA6B,CAC9CM,2CAAe,CAACc,MAAD,CAASnB,GAAT,CAAcoS,QAAQ,CAAC3S,KAAD,CAAQO,GAAR,CAAaD,MAAb,CAAtB,CAAf,CACD,CAFS,CAAV,CAGA,MAAOoB,OAAP,CACD,CAEcy3B,iEAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEe;AACdC,QADc;AAEdryB,QAFc;AAGdsyB,QAHc;AAIdC,sBAJc;AAKdC,sBALc;AAMdC,cANc;AAOdC,cAPc;AAQdC,QARc;AASdC,gBATc;AAUdC,QAVc;AAWdhmB,QAXc;AAYdimB,cAZc;AAadC,QAbc;AAcdC,QAdc;AAedC,cAfc;AAgBdC,cAAKA;AAhBS,CAAf,E;;AClBA;AACA;;AAGA,SAASC,6BAAT,CAAuCC,YAAvC,EAAqD;AACpD,UAAQA,YAAR;AACC,SAAK,MAAL;AACC,aAAO,IAAP;;AACD,SAAK,KAAL;AACC,aAAO,WAAP;;AACD,SAAK,KAAL;AACC,aAAO,WAAP;;AACD,SAAK,OAAL;AACA,SAAK,OAAL;AACC,aAAO,QAAP;;AACD;AAAS;AAER,cAAMC,UAAU,GAAGD,YAAY,CAAC9f,OAAb,CAAqB,GAArB,EAA0B,GAA1B,CAAnB;AACA,cAAMggB,GAAG,GAAGD,UAAU,CAACxnB,OAAX,CAAmB,GAAnB,CAAZ;;AACA,YAAIynB,GAAG,KAAK,CAAC,CAAb,EAAgB;AAEf,iBAAOD,UAAP;AACA,SAHD,MAGO;AAEN,iBAAQ,GAAEA,UAAU,CAAC3Z,KAAX,CAAiB,CAAjB,EAAoB4Z,GAApB,CAAyB,IAAGD,UAAU,CAAC3Z,KAAX,CAAiB4Z,GAAG,GAAG,CAAvB,EAA0BC,WAA1B,EAAwC,EAA9E;AACA;AACD;AArBF;AAuBA;;AAEM,SAASC,mBAAT,CAA6BC,UAA7B,EAAuE;AAC7E,QAAMC,eAAe,GAAGP,6BAA6B,CAACM,UAAD,CAArD;AAEA,QAAME,aAAa,GAAG,EAErB,GAAGC,OAAO,CAACtB,EAFU;AAIrB,OAAGsB,OAAO,CAACF,eAAe,CAACha,KAAhB,CAAsB,CAAtB,EAAyBga,eAAe,CAAC7nB,OAAhB,CAAwB,GAAxB,CAAzB,CAAD,CAJW;AAMrB,OAAG+nB,OAAO,CAACF,eAAD;AANW,GAAtB;AASA,SAAOtB,mBAAS,CAACuB,aAAD,EAAgB5jB,CAAC,IAAIA,CAAC,CAAC2Q,OAAvB,CAAhB;AACA,C;;AC3CD;AACA;AAEA4O,WAAW,CAAC,MAAD,EAASuE,MAAM,IAAIL,mBAAmB,CAACK,MAAD,CAAtC,CAAX,C;;ACHA;AACA;AAEAvE,WAAW,CAAC,YAAD,EAAe,OAAO;AAAEU;AAAF,CAAP,EAAgB;AAAE4B,KAAG,EAAE;AAAE/qB,MAAE,EAAE+oB;AAAN,GAAP;AAAsBkE;AAAtB,CAAhB,KAAoD;AAC7E,QAAMvE,YAAY,CAACC,MAAM,CAACG,IAAP,CAAYoE,aAAb,CAAZ,CAAwCnE,KAAxC,EAA+C;AAAEoE,QAAI,EAAEhE,GAAR;AAAa8D,WAAb;AAAsBG,SAAK,EAAE;AAA7B,GAA/C,CAAN;AACA,CAFU,CAAX,C;;ACHA;AAEA,IAAIC,gBAAgB,GAAGC,SAAS,CAACC,QAAV,IAAsB,IAA7C;AAEA9E,WAAW,CAAC,qBAAD,EAAwB,MAAM4E,gBAA9B,CAAX;AACA5E,WAAW,CAAC,qBAAD,EAAwBpW,CAAC,IAAI;AAAEgb,kBAAgB,GAAGhb,CAAnB;AAAuB,CAAtD,CAAX,C;;ACLA;AACA;AAEAoW,WAAW,CAAC,WAAD,EAAc,OAAO;AAAE7O,MAAF;AAAQlW,MAAR;AAAc8pB;AAAd,CAAP,EAAqCvE,MAArC,KAAgD;AAExE,QAAMwE,WAAW,GAA8D,WAA/E;AAEA,QAAMC,UAAU,GAAG,MAAMhF,YAAY,CAACC,MAAM,CAACG,IAAP,CAAY6E,KAAb,CAAZ,CAAgC;AAAExE,OAAG,EAAE,wBAAP;AAAiCK,UAAM,EAAE;AAAzC,GAAhC,CAAzB;AACA,QAAMoE,wBAAwB,GAAGF,UAAU,CACzCl1B,MAD+B,CACxBuyB,GAAG,IACV,CAAC9B,MAAM,CAACgE,OAAP,IAAkBlC,GAAG,CAAC/qB,EAAJ,KAAWipB,MAAM,CAAC8B,GAAP,CAAW/qB,EAAzC,MACCwtB,YAAY,IAAIzC,GAAG,CAAC0C,WAAD,CAAH,KAAqBxE,MAAM,CAAC8B,GAAP,CAAW0C,WAAX,CADtC,CAF+B,CAAjC;AAMA,SAAOj3B,OAAO,CAAC8rB,GAAR,CAAYsL,wBAAwB,CAACl3B,GAAzB,CAA6B,CAAC;AAAEsJ,MAAE,EAAE+oB;AAAN,GAAD,KAAmBR,WAAW,CAAC,WAAD,EAAc;AAAE3O,QAAF;AAAQlW;AAAR,GAAd,EAA8BqlB,KAA9B,CAA3D,CAAZ,CAAP;AACA,CAZU,CAAX,C;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AAEAJ,MAAM,CAACkF,UAAP,CAAkBC,SAAlB,CAA4BrF,WAA5B,CAAwCsC,GAAG,IAAI;AAC9CxC,aAAW,CAAC,iBAAD,EAAoBx1B,SAApB,EAA+Bg4B,GAAG,CAAC/qB,EAAnC,CAAX;AACA,CAFD;AAIAyoB,WAAW,CAAC,YAAD,EAAe,CAAC;AAAEsF,WAAF;AAAaC;AAAb,CAAD,EAAuB;AAAEjD;AAAF,CAAvB,KAAmC;AAC5D,UAAQgD,SAAR;AACC,SAAK,MAAL;AACCpF,YAAM,CAACkF,UAAP,CAAkBI,IAAlB,CAAuBlD,GAAG,CAAC/qB,EAA3B;AACA2oB,YAAM,CAACkF,UAAP,CAAkBK,OAAlB,CAA0B;AACzBnF,aAAK,EAAEgC,GAAG,CAAC/qB,EADc;AAEzB9M,YAAI,EAAE;AACL,gBAAM86B,KAAK,GAAGG,sBAAH,GAAgBC,uBADtB;AAEL,gBAAMJ,KAAK,GAAGK,gBAAH,GAAWC,iBAAMA;AAFvB;AAFmB,OAA1B;AAOA3F,YAAM,CAACkF,UAAP,CAAkBU,QAAlB,CAA2B;AAC1BxF,aAAK,EAAEgC,GAAG,CAAC/qB,EADe;AAE1BwuB,aAAK,EAAER,KAAK,GAAG,oBAAH,GAA0B;AAFZ,OAA3B;AAIA;;AACD,SAAK,MAAL;AACCrF,YAAM,CAACkF,UAAP,CAAkBY,IAAlB,CAAuB1D,GAAG,CAAC/qB,EAA3B;AACA;;AACD;AACC,YAAM,IAAIxG,KAAJ,CAAW,iCAAgCu0B,SAAU,EAArD,CAAN;AAnBF;AAqBA,CAtBU,CAAX,C;;ACVA;AACA;AAEAtF,WAAW,CAAC,aAAD,EAAgBiG,aAAhB,CAAX;AAEO,SAASA,aAAT,CAAuB;AAAEX,WAAF;AAAaY,aAAb;AAA0BC;AAA1B,CAAvB,EAA+D;AACrE,UAAQb,SAAR;AACC,SAAK,UAAL;AACC,aAAOrF,YAAY,CAACC,MAAM,CAACgG,WAAP,CAAmBt1B,QAApB,CAAZ,CAA0C;AAAEs1B,mBAAF;AAAeC;AAAf,OAA1C,CAAP;;AACD,SAAK,SAAL;AACC,aAAOlG,YAAY,CAACC,MAAM,CAACgG,WAAP,CAAmBE,OAApB,CAAZ,CAAyC;AAAEF,mBAAF;AAAeC;AAAf,OAAzC,EACLE,KADK,CACC,MAAMC,gBAAgB,CAAC;AAAEJ,mBAAF;AAAeC;AAAf,OAAD,CADvB,CAAP;;AAED;AACC,YAAM,IAAIp1B,KAAJ,CAAW,kCAAiCu0B,SAAU,EAAtD,CAAN;AAPF;AASA;;AAED,eAAegB,gBAAf,CAAgC;AAAEJ,aAAF;AAAeC;AAAf,CAAhC,EAA0D;AACzD,QAAMzF,GAAG,GAAG,IAAIW,GAAJ,CAAQ,aAAR,EAAuBnY,QAAQ,CAACqd,MAAhC,CAAZ;AACA7F,KAAG,CAACY,YAAJ,CAAiBvgB,GAAjB,CAAqB,aAArB,EAAoCylB,IAAI,CAACC,SAAL,CAAeP,WAAf,CAApC;AACAxF,KAAG,CAACY,YAAJ,CAAiBvgB,GAAjB,CAAqB,SAArB,EAAgCylB,IAAI,CAACC,SAAL,CAAeN,OAAf,CAAhC;AAEA,QAAM/yB,KAAK,GAAG,GAAd;AACA,QAAMC,MAAM,GAAG,GAAf;AAEA,QAAMS,IAAI,GAAGW,IAAI,CAAC4kB,KAAL,CAAWqN,MAAM,CAACtzB,KAAP,GAAe,CAAf,GAAmBA,KAAK,GAAG,CAAtC,CAAb;AACA,QAAMS,GAAG,GAAGY,IAAI,CAAC4kB,KAAL,CAAWqN,MAAM,CAACrzB,MAAP,GAAgB,CAAhB,GAAoBA,MAAM,GAAG,CAAxC,CAAZ;AAEA,QAAM;AAAEgtB,QAAI,EAAE,CAAC;AAAE9oB;AAAF,KAAD;AAAR,MAAqB,MAAM0oB,YAAY,CAACC,MAAM,CAACuB,OAAP,CAAevV,MAAhB,CAAZ,CAAoC;AAAEwU,OAAG,EAAEA,GAAG,CAACjW,IAAX;AAAiB7gB,QAAI,EAAE,OAAvB;AAAgCwJ,SAAhC;AAAuCC,UAAvC;AAA+CS,QAA/C;AAAqDD;AAArD,GAApC,CAAjC;AAEA,SAAO,IAAI9F,OAAJ,CAAYI,OAAO,IAAI;AAC7B,aAASuzB,cAAT,CAAwBpB,KAAxB,EAA+BqB,OAA/B,EAAwC;AACvC,UAAIrB,KAAK,KAAK/oB,EAAd,EAAkB;AAElB,YAAMmpB,GAAG,GAAGiB,OAAO,CAACjB,GAAR,IAAe,IAAIW,GAAJ,CAAQM,OAAO,CAACjB,GAAhB,CAA3B;;AACA,UAAIA,GAAG,IAAIA,GAAG,CAACY,YAAJ,CAAiBroB,GAAjB,CAAqB,QAArB,CAAX,EAA2C;AAC1C2oB,qBAAa;AACb,cAAMv2B,MAAM,GAAGq1B,GAAG,CAACY,YAAJ,CAAiB5gB,GAAjB,CAAqB,QAArB,CAAf;AACA,YAAI,CAACrV,MAAL,EAAa;AACb8C,eAAO,CAACq4B,IAAI,CAACG,KAAL,CAAWt7B,MAAX,CAAD,CAAP;AACA40B,oBAAY,CAACC,MAAM,CAACG,IAAP,CAAY3sB,MAAb,CAAZ,CAAiC6D,EAAjC;AACA;AACD;;AAED,aAASsqB,cAAT,CAAwBvB,KAAxB,EAA+B;AAC9B,UAAIA,KAAK,KAAK/oB,EAAd,EAAkB;AAClBqqB,mBAAa;AACbzzB,aAAO,CAAC,KAAD,CAAP;AACA;;AAED,aAASyzB,aAAT,GAAyB;AACxB1B,YAAM,CAACG,IAAP,CAAYyB,SAAZ,CAAsBD,cAAtB,CAAqCH,cAArC;AACAxB,YAAM,CAACG,IAAP,CAAY0B,SAAZ,CAAsBF,cAAtB,CAAqCA,cAArC;AACA;;AAED3B,UAAM,CAACG,IAAP,CAAYyB,SAAZ,CAAsB9B,WAAtB,CAAkC0B,cAAlC;AACAxB,UAAM,CAACG,IAAP,CAAY0B,SAAZ,CAAsB/B,WAAtB,CAAkC6B,cAAlC;AACA,GA3BM,CAAP;AA4BA,C;;AC1DD;AAEA,MAAM+E,OAAO,GAAG,IAAI/lB,GAAJ,EAAhB;AACAmf,WAAW,CAAC,SAAD,EAAY,CAAC,CAACsF,SAAD,EAAYp7B,GAAZ,EAAiBP,KAAjB,CAAD,KAA6B;AACnD,UAAQ27B,SAAR;AACC,SAAK,KAAL;AACC,aAAOsB,OAAO,CAAClmB,GAAR,CAAYxW,GAAZ,CAAP;;AACD,SAAK,KAAL;AACC08B,aAAO,CAAC7lB,GAAR,CAAY7W,GAAZ,EAAiBP,KAAjB;AACA;;AACD,SAAK,QAAL;AACC,aAAOi9B,OAAO,CAAC5lB,MAAR,CAAe9W,GAAf,CAAP;;AACD,SAAK,KAAL;AACC,aAAO08B,OAAO,CAAC3tB,GAAR,CAAY/O,GAAZ,CAAP;;AACD,SAAK,OAAL;AACC,aAAO08B,OAAO,CAAC7zB,KAAR,EAAP;;AACD;AACC,YAAM,IAAIhC,KAAJ,CAAW,8BAA6Bu0B,SAAU,EAAlD,CAAN;AAbF;AAeA,CAhBU,CAAX,C;;;;;ACHA;AACA;AACA;;AAEA,MAAMuB,KAAK,GAAG5G,YAAY,CAAC,CAAC6G,KAAD,EAAQh3B,QAAR,KAAqBowB,MAAM,CAAC6G,OAAP,CAAeC,KAAf,CAAqBjmB,GAArB,CAAyB+lB,KAAzB,EAAgCh3B,QAAhC,CAAtB,CAA1B;;AACA,MAAMm3B,IAAI,GAAG,CAAC/8B,GAAD,EAAMP,KAAN,KAAgBk9B,KAAK,CAAC;AAAE,GAAC38B,GAAD,GAAOP;AAAT,CAAD,CAAlC;;AACA,MAAMu9B,KAAK,GAAGjH,YAAY,CAAC,CAACxd,IAAD,EAAO3S,QAAP,KAAoBowB,MAAM,CAAC6G,OAAP,CAAeC,KAAf,CAAqBtmB,GAArB,CAAyB+B,IAAzB,EAA+B3S,QAA/B,CAArB,CAA1B;;AACA,MAAMq3B,IAAI,GAAG,OAAOj9B,GAAP,EAAY0Y,YAAY,GAAG,IAA3B,KAAoC,CAAC,MAAMskB,KAAK,CAAC;AAAE,GAACh9B,GAAD,GAAO0Y;AAAT,CAAD,CAAZ,EAAuC1Y,GAAvC,CAAjD;;AAEA81B,WAAW,CAAC,aAAD,EAAgBrf,yCAAU,CAAC,OAAO,CAACzW,GAAD,EAAM0Y,YAAN,EAAoBwkB,QAApB,EAA8Bp8B,QAA9B,CAAP,KAAmD;AACxF,QAAMq8B,WAAW,GAAG,MAAMF,IAAI,CAACj9B,GAAD,EAAM0Y,YAAN,CAA9B;AACA,MAAIykB,WAAW,KAAKD,QAApB,EAA8B,OAAO,KAAP;AAC9B,QAAMH,IAAI,CAAC/8B,GAAD,EAAMc,QAAN,CAAV;AACA,SAAO,IAAP;AACA,CALoC,EAKlC,CAAC,CAACd,GAAD,CAAD,KAAWA,GALuB,CAA1B,CAAX,C;;ACTA;AAEA81B,WAAW,CAAC,aAAD,EAAgB,CAAC;AAAEoC,MAAF;AAAQkF;AAAR,CAAD,EAAuB;AAAEhF;AAAF,CAAvB,KAAmC;AAC7DF,MAAI,CAAClT,OAAL,CAAa,CAACwR,GAAD,EAAMvjB,CAAN,KAAY;AACxB+iB,UAAM,CAACG,IAAP,CAAYnU,MAAZ,CAAmB;AAClBwU,SADkB;AAElB6G,YAAM,EAAEpqB,CAAC,KAAKmqB,UAFI;AAGlB18B,WAAK,EAAE03B,GAAG,CAAC13B,KAAJ,GAAY,CAAZ,GAAgBuS,CAHL;AAIlBqqB,iBAAW,EAAElF,GAAG,CAAC/qB,EAJC;AAMlB,SAAoF;AANlE,KAAnB;AAQA,GATD;AAUA,CAXU,CAAX,C;;ACFO,MAAMkwB,QAAN,CAAqB;AAS3BjV,aAAW,CAACkV,QAAD,EAAmB;AAAA,SAR9Bz5B,GAQ8B;AAAA,SAF9By5B,QAE8B;AAC7B,SAAKz5B,GAAL,GAAW,IAAI4S,GAAJ,EAAX;AACA,SAAK6mB,QAAL,GAAgBA,QAAhB;AACA;;AAEDhnB,KAAG,CAACxW,GAAD,EAASy9B,MAAc,GAAG5I,QAA1B,EAA8C;AAChD,UAAMrmB,GAAG,GAAGD,IAAI,CAACC,GAAL,EAAZ;AACA,UAAMM,KAAK,GAAG,KAAK/K,GAAL,CAASyS,GAAT,CAAaxW,GAAb,CAAd;;AACA,QAAI8O,KAAK,IAAKN,GAAG,GAAGM,KAAK,CAAC4uB,UAAZ,GAAyBD,MAAvC,EAAgD;AAC/C3uB,WAAK,CAAC6uB,OAAN,GAAgBnvB,GAAhB;AACA,aAAOM,KAAK,CAACrP,KAAb;AACA;AACD;;AAEDoX,KAAG,CAAC7W,GAAD,EAASP,KAAT,EAAyB;AAC3B,UAAM+O,GAAG,GAAGD,IAAI,CAACC,GAAL,EAAZ;AACA,SAAKzK,GAAL,CAAS8S,GAAT,CAAa7W,GAAb,EAAkB;AAAEP,WAAF;AAASi+B,gBAAU,EAAElvB,GAArB;AAA0BmvB,aAAO,EAAEnvB;AAAnC,KAAlB;;AAEA,QAAI,KAAKzK,GAAL,CAAS6Q,IAAT,GAAgB,KAAK4oB,QAAzB,EAAmC;AAElCj+B,WAAK,CAACkF,IAAN,CAAW,KAAKV,GAAL,CAASkR,OAAT,EAAX,EACE2oB,IADF,CACO,CAAC,GAAGpwB,CAAH,CAAD,EAAQ,GAAGC,CAAH,CAAR,KAAkBA,CAAC,CAACkwB,OAAF,GAAYnwB,CAAC,CAACmwB,OADvC,EAEEzd,KAFF,CAES,KAAKsd,QAAL,GAAgB,CAAjB,GAAsB,CAF9B,EAGExY,OAHF,CAGU,CAAC,CAAChlB,GAAD,CAAD,KAAW,KAAK+D,GAAL,CAAS+S,MAAT,CAAgB9W,GAAhB,CAHrB;AAIA;;AAED,WAAO,IAAP;AACA;;AAED8W,QAAM,CAAC9W,GAAD,EAAkB;AACvB,WAAO,KAAK+D,GAAL,CAAS+S,MAAT,CAAgB9W,GAAhB,CAAP;AACA;;AAED6I,OAAK,GAAS;AACb,SAAK9E,GAAL,CAAS8E,KAAT;AACA;;AA5C0B,C;;ACA5B;AACA;AAEA,MAAMD,KAAK,GAAG,IAAI20B,QAAJ,CAAa,GAAb,CAAd;AACAzH,WAAW,CAAC,UAAD,EAAa,CAAC,CAACsF,SAAD,EAAYp7B,GAAZ,EAAiBP,KAAjB,CAAD,KAA6B;AACpD,UAAQ27B,SAAR;AACC,SAAK,KAAL;AACCxyB,WAAK,CAACiO,GAAN,CAAU7W,GAAV,EAAeP,KAAf;AACA;;AACD,SAAK,OAAL;AACC,aAAOmJ,KAAK,CAAC4N,GAAN,CAAUxW,GAAV,EAAeP,KAAf,CAAP;;AACD,SAAK,QAAL;AACC,aAAOmJ,KAAK,CAACkO,MAAN,CAAa9W,GAAb,CAAP;;AACD,SAAK,OAAL;AACC,aAAO4I,KAAK,CAACC,KAAN,EAAP;;AACD;AACC,YAAM,IAAIhC,KAAJ,CAAW,+BAA8Bu0B,SAAU,EAAnD,CAAN;AAXF;AAaA,CAdU,CAAX,C;;ACNA;AACkH;AACA;AACI;AACD;AACH;AACM;AACK;AACN;AACA;AACC;AACE;AACJ;AACA;AACH;AACI;AACxG,0CAAC,YAAY,oBAAE,aAAa,oBAAE,iBAAiB,wBAAE,gBAAgB,uBAAE,aAAa,oBAAE,mBAAmB,0BAAE,wBAAwB,+BAAE,kBAAkB,oCAAE,kBAAkB,yBAAE,mBAAmB,0BAAE,oBAAoB,2BAAG,gBAAgB,uBAAG,gBAAgB,uBAAG,aAAa,oBAAG,iBAAiB,wBAAG,EAAE,E;;;;;;;;ACPhT,QAASyC,kBAAT,CAA2Bh8B,KAA3B,CAAkCpC,KAAlC,CAAyCwS,UAAzC,CAAqD,CACnD,GAAIvR,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGkB,KAAK,EAAI,IAAT,CAAgB,CAAhB,CAAoBA,KAAK,CAAClB,MADvC,CAGA,MAAO,EAAED,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIsR,UAAU,CAACxS,KAAD,CAAQoC,KAAK,CAACnB,KAAD,CAAb,CAAd,CAAqC,CACnC,MAAO,KAAP,CACD,CACF,CACD,MAAO,MAAP,CACD,CAEcm9B,wEAAf,E;;;;;;;;;;;;;;AChBA,GAAIvjB,SAAQ,CAAG,EAAI,CAAnB,CASA,GAAIwjB,UAAS,CAAG,EAAEz2B,uBAAG,EAAK,EAAI0d,sCAAU,CAAC,GAAI1d,wBAAJ,CAAQ,EAAE,CAAC,CAAH,CAAR,CAAD,CAAV,CAA2B,CAA3B,CAAL,EAAuCiT,QAAhD,EAA4D4T,uBAA5D,CAAmE,SAAS/b,MAAT,CAAiB,CAClG,MAAO,IAAI9K,wBAAJ,CAAQ8K,MAAR,CAAP,CACD,CAFD,CAIe2rB,wDAAf,E;;ACVA,GAAIlS,iBAAgB,CAAG,GAAvB,CAWA,QAASmS,SAAT,CAAkBl8B,KAAlB,CAAyBuQ,QAAzB,CAAmCH,UAAnC,CAA+C,CAC7C,GAAIvR,MAAK,CAAG,CAAC,CAAb,CACIwb,QAAQ,CAAGwS,iCADf,CAEI/tB,MAAM,CAAGkB,KAAK,CAAClB,MAFnB,CAGIq9B,QAAQ,CAAG,IAHf,CAII78B,MAAM,CAAG,EAJb,CAKIoR,IAAI,CAAGpR,MALX,CAOA,GAAI8Q,UAAJ,CAAgB,CACd+rB,QAAQ,CAAG,KAAX,CACA9hB,QAAQ,CAAG2hB,kBAAX,CACD,CAHD,IAIK,IAAIl9B,MAAM,EAAIirB,gBAAd,CAAgC,CACnC,GAAI/U,IAAG,CAAGzE,QAAQ,CAAG,IAAH,CAAU0rB,UAAS,CAACj8B,KAAD,CAArC,CACA,GAAIgV,GAAJ,CAAS,CACP,MAAOkO,uCAAU,CAAClO,GAAD,CAAjB,CACD,CACDmnB,QAAQ,CAAG,KAAX,CACA9hB,QAAQ,CAAG6J,4BAAX,CACAxT,IAAI,CAAG,GAAImT,6BAAJ,EAAP,CACD,CARI,IASA,CACHnT,IAAI,CAAGH,QAAQ,CAAG,EAAH,CAAQjR,MAAvB,CACD,CACD88B,KAAK,CACL,MAAO,EAAEv9B,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIlB,MAAK,CAAGoC,KAAK,CAACnB,KAAD,CAAjB,CACIiS,QAAQ,CAAGP,QAAQ,CAAGA,QAAQ,CAAC3S,KAAD,CAAX,CAAqBA,KAD5C,CAGAA,KAAK,CAAIwS,UAAU,EAAIxS,KAAK,GAAK,CAAzB,CAA8BA,KAA9B,CAAsC,CAA9C,CACA,GAAIu+B,QAAQ,EAAIrrB,QAAQ,GAAKA,QAA7B,CAAuC,CACrC,GAAIurB,UAAS,CAAG3rB,IAAI,CAAC5R,MAArB,CACA,MAAOu9B,SAAS,EAAhB,CAAoB,CAClB,GAAI3rB,IAAI,CAAC2rB,SAAD,CAAJ,GAAoBvrB,QAAxB,CAAkC,CAChC,QAASsrB,MAAT,CACD,CACF,CACD,GAAI7rB,QAAJ,CAAc,CACZG,IAAI,CAACpP,IAAL,CAAUwP,QAAV,EACD,CACDxR,MAAM,CAACgC,IAAP,CAAY1D,KAAZ,EACD,CAXD,IAYK,IAAI,CAACyc,QAAQ,CAAC3J,IAAD,CAAOI,QAAP,CAAiBV,UAAjB,CAAb,CAA2C,CAC9C,GAAIM,IAAI,GAAKpR,MAAb,CAAqB,CACnBoR,IAAI,CAACpP,IAAL,CAAUwP,QAAV,EACD,CACDxR,MAAM,CAACgC,IAAP,CAAY1D,KAAZ,EACD,CACF,CACD,MAAO0B,OAAP,CACD,CAEc48B,sDAAf,E;;AC7CA,QAASI,OAAT,CAAgBt8B,KAAhB,CAAuBuQ,QAAvB,CAAiC,CAC/B,MAAQvQ,MAAK,EAAIA,KAAK,CAAClB,MAAhB,CAA0Bo9B,SAAQ,CAACl8B,KAAD,CAAQ8N,wCAAY,CAACyC,QAAD,CAAW,CAAX,CAApB,CAAlC,CAAuE,EAA9E,CACD,CAEc+rB,2DAAf,E;;ACLA,QAASC,QAAT,CAAiBr+B,MAAjB,CAAyBqS,QAAzB,CAAmC,CACjC,GAAIjR,OAAM,CAAG,EAAb,CACAiR,QAAQ,CAAGzC,wCAAY,CAACyC,QAAD,CAAW,CAAX,CAAvB,CAEAwJ,sCAAU,CAAC7b,MAAD,CAAS,SAASN,KAAT,CAAgBO,GAAhB,CAAqBD,MAArB,CAA6B,CAC9CM,2CAAe,CAACc,MAAD,CAASiR,QAAQ,CAAC3S,KAAD,CAAQO,GAAR,CAAaD,MAAb,CAAjB,CAAuCN,KAAvC,CAAf,CACD,CAFS,CAAV,CAGA,MAAO0B,OAAP,CACD,CAEci9B,6DAAf,E;;;;;;;;ACtBA,QAASC,UAAT,CAAmBx8B,KAAnB,CAA0BX,SAA1B,CAAqCo9B,MAArC,CAA6C5iB,SAA7C,CAAwD,CACtD,GAAI/a,OAAM,CAAGkB,KAAK,CAAClB,MAAnB,CACID,KAAK,CAAGgb,SAAS,CAAG/a,MAAH,CAAY,CAAC,CADlC,CAGA,MAAO,CAAC+a,SAAS,CAAGhb,KAAK,EAAR,CAAa,EAAEA,KAAF,CAAUC,MAAjC,GACLO,SAAS,CAACW,KAAK,CAACnB,KAAD,CAAN,CAAeA,KAAf,CAAsBmB,KAAtB,CADX,CACyC,CAAE,CAE3C,MAAOy8B,OAAM,CACTnvB,qCAAS,CAACtN,KAAD,CAAS6Z,SAAS,CAAG,CAAH,CAAOhb,KAAzB,CAAkCgb,SAAS,CAAGhb,KAAK,CAAG,CAAX,CAAeC,MAA1D,CADA,CAETwO,qCAAS,CAACtN,KAAD,CAAS6Z,SAAS,CAAGhb,KAAK,CAAG,CAAX,CAAe,CAAjC,CAAsCgb,SAAS,CAAG/a,MAAH,CAAYD,KAA3D,CAFb,CAGD,CAEc29B,wDAAf,E;;ACaA,QAASE,eAAT,CAAwB18B,KAAxB,CAA+BX,SAA/B,CAA0C,CACxC,MAAQW,MAAK,EAAIA,KAAK,CAAClB,MAAhB,CACH09B,UAAS,CAACx8B,KAAD,CAAQ8N,wCAAY,CAACzO,SAAD,CAAY,CAAZ,CAApB,CAAoC,KAApC,CAA2C,IAA3C,CADN,CAEH,EAFJ,CAGD,CAEcq9B,2EAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBA,QAASC,kBAAT,CAA2B/+B,KAA3B,CAAkC,CAChC,MAAOiY,wCAAY,CAACjY,KAAD,CAAZ,EAAuBmD,sCAAW,CAACnD,KAAD,CAAzC,CACD,CAEc++B,iFAAf,E;;ACzBA,GAAI3uB,UAAS,CAAGtF,IAAI,CAACC,GAArB,CAqBA,QAASi0B,MAAT,CAAe58B,KAAf,CAAsB,CACpB,GAAI,EAAEA,KAAK,EAAIA,KAAK,CAAClB,MAAjB,CAAJ,CAA8B,CAC5B,MAAO,EAAP,CACD,CACD,GAAIA,OAAM,CAAG,CAAb,CACAkB,KAAK,CAAG+lB,uCAAW,CAAC/lB,KAAD,CAAQ,SAAS68B,KAAT,CAAgB,CACzC,GAAIF,2BAAiB,CAACE,KAAD,CAArB,CAA8B,CAC5B/9B,MAAM,CAAGkP,SAAS,CAAC6uB,KAAK,CAAC/9B,MAAP,CAAeA,MAAf,CAAlB,CACA,MAAO,KAAP,CACD,CACF,CALkB,CAAnB,CAMA,MAAOktB,sCAAS,CAACltB,MAAD,CAAS,SAASD,KAAT,CAAgB,CACvC,MAAO+R,qCAAQ,CAAC5Q,KAAD,CAAQkX,wCAAY,CAACrY,KAAD,CAApB,CAAf,CACD,CAFe,CAAhB,CAGD,CAEc+9B,yDAAf,E;;ACnBA,QAASE,UAAT,CAAmB98B,KAAnB,CAA0BuQ,QAA1B,CAAoC,CAClC,GAAI,EAAEvQ,KAAK,EAAIA,KAAK,CAAClB,MAAjB,CAAJ,CAA8B,CAC5B,MAAO,EAAP,CACD,CACD,GAAIQ,OAAM,CAAGs9B,eAAK,CAAC58B,KAAD,CAAlB,CACA,GAAIuQ,QAAQ,EAAI,IAAhB,CAAsB,CACpB,MAAOjR,OAAP,CACD,CACD,MAAOsR,qCAAQ,CAACtR,MAAD,CAAS,SAASu9B,KAAT,CAAgB,CACtC,MAAOztB,kCAAK,CAACmB,QAAD,CAAWhS,SAAX,CAAsBs+B,KAAtB,CAAZ,CACD,CAFc,CAAf,CAGD,CAEcC,iEAAf,E;;ACfA,GAAIC,QAAO,CAAG77B,oCAAQ,CAAC,SAAS87B,MAAT,CAAiB,CACtC,GAAIl+B,OAAM,CAAGk+B,MAAM,CAACl+B,MAApB,CACIyR,QAAQ,CAAGzR,MAAM,CAAG,CAAT,CAAak+B,MAAM,CAACl+B,MAAM,CAAG,CAAV,CAAnB,CAAkCP,SADjD,CAGAgS,QAAQ,CAAG,MAAOA,SAAP,EAAmB,UAAnB,EAAiCysB,MAAM,CAACtc,GAAP,GAAcnQ,QAA/C,EAA2DhS,SAAtE,CACA,MAAOu+B,oBAAS,CAACE,MAAD,CAASzsB,QAAT,CAAhB,CACD,CANqB,CAAtB,CAQewsB,6DAAf,E;;;;;;;;;AC7BA,MAAME,aAAa,GAAG;AACrB,OAAK,OADgB;AAErB,OAAK,QAFgB;AAGrB,OAAK,QAHgB;AAIrB,OAAK,MAJgB;AAKrB,OAAK,MALgB;AAMrB,OAAK;AANgB,CAAtB;AASO,SAASC,UAAT,CAAoBrK,GAApB,EAA0C;AAChD,SAAOA,GAAG,GACTA,GAAG,CAAC/a,QAAJ,GAAeG,OAAf,CAAuB,YAAvB,EAAqCwZ,CAAC,IAAIwL,aAAa,CAACxL,CAAD,CAAvD,CADS,GAET,EAFD;AAGA,C;;ACbD;AACA;AACA;AACA;;AAMA,SAAS0L,iBAAT,CAA8BC,cAA9B,EAAgG;AAC/F,SAAO,CAACC,OAAD,EAAU,GAAG/sB,MAAb,KACNysB,iBAAO,CACNM,OADM,EAEN/sB,MAAM,CAACpO,GAAP,CAAWk7B,cAAX,CAFM,EAGN,CAACE,CAAD,EAAIzf,CAAJ,KAAW,GAAEyf,CAAE,GAAEzf,CAAC,KAAKtf,SAAN,GAAkB,EAAlB,GAAuBsf,CAAE,EAHpC,CAAP,CAIES,IAJF,CAIO,EAJP,CADD;AAMA;;AAEM,MAAMif,MAAiC,GAAGJ,iBAAiB,CAACK,kBAAD,CAA3D;AAEA,MAAMC,aAAiC,GAAGN,iBAAiB,CAACD,UAAD,CAA3D;AAIA,SAASQ,IAAT,CAAc7K,GAAd,EAA6C;AACnD,SAAO;AAAE8K,YAAQ,EAAE9K;AAAZ,GAAP;AACA;AAED,MAAM+K,kBAAkB,GAAG,IAA3B;AAEO,SAASC,UAAT,CAAoBlyB,CAApB,EAA+BC,CAA/B,EAAmD;AACzD,SAAOqkB,qBAAW,CAACtb,GAAZ,CAAgBhJ,CAAhB,EAAmBC,CAAnB,KAAyBgyB,kBAAkB,GAAGl1B,IAAI,CAACC,GAAL,CAASgD,CAAC,CAAC7M,MAAX,EAAmB8M,CAAC,CAAC9M,MAArB,CAArD;AACA;AAEM,MAAMg/B,UAAU,GAAG,uBAAnB;AAEP,MAAMC,eAAe,GAAGZ,iBAAiB,CAACzoB,CAAC,IAAI;AAE9C,MAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOuX,MAAM,CAACvX,CAAD,CAAb;AAE3B,MAAI,CAACA,CAAL,EAAQ,OAAO,EAAP;AAER,MAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOwoB,UAAU,CAACxoB,CAAD,CAAjB;AAE3B,MAAIhX,KAAK,CAACD,OAAN,CAAciX,CAAd,CAAJ,EAAsB,OAAOA,CAAC,CAAC1Q,MAAF,CAASs5B,CAAC,IAAIA,CAAC,IAAI,OAAOA,CAAC,CAACK,QAAT,KAAsB,QAAzC,EAAmDz7B,GAAnD,CAAuDo7B,CAAC,IAAIA,CAAC,CAACK,QAA9D,EAAwErf,IAAxE,CAA6E,EAA7E,CAAP;AAEtB,MAAI5J,CAAC,CAAC1W,cAAF,CAAiB,UAAjB,CAAJ,EAAkC,OAAO0W,CAAC,CAACipB,QAAT;AAClC,QAAM,IAAI7uB,SAAJ,CAAe,wCAAuCmd,MAAM,CAACvX,CAAD,CAAI,EAAhE,CAAN;AACA,CAZwC,CAAzC;AAoBO,MAAMspB,IAAI,GAAG,CAACV,CAAD,EAAc,GAAGhtB,MAAjB,KAA6C;AAChE,QAAM2tB,MAAM,GAAGF,eAAe,CAACT,CAAD,EAAI,GAAGhtB,MAAP,CAA9B;AAMA,QAAM4tB,QAAQ,GAAGh5B,QAAQ,CAACiC,aAAT,CAAuB,KAAvB,CAAjB;AACA+2B,UAAQ,CAACC,SAAT,GAAqBF,MAArB;;AACA,MAAIC,QAAQ,CAACE,iBAAT,KAA+B,CAAnC,EAAsC;AACrC,UAAM,IAAIp5B,KAAJ,CAAW,4DAA2Dk5B,QAAQ,CAACE,iBAAkB,EAAjG,CAAN;AACA;;AACD,QAAMz7B,KAAK,GAAGe,gCAAQ,CAACw6B,QAAQ,CAACG,iBAAV,EAA6B16B,WAA7B,CAAtB;AACAhB,OAAK,CAACgF,MAAN;AACA,SAAOhF,KAAP;AACA,CAfM;AAoBA,MAAM27B,KAAK,GAAG,CAAChB,CAAD,EAAc,GAAGhtB,MAAjB,KAA6CotB,IAAI,CAACK,eAAe,CAACT,CAAD,EAAI,GAAGhtB,MAAP,CAAhB,CAA/D,C;;AC5EP;AACA;AAEA;AACA;AACA;AAEO,MAAMiuB,UAAU,GAAGz1B,+BAAI,CAAC,MAAM;AACpC,MAAI01B,YAAY,EAAhB,EAAoB;AACnB,WAAO,IAAP;AACA,GAFD,MAEO,IAAIt5B,QAAQ,CAACf,aAAT,CAAuB,kCAAvB,CAAJ,EAAgE;AACtE,WAAO,IAAP;AACA;AACD,CAN6B,CAAvB;AAQA,MAAMq6B,YAAY,GAAG11B,+BAAI,CAAC,MAAqB21B,oBAAoB,CAACv5B,QAAD,CAA1C,CAAzB;AAEA,MAAMu5B,oBAAoB,GAAIv5B,QAAD,IAAiD;AACpF,MAAI0V,2CAAS,CAAC,KAAD,CAAb,EAAsB;AAErB,UAAM8jB,iBAAiB,GAAGn8B,CAAC,IAAI,CAAC,GAAGA,CAAC,CAACo8B,UAAN,EAAkB36B,MAAlB,CAAyB6Z,CAAC,IAAIA,CAAC,CAACva,QAAF,KAAe,CAA7C,EAAgDs7B,MAAhD,CAAuD,GAAG,CAAC,GAAGr8B,CAAC,CAACM,QAAN,EAAgBX,GAAhB,CAAoBw8B,iBAApB,CAA1D,CAA/B;;AACA,UAAMz4B,MAAM,GAAGf,QAAQ,CAACf,aAAT,CAAuB,uBAAvB,CAAf;AACA,UAAM06B,QAAQ,GAAG54B,MAAM,IAAIy4B,iBAAiB,CAACz4B,MAAD,CAAjB,CAA0B,CAA1B,CAA3B;AACA,WAAO44B,QAAQ,IAAIA,QAAQ,CAAC3yB,WAA5B;AACA;;AAED,QAAMuS,IAAwB,GAAIvZ,QAAQ,CAACf,aAAT,CAAuB,sCAAvB,CAAlC;AACA,MAAI,CAACsa,IAAD,IAASA,IAAI,CAACM,SAAL,CAAela,QAAf,CAAwB,gBAAxB,CAAb,EAAwD;AACxD,QAAMsW,OAAO,GAAGL,iCAAO,CAACK,OAAR,CAAgB5D,IAAhB,CAAqBkH,IAAI,CAACrB,QAA1B,CAAhB;;AACA,MAAIjC,OAAJ,EAAa;AACZ,WAAOA,OAAO,CAAC,CAAD,CAAd;AACA;AACD,CAfM;AAiBA,MAAM2jB,mBAAmB,GAAGh2B,+BAAI,CAAC,MAAe,CAAC,EAAE5D,QAAQ,CAACuG,cAAT,CAAwB,SAAxB,KAAsCvG,QAAQ,CAACf,aAAT,CAAuB,kBAAvB,CAAxC,CAAjB,CAAhC;AAEA,MAAM46B,gBAAgB,GAAGj2B,+BAAI,CAAC,YAA8B;AAClE,QAAMk2B,OAAO,GAAG95B,QAAQ,CAACf,aAAT,CAAuB,WAAvB,CAAhB;;AACA,MAAI66B,OAAO,YAAYC,gBAAvB,EAAyC;AACxC,WAAOD,OAAO,CAACphC,KAAf;AACA;;AAED,QAAMshC,QAAQ,GAAG,MAAMC,gBAAgB,EAAvC;AACA,SAAOD,QAAQ,IAAIA,QAAQ,CAAC/oB,IAArB,IAA6B+oB,QAAQ,CAAC/oB,IAAT,CAAcipB,OAAlD;AACA,CARmC,CAA7B;AAUA,MAAMD,gBAAgB,GAAGr2B,+BAAI,CAAC,MACpC,CAACy1B,UAAU,EAAX,GAAgBv8B,OAAO,CAACI,OAAR,EAAhB,GAAoCi9B,SAAI,CAAC;AAAE1K,KAAG,EAAE,cAAP;AAAuB92B,MAAI,EAAE;AAA7B,CAAD,CAAJ,CAClCkH,IADkC,CAC7BoR,IAAI,IAAIA,IAAI,CAACA,IAAL,IAAaA,IAAI,CAACA,IAAL,CAAUipB,OAAvB,GAAiCjpB,IAAjC,GAAwC5X,SADnB,CADD,CAA7B;AAIP,MAAM+gC,UAAU,GAAG,sCAAnB;AAEO,MAAMC,gBAAgB,GAAG,CAC/B,mBAD+B,EAE/B,oBAF+B,EAG/B,2BAH+B,EAI/B,yBAJ+B,EAK/B,0CAL+B,EAM/B,oDAN+B,EAO/B,qBAP+B,EAQ/B,oBAR+B,EAS/B,wBAT+B,EAU/B,+BAV+B,EAW/B,mBAX+B,EAY9BjhB,IAZ8B,CAYzB,IAZyB,CAAzB;AAcA,SAASkhB,mBAAT,CAA6Bz2B,OAA7B,EAA4D;AAClE,MAAI,EAAEA,OAAO,YAAY02B,iBAArB,CAAJ,EAA6C;AAE7C,QAAM;AAAE/gB,QAAF;AAAQ8b;AAAR,MAAmBzxB,OAAzB;AAGA,MAAI,CAACoU,QAAQ,CAACqd,MAAT,CAAgBkF,QAAhB,CAAyBlF,MAAM,CAACmF,KAAP,CAAa,GAAb,EAAkBthB,KAAlB,CAAwB,CAAC,CAAzB,EAA4BC,IAA5B,CAAiC,GAAjC,CAAzB,CAAL,EAAsE;AAEtE,QAAM,GAAGugB,QAAH,IAAengB,IAAI,CAACpC,KAAL,CAAWgjB,UAAX,KAA0B,EAA/C;AACA,MAAIT,QAAJ,EAAc,OAAOA,QAAP;AACd;AAEM,SAASe,WAAT,CAAqBf,QAAiB,GAAGL,YAAY,EAArD,EAAiF;AACvF,MAAI,CAACK,QAAL,EAAe;AACd,WAAO78B,OAAO,CAAC8C,MAAR,CAAe,IAAIE,KAAJ,CAAU,sCAAV,CAAf,CAAP;AACA;;AAED,SAAOq6B,SAAI,CAAC;AACX1K,OAAG,EAAErV,MAAc,SAAQuf,QAAS,aADzB;AAEXhhC,QAAI,EAAE,MAFK;AAGXgiC,YAAQ,EAAE,KAAK9S,sBAAMA;AAHV,GAAD,CAAX;AAKA,C;;;;;;;;ACxFD;AAIA;AACA;AAEO,MAAM5W,YAKX,GAAG;AACJ2pB,UAAQ,EAAE,IADN;AAEJjB,UAAQ,EAAE,IAFN;AAGJrE,QAAM,EAAE,wBAHJ;AAIJpd,UAAQ,EAAED,QAAQ,CAACC;AAJf,CALE;;AAYP,IAAID,QAAQ,CAAC4iB,QAAT,CAAkBlhB,UAAlB,CAA6B,MAA7B,CAAJ,EAA0C;AACzC1I,cAAI,CAACqkB,MAAL,GAAcrd,QAAQ,CAACqd,MAAvB;AAEArQ,oCAAY,CAACplB,IAAb,CAAkB,MAAM;AACvBoR,gBAAI,CAAC0oB,QAAL,GAAgBL,YAAY,EAA5B;AACAO,oBAAgB,GAAGh6B,IAAnB,CAAwBi7B,IAAI,IAAI;AAAE7pB,kBAAI,CAAC2pB,QAAL,GAAgBE,IAAhB;AAAuB,KAAzD;AACA,GAHD;AAIA;;AAEM,SAASC,kBAAT,GAA8B;AACpC,MAAIn5B,MAAM,KAAKA,MAAM,CAACpC,MAAtB,EAA8B,OAAO1C,OAAO,CAACI,OAAR,EAAP;AAE9B,SAAOP,mCAAY,CAACiF,MAAD,EAAS,SAAT,CAAZ,CAAgC/B,IAAhC,CAAqC,CAAC;AAAEoR,QAAI,EAAE;AAAEyd;AAAF;AAAR,GAAD,KAAgC;AAC3Ev2B,UAAM,CAAC6iC,MAAP,CAAc/pB,YAAd,EAAoByd,OAApB;AACA,GAFM,CAAP;AAGA,C;;AClCD;AACA;;AAEA,MAAML,qBAAY,GAAGW,YAAY,CAACC,MAAM,CAACC,OAAP,CAAeL,WAAhB,CAAjC;;AAEA,MAAM;AACLL,gBADK;AAELK,aAFK;AAGLE,aAAWA;AAHN,IAIFX,oBAAoB,CAACttB,GAAG,IAAIutB,qBAAY,CAACvtB,GAAD,CAApB,CAJxB;AAMAmuB,MAAM,CAACC,OAAP,CAAeI,SAAf,CAAyBP,WAAzB,CAAqC,CAACjuB,GAAD,EAAMyuB,MAAN,EAAcd,YAAd,KAA+BD,uBAAc,CAAC1tB,GAAD,EAAM2tB,YAAN,CAAlF;;;ACXO,SAASwM,iBAAT,GAAsC;AAC5C,SAAOhM,MAAM,CAACiM,SAAP,CAAiBC,kBAAxB;AACA,C;;ACFD;AACA;AAEO,eAAeC,eAAf,CAA+B3L,GAA/B,EAA2D;AACjE,MAAIwL,iBAAiB,EAArB,EAAyB;AAEzB,QAAMpM,gCAAW,CAAC,iBAAD,EAAoBY,GAApB,CAAjB;AACA;AAEM,SAAS4L,YAAT,CAAsB5L,GAAtB,EAAqD;AAC3D,SAAOZ,gCAAW,CAAC,cAAD,EAAiBY,GAAjB,CAAlB;AACA,C;;ACXD;AAEO,SAAS3f,YAAT,CAAa7W,GAAb,EAA0BP,KAA1B,EAAwC;AAC9C,SAAOm2B,gCAAW,CAAC,UAAD,EAAa,CAAC,KAAD,EAAQ51B,GAAR,EAAaP,KAAb,CAAb,CAAlB;AACA;AAEM,SAAS4iC,KAAT,CAAeriC,GAAf,EAA4By9B,MAA5B,EAAqF;AAC3F,SAAO7H,gCAAW,CAAC,UAAD,EAAa,CAAC,OAAD,EAAU51B,GAAV,EAAey9B,MAAf,CAAb,CAAlB;AACA;;AAED,SAAS6E,OAAT,CAAiBtiC,GAAjB,EAA8B;AAC7B,SAAO41B,gCAAW,CAAC,UAAD,EAAa,CAAC,QAAD,EAAW51B,GAAX,CAAb,CAAlB;AACA;;AACD;AAEO,SAAS6I,KAAT,GAAiB;AACvB,SAAO+sB,gCAAW,CAAC,UAAD,EAAa,CAAC,OAAD,CAAb,CAAlB;AACA,C;;ACjBD;AACA;AACA;AACA;;AAgBA,MAAM2M,UAAN,SAAyB17B,KAAzB,CAA+B;AAG9ByhB,aAAW,CAACkO,GAAD,EAAMK,MAAN,EAAc;AACxB,UAAO,GAAEL,GAAI,uBAAsBK,MAAO,EAA1C;AADwB,SAFzBA,MAEyB;AAExB,SAAKA,MAAL,GAAcA,MAAd;AACA;;AAN6B;;AA8BxB,eAAeqK,SAAf,CAAoBjxB,OAApB,EAA6C;AACnD,QAAM;AAAEsmB,UAAF;AAAUC,OAAV;AAAeppB,WAAf;AAAwB4K,QAAxB;AAA8BtY,QAA9B;AAAoCgiC,YAApC;AAA8Cc,cAA9C;AAA0D/L;AAA1D,MAA0EgM,kBAAkB,CAACxyB,OAAD,CAAlG;;AAEA,MAAIyxB,QAAJ,EAAc;AACb,UAAMgB,MAAM,GAAG,MAAMC,KAAA,CAAenM,GAAf,EAAoBkL,QAApB,CAArB;;AACA,QAAIgB,MAAJ,EAAY;AACX,aAAOE,eAAe,CAACF,MAAD,EAAShjC,IAAT,CAAtB;AACA;AACD;;AAED,QAAMi2B,QAAQ,GAAG,OAAO6M,UAAU,GACjC7L,KAAK,CAACH,GAAD,EAAM;AACVD,UADU;AAEVnpB,WAFU;AAGVqpB,eAHU;AAIVptB,QAAI,EAAE2O;AAJI,GAAN,CAAL,CAKGpR,IALH,CAKQ,MAAM+M,CAAN,KAAY;AACnBijB,MAAE,EAAEjjB,CAAC,CAACijB,EADa;AAEnBC,UAAM,EAAEljB,CAAC,CAACkjB,MAFS;AAGnBzpB,WAAO,EAAE4nB,mBAAS,CAACz1B,KAAK,CAACkF,IAAN,CAAWkP,CAAC,CAACvG,OAAF,CAAU6H,OAAV,EAAX,CAAD,CAHC;AAInB6hB,QAAI,EAAE,MAAMnjB,CAAC,CAACmjB,IAAF;AAJO,GAAZ,CALR,CADiC,GAYjClB,gCAAW,CAAC,MAAD,EAAS;AAAEW,UAAF;AAAUC,OAAV;AAAeppB,WAAf;AAAwB4K,QAAxB;AAA8Bye;AAA9B,GAAT,CAZK,CAAjB;;AAeA,MAAI,CAACd,QAAQ,CAACiB,EAAd,EAAkB;AACjB,UAAM,IAAI2L,UAAJ,CAAe/L,GAAf,EAAoBb,QAAQ,CAACkB,MAA7B,CAAN;AACA;;AAED,MAAI6K,QAAJ,EAAc;AACbiB,gBAAA,CAAanM,GAAb,EAAkBb,QAAlB;AACA;;AAED,SAAOiN,eAAe,CAACjN,QAAD,EAAWj2B,IAAX,CAAtB;AACA;;AAGDwhC,SAAI,CAAC2B,UAAL,GAAmB5yB,OAAD,IACjB0yB,OAAA,CAAgBF,kBAAkB,CAACxyB,OAAD,CAAlB,CAA4BumB,GAA5C,CADD;;AAGA,SAASiM,kBAAT,CAA4B;AAAElM,QAAM,GAAG,KAAX;AAAkBC,KAAlB;AAAuBwE,OAAK,GAAG,EAA/B;AAAmC5tB,SAAO,GAAG,EAA7C;AAAiD4K,MAAjD;AAAuDtY,MAAI,GAAG,MAA9D;AAAsE+2B,aAAtE;AAAmFiL,UAAQ,GAAG;AAA9F,CAA5B,EASG;AACF,QAAMoB,UAAU,GAAG,IAAI3L,GAAJ,CAAQ1B,YAAO,CAAC4G,MAAhB,CAAnB;AAGA,QAAM0G,UAAU,GAAG,IAAI5L,GAAJ,CAAQX,GAAR,EAAasM,UAAb,CAAnB;;AAGA,OAAK,MAAM,CAAC9iC,GAAD,EAAMgU,GAAN,CAAX,IAAyB9U,MAAM,CAAC+V,OAAP,CAAe+lB,KAAf,CAAzB,EAAgD;AAC/C+H,cAAU,CAAC3L,YAAX,CAAwBvgB,GAAxB,CAA4B7W,GAA5B,EAAiC8tB,MAAM,CAAC9Z,GAAD,CAAvC;AACA;;AAED,QAAMgvB,QAAQ,GAAGD,UAAU,CAACE,QAAX,CAAoBzB,KAApB,CAA0B,GAA1B,EAA+BthB,KAA/B,CAAqC,CAAC,CAAtC,EAAyCC,IAAzC,CAA8C,GAA9C,MAAuD2iB,UAAU,CAACG,QAAX,CAAoBzB,KAApB,CAA0B,GAA1B,EAA+BthB,KAA/B,CAAqC,CAAC,CAAtC,EAAyCC,IAAzC,CAA8C,GAA9C,CAAxE;;AACA,MAAI6iB,QAAJ,EAAc;AAEbD,cAAU,CAAC3L,YAAX,CAAwBvgB,GAAxB,CAA4B,KAA5B,EAAmC,KAAnC;AAGA,QAAI,CAAC4f,WAAL,EAAkBA,WAAW,GAAG,SAAd;;AAElB,QAAIF,MAAM,KAAK,KAAX,IAAoBA,MAAM,KAAK,MAAnC,EAA2C;AAE1C,UAAId,YAAO,CAACkM,QAAZ,EAAsBv0B,OAAO,CAAC,WAAD,CAAP,GAAuBqoB,YAAO,CAACkM,QAA/B;AACtB;;AAKDoB,cAAU,CAACE,QAAX,GAAsBF,UAAU,CAACE,QAAX,CAAoBnpB,OAApB,CAA4B,OAA5B,EAAqC,MAArC,CAAtB;AACA;;AAED,QAAM0oB,UAAU,GAAGM,UAAU,CAACzG,MAAX,KAAsB0G,UAAU,CAAC1G,MAApD;;AAGA,MAAI,OAAOrkB,IAAP,KAAgB,QAApB,EAA8B;AAC7B5K,WAAO,CAAC,cAAD,CAAP,GAA0B,mCAA1B;AAGA4K,QAAI,GAAG,IAAIkrB,eAAJ,CAAoBlrB,IAApB,EAA0B2B,QAA1B,EAAP;AACA;;AAED,SAAO;AACN4c,UADM;AAENC,OAAG,EAAEuM,UAAU,CAACxiB,IAFV;AAGNnT,WAHM;AAIN4K,QAJM;AAKNtY,QALM;AAMNgiC,YANM;AAONjL,eAAW,EAAEA,WAAW,IAAI,MAPtB;AAQN+L;AARM,GAAP;AAUA;;AAED,SAASI,eAAT,CAAyBjN,QAAzB,EAAmCj2B,IAAnC,EAAuD;AACtD,UAAQA,IAAR;AACC,SAAK,MAAL;AACC,aAAOi2B,QAAQ,CAACmB,IAAhB;;AACD,SAAK,MAAL;AACC,aAAOwF,IAAI,CAACG,KAAL,CAAW9G,QAAQ,CAACmB,IAApB,CAAP;;AACD,SAAK,KAAL;AACC,aAAOnB,QAAP;;AACD;AACC,YAAM,IAAI9uB,KAAJ,CAAW,iBAAgBnH,IAAK,EAAhC,CAAN;AARF;AAUA,C;;ACjKD;AAEO,SAAS64B,QAAT,CAAkB/B,GAAlB,EAA+B2B,QAA/B,EAAkD;AAExDvC,kCAAW,CAAC,UAAD,EAAa;AAEvBY,OAAG,EAAE,IAAIW,GAAJ,CAAQX,GAAR,EAAaxX,QAAQ,CAACuB,IAAtB,EAA4BA,IAFV;AAGvB4X;AAHuB,GAAb,CAAX;AAKA,C;;ACTM,SAASgL,cAAT,GAAkC;AACxC,SAAOnN,MAAM,CAACC,OAAP,CAAe5oB,EAAtB;AACA;AAEM,MAAM+1B,MAAM,GAAGpN,MAAM,CAACC,OAAP,CAAemN,MAA9B;AAEA,MAAMC,aAAa,GAAG,CAACxB,IAAY,GAAG,EAAhB,KAAuB,IAAI1K,GAAJ,CAAQ0K,IAAR,EAAcuB,MAAM,CAAC,cAAD,CAApB,CAA7C;AACA,MAAME,aAAa,GAAG,MAAMtkB,QAAQ,CAACqd,MAAT,KAAoBgH,aAAa,GAAGhH,MAAhE,C;;ACPA,MAAMkH,eAAe,GAAG,oBAAxB;AACA,MAAMC,mBAAmB,GAAG,wBAA5B;AACA,MAAMC,yBAAyB,GAAG,6BAAlC,C;;ACJQ,uDAAQ,E;;ACEvB;AACA;AACA;AAEA,MAAMC,gBAAgB,GAAG,IAAIr8B,GAAJ,CAAQ,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,OAA/B,EAAwC,OAAxC,EAAiD,IAAjD,EAAuD,IAAvD,EAA6D,IAA7D,EAAmE,IAAnE,EAAyE,IAAzE,EAA+E,IAA/E,EAAqF,IAArF,EAA2F,OAA3F,EAAoG,OAApG,EAA6G,OAA7G,EAAsH,OAAtH,EAA+H,IAA/H,EAAqI,IAArI,EAA2I,OAA3I,EAAoJ,OAApJ,EAA6J,IAA7J,EAAmK,IAAnK,EAAyK,IAAzK,EAA+K,IAA/K,EAAqL,KAArL,EAA4L,IAA5L,EAAkM,OAAlM,EAA2M,OAA3M,EAAoN,OAApN,EAA6N,IAA7N,EAAmO,IAAnO,EAAyO,IAAzO,EAA+O,IAA/O,EAAqP,IAArP,EAA2P,IAA3P,EAAiQ,IAAjQ,EAAuQ,IAAvQ,EAA6Q,IAA7Q,EAAmR,IAAnR,EAAyR,IAAzR,EAA+R,OAA/R,EAAwS,IAAxS,EAA8S,IAA9S,EAAoT,MAApT,EAA4T,KAA5T,EAAmU,IAAnU,EAAyU,IAAzU,EAA+U,IAA/U,EAAqV,OAArV,EAA8V,IAA9V,EAAoW,IAApW,EAA0W,IAA1W,EAAgX,KAAhX,EAAuX,IAAvX,EAA6X,IAA7X,EAAmY,OAAnY,EAA4Y,OAA5Y,EAAqZ,IAArZ,EAA2Z,IAA3Z,EAAia,IAAja,EAAua,IAAva,EAA6a,IAA7a,EAAmb,OAAnb,EAA4b,IAA5b,EAAkc,IAAlc,EAAwc,IAAxc,EAA8c,IAA9c,EAAod,IAApd,EAA0d,IAA1d,EAAge,IAAhe,EAAse,OAAte,CAAR,CAAzB;AAEA,MAAMs8B,iBAAiB,GAAG,IAAIt8B,GAAJ,CAAQ,CAAC,MAAD,EAAS,KAAT,EAAgB,KAAhB,CAAR,CAA1B;AAEO,IAAIgzB,WAAM,GAAGM,SAAS,CAACC,QAAV,IAAsB,IAAnC;;AAEP,SAASgJ,aAAT,CAAuBC,YAAvB,EAAqC;AAEpC,MAAI;AACH,WAAO,OAAQ,CAAD,EAAIC,cAAJ,CAAmBD,YAAnB,CAAP,KAA4C,QAAnD;AACA,GAFD,CAEE,OAAOz/B,CAAP,EAAU;AACX,WAAO,KAAP;AACA;AACD;;AAED,SAAS2/B,eAAT,GAA2B;AAC1B,QAAMnK,YAAY,GAAG,OAAO7yB,QAAP,KAAoB,WAApB,IAAmCA,QAAQ,CAACC,eAAT,CAAyBsX,YAAzB,CAAsC,MAAtC,CAAxD;;AACA,MAAIsb,YAAY,IAAK8J,gBAAgB,CAAC30B,GAAjB,CAAqB6qB,YAArB,CAArB,EAA0D;AAEzD,UAAMS,MAAM,GAAGT,YAAY,CAACna,WAAb,GAA2B3F,OAA3B,CAAmC,GAAnC,EAAwC,GAAxC,CAAf;;AACA,QAAI8pB,aAAa,CAACvJ,MAAD,CAAjB,EAA2B;AAC1B5iB,yBAAmB,CAAC,MAAM;AAAEme,wCAAW,CAAC,qBAAD,EAAwByE,MAAxB,CAAX;AAA6C,OAAtD,CAAnB;AACA,aAAOA,MAAP;AACA;AACD;;AAED,SAAOzE,gCAAW,CAAC,qBAAD,CAAlB;AACA;;AAED,IAAIoO,QAAJ;AAEO,eAAeC,SAAf,GAA0C;AAChD,QAAMrK,YAAY,GAAG,MAAMmK,eAAe,EAA1C;AACA,MAAInK,YAAY,IAAI,CAAC+J,iBAAiB,CAAC50B,GAAlB,CAAsB6qB,YAAtB,CAArB,EAA0DS,WAAM,GAAGT,YAAT;;AAI1D,MACCsK,YAAY,CAACC,OAAb,CAAqBZ,eAArB,MAA0C3J,YAA1C,IACAsK,YAAY,CAACC,OAAb,CAAqBV,yBAArB,MAAoDW,UAFrD,EAGE;AACD,QAAI;AAEHJ,cAAQ,GAAG1H,IAAI,CAACG,KAAL,CAAWyH,YAAY,CAACC,OAAb,CAAqBX,mBAArB,KAA6C,EAAxD,CAAX;AACA;AACA,KAJD,CAIE,OAAOp/B,CAAP,EAAU;AACX6H,aAAO,CAACC,KAAR,CAAc,6BAAd,EAA6C9H,CAA7C;AACA;AACD;;AAKD4/B,UAAQ,GAAG,MAAMpO,gCAAW,CAAC,MAAD,EAASgE,YAAT,CAA5B;;AAEA,MAAI;AACHsK,gBAAY,CAACG,OAAb,CAAqBb,mBAArB,EAA0ClH,IAAI,CAACC,SAAL,CAAeyH,QAAf,CAA1C;AACAE,gBAAY,CAACG,OAAb,CAAqBd,eAArB,EAAsC3J,YAAtC;AACAsK,gBAAY,CAACG,OAAb,CAAqBZ,yBAArB,EAAgDW,UAAhD;AACA,GAJD,CAIE,OAAOhgC,CAAP,EAAU;AACX6H,WAAO,CAACC,KAAR,CAAc,kDAAd,EAAkE9H,CAAlE;AAEA8/B,gBAAY,CAACI,UAAb,CAAwB,2BAAxB;AACAJ,gBAAY,CAACI,UAAb,CAAwB,yBAAxB;AACA;AACD;AAGM,SAASC,IAAT,CAAcC,WAAd,EAAmC,GAAGC,aAAtC,EAAqF;AAC3F,MAAI,CAACD,WAAL,EAAkB,OAAO,EAAP;;AAElB,MAAI,CAACR,QAAL,EAAe;AAIb/3B,WAAO,CAACC,KAAR,CAAc,6BAAd,EAA6Cs4B,WAA7C;AACA,WAAOA,WAAP;AAED;;AAED,QAAMtd,OAAO,GAAG8c,QAAQ,CAACQ,WAAD,CAAxB;AAEA,MAAI,CAACtd,OAAL,EAAc,OAAOsd,WAAP;AAGd,MAAIC,aAAa,CAAC9jC,MAAd,KAAyB,CAA7B,EAAgC,OAAOumB,OAAP;AAIhC,SAAOA,OAAO,CAACpN,OAAR,CAAgB,iBAAhB,EAAmC,CAACqE,KAAD,EAAQkD,MAAR,KAAmBojB,aAAa,CAACpjB,MAAM,GAAG,CAAV,CAAnE,CAAP;AAKA,C;;;;;AClGD;AACA;AAEO,MAAMqjB,UAAU,GAAGh8B,kCAAO,CAAE8tB,GAAD,IAAiBZ,gCAAW,CAAC,YAAD,EAAe;AAAEY;AAAF,CAAf,CAA7B,CAA1B,C;;ACHP;AACA;AACA;;AAIA,SAASmO,WAAT,CAAqBC,KAArB,EAA4B;AAC3B,QAAM5I,WAAW,GAAG4I,KAAK,CAAC/+B,MAAN,CAAag/B,CAAC,IAAI,CAACA,CAAC,CAAC3oB,QAAF,CAAW,KAAX,CAAD,IAAsB2oB,CAAC,KAAK,YAA9C,CAApB;AACA,QAAM5I,OAAO,GAAG2I,KAAK,CAAC/+B,MAAN,CAAag/B,CAAC,IAAIA,CAAC,CAAC3oB,QAAF,CAAW,KAAX,KAAqB2oB,CAAC,KAAK,YAA7C,CAAhB;AACA,SAAO;AAAE7I,eAAF;AAAeC;AAAf,GAAP;AACA;;AAMM,MAAMltB,GAAG,GAAGrG,kCAAO,CACxBk8B,KAAD,IAAkBhP,gCAAW,CAAC,aAAD,EAAgB;AAAEwF,WAAS,EAAE,UAAb;AAAyB,KAAGuJ,WAAW,CAACC,KAAD;AAAvC,CAAhB,CADJ,EAEzBA,KAAK,IAAIA,KAAK,CAACzkB,IAAN,CAAW,GAAX,CAFgB,CAAnB;AAUA,MAAM+b,OAAO,GAAGnlB,oCAAK,CAAC,MAAO6tB,KAAP,IAAwB;AACpD,MAAI,MAAM71B,GAAG,CAAC61B,KAAD,CAAb,EAAsB;AAEtB,QAAM;AAAE5I,eAAF;AAAeC;AAAf,MAA2B0I,WAAW,CAACC,KAAD,CAA5C;AAEA,QAAME,OAAO,GAAG,MAAMlP,gCAAW,CAAC,aAAD,EAAgB;AAAEwF,aAAS,EAAE,SAAb;AAAwBY,eAAxB;AAAqCC;AAArC,GAAhB,CAAjC;;AACA,MAAI6I,OAAJ,EAAa;AACZ/1B,OAAG,CAACnG,KAAJ,CAAUiO,GAAV,CAAc+tB,KAAK,CAACzkB,IAAN,CAAW,GAAX,CAAd,EAA+B,IAA/B;AACA,GAFD,MAEO;AACN,UAAM,IAAItZ,KAAJ,CAAW,+BAA8B+9B,KAAK,CAACzkB,IAAN,CAAW,IAAX,CAAiB,EAA1D,CAAN;AACA;AACD,CAX2B,CAArB,C;;AC1BP;AACA;AAEO,eAAe4kB,cAAf,CAA8B;AACpChnB,QADoC;AAEpCgZ,UAFoC;AAGpCC,OAAK,GAAG,EAH4B;AAIpCgF;AAJoC,CAA9B,EAUHgJ,mBAVG,EAUuE;AAC7E,MAAIhJ,WAAW,CAACr7B,MAAZ,IAAsB,EAAC,MAAMskC,GAAA,CAAgBjJ,WAAhB,CAAP,CAA1B,EAA+D;AAC9D,UAAMkJ,OAAO,GAAG,0CAAhB;;AAEA,QAAI,SAA0C,EAAC,MAAMD,GAAA,CAAgB,CAACC,OAAD,CAAhB,CAAP,CAA9C,EAAiF;AAChFlJ,iBAAW,CAAC74B,IAAZ,CAAiB+hC,OAAjB;AACA;;AAED,UAAMF,mBAAmB,CAAChJ,WAAW,CAAC9f,QAAZ,CAAqBgpB,OAArB,IAAgC,oFAAhC,GAAuH,EAAxH,CAAzB;AAEA,UAAMD,OAAA,CAAoBjJ,WAApB,CAAN;AACA;;AAED,MAAImJ,WAAJ;;AACA,MAAI;AACHA,eAAW,GAAG,MAAMvP,gCAAW,CAAC,UAAD,EAAa;AAAE7X,YAAF;AAAUgZ,cAAV;AAAoBC,WAApB;AAA2BC,iBAAW,EAAE;AAAxC,KAAb,CAA/B;AACA,GAFD,CAEE,OAAO7yB,CAAP,EAAU;AACX6H,WAAO,CAACC,KAAR,CAAc,6BAAd,EAA6C9H,CAA7C;AAEA+gC,eAAW,GAAG,MAAMvP,gCAAW,CAAC,UAAD,EAAa;AAAE7X,YAAF;AAAUgZ,cAAV;AAAoBC,WAApB;AAA2BC,iBAAW,EAAE;AAAxC,KAAb,CAA/B;AACA;;AAED,QAAM4K,IAAI,GAAG,IAAI1K,GAAJ,CAAQgO,WAAR,EAAqBtD,IAArB,CAA0B3hB,KAA1B,CAAgC,CAAhC,CAAb;AACA,QAAMklB,KAAK,GAAG,IAAIlC,eAAJ,CAAoBrB,IAApB,EAA0BrrB,GAA1B,CAA8B,cAA9B,CAAd;AAEA,MAAI,CAAC4uB,KAAL,EAAY,MAAM,IAAIv+B,KAAJ,CAAU,6BAAV,CAAN;AAEZ,SAAOu+B,KAAP;AACA,C;;ACzCD;AAEA,MAAMC,SAAS,GAAG,IAAI1uB,GAAJ,EAAlB;AAEAmf,qBAAW,CAAC,WAAD,EAAc,CAAC;AAAE7O,MAAF;AAAQlW;AAAR,CAAD,KAAoB;AAC5C,QAAMnL,QAAQ,GAAGy/B,SAAS,CAAC7uB,GAAV,CAAcyQ,IAAd,CAAjB;AAEA,MAAIrhB,QAAJ,EAAc,OAAOA,QAAQ,CAAC,GAAGmL,IAAJ,CAAf;AACd,CAJU,CAAX;AASO,SAASu0B,SAAT,CAA4C1/B,QAA5C,EAAyD;AAAEqhB,MAAF;AAAQ6V,OAAK,GAAG,IAAhB;AAAsBjC,cAAY,GAAG;AAArC,CAAzD,EAAsK;AAC5K,MAAIwK,SAAS,CAACt2B,GAAV,CAAckY,IAAd,CAAJ,EAAyB;AACxB,UAAM,IAAIpgB,KAAJ,CAAW,gCAA+BogB,IAAK,WAA/C,CAAN;AACA;;AAEDoe,WAAS,CAACxuB,GAAV,CAAcoQ,IAAd,EAAoBrhB,QAApB;;AAEA,WAAS2/B,SAAT,CAAmB,GAAGx0B,IAAtB,EAA4B;AAC3BnL,YAAQ,CAAC,GAAGmL,IAAJ,CAAR;AACA;;AAED,QAAMgE,MAAW,GAAG,CAAC,GAAGhE,IAAJ,KAAa;AAChC6kB,oCAAW,CAAC,WAAD,EAAc;AAAE3O,UAAF;AAAQlW,UAAR;AAAc8pB;AAAd,KAAd,CAAX;;AAEA,QAAIiC,KAAJ,EAAW;AACVyI,eAAS,CAAC,GAAGx0B,IAAJ,CAAT;AACA;AACD,GAND;;AAQAgE,QAAM,CAAC+nB,KAAP,GAAeyI,SAAf;AAEA,SAAOxwB,MAAP;AACA,C;;ACnCD;AAEO,SAASywB,UAAT,CAAoBhP,GAApB,EAAiCiP,KAAe,GAAG,IAAnD,EAAyD;AAC/D,SAAOC,WAAW,CAACD,KAAD,EAAQjP,GAAR,CAAlB;AACA;AAIM,SAASkP,WAAT,CAAqBD,KAArB,EAAmC,GAAGvN,IAAtC,EAAsD;AAC5D,MAAIkF,UAAJ;AAEA,MAAI,OAAOqI,KAAP,KAAiB,QAArB,EAA+BA,KAAK,GAAG,CAAC,CAACA,KAAV;;AAE/B,UAAQA,KAAR;AACC,SAAK,OAAL;AACCrI,gBAAU,GAAG,CAAb;AACA;;AACD,SAAK,IAAL;AACA,SAAK,MAAL;AACCA,gBAAU,GAAGlF,IAAI,CAACv3B,MAAL,GAAc,CAA3B;AACA;;AACD,SAAK,KAAL;AACA,SAAK,MAAL;AACCy8B,gBAAU,GAAG,CAAC,CAAd;AACA;;AACD;AACC,YAAM,IAAIv2B,KAAJ,CAAW,4BAA2B4+B,KAAM,EAA5C,CAAN;AAbF;;AAiBAvN,MAAI,GAAGA,IAAI,CAACn0B,GAAL,CAASyyB,GAAG,IAAI,IAAIW,GAAJ,CAAQX,GAAR,EAAaxX,QAAQ,CAACuB,IAAtB,EAA4BA,IAA5C,CAAP;AAEA,SAAOqV,gCAAW,CAAC,aAAD,EAAgB;AAAEsC,QAAF;AAAQkF;AAAR,GAAhB,CAAlB;AACA,C;;ACjCD;AACA;AAEA,MAAMuI,cAAc,GAAG,EAAvB;AAEO,SAASC,OAAT,CAAiBhgC,QAAjB,EAAuC;AAC7C+/B,gBAAc,CAACxiC,IAAf,CAAoByC,QAApB;AACA;AAEDkwB,qBAAW,CAAC,iBAAD,EAAoB,MAAM;AAAE,OAAK,MAAMzf,EAAX,IAAiBsvB,cAAjB,EAAiCtvB,EAAE;AAAK,CAApE,CAAX;AAGA,MAAMc,MAAM,GAAG/C,4CAAa,CAAC3U,KAAK,IAAIm2B,gCAAW,CAAC,YAAD,EAAen2B,KAAf,CAArB,CAA5B;AAEO,SAAS67B,IAAT,CAAcD,KAAe,GAAG,KAAhC,EAAuC;AAC7C,SAAOlkB,MAAM,CAAC;AAAEikB,aAAS,EAAE,MAAb;AAAqBC;AAArB,GAAD,CAAb;AACA;AAEM,SAASS,IAAT,GAAgB;AACtB,SAAO3kB,MAAM,CAAC;AAAEikB,aAAS,EAAE;AAAb,GAAD,CAAb;AACA,C;;ACpBD;AAEO,SAAS5kB,GAAT,CAAaxW,GAAb,EAA+C;AACrD,SAAO41B,gCAAW,CAAC,SAAD,EAAY,CAAC,KAAD,EAAQ51B,GAAR,CAAZ,CAAlB;AACA;AAEM,SAAS6W,WAAT,CAAa7W,GAAb,EAA0BP,KAA1B,EAAwC;AAC9C,SAAOm2B,gCAAW,CAAC,SAAD,EAAY,CAAC,KAAD,EAAQ51B,GAAR,EAAaP,KAAb,CAAZ,CAAlB;AACA;AAEM,SAAS6iC,eAAT,CAAiBtiC,GAAjB,EAA8B;AACpC,SAAO41B,gCAAW,CAAC,SAAD,EAAY,CAAC,QAAD,EAAW51B,GAAX,CAAZ,CAAlB;AACA;AACD;AAEO,SAAS+O,WAAT,CAAa/O,GAAb,EAA4C;AAClD,SAAO41B,gCAAW,CAAC,SAAD,EAAY,CAAC,KAAD,EAAQ51B,GAAR,CAAZ,CAAlB;AACA;AAEM,SAAS6I,aAAT,GAAiB;AACvB,SAAO+sB,gCAAW,CAAC,SAAD,EAAY,CAAC,OAAD,CAAZ,CAAlB;AACA,C;;;;;;;;;;;ACpBD,GAAIiQ,aAAY,CAAGxb,mCAAO,CAACnrB,MAAM,CAAC4mC,cAAR,CAAwB5mC,MAAxB,CAA1B,CAEe2mC,8DAAf,E;;;;;;;;;;;;;;ACoCA,QAAS7X,UAAT,CAAmBjuB,MAAnB,CAA2BqS,QAA3B,CAAqCmJ,WAArC,CAAkD,CAChD,GAAIiS,MAAK,CAAGluB,kCAAO,CAACS,MAAD,CAAnB,CACIgmC,SAAS,CAAGvY,KAAK,EAAIlK,mCAAQ,CAACvjB,MAAD,CAAjB,EAA6BgqB,uCAAY,CAAChqB,MAAD,CADzD,CAGAqS,QAAQ,CAAGzC,wCAAY,CAACyC,QAAD,CAAW,CAAX,CAAvB,CACA,GAAImJ,WAAW,EAAI,IAAnB,CAAyB,CACvB,GAAI4N,KAAI,CAAGppB,MAAM,EAAIA,MAAM,CAACuoB,WAA5B,CACA,GAAIyd,SAAJ,CAAe,CACbxqB,WAAW,CAAGiS,KAAK,CAAG,GAAIrE,KAAJ,EAAH,CAAc,EAAjC,CACD,CAFD,IAGK,IAAI3pB,mCAAQ,CAACO,MAAD,CAAZ,CAAsB,CACzBwb,WAAW,CAAGtB,qCAAU,CAACkP,IAAD,CAAV,CAAmBlH,sCAAU,CAAC4jB,aAAY,CAAC9lC,MAAD,CAAb,CAA7B,CAAsD,EAApE,CACD,CAFI,IAGA,CACHwb,WAAW,CAAG,EAAd,CACD,CACF,CACD,CAACwqB,SAAS,CAAGtX,6BAAH,CAAe7S,8BAAzB,EAAqC7b,MAArC,CAA6C,SAASN,KAAT,CAAgBiB,KAAhB,CAAuBX,MAAvB,CAA+B,CAC1E,MAAOqS,SAAQ,CAACmJ,WAAD,CAAc9b,KAAd,CAAqBiB,KAArB,CAA4BX,MAA5B,CAAf,CACD,CAFD,EAGA,MAAOwb,YAAP,CACD,CAEcyS,iEAAf,E;;ACxDO,SAASgY,UAAT,CAAoB5/B,MAApB,EAAiD5D,MAAjD,EAAmG;AACzG,OAAK,MAAMxC,GAAX,IAAkBd,MAAM,CAACqZ,IAAP,CAAY/V,MAAZ,CAAlB,EAAuC;AACtC,QACC4D,MAAM,CAACpG,GAAD,CAAN,IAAewC,MAAM,CAACxC,GAAD,CAArB,IACA,OAAOoG,MAAM,CAACpG,GAAD,CAAb,KAAuB,QADvB,IACmC,OAAOwC,MAAM,CAACxC,GAAD,CAAb,KAAuB,QAD1D,IAEA,CAACT,KAAK,CAACD,OAAN,CAAckD,MAAM,CAACxC,GAAD,CAApB,CAFD,IAE+B,CAACT,KAAK,CAACD,OAAN,CAAc8G,MAAM,CAACpG,GAAD,CAApB,CAHjC,EAIE;AACDgmC,gBAAU,CAAC5/B,MAAM,CAACpG,GAAD,CAAP,EAAcwC,MAAM,CAACxC,GAAD,CAApB,CAAV;AACA,KAND,MAMO;AACNoG,YAAM,CAACpG,GAAD,CAAN,GAAcwC,MAAM,CAACxC,GAAD,CAApB;AACA;AACD;;AACD,SAAOoG,MAAP;AACA,C;;ACnBD;AACA;AACA;AACA;AACA;;AAEA,MAAMu2B,WAAK,GAAG5G,YAAY,CAAC,CAAC6G,KAAD,EAAQh3B,QAAR,KAAqBowB,MAAM,CAAC6G,OAAP,CAAeC,KAAf,CAAqBjmB,GAArB,CAAyB+lB,KAAzB,EAAgCh3B,QAAhC,CAAtB,CAA1B;;AACA,MAAMm3B,sBAAI,GAAG,CAAC/8B,GAAD,EAAMP,KAAN,KAAgBk9B,WAAK,CAAC;AAAE,GAAC38B,GAAD,GAAOP;AAAT,CAAD,CAAlC;;AACA,MAAMu9B,WAAK,GAAGjH,YAAY,CAAC,CAACxd,IAAD,EAAO3S,QAAP,KAAoBowB,MAAM,CAAC6G,OAAP,CAAeC,KAAf,CAAqBtmB,GAArB,CAAyB+B,IAAzB,EAA+B3S,QAA/B,CAArB,CAA1B;;AACA,MAAMq3B,sBAAI,GAAG,OAAOj9B,GAAP,EAAY0Y,YAAY,GAAG,IAA3B,KAAoC,CAAC,MAAMskB,WAAK,CAAC;AAAE,GAACh9B,GAAD,GAAO0Y;AAAT,CAAD,CAAZ,EAAuC1Y,GAAvC,CAAjD;;AACA,MAAMimC,OAAO,GAAGlQ,YAAY,CAAC,CAACxd,IAAD,EAAO3S,QAAP,KAAoBowB,MAAM,CAAC6G,OAAP,CAAeC,KAAf,CAAqBtzB,MAArB,CAA4B+O,IAA5B,EAAkC3S,QAAlC,CAArB,CAA5B;;AACA,MAAMsgC,MAAM,GAAGnQ,YAAY,CAACnwB,QAAQ,IAAIowB,MAAM,CAAC6G,OAAP,CAAeC,KAAf,CAAqBj0B,KAArB,CAA2BjD,QAA3B,CAAb,CAA3B;;AAEA,MAAMugC,UAAU,GAAG1vB,yCAAU,CAAC,CAAIzW,GAAJ,EAAiBqW,EAAjB,KAAoCA,EAAE,EAAvC,CAA7B;AAEO,SAASG,kCAAT,CAAaxW,GAAb,EAA+C;AACrD,SAAOmmC,UAAU,CAACnmC,GAAD,EAAM,MAAMi9B,sBAAI,CAACj9B,GAAD,EAAM,IAAN,CAAhB,CAAjB;AACA;AAEM,SAASomC,MAAT,GAAgD;AACtD,SAAOpJ,WAAK,CAAC,IAAD,CAAZ;AACA;AAEM,SAASqJ,WAAT,CAAgC9tB,IAAhC,EAAyE;AAC/E,QAAM+tB,QAAQ,GAAG,EAAjB;;AACA,OAAK,MAAMnS,CAAX,IAAgB5b,IAAhB,EAAsB;AACrB+tB,YAAQ,CAACnS,CAAD,CAAR,GAAc,IAAd;AACA;;AACD,SAAO6I,WAAK,CAACsJ,QAAD,CAAZ;AACA;AAEM,SAASzvB,kCAAT,CAAa7W,GAAb,EAA0BP,KAA1B,EAAuD;AAC7D,SAAO0mC,UAAU,CAACnmC,GAAD,EAAM,MAAM+8B,sBAAI,CAAC/8B,GAAD,EAAMP,KAAN,CAAhB,CAAjB;AACA;AAEM,SAAS8mC,WAAT,CAAqBC,QAArB,EAAoE;AAC1E,SAAO7J,WAAK,CAAC6J,QAAD,CAAZ;AACA;;AAED,SAASC,aAAT,CAAuBzmC,GAAvB,EAAoC0Y,YAApC,EAAyDwkB,QAAzD,EAA0Ep8B,QAA1E,EAA6G;AAG5G,SAAO80B,gCAAW,CAAC,aAAD,EAAgB,CAAC51B,GAAD,EAAM0Y,YAAN,EAAoBwkB,QAApB,EAA8Bp8B,QAA9B,CAAhB,CAAlB;AACA;;AAKD,SAAS4lC,KAAT,CAAe1mC,GAAf,EAA4BP,KAA5B,EAAuE;AACtE,SAAO0mC,UAAU,CAACnmC,GAAD,EAAM,YAAY;AAClC,UAAM2mC,QAAQ,GAAGX,UAAU,CAAC,OAAM/I,sBAAI,CAACj9B,GAAD,CAAV,KAAmB,EAApB,EAAwBP,KAAxB,CAA3B;AACA,WAAOs9B,sBAAI,CAAC/8B,GAAD,EAAM2mC,QAAN,CAAX;AACA,GAHgB,CAAjB;AAIA;;AAKD,SAASC,YAAT,CAAsB5mC,GAAtB,EAAmCP,KAAnC,EAA8E;AAC7E,SAAO0mC,UAAU,CAACnmC,GAAD,EAAM,YAAY;AAClC,UAAM2mC,QAAQ,GAAGznC,MAAM,CAAC6iC,MAAP,CAAc,OAAM9E,sBAAI,CAACj9B,GAAD,CAAV,KAAmB,EAAjC,EAAqCP,KAArC,CAAjB;AACA,WAAOs9B,sBAAI,CAAC/8B,GAAD,EAAM2mC,QAAN,CAAX;AACA,GAHgB,CAAjB;AAIA;;AAOD,SAASE,WAAT,CAAqB7mC,GAArB,EAAkCiB,KAAlC,EAAoE;AACnE,SAAOklC,UAAU,CAACnmC,GAAD,EAAM,YAAY;AAClC,UAAM8mC,MAAM,GAAG,MAAM7J,sBAAI,CAACj9B,GAAD,CAAzB;AACA,QAAI,CAAC8mC,MAAL,EAAa;;AACb,SAAK,MAAMvmC,IAAX,IAAmBU,KAAnB,EAA0B;AACzBV,UAAI,CAACgN,MAAL,CAAY,CAAC1F,GAAD,EAAM7H,GAAN,EAAWiT,CAAX,EAAc;AAAEtS;AAAF,OAAd,KAA6B;AACxC,YAAI,CAACkH,GAAL,EAAU;AACV,YAAIoL,CAAC,GAAGtS,MAAM,GAAG,CAAjB,EAAoB,OAAOkH,GAAG,CAAC7H,GAAD,CAAV;AACpB,eAAO6H,GAAG,CAAC7H,GAAD,CAAV;AACA,OAJD,EAIG8mC,MAJH;AAKA;;AACD,WAAO/J,sBAAI,CAAC/8B,GAAD,EAAM8mC,MAAN,CAAX;AACA,GAXgB,CAAjB;AAYA;;AAED,SAASxE,eAAT,CAAiBtiC,GAAjB,EAA6C;AAC5C,SAAOmmC,UAAU,CAACnmC,GAAD,EAAM,MAAMimC,OAAO,CAACjmC,GAAD,CAAnB,CAAjB;AACA;;AACD;AAEO,SAAS+mC,cAAT,CAAwBxuB,IAAxB,EAAuD;AAC7D,SAAO0tB,OAAO,CAAC1tB,IAAD,CAAd;AACA;AAEM,SAASxJ,WAAT,CAAa/O,GAAb,EAA4C;AAClD,SAAOmmC,UAAU,CAACnmC,GAAD,EAAM,YAAY;AAClC,UAAMgnC,QAAQ,GAAGz8B,IAAI,CAAC08B,MAAL,EAAjB;AACA,WAAO,CAAC,MAAMhK,sBAAI,CAACj9B,GAAD,EAAMgnC,QAAN,CAAX,MAAgCA,QAAvC;AACA,GAHgB,CAAjB;AAIA;AAEM,eAAezuB,YAAf,GAAyC;AAC/C,SAAOrZ,MAAM,CAACqZ,IAAP,CAAY,MAAMykB,WAAK,CAAC,IAAD,CAAvB,CAAP;AACA;AAEM,SAASn0B,aAAT,GAAgC;AACtC,SAAOq9B,MAAM,EAAb;AACA;;AAED,MAAMgB,OAAN,CAAiB;AAIhB5e,aAAW,CAACtoB,GAAD,EAAmCmnC,GAAnC,EAA2C;AAAA,SAHtDC,IAGsD;AAAA,SAFtDC,QAEsD;AACrD,SAAKD,IAAL,GAAYpnC,GAAZ;AACA,SAAKqnC,QAAL,GAAgBF,GAAhB;AACA;;AAED3wB,KAAG,GAAe;AACjB,WAAOA,kCAAG,CAAC,KAAK4wB,IAAL,EAAD,CAAH,CAAiBxgC,IAAjB,CAAsBoN,GAAG,IAAKA,GAAG,KAAK,IAAR,GAAe,KAAKqzB,QAApB,GAA+BrzB,GAA7D,CAAP;AACA;;AAED6C,KAAG,CAACpX,KAAD,EAA0B;AAC5B,WAAOoX,kCAAG,CAAC,KAAKuwB,IAAL,EAAD,EAAc3nC,KAAd,CAAV;AACA;;AAEDinC,OAAK,CAACjnC,KAAD,EAAkC;AACtC,WAAOinC,KAAK,CAAC,KAAKU,IAAL,EAAD,EAAe3nC,KAAf,CAAZ;AACA;;AAEDgnC,eAAa,CAACvJ,QAAD,EAAcp8B,QAAd,EAA6C;AACzD,WAAO2lC,aAAa,CAAC,KAAKW,IAAL,EAAD,EAAc,KAAKC,QAAnB,EAA6BnK,QAA7B,EAAuCp8B,QAAvC,CAApB;AACA;;AAEDwmC,YAAU,CAAC,GAAG/mC,IAAJ,EAAmC;AAC5C,WAAOsmC,WAAW,CAAC,KAAKO,IAAL,EAAD,EAAc,CAAC7mC,IAAD,CAAd,CAAlB;AACA;;AAEDuW,QAAM,GAAkB;AACvB,WAAOwrB,eAAO,CAAC,KAAK8E,IAAL,EAAD,CAAd;AACA;;AAEDr4B,KAAG,GAAqB;AACvB,WAAOA,WAAG,CAAC,KAAKq4B,IAAL,EAAD,CAAV;AACA;;AAnCe;;AAsCV,SAASG,IAAT,CAAiBvnC,GAAjB,EAAwD0Y,YAAxD,EAAqF;AAC3F,QAAM8uB,YAAY,GAAG,OAAOxnC,GAAP,KAAe,QAAf,GAA0B,MAAMA,GAAhC,GAAsC2K,+BAAI,CAAC3K,GAAD,CAA/D;AAEA,SAAO,IAAIknC,OAAJ,CAAYM,YAAZ,EAA0B9uB,YAA1B,CAAP;AACA;;AAED,MAAM+uB,qBAAN,CAAuB;AAMtBnf,aAAW,CAACof,MAAD,EAAiBP,GAAjB,EAA+BQ,SAA/B,EAAmEC,QAAnE,EAAsF;AAAA,SALjGC,OAKiG;AAAA,SAJjGC,UAIiG;AAAA,SAHjGT,QAGiG;AAAA,SAFjGpK,IAEiG;AAChG,SAAK4K,OAAL,GAAeH,MAAf;AACA,SAAKL,QAAL,GAAgBF,GAAhB;AACA,SAAKW,UAAL,GAAkBH,SAAlB;;AAEA,QAAIC,QAAJ,EAAc;AACb,WAAK3K,IAAL,GAAYtoB,oCAAK,CAAC,MAAM4D,IAAN,IAAc;AAC/B,cAAMmH,CAAC,GAAG,MAAM,KAAKqoB,mBAAL,CAAyBxvB,IAAzB,CAAhB;AACA,eAAOA,IAAI,CAACxU,GAAL,CAAS/D,GAAG,IAAI0f,CAAC,CAAC,KAAKooB,UAAL,CAAgB9nC,GAAhB,CAAD,CAAjB,CAAP;AACA,OAHgB,EAGd;AAAE4U,YAAI,EAAEigB,QAAR;AAAkBhgB,aAAK,EAAE;AAAzB,OAHc,CAAjB;AAIA,KALD,MAKO;AACN,WAAKooB,IAAL,GAAYj9B,GAAG,IAAIwW,kCAAG,CAAC,KAAKwxB,OAAL,CAAahoC,GAAb,CAAD,CAAtB;AACA;AACD;;AAEDgoC,SAAO,CAAChoC,GAAD,EAAsB;AAC5B,WAAO,KAAK6nC,OAAL,GAAe,KAAKC,UAAL,CAAgB9nC,GAAhB,CAAtB;AACA;;AAEDwW,KAAG,CAACxW,GAAD,EAA0B;AAC5B,WAAO,KAAKi9B,IAAL,CAAUj9B,GAAV,EAAe4G,IAAf,CAAoBoN,GAAG,IAAKA,GAAG,KAAK,IAAR,GAAe,KAAKqzB,QAAL,EAAf,GAAiCrzB,GAA7D,CAAP;AACA;;AAEDi0B,aAAW,CAACjoC,GAAD,EAAiC;AAC3C,WAAO,KAAKi9B,IAAL,CAAUj9B,GAAV,CAAP;AACA;;AAEW,QAANomC,MAAM,GAA6B;AACxC,UAAM8B,UAAU,GAAG,MAAM9B,MAAM,EAA/B;AACA,WAAOpY,mBAAS,CAACka,UAAD,EAAa,CAACC,GAAD,EAAMzoB,CAAN,EAASyU,CAAT,KAAe;AAC3C,UAAIA,CAAC,CAACzT,UAAF,CAAa,KAAKmnB,OAAlB,CAAJ,EAAgC;AAC/BM,WAAG,CAAChU,CAAC,CAACjU,KAAF,CAAQ,KAAK2nB,OAAL,CAAalnC,MAArB,CAAD,CAAH,GAAoC+e,CAApC;AACA;AACD,KAJe,EAIb,EAJa,CAAhB;AAKA;;AAEgB,QAAX2mB,WAAW,CAAC9tB,IAAD,EAA2C;AAC3D,UAAM6vB,SAAS,GAAG,MAAM/B,WAAW,CAAC9tB,IAAI,CAACxU,GAAL,CAASowB,CAAC,IAAI,KAAK6T,OAAL,CAAa7T,CAAb,CAAd,CAAD,CAAnC;AACA,WAAOnG,mBAAS,CAACoa,SAAD,EAAY,CAACD,GAAD,EAAMzoB,CAAN,EAASyU,CAAT,KAAe;AAC1CgU,SAAG,CAAChU,CAAC,CAACjU,KAAF,CAAQ,KAAK2nB,OAAL,CAAalnC,MAArB,CAAD,CAAH,GAAqC+e,CAAC,KAAK,IAAN,GAAa,KAAK2nB,QAAL,EAAb,GAA+B3nB,CAApE;AACA,KAFe,EAEb,EAFa,CAAhB;AAGA;;AAEwB,QAAnBqoB,mBAAmB,CAACxvB,IAAD,EAAkD;AAC1E,UAAM6vB,SAAS,GAAG,MAAM/B,WAAW,CAAC9tB,IAAI,CAACxU,GAAL,CAASowB,CAAC,IAAI,KAAK6T,OAAL,CAAa7T,CAAb,CAAd,CAAD,CAAnC;AACA,WAAOnG,mBAAS,CAACoa,SAAD,EAAY,CAACD,GAAD,EAAMzoB,CAAN,EAASyU,CAAT,KAAe;AAC1CgU,SAAG,CAAChU,CAAC,CAACjU,KAAF,CAAQ,KAAK2nB,OAAL,CAAalnC,MAArB,CAAD,CAAH,GAAoC+e,CAApC;AACA,KAFe,EAEb,EAFa,CAAhB;AAGA;;AAED7I,KAAG,CAAC7W,GAAD,EAAcP,KAAd,EAAuC;AACzC,WAAOoX,kCAAG,CAAC,KAAKmxB,OAAL,CAAahoC,GAAb,CAAD,EAAoBP,KAApB,CAAV;AACA;;AAEDinC,OAAK,CAAC1mC,GAAD,EAAcP,KAAd,EAA+C;AACnD,WAAOinC,KAAK,CAAC,KAAKsB,OAAL,CAAahoC,GAAb,CAAD,EAAqBP,KAArB,CAAZ;AACA;;AAED6nC,YAAU,CAACtnC,GAAD,EAAc,GAAGO,IAAjB,EAAgD;AACzD,WAAOsmC,WAAW,CAAC,KAAKmB,OAAL,CAAahoC,GAAb,CAAD,EAAoB,CAACO,IAAD,CAApB,CAAlB;AACA;;AAEDuW,QAAM,CAAC9W,GAAD,EAA6B;AAClC,WAAOsiC,eAAO,CAAC,KAAK0F,OAAL,CAAahoC,GAAb,CAAD,CAAd;AACA;;AAED+mC,gBAAc,CAACxuB,IAAD,EAAgC;AAC7C,WAAOwuB,cAAc,CAACxuB,IAAI,CAACxU,GAAL,CAASowB,CAAC,IAAI,KAAK6T,OAAL,CAAa7T,CAAb,CAAd,CAAD,CAArB;AACA;;AAEDplB,KAAG,CAAC/O,GAAD,EAAgC;AAClC,WAAO+O,WAAG,CAAC,KAAKi5B,OAAL,CAAahoC,GAAb,CAAD,CAAV;AACA;;AA9EqB;;AAiFhB,SAASqoC,UAAT,CAAuBX,MAAvB,EAAuChvB,YAAvC,EAA8D4vB,oBAA6C,GAAG/xB,CAAC,IAAIA,CAAnH,EAAsHqxB,QAAiB,GAAG,KAA1I,EAAmK;AACzK,SAAO,IAAIH,qBAAJ,CAAkBC,MAAlB,EAA0BhvB,YAA1B,EAAwC4vB,oBAAxC,EAA8DV,QAA9D,CAAP;AACA;;AAED,MAAMW,mBAAN,CAAqB;AAIpBjgB,aAAW,CAACkgB,OAAD,EAAkBrB,GAAlB,EAAgC;AAAA,SAH3CsB,QAG2C;AAAA,SAF3CpB,QAE2C;AAC1C,SAAKoB,QAAL,GAAgBD,OAAhB;AACA,SAAKnB,QAAL,GAAgBF,GAAhB;AACA;;AAED3wB,KAAG,CAACxW,GAAD,EAA0B;AAC5B,WAAOwW,kCAAG,CAAC,KAAKiyB,QAAN,CAAH,CAAmB7hC,IAAnB,CAAwBoN,GAAG,IAChCA,GAAG,KAAK,IAAR,IAAgBA,GAAG,CAAChU,GAAD,CAAH,KAAaI,SAA9B,GAA2C,KAAKinC,QAAL,EAA3C,GAA6DrzB,GAAG,CAAChU,GAAD,CAD1D,CAAP;AAGA;;AAEDioC,aAAW,CAACjoC,GAAD,EAAiC;AAC3C,WAAOwW,kCAAG,CAAC,KAAKiyB,QAAN,CAAH,CAAmB7hC,IAAnB,CAAwBoN,GAAG,IAChCA,GAAG,KAAK,IAAR,IAAgBA,GAAG,CAAChU,GAAD,CAAH,KAAaI,SAA9B,GAA2C,IAA3C,GAAkD4T,GAAG,CAAChU,GAAD,CAD/C,CAAP;AAGA;;AAEDomC,QAAM,GAA6B;AAClC,WAAO5vB,kCAAG,CAAC,KAAKiyB,QAAN,CAAH,CAAmB7hC,IAAnB,CAAwBoN,GAAG,IAAKA,GAAG,KAAK,IAAR,GAAe,EAAf,GAAoBA,GAApD,CAAP;AACA;;AAEgB,QAAXqyB,WAAW,CAAC9tB,IAAD,EAA2C;AAC3D,UAAM6vB,SAAS,GAAG,CAAC,MAAM5xB,kCAAG,CAAC,KAAKiyB,QAAN,CAAV,KAA8B,EAAhD;AACA,WAAOza,mBAAS,CAACzV,IAAD,EAAO,CAAC4vB,GAAD,EAAMnoC,GAAN,KAAc;AACpCmoC,SAAG,CAACnoC,GAAD,CAAH,GAAWooC,SAAS,CAACpoC,GAAD,CAAT,KAAmBI,SAAnB,GAA+B,KAAKinC,QAAL,EAA/B,GAAiDe,SAAS,CAACpoC,GAAD,CAArE;AACA,KAFe,EAEb,EAFa,CAAhB;AAGA;;AAEwB,QAAnB+nC,mBAAmB,CAACxvB,IAAD,EAAkD;AAC1E,UAAM6vB,SAAS,GAAG,CAAC,MAAM5xB,kCAAG,CAAC,KAAKiyB,QAAN,CAAV,KAA8B,EAAhD;AACA,WAAOza,mBAAS,CAACzV,IAAD,EAAO,CAAC4vB,GAAD,EAAMnoC,GAAN,KAAc;AACpCmoC,SAAG,CAACnoC,GAAD,CAAH,GAAWooC,SAAS,CAACpoC,GAAD,CAAT,KAAmBI,SAAnB,GAA+B,IAA/B,GAAsCgoC,SAAS,CAACpoC,GAAD,CAA1D;AACA,KAFe,EAEb,EAFa,CAAhB;AAGA;;AAED6W,KAAG,CAAC7W,GAAD,EAAcP,KAAd,EAAuC;AACzC,WAAOmnC,YAAY,CAAC,KAAK6B,QAAN,EAAgB;AAAE,OAACzoC,GAAD,GAAOP;AAAT,KAAhB,CAAnB;AACA;;AAEDinC,OAAK,CAAC1mC,GAAD,EAAcP,KAAd,EAA+C;AACnD,WAAOinC,KAAK,CAAC,KAAK+B,QAAN,EAAgB;AAAE,OAACzoC,GAAD,GAAOP;AAAT,KAAhB,CAAZ;AACA;;AAED6nC,YAAU,CAACtnC,GAAD,EAAc,GAAGO,IAAjB,EAAgD;AACzD,WAAOsmC,WAAW,CAAC,KAAK4B,QAAN,EAAgB,CAAC,CAACzoC,GAAD,EAAM,GAAGO,IAAT,CAAD,CAAhB,CAAlB;AACA;;AAEDuW,QAAM,CAAC9W,GAAD,EAA6B;AAClC,WAAO6mC,WAAW,CAAC,KAAK4B,QAAN,EAAgB,CAAC,CAACzoC,GAAD,CAAD,CAAhB,CAAlB;AACA;;AAED+mC,gBAAc,CAACxuB,IAAD,EAAgC;AAC7C,WAAOsuB,WAAW,CAAC,KAAK4B,QAAN,EAAgBlwB,IAAI,CAACxU,GAAL,CAASowB,CAAC,IAAI,CAACA,CAAD,CAAd,CAAhB,CAAlB;AACA;;AAEDplB,KAAG,CAAC/O,GAAD,EAAgC;AAClC,WAAOwW,kCAAG,CAAC,KAAKiyB,QAAN,CAAH,CAAmB7hC,IAAnB,CAAwBoN,GAAG,IAAKA,GAAG,KAAK,IAAR,IAAgBA,GAAG,CAAChU,GAAD,CAAH,KAAaI,SAA7D,CAAP;AACA;;AAEDyI,OAAK,GAAkB;AACtB,WAAOy5B,eAAO,CAAC,KAAKmG,QAAN,CAAd;AACA;;AAjEmB;;AAoEd,SAASC,QAAT,CAAqBF,OAArB,EAAsC9vB,YAAtC,EAA6E;AACnF,SAAO,IAAI6vB,mBAAJ,CAAgBC,OAAhB,EAAyB9vB,YAAzB,CAAP;AACA,C;;ACpTD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACVA;AAEO,MAAMmkB,OAAO,GAAG8L,kCAAO,CAACD,QAAR,CAAiB,iBAAjB,EACtB,MAAe;AAAE,QAAM,IAAI7hC,KAAJ,CAAU,uDAAV,CAAN;AAA2E,CADtE,CAAhB;AAGA,SAAS+hC,UAAT,CAAoBC,QAApB,EAAsCC,MAAtC,EAAuD;AAC7D,SAAOjM,OAAO,CAAChmB,GAAR,CAAYgyB,QAAZ,EAAsBC,MAAtB,CAAP;AACA,C;;ACCM,MAAMC,MAAN,CAAoH;AAoC1HzgB,aAAW,CAAC0gB,QAAD,EAAmB;AAAA,SAnC9BA,QAmC8B;AAAA,SAjC9BC,UAiC8B;AAAA,SAhC9BC,QAgC8B,GAhCX,EAgCW;AAAA,SA/B9BC,WA+B8B,GA/BR,EA+BQ;AAAA,SA9B9BC,cA8B8B,GA9BJ,KA8BI;AAAA,SA7B9BC,QA6B8B,GA7BJ,EA6BI;AAAA,SA5B9BC,SA4B8B,GA5BT,KA4BS;AAAA,SA3B9Br5B,OA2B8B,GA3Bd,EA2Bc;AAAA,SA1B9Bs5B,OA0B8B,GA1BgB,EA0BhB;AAAA,SAzB9BC,OAyB8B,GAzBgB,EAyBhB;;AAAA,SAxB9BC,SAwB8B,GAxBH,MAAM,IAwBH;;AAAA,SAvB9BC,QAuB8B,GAvBU,MAAM,CAAE,CAuBlB;;AAAA,SAtB9BC,cAsB8B,GAtBmB,MAAM,CAAE,CAsB3B;;AAAA,SApB9BC,MAoB8B,GApBZ,KAoBY;AAAA,SAnB9BC,iBAmB8B,GAnBD,KAmBC;AAAA,SAlB9BC,aAkB8B,GAlBL,KAkBK;AAAA,SAjB9BlM,IAiB8B,GAjBf,CAiBe;AAAA,SAd9BmM,MAc8B,GAdgB3pC,SAchB;AAAA,SAb9B4pC,UAa8B,GAboB5pC,SAapB;AAAA,SAZ9B4rB,YAY8B,GAZsB5rB,SAYtB;AAAA,SAX9B6pC,EAW8B,GAXY7pC,SAWZ;AAAA,SAV9B8pC,SAU8B,GAVmB9pC,SAUnB;AAAA,SAT9BqV,MAS8B,GATgBrV,SAShB;AAAA,SAP9B47B,WAO8B,GAJzB;AACJmO,yBAAmB,EAAE;AADjB,KAIyB;AAE7B,SAAKnB,QAAL,GAAgBA,QAAhB;AACA,SAAKC,UAAL,GAAkBD,QAAlB;AACA;;AAxCyH;AA6CpH,SAASoB,WAAT,CAAqBC,QAArB,EAAuD;AAC7D,MAAI,CAACA,QAAL,EAAe;AACd,UAAM,IAAI15B,SAAJ,CAAe,mDAAkD05B,QAAS,EAA1E,CAAN;AACA;;AAED,MAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAkC;AAEjC,WAAOA,QAAP;AACA,GAHD,MAGO,IAAIA,QAAQ,CAACnnB,MAAb,EAAqB;AAE3B,WAAOmnB,QAAQ,CAACnnB,MAAT,CAAgB8lB,QAAvB;AACA,GAHM,MAGA;AAEN,WAAOqB,QAAQ,CAACrB,QAAhB;AACA;AACD,C;;ACpED;AACA;AAIO,MAAMnM,eAAO,GAAG8L,kCAAO,CAACN,UAAR,CAAmB,aAAnB,EAAkC,OAA0B,EAA1B,CAAlC,EAAiEjoC,SAAjE,OAAhB;AAEA,MAAMkqC,OAAO,GAAIzB,QAAD,IAAsBhM,eAAO,CAACrmB,GAAR,CAAYqyB,QAAZ,CAAtC;AAEA,eAAeryB,mBAAf,CAAmB6zB,QAAnB,EAA6CE,SAA7C,EAAgE;AACtE,QAAMt6B,OAAO,GAAG,MAAM4sB,eAAO,CAACrmB,GAAR,CAAY4zB,WAAW,CAACC,QAAD,CAAvB,CAAtB;AACA,SAAOp6B,OAAO,IAAIA,OAAO,CAACs6B,SAAD,CAAzB;AACA;AAEM,eAAenwB,QAAf,CAAwBiwB,QAAxB,EAAkDE,SAAlD,EAAqE;AAC3E,QAAMC,MAAM,GAAG,MAAMh0B,mBAAG,CAAC4zB,WAAW,CAACC,QAAD,CAAZ,EAAwBE,SAAxB,CAAxB;AACA,SAAOC,MAAM,IAAIA,MAAM,CAAC/qC,KAAxB;AACA;AAEM,SAASoX,mBAAT,CAAawzB,QAAb,EAAuCE,SAAvC,EAA0D9qC,KAA1D,EAAwE;AAC9E,MAAK,SAAD,CAAYya,IAAZ,CAAiBqwB,SAAjB,CAAJ,EAAiC;AAChCA,aAAS,GAAGA,SAAS,CAACzwB,OAAV,CAAkB,SAAlB,EAA6B,EAA7B,CAAZ;AACA;;AAED,SAAO+iB,eAAO,CAAC6J,KAAR,CAAc0D,WAAW,CAACC,QAAD,CAAzB,EAAqC;AAAE,KAACE,SAAD,GAAa;AAAE9qC;AAAF;AAAf,GAArC,CAAP;AACA,C;;;;;ACGD,QAASgrC,QAAT,CAAiBhrC,KAAjB,CAAwBoiB,KAAxB,CAA+B,CAC7B,MAAOzJ,wCAAW,CAAC3Y,KAAD,CAAQoiB,KAAR,CAAlB,CACD,CAEc4oB,6DAAf,E;;AChCA;AACA;AACA;AAEO,eAAeC,YAAf,CAA4B1B,QAA5B,EAA8C2B,UAA9C,EAAkEC,kBAAlE,EAA6FC,eAA7F,EAAqH;AAC3H,MAAI;AACH,UAAML,MAAM,GAAG,MAAMM,mBAAA,CAAY9B,QAAZ,EAAsB2B,UAAtB,CAArB;AAGA,QAAI,CAACH,MAAL,EAAa;AAIb,QAAI,CAACO,+BAA+B,CAACP,MAAD,EAASI,kBAAT,CAApC,EAAkE;AAElE,UAAM9pC,QAAQ,GAAGkqC,WAAW,CAACR,MAAM,CAAC/qC,KAAR,EAAeorC,eAAf,CAA5B;;AAEA,QAAI,OAAO/pC,QAAP,KAAoB,WAAxB,EAAqC;AACpC,YAAMgqC,mBAAA,CAAY9B,QAAZ,EAAsB2B,UAAtB,EAAkC7pC,QAAlC,CAAN;AACA;AACD,GAfD,CAeE,OAAOsD,CAAP,EAAU;AACX6H,WAAO,CAACC,KAAR,CAAe,oBAAmB88B,QAAS,KAAI2B,UAAW,OAA1D,EAAkEC,kBAAlE,EAAsF,QAAtF,EAAgGC,eAAhG,EAAiHzmC,CAAjH;AACA;AACD;AAEM,eAAe6mC,iBAAf,CAAiCjC,QAAjC,EAAmD2B,UAAnD,EAAuEE,eAAvE,EAA+F;AAGrG,MAAI;AACH,UAAML,MAAM,GAAG,MAAMM,mBAAA,CAAY9B,QAAZ,EAAsB2B,UAAtB,CAArB;AAGA,QAAI,CAACH,MAAL,EAAa;AAEb,UAAM1pC,QAAQ,GAAGkqC,WAAW,CAACR,MAAM,CAAC/qC,KAAR,EAAeorC,eAAf,CAA5B;;AAEA,QAAI,OAAO/pC,QAAP,KAAoB,WAAxB,EAAqC;AACpC,YAAMgqC,mBAAA,CAAY9B,QAAZ,EAAsB2B,UAAtB,EAAkC7pC,QAAlC,CAAN;AACA;AACD,GAXD,CAWE,OAAOsD,CAAP,EAAU;AACX6H,WAAO,CAACC,KAAR,CAAe,oBAAmB88B,QAAS,KAAI2B,UAAW,KAA1D,EAAgEE,eAAhE,EAAiFzmC,CAAjF;AACA;AACD;AAEM,eAAe8mC,UAAf,CAA0BC,WAA1B,EAA+CC,aAA/C,EAAsEC,WAAtE,EAA2FC,aAA3F,EAAkHT,eAAlH,EAA2I;AACjJ,MAAI;AACH,UAAML,MAAM,GAAG,MAAMM,mBAAA,CAAYK,WAAZ,EAAyBC,aAAzB,CAArB;AAGA,QAAI,CAACZ,MAAL,EAAa;AAEb,UAAM1pC,QAAQ,GAAGkqC,WAAW,CAACR,MAAM,CAAC/qC,KAAR,EAAeorC,eAAf,CAA5B;;AAEA,QAAI,OAAO/pC,QAAP,KAAoB,WAAxB,EAAqC;AACpC,YAAMgqC,mBAAA,CAAYO,WAAZ,EAAyBC,aAAzB,EAAwCxqC,QAAxC,CAAN;AACA;AACD,GAXD,CAWE,OAAOsD,CAAP,EAAU;AACX6H,WAAO,CAACC,KAAR,CAAe,oBAAmBi/B,WAAY,KAAIC,aAAc,OAAMC,WAAY,KAAIC,aAAc,MAApG,EAA2GT,eAA3G,EAA4HzmC,CAA5H;AACA;AACD;AAEM,eAAemnC,mBAAf,CAAmCC,MAAnC,EAAmDH,WAAnD,EAAwEC,aAAxE,EAA+FT,eAA/F,EAAwH;AAC9H,QAAM3N,QAAQ,GAAG,MAAMyL,kCAAO,CAACnyB,GAAR,CAAYg1B,MAAZ,CAAvB;;AAEA,MAAItO,QAAQ,KAAK,IAAjB,EAAuB;AACtB;AACA;;AAED,QAAMp8B,QAAQ,GAAGkqC,WAAW,CAAC9N,QAAD,EAAW2N,eAAX,CAA5B;;AAEA,MAAI;AACH,QAAI,OAAO/pC,QAAP,KAAoB,WAAxB,EAAqC;AACpC,YAAMgqC,mBAAA,CAAYO,WAAZ,EAAyBC,aAAzB,EAAwCxqC,QAAxC,CAAN;AACA;AACD,GAJD,CAIE,OAAOsD,CAAP,EAAU;AACX6H,WAAO,CAACC,KAAR,CAAe,4BAA2Bs/B,MAAO,OAAMH,WAAY,KAAIC,aAAc,MAArF,EAA4FT,eAA5F,EAA6GzmC,CAA7G;AACA;AACD;;AAKD,SAAS2mC,+BAAT,CAAyCP,MAAzC,EAAiDI,kBAAjD,EAAqE;AACpE,MAAI,CAACJ,MAAL,EAAa;AACZA,UAAM,GAAG;AACR9qC,UAAI,EAAE,QADE;AAERD,WAAK,EAAEW;AAFC,KAAT;AAIA;;AACD,QAAM88B,QAAQ,GAAGsN,MAAM,CAAC/qC,KAAxB;;AAMA,MAAIy9B,QAAQ,IAAKsN,MAAM,CAAC9qC,IAAP,KAAgB,SAA7B,IAA4C8qC,MAAM,CAAC/qC,KAAP,CAAakB,MAAb,KAAwB,CAAxE,EAA4E;AAC3Eu8B,YAAQ,CAAC/5B,IAAT,CAAc,KAAd;AACA;;AAID,SAAOsnC,iBAAO,CAACG,kBAAD,EAAqB1N,QAArB,CAAd;AACA;;AAED,SAAS8N,WAAT,CAAqB9N,QAArB,EAA+B2N,eAA/B,EAAgD;AAC/C,MAAI,OAAOA,eAAP,KAA2B,UAA/B,EAA2C;AAC1C,WAAOA,eAAe,CAAC3N,QAAD,CAAtB;AACA,GAFD,MAEO,IAAI,OAAO2N,eAAP,KAA2B,WAA/B,EAA4C;AAClD,WAAOA,eAAP;AACA,GAFM,MAEA;AACN,WAAO3N,QAAP;AACA;AACD,C;;AChHD;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMuO,kBAAU,GAAG,CAClB;AACCC,eAAa,EAAE,iBADhB;;AAEC,QAAMzB,EAAN,GAAW;AAEV,UAAM0B,mBAAA,CAA8B,qCAA9B,EAAqE,cAArE,EAAqF,cAArF,CAAN;AAGA,UAAMC,YAAY,GAAG,MAAMjD,kCAAO,CAACnyB,GAAR,CAAY,0CAAZ,CAA3B;;AACA,QAAIo1B,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,CAA9C,EAAiD;AAEhD,YAAMC,cAAc,GAAG,MAAMlD,kCAAO,CAACnyB,GAAR,CAAY,2BAAZ,CAA7B;;AACA,UAAIq1B,cAAc,KAAK,IAAvB,EAA6B;AAC5B,YAAI,OAAOA,cAAc,CAACC,YAAtB,KAAuC,WAA3C,EAAwD;AACvD,gBAAMH,iBAAA,CAA4B,cAA5B,EAA4C,cAA5C,EAA4DE,cAAc,CAACC,YAAf,CAA4BrsC,KAAxF,CAAN;AACA;;AACD,YAAI,OAAOosC,cAAc,CAACE,iBAAtB,KAA4C,WAAhD,EAA6D;AAC5D,gBAAMJ,iBAAA,CAA4B,cAA5B,EAA4C,mBAA5C,EAAiEE,cAAc,CAACE,iBAAf,CAAiCtsC,KAAlG,CAAN;AACA;;AACD,YAAI,OAAOosC,cAAc,CAACG,qBAAtB,KAAgD,WAApD,EAAiE;AAChE,gBAAML,iBAAA,CAA4B,cAA5B,EAA4C,uBAA5C,EAAqEE,cAAc,CAACG,qBAAf,CAAqCvsC,KAA1G,CAAN;AACA;;AACD,YAAI,OAAOosC,cAAc,CAACI,MAAtB,KAAiC,WAArC,EAAkD;AACjDJ,wBAAc,CAACI,MAAf,CAAsBxsC,KAAtB,CAA4BulB,OAA5B,CAAoCknB,KAAK,IAAI;AAC5C,mBAAOA,KAAK,CAACvrC,MAAN,GAAe,CAAtB,EAAyB;AACxBurC,mBAAK,CAAC/oC,IAAN,CAAW,EAAX;AACA;AACD,WAJD;AAKA,gBAAMwoC,iBAAA,CAA4B,cAA5B,EAA4C,QAA5C,EAAsDE,cAAc,CAACI,MAAf,CAAsBxsC,KAA5E,CAAN;AACA;AACD;AACD;;AACD,QAAImsC,YAAY,KAAK,CAArB,EAAwB;AACvB,YAAMD,iBAAA,CAA4B,cAA5B,EAA4C,QAA5C,EAAsDM,MAAM,IACjE,CAACA,MAAM,IAAI,EAAX,EAAeloC,GAAf,CAAmBmoC,KAAK,IAAI;AAC3B,eAAOA,KAAK,CAACvrC,MAAN,GAAe,CAAtB,EAAyB;AACxBurC,eAAK,CAAC/oC,IAAN,CAAW,EAAX;AACA;;AACD,eAAO+oC,KAAP;AACA,OALD,CADK,CAAN;AAQA;;AAGD,UAAMC,cAAc,GAAG,MAAMxD,kCAAO,CAACnyB,GAAR,CAAY,uCAAZ,CAA7B;;AACA,QAAIjX,KAAK,CAACD,OAAN,CAAc6sC,cAAd,CAAJ,EAAmC;AAClC,YAAMC,SAAS,GAAG,EAAlB;;AACA,WAAK,MAAMC,aAAX,IAA4BF,cAA5B,EAA4C;AAC3C,cAAMG,QAAQ,GAAGD,aAAa,CAAC9rB,IAAd,CAAmBihB,KAAnB,CAAyB,GAAzB,CAAjB;AACA,cAAM+K,MAAM,GAAGD,QAAQ,CAACA,QAAQ,CAAC3rC,MAAT,GAAkB,CAAnB,CAAvB;AACAyrC,iBAAS,CAACG,MAAD,CAAT,GAAoBF,aAApB;AACA;;AACD1D,wCAAO,CAAC9xB,GAAR,CAAY,uCAAZ,EAAqDu1B,SAArD;AACA;AACD;;AArDF,CADkB,EAuDf;AACFV,eAAa,EAAE,SADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,aAArB,EAAoC,0BAApC,EAAgE,cAAhE,EAAgF,0BAAhF,CAAN;AAEA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,aAApC,EAAmD,WAAnD,EAAgE,aAAhE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,aAApC,EAAmD,WAAnD,EAAgE,aAAhE,EAA+ElsC,KAAK,IAAKA,KAAK,KAAK,MAAnG,CAAN;AACA,UAAMksC,UAAA,CAAqB,aAArB,EAAoC,6BAApC,EAAmE,WAAnE,EAAgF,oBAAhF,CAAN;AAEA,UAAMA,mBAAA,CAA8B,2CAA9B,EAA2E,WAA3E,EAAwF,0BAAxF,EAAoHlsC,KAAK,IAAI;AAClI,UAAI;AACH,eAAO68B,IAAI,CAACG,KAAL,CAAWh9B,KAAK,IAAI,EAApB,EAAwB0gB,IAAxB,CAA6B,GAA7B,CAAP;AACA,OAFD,CAEE,OAAO/b,CAAP,EAAU;AACX,eAAO,EAAP;AACA;AACD,KANK,CAAN;;AAQA,QAAI;AACH,YAAMooC,QAAQ,GAAG,OAAM7D,kCAAO,CAACnyB,GAAR,CAAY,4BAAZ,CAAN,KAAmD,EAApE;AACAi2B,qCAA+B,CAACD,QAAD,CAA/B;AACA,KAHD,CAGE,OAAOpoC,CAAP,EAAU;AACX6H,aAAO,CAACC,KAAR,CAAc,qEAAd,EAAqF9H,CAArF;AACA;;AAGD,UAAMunC,iBAAA,CAA4B,aAA5B,EAA2C,YAA3C,EAAyDpsB,UAAU,IACxE,CAACA,UAAU,IAAI,EAAf,EAAmBxb,GAAnB,CAAuB4Z,SAAS,IAAI;AACnC,YAAM0kB,KAAK,GAAG1kB,SAAS,CAAC,CAAD,CAAvB;;AACA,UAAI0kB,KAAK,CAAC3hB,UAAN,CAAiB,KAAjB,CAAJ,EAA6B;AAC5B/C,iBAAS,CAAC,CAAD,CAAT,GAAe0kB,KAAK,CAACqK,MAAN,CAAa,CAAb,CAAf;AACA;;AACD,aAAO/uB,SAAP;AACA,KAND,CADK,CAAN;;AAUA,aAAS8uB,+BAAT,CAAyCE,IAAzC,EAA+C;AAC9C,YAAMC,SAAS,GAAG1tC,MAAM,CAACqZ,IAAP,CAAYo0B,IAAZ,CAAlB;;AAEA,WAAK,MAAMjM,QAAX,IAAuBkM,SAAvB,EAAkC;AACjC,cAAMC,KAAK,GAAGnM,QAAQ,CAACjhB,WAAT,EAAd;AACA,YAAIotB,KAAK,KAAKnM,QAAd,EAAwB;AAExB,cAAMoM,WAAW,GAAGH,IAAI,CAACE,KAAD,CAAJ,GAAcF,IAAI,CAACE,KAAD,CAAJ,IAAe,EAAjD;AACA,cAAMrqC,MAAM,GAAGmqC,IAAI,CAACjM,QAAD,CAAnB;;AAEA,YAAIl+B,MAAM,CAACuqC,KAAX,EAAkB;AACjBD,qBAAW,CAACC,KAAZ,GAAoB,CAACjgB,QAAQ,CAACggB,WAAW,CAACC,KAAb,EAAoB,EAApB,CAAR,IAAmC,CAApC,KAA0CjgB,QAAQ,CAACtqB,MAAM,CAACuqC,KAAR,EAAe,EAAf,CAAR,IAA8B,CAAxE,CAApB;AACA;;AACD,YAAIvqC,MAAM,CAACwqC,KAAP,KAAiB,CAACF,WAAW,CAACE,KAAb,IAAsBF,WAAW,CAACE,KAAZ,KAAsB,MAA7D,CAAJ,EAA0E;AACzEF,qBAAW,CAACE,KAAZ,GAAoBxqC,MAAM,CAACwqC,KAA3B;AACA;;AAED,YAAIxqC,MAAM,CAACuY,GAAX,EAAgB;AACf+xB,qBAAW,CAAC/xB,GAAZ,GAAkB+xB,WAAW,CAAC/xB,GAAZ,GAAmB,GAAE+xB,WAAW,CAAC/xB,GAAI,KAArC,GAA4C,EAA9D;AACA+xB,qBAAW,CAAC/xB,GAAZ,IAAmBvY,MAAM,CAACuY,GAA1B;AACA;;AAED,YAAIvY,MAAM,CAACyqC,MAAX,EAAmB;AAClBH,qBAAW,CAACG,MAAZ,GAAqBzqC,MAAM,CAACyqC,MAA5B;AACA;;AAED,YAAIzqC,MAAM,CAAC8d,IAAX,EAAiB;AAChB,cAAIwsB,WAAW,CAACxsB,IAAhB,EAAsB;AACrBwsB,uBAAW,CAAC/xB,GAAZ,GAAkB+xB,WAAW,CAAC/xB,GAAZ,GAAmB,GAAE+xB,WAAW,CAAC/xB,GAAI,KAArC,GAA4C,EAA9D;AACA+xB,uBAAW,CAAC/xB,GAAZ,IAAmBvY,MAAM,CAAC8d,IAA1B;AACA,WAHD,MAGO;AACNwsB,uBAAW,CAACxsB,IAAZ,GAAmB9d,MAAM,CAAC8d,IAA1B;AACA;AACD;;AAED,eAAOqsB,IAAI,CAACjM,QAAD,CAAX;AACA;;AAEDiI,wCAAO,CAAC9xB,GAAR,CAAY,4BAAZ,EAA0C81B,IAA1C;AACAhE,wCAAO,CAAC9xB,GAAR,CAAY,+BAAZ,EAA6C,IAA7C;AACA;AACD;;AA5EC,CAvDe,EAoIf;AACF60B,eAAa,EAAE,SADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,YAAA,CAAuB,aAAvB,EAAsC,aAAtC,EAAqD,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,EAAyB,KAAzB,CAArD,EAAsF,CAAC,EAAD,EAAK,KAAL,EAAY,IAAZ,EAAkB,KAAlB,EAAyB,KAAzB,CAAtF,CAAN;AACA,UAAMA,YAAA,CAAuB,aAAvB,EAAsC,eAAtC,EAAuD,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,EAAyB,KAAzB,CAAvD,EAAwF,CAAC,EAAD,EAAK,KAAL,EAAY,IAAZ,EAAkB,KAAlB,EAAyB,KAAzB,CAAxF,CAAN;AACA,UAAMA,YAAA,CAAuB,aAAvB,EAAsC,eAAtC,EAAuD,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,EAAyB,KAAzB,CAAvD,EAAwF,CAAC,EAAD,EAAK,KAAL,EAAY,IAAZ,EAAkB,KAAlB,EAAyB,KAAzB,CAAxF,CAAN;AACA,UAAMA,YAAA,CAAuB,aAAvB,EAAsC,gBAAtC,EAAwD,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,EAAyB,KAAzB,CAAxD,EAAyF,CAAC,EAAD,EAAK,KAAL,EAAY,IAAZ,EAAkB,KAAlB,EAAyB,KAAzB,CAAzF,CAAN;AACA;;AAPC,CApIe,EA4If;AACFD,eAAa,EAAE,SADb;;AAEFzB,IAAE,GAAG,CAEJ;;AAJC,CA5Ie,EAiJf;AACFyB,eAAa,EAAE,OADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,iBAAA,CAA4B,kBAA5B,EAAgD,mBAAhD,EAAqElsC,KAAK,IAAI;AAEnF,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC9B,eAAOA,KAAP;AACA;;AAGD,aAAOA,KAAK,GAAG,WAAH,GAAiB,MAA7B;AACA,KARK,CAAN;AAUA,UAAMytC,oBAAoB,GAAG,MAAMpC,OAAA,CAAgB,eAAhB,CAAnC;AACA,UAAMqC,MAAM,GAAGD,oBAAoB,IAAIA,oBAAoB,CAACC,MAArB,CAA4B1tC,KAAnE;AACA,UAAM2tC,aAAa,GAAG,MAAMtC,OAAA,CAAgB,aAAhB,CAA5B;AACA,UAAMuC,EAAE,GAAGD,aAAa,IAAIA,aAAa,CAACE,iBAAd,CAAgC7tC,KAA5D;AACA,UAAM8tC,EAAE,GAAGH,aAAa,IAAIA,aAAa,CAACI,iBAAd,CAAgC/tC,KAA5D;AACA,UAAMya,IAAI,GAAGnT,QAAQ,CAACiC,aAAT,CAAuB,KAAvB,CAAb;;AAIA,QAAImkC,MAAM,KAAK,iBAAf,EAAkC;AACjC,YAAMxB,iBAAA,CAA4B,eAA5B,EAA6C,QAA7C,EAAuD,kBAAvD,CAAN;AACA;;AAODzxB,QAAI,CAACjR,KAAL,CAAW+jC,KAAX,GAAmBK,EAAE,IAAI,EAAzB;AACAnzB,QAAI,CAACjR,KAAL,CAAWwkC,eAAX,GAA6BF,EAAE,IAAI,EAAnC;AACA,UAAMG,YAAY,GAAGxzB,IAAI,CAACjR,KAAL,CAAW+jC,KAAhC;AACA,UAAMW,YAAY,GAAGzzB,IAAI,CAACjR,KAAL,CAAWwkC,eAAhC;;AACA,QAAKJ,EAAE,KAAKE,EAAR,IAAgBG,YAAY,KAAKC,YAArC,EAAoD;AACnD,YAAMhC,iBAAA,CAA4B,aAA5B,EAA2C,mBAA3C,EAAgE,SAAhE,CAAN;AACA,YAAMA,iBAAA,CAA4B,aAA5B,EAA2C,mBAA3C,EAAgE,SAAhE,CAAN;AACA;;AAGD,UAAMA,UAAA,CAAqB,oBAArB,EAA2C,qBAA3C,EAAkE,oBAAlE,EAAwF,gBAAxF,EAA0G,IAA1G,CAAN;AACA,UAAMA,UAAA,CAAqB,oBAArB,EAA2C,0BAA3C,EAAuE,oBAAvE,EAA6F,qBAA7F,CAAN;AACA;;AA3CC,CAjJe,EA6Lf;AACFD,eAAa,EAAE,OADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,YAAA,CAAuB,cAAvB,EAAuC,iBAAvC,EAA0D,IAA1D,EAAgE,KAAhE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,MAApC,EAA4C,aAA5C,EAA2D,UAA3D,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,MAApC,EAA4C,aAA5C,EAA2D,SAA3D,CAAN;AACA;;AANC,CA7Le,EAoMf;AACFD,eAAa,EAAE,OADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,iBAAA,CAA4B,aAA5B,EAA2C,UAA3C,EAAuDx5B,MAAM,IAAI;AACtE,WAAK,MAAM1S,KAAX,IAAoB0S,MAAM,IAAI,EAA9B,EAAkC;AACjC,YAAI1S,KAAK,IAAIA,KAAK,CAAC,CAAD,CAAL,KAAa,WAA1B,EAAuC;AACtCA,eAAK,CAAC,CAAD,CAAL,GAAW,EAAX;AACA;AACD;;AAED,aAAO0S,MAAP;AACA,KARK,CAAN;AASA,UAAMw5B,YAAA,CAAuB,cAAvB,EAAuC,uBAAvC,EAAgE,KAAhE,EAAuE,IAAvE,CAAN;AACA;;AAbC,CApMe,EAkNf;AACFD,eAAa,EAAE,OADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAMmD,aAAa,GAAG,MAAMtC,OAAA,CAAgB,aAAhB,CAA5B;;AACA,QAAIsC,aAAa,IAAIA,aAAa,CAACviC,SAA/B,IAA4CuiC,aAAa,CAACviC,SAAd,CAAwBpL,KAAxE,EAA+E;AAC9E,YAAMksC,YAAA,CAAuB,aAAvB,EAAsC,aAAtC,EAAqD,aAArD,EAAoE,KAApE,CAAN;AACA;;AACD,UAAMA,UAAA,CAAqB,aAArB,EAAoC,2BAApC,EAAiE,cAAjE,EAAiF,2BAAjF,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,eAApC,EAAqD,gBAArD,EAAuE,eAAvE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,oBAApC,EAA0D,eAA1D,EAA2E,oBAA3E,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,YAApC,EAAkD,eAAlD,EAAmE,eAAnE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,iBAApC,EAAuD,eAAvD,EAAwE,iBAAxE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,cAApC,EAAoD,eAApD,EAAqE,cAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,mBAApC,EAAyD,eAAzD,EAA0E,mBAA1E,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,mBAApC,EAAyD,eAAzD,EAA0E,mBAA1E,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,gBAApC,EAAsD,eAAtD,EAAuE,gBAAvE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,aAApC,EAAmD,eAAnD,EAAoE,aAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,kBAApC,EAAwD,eAAxD,EAAyE,kBAAzE,CAAN;;AAEA,aAASiC,eAAT,CAAyBnuC,KAAzB,EAAgC;AAC/B,UAAIA,KAAK,KAAKW,SAAV,IAAuBX,KAAK,KAAK,IAAjC,IAAyCouC,KAAK,CAACpuC,KAAD,CAA9C,IAAyDA,KAAK,GAAG,CAAjE,IAAsEA,KAAK,GAAG,CAAlF,EAAqF;AACpF,eAAO,KAAP;AACA,OAFD,MAEO;AACN,eAAO,CAAC,IAAIA,KAAL,EAAYquC,OAAZ,CAAoB,CAApB,CAAP;AACA;AACD;;AAED,UAAMnC,iBAAA,CAA4B,OAA5B,EAAqC,WAArC,EAAkDiC,eAAlD,CAAN;AACA,UAAMjC,iBAAA,CAA4B,YAA5B,EAA0C,WAA1C,EAAuDiC,eAAvD,CAAN;AACA,UAAMjC,iBAAA,CAA4B,eAA5B,EAA6C,WAA7C,EAA0DiC,eAA1D,CAAN;AACA,UAAMjC,iBAAA,CAA4B,YAA5B,EAA0C,WAA1C,EAAuDiC,eAAvD,CAAN;AAEA,UAAMjC,iBAAA,CAA4B,cAA5B,EAA4C,QAA5C,EAAsDlsC,KAAK,IAChE,CACC,CAAC,aAAD,EAAgB,mCAAhB,CADD,EAEC,CAAC,aAAD,EAAgB,uFAAhB,CAFD,EAGC,CAAC,mBAAD,EAAsB,UAAtB,CAHD,EAIC,IAAIA,KAAK,IAAI,EAAb,CAJD,CADK,CAAN;AASA,UAAMksC,UAAA,CAAqB,aAArB,EAAoC,iBAApC,EAAuD,WAAvD,EAAoE,iBAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,kBAApC,EAAwD,WAAxD,EAAqE,kBAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,0BAApC,EAAgE,WAAhE,EAA6E,0BAA7E,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,oBAApC,EAA0D,WAA1D,EAAuE,oBAAvE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,aAApC,EAAmD,WAAnD,EAAgE,aAAhE,CAAN;AAEA,UAAMA,UAAA,CAAqB,cAArB,EAAqC,uBAArC,EAA8D,cAA9D,EAA8E,iBAA9E,CAAN;AAEA,UAAMA,YAAA,CAAuB,WAAvB,EAAoC,WAApC,EAAiD,KAAjD,EAAwD,IAAxD,CAAN;AAEA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,UAApC,EAAgD,aAAhD,EAA+D,iBAA/D,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,QAApC,EAA8C,aAA9C,EAA6D,eAA7D,CAAN;AAEA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,WAAnC,EAAgD,UAAhD,EAA4D,WAA5D,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,UAAtD,EAAkE,iBAAlE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,YAAnC,EAAiD,UAAjD,EAA6D,YAA7D,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,WAAnC,EAAgD,UAAhD,EAA4D,WAA5D,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,WAAnC,EAAgD,UAAhD,EAA4D,WAA5D,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,cAAnC,EAAmD,UAAnD,EAA+D,cAA/D,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,UAAtD,EAAkE,iBAAlE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,gBAAnC,EAAqD,UAArD,EAAiE,gBAAjE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,qBAAnC,EAA0D,UAA1D,EAAsE,qBAAtE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,cAAnC,EAAmD,UAAnD,EAA+D,cAA/D,CAAN;AAEA,UAAMA,iBAAA,CAA4B,eAA5B,EAA6C,mBAA7C,EAAkEoC,IAAI,IAC3E5P,gBAAM,CAAC4P,IAAD,EAAO,CAAC,CAACC,KAAD,EAAQC,cAAR,CAAD,KAA8B,GAAED,KAAM,MAAKC,cAAe,EAAjE,CADD,CAAN;AAGA;;AApEC,CAlNe,EAuRf;AACFvC,eAAa,EAAE,mBADb;;AAEF,QAAMzB,EAAN,GAAW;AAEV,UAAMiE,aAAa,GAAG,CACrB,uCADqB,EAErB,+CAFqB,EAGrB,gBAHqB,EAIrB,4BAJqB,EAKrB,wBALqB,EAMrB,wBANqB,EAOrB,iCAPqB,EAQrB,4CARqB,EASrB,UATqB,EAUrB,UAVqB,EAWrB,2CAXqB,EAYrB,yCAZqB,EAarB,6CAbqB,CAAtB;AAgBA,UAAM,CAAC,MAAMvF,kCAAO,CAACpwB,IAAR,EAAP,EACJ1S,MADI,CACG7F,GAAG,IAAIkuC,aAAa,CAACx6B,IAAd,CAAmB4b,IAAI,IAAItvB,GAAG,CAACkc,QAAJ,CAAaoT,IAAb,CAA3B,CADV,EAEJvrB,GAFI,CAEA/D,GAAG,IAAI2oC,kCAAO,CAAC7xB,MAAR,CAAe9W,GAAf,CAFP,CAAN;AAGA;;AAvBC,CAvRe,EA+Sf;AACF0rC,eAAa,EAAE,kBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,YAArB,EAAmC,WAAnC,EAAgD,YAAhD,EAA8D,iBAA9D,CAAN;AACA;;AAJC,CA/Se,EAoTf;AACFD,eAAa,EAAE,oBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,aAArB,EAAoC,cAApC,EAAoD,cAApD,EAAoE,cAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,gBAApC,EAAsD,cAAtD,EAAsE,gBAAtE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,oBAApC,EAA0D,cAA1D,EAA0E,oBAA1E,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,eAApC,EAAqD,cAArD,EAAqE,eAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,YAApC,EAAkD,cAAlD,EAAkE,YAAlE,CAAN;AACA;;AARC,CApTe,EA6Tf;AACFD,eAAa,EAAE,2CADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,aAArB,EAAoC,aAApC,EAAmD,aAAnD,EAAkE,mBAAlE,CAAN;AACA;;AAJC,CA7Te,EAkUf;AACFD,eAAa,EAAE,eADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,YAAA,CAAuB,aAAvB,EAAsC,SAAtC,EAAiD,KAAjD,EAAwD,IAAxD,CAAN;AACA;;AAJC,CAlUe,EAuUf;AACFD,eAAa,EAAE,gCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,YAArB,EAAmC,kBAAnC,EAAuD,YAAvD,EAAqE,kBAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,kBAAnC,EAAuD,YAAvD,EAAqE,kBAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,6BAAnC,EAAkE,YAAlE,EAAgF,iBAAhF,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,cAAnC,EAAmD,YAAnD,EAAiE,cAAjE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,YAAtD,EAAoE,iBAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,YAAtD,EAAoE,iBAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,kBAAnC,EAAuD,YAAvD,EAAqE,kBAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,gBAAnC,EAAqD,YAArD,EAAmE,gBAAnE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,oBAAnC,EAAyD,YAAzD,EAAuE,cAAvE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,gBAAnC,EAAqD,YAArD,EAAmE,gBAAnE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,kBAAnC,EAAuD,YAAvD,EAAqE,kBAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,YAAtD,EAAoE,iBAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,kBAAnC,EAAuD,YAAvD,EAAqE,eAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,YAAtD,EAAoE,cAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,gBAAnC,EAAqD,YAArD,EAAmE,gBAAnE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,gBAAnC,EAAqD,YAArD,EAAmE,eAAnE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,uBAAnC,EAA4D,YAA5D,EAA0E,uBAA1E,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,gBAAnC,EAAqD,YAArD,EAAmE,gBAAnE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,eAAnC,EAAoD,YAApD,EAAkE,eAAlE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,oBAAnC,EAAyD,YAAzD,EAAuE,oBAAvE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,gBAAnC,EAAqD,YAArD,EAAmE,gBAAnE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,oBAAnC,EAAyD,YAAzD,EAAuE,oBAAvE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,YAAtD,EAAoE,iBAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,kBAAnC,EAAuD,YAAvD,EAAqE,kBAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,mBAAnC,EAAwD,YAAxD,EAAsE,mBAAtE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,YAAtD,EAAoE,iBAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,qBAAnC,EAA0D,YAA1D,EAAwE,qBAAxE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,YAAtD,EAAoE,iBAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,eAAnC,EAAoD,YAApD,EAAkE,eAAlE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,oBAAnC,EAAyD,YAAzD,EAAuE,oBAAvE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,cAAnC,EAAmD,YAAnD,EAAiE,cAAjE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,YAAtD,EAAoE,iBAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,qBAAnC,EAA0D,YAA1D,EAAwE,qBAAxE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,qBAAnC,EAA0D,YAA1D,EAAwE,qBAAxE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,eAAnC,EAAoD,YAApD,EAAkE,eAAlE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,oBAAnC,EAAyD,YAAzD,EAAuE,oBAAvE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,gBAAnC,EAAqD,YAArD,EAAmE,gBAAnE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,YAAtD,EAAoE,gBAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,kBAAnC,EAAuD,YAAvD,EAAqE,kBAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,sBAAnC,EAA2D,YAA3D,EAAyE,gBAAzE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,4BAAnC,EAAiE,YAAjE,EAA+E,kBAA/E,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,iBAAnC,EAAsD,YAAtD,EAAoE,iBAApE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,kBAAnC,EAAuD,YAAvD,EAAqE,kBAArE,CAAN;AACA,UAAMA,UAAA,CAAqB,YAArB,EAAmC,eAAnC,EAAoD,YAApD,EAAkE,eAAlE,CAAN;AACA;;AA/CC,CAvUe,EAuXf;AACFD,eAAa,EAAE,sCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,YAAA,CAAuB,YAAvB,EAAqC,UAArC,EAAiD,GAAjD,EAAsD,MAAtD,CAAN;AACA,UAAMA,YAAA,CAAuB,YAAvB,EAAqC,WAArC,EAAkD,GAAlD,EAAuD,KAAvD,CAAN;AACA,UAAMA,YAAA,CAAuB,YAAvB,EAAqC,UAArC,EAAiD,KAAjD,EAAwD,MAAxD,CAAN;AACA,UAAMA,YAAA,CAAuB,YAAvB,EAAqC,WAArC,EAAkD,KAAlD,EAAyD,KAAzD,CAAN;AACA;;AAPC,CAvXe,EA+Xf;AACFD,eAAa,EAAE,mCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,YAArB,EAAmC,0BAAnC,EAA+D,YAA/D,EAA6E,wBAA7E,CAAN;AACA;;AAJC,CA/Xe,EAoYf;AACFD,eAAa,EAAE,sBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,YAAA,CAAuB,mBAAvB,EAA4C,WAA5C,EAAyD,MAAzD,EAAiE,MAAjE,CAAN;AACA;;AAJC,CApYe,EAyYf;AACFD,eAAa,EAAE,kCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,iBAAA,CAA4B,YAA5B,EAA0C,yBAA1C,EAAqE,SAArE,CAAN;AACA;;AAJC,CAzYe,EA8Yf;AACFD,eAAa,EAAE,oCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,YAAA,CAAuB,YAAvB,EAAqC,yBAArC,EAAgE,SAAhE,EAA2E,SAA3E,CAAN;AACA;;AAJC,CA9Ye,EAmZf;AACFD,eAAa,EAAE,wDADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,iBAAA,CAA4B,mBAA5B,EAAiD,cAAjD,EAAiEwC,YAAY,IAAI;AACtF,UAAI,CAACA,YAAL,EAAmB;;AACnB,WAAK,MAAMC,GAAX,IAAkBD,YAAlB,EAAgC;AAC/BC,WAAG,CAAC,CAAD,CAAH,GAASA,GAAG,CAAC,CAAD,CAAH,CAAOt0B,OAAP,CAAe,SAAf,EAA0B,IAA1B,CAAT;AACA;AACD,KALK,CAAN;AAMA;;AATC,CAnZe,EA6Zf;AACF4xB,eAAa,EAAE,yBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,iBAAA,CAA4B,YAA5B,EAA0C,YAA1C,EAAwD,IAAxD,CAAN;AACA;;AAJC,CA7Ze,EAkaf;AACFD,eAAa,EAAE,0BADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,iBAAA,CAA4B,YAA5B,EAA0C,iBAA1C,EAA6DoC,IAAI,IACtEA,IAAI,IAAIA,IAAI,CAACloC,MAAL,CAAYuoC,GAAG,IAAIA,GAAG,CAAC,CAAD,CAAH,KAAW,oDAA9B,CADH,CAAN;AAIA,UAAMC,uBAAuB,GAAG,+CAAhC;AACA,UAAM1C,UAAA,CAAqB,YAArB,EAAmC,aAAnC,EAAkD,mBAAlD,EAAuE,iBAAvE,EAA0FoC,IAAI,IACnG,CAAC,CAACA,IAAF,IAAUA,IAAI,CAACO,KAAL,CAAWF,GAAG,IAAIA,GAAG,CAAC,CAAD,CAAH,KAAWC,uBAA7B,CADL,CAAN;AAGA,UAAM1C,iBAAA,CAA4B,YAA5B,EAA0C,aAA1C,EAAyDoC,IAAI,IAClEA,IAAI,IAAIA,IAAI,CAACloC,MAAL,CAAYuoC,GAAG,IAAIA,GAAG,CAAC,CAAD,CAAH,KAAWC,uBAA9B,CADH,CAAN;AAIA,QAAIE,iBAAiB,GAAG,KAAxB;AACA,UAAM5C,iBAAA,CAA4B,YAA5B,EAA0C,aAA1C,EAAyDoC,IAAI,IAAI;AACtE,UAAI,CAACA,IAAL,EAAW,OAAO,EAAP;AACX,YAAMS,YAAY,GAAGT,IAAI,CAACloC,MAAL,CAAYuoC,GAAG,IAAIA,GAAG,CAAC,CAAD,CAAH,KAAW,4BAA9B,CAArB;AACAG,uBAAiB,GAAGC,YAAY,CAAC7tC,MAAb,GAAsBotC,IAAI,CAACptC,MAA/C;AACA,aAAO6tC,YAAP;AACA,KALK,CAAN;;AAMA,QAAID,iBAAJ,EAAuB;AACtB5C,uBAAA,CAA4B,YAA5B,EAA0C,UAA1C,EAAsDoC,IAAI,IAAI,CAC7D,IAAIA,IAAI,IAAI,EAAZ,CAD6D,EAE7D,CACC,wFADD,EAEC,YAFD,CAF6D,CAA9D;AAOA;AACD;;AA/BC,CAlae,EAkcf;AACFrC,eAAa,EAAE,4BADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,iBAAA,CAA4B,aAA5B,EAA2C,eAA3C,EAA4D,IAA5D,CAAN;AACA;;AAJC,CAlce,EAucf;AACFD,eAAa,EAAE,kCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,iBAAA,CAA4B,WAA5B,EAAyC,oBAAzC,EAA+DlsC,KAAK,IAAKA,KAAK,KAAK,IAAX,GAAmB,MAAnB,GAA4B,MAApG,CAAN;AACA;;AAJC,CAvce,EA4cf;AACFisC,eAAa,EAAE,2BADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,aAArB,EAAoC,qBAApC,EAA2D,aAA3D,EAA0E,aAA1E,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,4BAApC,EAAkE,aAAlE,EAAiF,oBAAjF,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,2BAApC,EAAiE,aAAjE,EAAgF,mBAAhF,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,oBAApC,EAA0D,aAA1D,EAAyE,YAAzE,CAAN;AACA;;AAPC,CA5ce,EAodf;AACFD,eAAa,EAAE,yBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAMtwB,QAAQ,GAAGpD,CAAC,IAAKA,CAAC,GAAGuX,MAAM,CAACvX,CAAD,CAAT,GAAe,EAAvC;;AACA,UAAMo1B,iBAAA,CAA4B,YAA5B,EAA0C,UAA1C,EAAsDhyB,QAAtD,CAAN;AACA,UAAMgyB,iBAAA,CAA4B,YAA5B,EAA0C,WAA1C,EAAuDhyB,QAAvD,CAAN;AACA;;AANC,CApde,EA2df;AACF+xB,eAAa,EAAE,4BADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAMiD,oBAAoB,GAAG,MAAMpC,OAAA,CAAgB,eAAhB,CAAnC;;AACA,QAAI,CAACoC,oBAAD,IACH,CAACA,oBAAoB,CAACuB,iBADnB,IAEH,CAACvB,oBAAoB,CAACuB,iBAArB,CAAuChvC,KAFrC,IAGH,CAACytC,oBAAoB,CAACuB,iBAArB,CAAuChvC,KAAvC,CAA6CiU,IAA7C,CAAkD,CAAC,CAACs6B,KAAD,EAAQC,cAAR,CAAD,KAA6BD,KAAK,KAAK,cAAV,IAA4BC,cAAc,KAAK,cAA9H,CAHF,EAGiJ;AAEhJS,gBAAA,CAAmB,cAAnB,EAAmC,KAAnC;AACA;AACD;;AAXC,CA3de,EAuef;AACFhD,eAAa,EAAE,6BADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,YAAA,CAAuB,YAAvB,EAAqC,oBAArC,EAA2D,cAA3D,EAA2E,cAA3E,CAAN;AACA;;AAJC,CAvee,EA4ef;AACFD,eAAa,EAAE,kBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0C,IAAI,GAAG,OAAMhE,kCAAO,CAACnyB,GAAR,CAAY,4BAAZ,CAAN,KAAmD,EAAhE;AACA,UAAMm4B,YAAY,GAAGvQ,iBAAO,CAACuO,IAAD,EAAO,CAACjtB,CAAD,EAAIyU,CAAJ,KAAW,OAAMA,CAAC,CAAC1U,WAAF,EAAgB,EAAxC,CAA5B;AACA,UAAMkpB,kCAAO,CAACpC,WAAR,CAAoBoI,YAApB,CAAN;AACA;;AANC,CA5ee,EAmff;AACFjD,eAAa,EAAE,uBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAMtB,kCAAO,CAAC7xB,MAAR,CAAe,4BAAf,CAAN;AACA;;AAJC,CAnfe,EAwff;AACF40B,eAAa,EAAE,yCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,aAArB,EAAoC,iBAApC,EAAuD,YAAvD,EAAqE,aAArE,CAAN;AACA;;AAJC,CAxfe,EA6ff;AACFD,eAAa,EAAE,6BADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAMh1B,OAAO,GAAG,OAAM0zB,kCAAO,CAACnyB,GAAR,CAAY,mCAAZ,CAAN,KAA0D,EAA1E;AACA,UAAMo4B,eAAe,GAAGxQ,iBAAO,CAACnpB,OAAD,EAAU,CAACyK,CAAD,EAAIyU,CAAJ,KAAW,mBAAkBA,CAAE,EAAzC,CAA/B;AACA,UAAMwU,kCAAO,CAACpC,WAAR,CAAoBqI,eAApB,CAAN;AACA,UAAMjG,kCAAO,CAAC7xB,MAAR,CAAe,mCAAf,CAAN;AACA;;AAPC,CA7fe,EAqgBf;AACF40B,eAAa,EAAE,gCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,aAArB,EAAoC,sBAApC,EAA4D,SAA5D,EAAuE,qBAAvE,EAA8FkD,cAAc,IACjHA,cAAc,GAAG,iBAAH,GAAuB,mBADhC,CAAN;AAGA;;AANC,CArgBe,EA4gBf;AACFnD,eAAa,EAAE,kCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM;AAAE6E;AAAF,QAAmB,OAAMnG,kCAAO,CAACnyB,GAAR,CAAY,+CAAZ,CAAN,KAAsE,EAA/F;AACA,QAAI,CAACs4B,YAAL,EAAmB;AACnB,UAAMF,eAAe,GAAG1vC,MAAM,CAAC+V,OAAP,CAAe65B,YAAf,EAA6BvhC,MAA7B,CAAoC,CAAC46B,GAAD,EAAM,CAAChU,CAAD,EAAIzU,CAAJ,CAAN,KAAiB;AAC5E,YAAMqvB,IAAI,GAAG,CAAC7wB,qCAAW,CAACrB,QAAZ,CAAqBsX,CAArB,KAA2B,EAA5B,EAAgC,CAAhC,CAAb;AACA,YAAM6a,eAAe,GAAGtvB,CAAC,CAACnS,MAAF,CAAS,CAAC46B,GAAD,EAAMhU,CAAN,KAAY,CAACgU,GAAG,CAAChU,CAAD,CAAH,GAAS,IAAV,KAAmBgU,GAAxC,EAA6C,EAA7C,CAAxB;AACA,UAAI4G,IAAI,IAAIrvB,CAAC,CAAC/e,MAAd,EAAsBwnC,GAAG,CAAE,wBAAuB4G,IAAK,EAA9B,CAAH,GAAsC;AAAEE,kBAAU,EAAE1gC,IAAI,CAACC,GAAL,EAAd;AAA0BwgC;AAA1B,OAAtC;AACtB,aAAO7G,GAAP;AACA,KALuB,EAKrB,EALqB,CAAxB;AAMA,UAAMQ,kCAAO,CAACpC,WAAR,CAAoBqI,eAApB,CAAN;AACA,UAAMjG,kCAAO,CAAC7xB,MAAR,CAAe,+CAAf,CAAN;AACA;;AAbC,CA5gBe,EA0hBf;AACF40B,eAAa,EAAE,6CADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAMiF,aAAa,GAAG,EAAtB;;AACA,SAAK,MAAM,CAAClvC,GAAD,EAAMgU,GAAN,CAAX,IAAyB9U,MAAM,CAAC+V,OAAP,CAAe,MAAM0zB,kCAAO,CAACvC,MAAR,EAArB,CAAzB,EAAiE;AAChE,UAAI,CAACpmC,GAAG,CAAC0gB,UAAJ,CAAe,kBAAf,CAAL,EAAyC;AACzC,UAAK1M,GAAD,CAAWm7B,gBAAf,EAAiCD,aAAa,CAAClvC,GAAD,CAAb,GAAqBgU,GAArB;AAGjC;;AACD20B,sCAAO,CAAC9xB,GAAR,CAAY,0CAAZ,EAAwDq4B,aAAxD;AACA;;AAXC,CA1hBe,EAsiBf;AACFxD,eAAa,EAAE,0BADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,QAAI0C,IAAI,GAAG,MAAMhE,kCAAO,CAACN,UAAR,CAAmB,MAAnB,EAA2B,OAAY,EAAZ,CAA3B,EAA4CjC,MAA5C,EAAjB;;AACA,SAAK,MAAMrrB,GAAX,IAAkB7b,MAAM,CAACiT,MAAP,CAAcw6B,IAAd,CAAlB,EAAuC;AACtC,UAAI5xB,GAAG,CAACgyB,KAAJ,GAAY,CAAhB,EAAmBhyB,GAAG,CAACq0B,OAAJ,GAAcr0B,GAAG,CAACgyB,KAAlB;AACnB,UAAIhyB,GAAG,CAACgyB,KAAJ,GAAY,CAAhB,EAAmBhyB,GAAG,CAACs0B,SAAJ,GAAgB,CAACt0B,GAAG,CAACgyB,KAArB;AACnB/2B,aAAO,CAACs5B,cAAR,CAAuBv0B,GAAvB,EAA4B,OAA5B;AACA,UAAIA,GAAG,CAACA,GAAR,EAAaA,GAAG,CAAC+b,IAAJ,GAAW/b,GAAG,CAACA,GAAf;AACb/E,aAAO,CAACs5B,cAAR,CAAuBv0B,GAAvB,EAA4B,KAA5B;AACA,UAAIA,GAAG,CAACkyB,MAAR,EAAgBlyB,GAAG,CAACw0B,OAAJ,GAAcx0B,GAAG,CAACkyB,MAAlB;AAChBj3B,aAAO,CAACs5B,cAAR,CAAuBv0B,GAAvB,EAA4B,QAA5B;AACA;;AACD4xB,QAAI,GAAGvO,iBAAO,CAACuO,IAAD,EAAO,CAACjtB,CAAD,EAAIyU,CAAJ,KAAW,OAAMA,CAAE,EAA1B,CAAd;AACA,UAAMwU,kCAAO,CAACpC,WAAR,CAAoBoG,IAApB,CAAN;AACA;;AAfC,CAtiBe,EAsjBf;AACFjB,eAAa,EAAE,qBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,eAArB,EAAsC,iBAAtC,EAAyD,eAAzD,EAA0E,WAA1E,CAAN;AACA,UAAMA,UAAA,CAAqB,eAArB,EAAsC,cAAtC,EAAsD,eAAtD,EAAuE,iBAAvE,CAAN;AACA,UAAMA,UAAA,CAAqB,eAArB,EAAsC,mBAAtC,EAA2D,eAA3D,EAA4E,sBAA5E,CAAN;AACA,UAAMA,UAAA,CAAqB,eAArB,EAAsC,mBAAtC,EAA2D,eAA3D,EAA4E,gBAA5E,CAAN;AACA,UAAMA,UAAA,CAAqB,eAArB,EAAsC,gBAAtC,EAAwD,eAAxD,EAAyE,YAAzE,CAAN;AACA,UAAMA,UAAA,CAAqB,eAArB,EAAsC,aAAtC,EAAqD,eAArD,EAAsE,cAAtE,CAAN;AACA,UAAMA,UAAA,CAAqB,eAArB,EAAsC,kBAAtC,EAA0D,eAA1D,EAA2E,mBAA3E,CAAN;;AAEA,QAAI,CAAC,OAAMhD,kCAAO,CAACnyB,GAAR,CAAY,iBAAZ,CAAN,KAAwC;AAAEg5B,mBAAa,EAAE;AAAjB,KAAzC,EAAkEA,aAAlE,KAAoF,KAAxF,EAA+F;AAC9F,YAAM1E,mBAAA,CAAY,eAAZ,EAA6B,WAA7B,EAA0C,KAA1C,CAAN;AACA,YAAMA,mBAAA,CAAY,eAAZ,EAA6B,SAA7B,EAAwC,IAAxC,CAAN;AACA;AACD;;AAfC,CAtjBe,EAskBf;AACFY,eAAa,EAAE,sBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,YAArB,EAAmC,mBAAnC,EAAwD,YAAxD,EAAsE,iBAAtE,CAAN;AACA;;AAJC,CAtkBe,EA2kBf;AACFD,eAAa,EAAE,0BADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,aAAS1N,SAAT,CAAmBhmB,CAAnB,EAAsB;AACrB,UAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOA,CAAC,CAACoD,QAAF,EAAP;AAC3B,aAAOpD,CAAP;AACA;;AAED,UAAMo1B,iBAAA,CAA4B,aAA5B,EAA2C,mBAA3C,EAAgEpP,SAAhE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,cAA5B,EAA4C,qBAA5C,EAAmEpP,SAAnE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,cAA5B,EAA4C,wBAA5C,EAAsEpP,SAAtE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,cAA5B,EAA4C,eAA5C,EAA6DpP,SAA7D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,SAA5B,EAAuC,gBAAvC,EAAyDpP,SAAzD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,WAA5B,EAAyC,cAAzC,EAAyDpP,SAAzD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,WAA5B,EAAyC,aAAzC,EAAwDpP,SAAxD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,OAA5B,EAAqC,WAArC,EAAkDpP,SAAlD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,OAA5B,EAAqC,WAArC,EAAkDpP,SAAlD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,OAA5B,EAAqC,WAArC,EAAkDpP,SAAlD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,OAA5B,EAAqC,OAArC,EAA8CpP,SAA9C,CAAN;AACA,UAAMoP,iBAAA,CAA4B,aAA5B,EAA2C,YAA3C,EAAyDpP,SAAzD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,aAA5B,EAA2C,WAA3C,EAAwDpP,SAAxD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,aAA5B,EAA2C,WAA3C,EAAwDpP,SAAxD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,mBAA5B,EAAiD,YAAjD,EAA+DpP,SAA/D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,mBAA5B,EAAiD,WAAjD,EAA8DpP,SAA9D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,mBAA5B,EAAiD,WAAjD,EAA8DpP,SAA9D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,mBAA5B,EAAiD,iBAAjD,EAAoEpP,SAApE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,iBAA5B,EAA+C,eAA/C,EAAgEpP,SAAhE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,iBAA5B,EAA+C,oBAA/C,EAAqEpP,SAArE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,WAA5B,EAAyC,wBAAzC,EAAmEpP,SAAnE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,eAA5B,EAA6C,YAA7C,EAA2DpP,SAA3D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,eAA5B,EAA6C,eAA7C,EAA8DpP,SAA9D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,kBAA5B,EAAgD,YAAhD,EAA8DpP,SAA9D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,kBAA5B,EAAgD,WAAhD,EAA6DpP,SAA7D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,kBAA5B,EAAgD,WAAhD,EAA6DpP,SAA7D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,oBAA1C,EAAgEpP,SAAhE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,qBAA1C,EAAiEpP,SAAjE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,eAA1C,EAA2DpP,SAA3D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,mBAA1C,EAA+DpP,SAA/D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,kBAA1C,EAA8DpP,SAA9D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,wBAA1C,EAAoEpP,SAApE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,4BAA1C,EAAwEpP,SAAxE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,wBAA1C,EAAoEpP,SAApE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,YAA1C,EAAwDpP,SAAxD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,WAA1C,EAAuDpP,SAAvD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,YAA5B,EAA0C,WAA1C,EAAuDpP,SAAvD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,aAA5B,EAA2C,uBAA3C,EAAoEpP,SAApE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,eAA5B,EAA6C,YAA7C,EAA2DpP,SAA3D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,eAA5B,EAA6C,WAA7C,EAA0DpP,SAA1D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,eAA5B,EAA6C,WAA7C,EAA0DpP,SAA1D,CAAN;AACA,UAAMoP,iBAAA,CAA4B,kBAA5B,EAAgD,uBAAhD,EAAyEpP,SAAzE,CAAN;AACA,UAAMoP,iBAAA,CAA4B,kBAA5B,EAAgD,2BAAhD,EAA6EpP,SAA7E,CAAN;AACA,UAAMoP,iBAAA,CAA4B,UAA5B,EAAwC,YAAxC,EAAsDpP,SAAtD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,UAA5B,EAAwC,WAAxC,EAAqDpP,SAArD,CAAN;AACA,UAAMoP,iBAAA,CAA4B,UAA5B,EAAwC,WAAxC,EAAqDpP,SAArD,CAAN;AACA;;AAtDC,CA3kBe,EAkoBf;AACFmP,eAAa,EAAE,8BADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,aAASwF,WAAT,CAAqB/vC,IAArB,EAA2BgwC,IAA3B,EAAiC1vC,GAAjC,EAAsC;AACrC,UAAI,OAAO0vC,IAAP,KAAgB,QAAhB,IAA4B,CAACA,IAAI,CAAC/uC,MAAlC,IAA6C,qBAAD,CAAwBuZ,IAAxB,CAA6Bw1B,IAA7B,CAAhD,EAAoF;;AACpF,UAAIhwC,IAAI,KAAK,WAAb,EAA0B;AACzB,eAAO;AAAE,WAACM,GAAD,GAAQ,IAAG0vC,IAAK;AAAlB,SAAP;AACA,OAFD,MAEO,IAAI,CAAC,WAAD,EAAc,QAAd,EAAwB,WAAxB,EAAqC,WAArC,EAAkD,UAAlD,EAA8DxzB,QAA9D,CAAuExc,IAAvE,CAAJ,EAAkF;AACxF,eAAO;AAAE,WAACM,GAAD,GAAQ,MAAK0vC,IAAK;AAApB,SAAP;AACA;AACD;;AAED,UAAMz6B,OAAO,GAAG,EAAhB;AACA,UAAM06B,CAAC,GAAG,MAAMhH,kCAAO,CAACN,UAAR,CAAmB,yBAAnB,EAA8C,OAAY,EAAZ,CAA9C,EAA+DjC,MAA/D,EAAhB;;AACA,SAAK,MAAM,CAACjS,CAAD,EAAIzU,CAAJ,CAAX,IAAqBxgB,MAAM,CAAC+V,OAAP,CAAe06B,CAAf,CAArB,EAAwC;AACvC,UAAI,OAAOjwB,CAAP,KAAa,SAAjB,EAA4B;AAC5B,YAAMkwB,OAAO,GAAGD,CAAC,CAAE,wBAAuBxb,CAAE,EAA3B,CAAD,IAAkC,KAAlD;AACA,YAAMrlB,KAAK,GAAGmG,OAAO,CAAE,cAAakf,CAAE,EAAjB,CAAP,GAA6B;AAAE0b,eAAO,EAAE,EAAX;AAAeD;AAAf,OAA3C;;AACA,WAAK,MAAM,CAACviC,EAAD,EAAK;AAAEyiC,iBAAF;AAAazU,aAAb;AAAoBr7B;AAApB,OAAL,CAAX,IAA8Cd,MAAM,CAAC+V,OAAP,CAAeyK,CAAC,CAACmwB,OAAF,IAAa,EAA5B,CAA9C,EAA+E;AAC9E,cAAMnwC,IAAI,GAAGM,GAAb;AACA8O,aAAK,CAAC+gC,OAAN,CAAcxiC,EAAd,IAAoB;AAAE3N,cAAF;AAAQ27B,eAAR;AAAeyU,mBAAf;AAA0B,aAAGL,WAAW,CAAC/vC,IAAD,EAAOowC,SAAP,EAAkB,WAAlB;AAAxC,SAApB;AACA;AACD;;AACD,UAAMnH,kCAAO,CAACpC,WAAR,CAAoBtxB,OAApB,CAAN;AAEA,UAAM;AAAE86B;AAAF,QAAoB,OAAMjF,OAAA,CAAgB,aAAhB,CAAN,KAAwC,EAAlE;;AACA,QAAIiF,aAAJ,EAAmB;AAClB,WAAK,MAAM;AAAE1mC;AAAF,OAAX,IAAwB0mC,aAAa,CAACtwC,KAAd,IAAuB,EAA/C,EAAoD;AACnD4J,YAAI,CAAC2mC,EAAL,CAAQhrB,OAAR,CAAgB,SAASirB,iBAAT,CAA2BvwB,CAA3B,EAA8B;AAC7C,cAAIA,CAAC,CAAChgB,IAAF,KAAW,OAAf,EAAwBggB,CAAC,CAACswB,EAAF,CAAKhrB,OAAL,CAAairB,iBAAb,EAAxB,KACK/wC,MAAM,CAAC6iC,MAAP,CAAcriB,CAAd,EAAiB+vB,WAAW,CAAC/vB,CAAC,CAAChgB,IAAH,EAASggB,CAAC,CAACgwB,IAAX,EAAiB,MAAjB,CAA5B;AACL,SAHD;AAIA;;AACD,YAAM5E,mBAAA,CAAY,aAAZ,EAA2B,gBAA3B,EAA6CiF,aAAa,CAACtwC,KAA3D,CAAN;AACA;AACD;;AAnCC,CAloBe,EAsqBf;AACFisC,eAAa,EAAE,sCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM;AAAEiG,oBAAF;AAAkBC;AAAlB,QAAqC,OAAMrF,OAAA,CAAgB,aAAhB,CAAN,KAAwC,EAAnF;AACA,QAAI73B,CAAC,GAAG1E,IAAI,CAACC,GAAL,EAAR;;AACA,SAAK,MAAMkR,CAAX,IAAgB,CAAC,IAAKwwB,cAAc,IAAIA,cAAc,CAACzwC,KAAlC,IAA4C,EAAhD,CAAD,EAAsD,IAAK0wC,cAAc,IAAIA,cAAc,CAAC1wC,KAAlC,IAA4C,EAAhD,CAAtD,CAAhB,EAA4H;AAC3H,YAAM;AAAE4J,YAAI,EAAE;AAAE4d;AAAF,SAAR;AAAkBmpB;AAAlB,UAA+B1wB,CAArC;AACAA,OAAC,CAAC2wB,IAAF,GAAS;AAAED,gBAAF;AAAYnpB;AAAZ,OAAT;AACAvH,OAAC,CAACrS,EAAF,GAAQ,gBAAeygB,MAAM,CAAC7a,CAAC,EAAF,CAAM,EAAnC;AAEA;;AACD,QAAIi9B,cAAJ,EAAoB,MAAMpF,mBAAA,CAAY,aAAZ,EAA2B,gBAA3B,EAA6CoF,cAAc,CAACzwC,KAA5D,CAAN;AACpB,QAAI0wC,cAAJ,EAAoB,MAAMrF,mBAAA,CAAY,aAAZ,EAA2B,gBAA3B,EAA6CqF,cAAc,CAAC1wC,KAA5D,CAAN;AACpB;;AAbC,CAtqBe,EAorBf;AACFisC,eAAa,EAAE,0CADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAMqG,YAAY,GAAGpxC,MAAM,CAAC+V,OAAP,CAAe,MAAM0zB,kCAAO,CAACN,UAAR,CAAmB,MAAnB,EAA2B,OAAY,EAAZ,CAA3B,EAA4CjC,MAA5C,EAArB,EACnBvgC,MADmB,CACZ,CAAC,GAAG;AAAE0pC;AAAF,KAAH,CAAD,KAAqBA,OADT,EAEnBxrC,GAFmB,CAEf,CAAC,CAAC28B,QAAD,CAAD,KAAgB,CAACA,QAAD,CAFD,CAArB;AAGA,UAAMoK,mBAAA,CAAY,aAAZ,EAA2B,OAA3B,EAAoCwF,YAApC,CAAN;AACA;;AAPC,CAprBe,EA4rBf;AACF5E,eAAa,EAAE,qCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,aAASsG,cAAT,CAAwBV,OAAO,GAAG,EAAlC,EAAsC;AACrC,WAAK,MAAM,CAACxiC,EAAD,EAAKxH,MAAL,CAAX,IAA2B3G,MAAM,CAAC+V,OAAP,CAAe46B,OAAf,CAA3B,EAAoD;AACnD,YAAI,CAACrwC,mCAAQ,CAACqG,MAAD,CAAb,EAAuB;AACtB,iBAAOgqC,OAAO,CAACxiC,EAAD,CAAd;AACA;AACA;;AACDxH,cAAM,CAAC2qC,OAAP,GAAiB;AAAE1U,cAAI,EAAEj2B,MAAM,CAACw1B,KAAP,KAAiB,IAAzB;AAA+B,aAAGx1B,MAAM,CAAC4qC;AAAzC,SAAjB;AACA,YAAI5qC,MAAM,CAACw1B,KAAP,KAAiB,IAArB,EAA2Bx1B,MAAM,CAACw1B,KAAP,GAAe,IAAf;AAC3B;AACD;;AAED,QAAIsU,CAAC,GAAGhH,kCAAO,CAACN,UAAR,CAAmB,yBAAnB,EAA8C,OAAY,EAAZ,CAA9C,CAAR;;AACA,SAAK,MAAM,CAAClU,CAAD,EAAIzU,CAAJ,CAAX,IAAqBxgB,MAAM,CAAC+V,OAAP,CAAe,MAAM06B,CAAC,CAACvJ,MAAF,EAArB,CAArB,EAAuD;AACtD,UAAIjS,CAAC,CAACzT,UAAF,CAAa,gBAAb,KAAkCyT,CAAC,CAACzT,UAAF,CAAa,aAAb,CAAtC,EAAmE;AAClE6vB,sBAAc,CAAC7wB,CAAD,CAAd;AACA,cAAMiwB,CAAC,CAAC94B,GAAF,CAAMsd,CAAN,EAASzU,CAAT,CAAN;AACA,OAHD,MAGO;AACN,cAAMiwB,CAAC,CAAC74B,MAAF,CAASqd,CAAT,CAAN;AACA;AACD;;AAEDwb,KAAC,GAAGhH,kCAAO,CAACN,UAAR,CAAmB,aAAnB,EAAkC,OAAY,EAAZ,CAAlC,CAAJ;;AACA,SAAK,MAAM,CAAClU,CAAD,EAAIzU,CAAJ,CAAX,IAAqBxgB,MAAM,CAAC+V,OAAP,CAAe,MAAM06B,CAAC,CAACvJ,MAAF,EAArB,CAArB,EAAuD;AACtD,UAAI1mB,CAAJ,EAAO;AAEN,YAAIA,CAAC,CAAC8wB,OAAN,EAAe;AACfD,sBAAc,CAAC7wB,CAAC,CAACmwB,OAAH,CAAd;AACAnwB,SAAC,CAACgxB,QAAF,GAAaniC,IAAI,CAACC,GAAL,EAAb;AACA,cAAMmhC,CAAC,CAAC94B,GAAF,CAAMsd,CAAN,EAASzU,CAAT,CAAN;AACA,OAND,MAMO;AACN,cAAMiwB,CAAC,CAAC74B,MAAF,CAASqd,CAAT,CAAN;AACA;AACD;AACD;;AApCC,CA5rBe,EAiuBf;AACFuX,eAAa,EAAE,oCADb;;AAEF,QAAMzB,EAAN,GAAW,CAA0D;;AAFnE,CAjuBe,EAouBf;AACFyB,eAAa,EAAE,mCADb;;AAEF,QAAMzB,EAAN,GAAW,CAAkE;;AAF3E,CApuBe,EAuuBf;AACFyB,eAAa,EAAE,qCADb;;AAEF,QAAMzB,EAAN,GAAW;AAKV,aAAS0G,aAAT,CAAuBd,OAAvB,EAAuC;AACtC,YAAMe,SAAS,GAAGf,OAAO,CAACvB,KAAR,CAAc,CAAC,GAAGzoC,MAAH,CAAD,KAAgBA,MAAM,CAAC2qC,OAAP,IAAkBtxC,MAAM,CAACqZ,IAAP,CAAY1S,MAAM,CAAC2qC,OAAnB,EAA4B7vC,MAA5B,KAAuC,CAAzD,IAA8DkF,MAAM,CAAC2qC,OAAP,CAAe1U,IAA3G,CAAlB;;AACA,UAAI8U,SAAJ,EAAe;AACd,aAAK,MAAM,CAACvjC,EAAD,EAAKxH,MAAL,CAAX,IAA2BgqC,OAA3B,EAAoC;AACnC,cAAI,CAAC,OAAD,EAAU,YAAV,EAAwB,UAAxB,EAAoC,SAApC,EAA+C,OAA/C,EAAwD3zB,QAAxD,CAAiE7O,EAAjE,CAAJ,EAA0E;AAC1ExH,gBAAM,CAAC2qC,OAAP,GAAiB;AAAE1U,gBAAI,EAAE;AAAR,WAAjB;AACA;;AACD,eAAO,IAAP;AACA;AACD;;AAED,QAAI6T,CAAC,GAAGhH,kCAAO,CAACN,UAAR,CAAmB,yBAAnB,EAA8C,OAAY,EAAZ,CAA9C,CAAR;;AACA,SAAK,MAAM,CAAClU,CAAD,EAAIzU,CAAJ,CAAX,IAAqBxgB,MAAM,CAAC+V,OAAP,CAAe,MAAM06B,CAAC,CAACvJ,MAAF,EAArB,CAArB,EAAuD;AACtD,UAAIuK,aAAa,CAACzxC,MAAM,CAAC+V,OAAP,CAAeyK,CAAf,CAAD,CAAjB,EAAsC,MAAMiwB,CAAC,CAAC94B,GAAF,CAAMsd,CAAN,EAASzU,CAAT,CAAN;AACtC;;AAEDiwB,KAAC,GAAGhH,kCAAO,CAACN,UAAR,CAAmB,aAAnB,EAAkC,OAAY,EAAZ,CAAlC,CAAJ;;AACA,SAAK,MAAM,CAAClU,CAAD,EAAIzU,CAAJ,CAAX,IAAqBxgB,MAAM,CAAC+V,OAAP,CAAe,MAAM06B,CAAC,CAACvJ,MAAF,EAArB,CAArB,EAAuD;AACtD,YAAMyJ,OAAO,GAAGnwB,CAAC,IAAIA,CAAC,CAACmwB,OAAP,IAAkB3wC,MAAM,CAAC+V,OAAP,CAAeyK,CAAC,CAACmwB,OAAjB,CAAlC;;AACA,UAAIA,OAAO,IAAIA,OAAO,CAAClvC,MAAvB,EAA+B;AAC9B,YAAIgwC,aAAa,CAACd,OAAD,CAAjB,EAA4B,MAAMF,CAAC,CAAC94B,GAAF,CAAMsd,CAAN,EAASzU,CAAT,CAAN;AAC5B,OAFD,MAEO;AACN,cAAMiwB,CAAC,CAAC74B,MAAF,CAASqd,CAAT,CAAN;AACA;AACD;AACD;;AAhCC,CAvuBe,EAwwBf;AACFuX,eAAa,EAAE,yCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM4G,gBAAgB,GAAG,OAAM/F,mBAAA,CAAY,YAAZ,EAA0B,YAA1B,CAAN,MACxB,MAAMA,mBAAA,CAAY,aAAZ,EAA2B,iBAA3B,CADkB,CAAzB;AAGA,QAAIgG,UAAU,GAAGD,gBAAgB,GAAGA,gBAAgB,CAACpxC,KAApB,GAA4B,IAA7D;AAGA,UAAMsxC,gBAAgB,GAAG,MAAMjG,mBAAA,CAAY,aAAZ,EAA2B,kBAA3B,CAA/B;AACA,QAAIiG,gBAAgB,IAAIA,gBAAgB,CAACtxC,KAAjB,KAA2B,aAAnD,EAAkEqxC,UAAU,GAAG,KAAb;AAElE,UAAMhG,mBAAA,CAAY,aAAZ,EAA2B,kBAA3B,EAA+CgG,UAAU,GAAG,MAAH,GAAY,aAArE,CAAN;AACA;;AAbC,CAxwBe,EAsxBf;AACFpF,eAAa,EAAE,wCADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,UAAA,CAAqB,aAArB,EAAoC,oCAApC,EAA0E,sBAA1E,EAAkG,sBAAlG,CAAN;AACA,UAAMA,UAAA,CAAqB,aAArB,EAAoC,wBAApC,EAA8D,sBAA9D,EAAsF,UAAtF,CAAN;AACA,UAAM4D,OAAO,GAAG,MAAM5G,kCAAO,CAACnyB,GAAR,CAAY,+CAAZ,CAAtB;;AACA,QAAI+4B,OAAJ,EAAa;AACZ,YAAM5G,kCAAO,CAAC9xB,GAAR,CAAY,yCAAZ,EAAuD04B,OAAvD,CAAN;AACA,YAAM5G,kCAAO,CAAC7xB,MAAR,CAAe,+CAAf,CAAN;AACA;AACD;;AAVC,CAtxBe,EAiyBf;AACF40B,eAAa,EAAE,wBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM0B,YAAA,CAAuB,iBAAvB,EAA0C,eAA1C,EAA2D,GAA3D,EAAgE,IAAhE,CAAN;AACA,UAAMhD,kCAAO,CAAC7xB,MAAR,CAAe,mCAAf,CAAN;AACA,UAAM6xB,kCAAO,CAAC7xB,MAAR,CAAe,sCAAf,CAAN;AACA,UAAM6xB,kCAAO,CAAC7xB,MAAR,CAAe,2CAAf,CAAN;AACA;;AAPC,CAjyBe,EAyyBf;AACF40B,eAAa,EAAE,2BADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAM+G,SAAS,GAAG,EAAlB;;AACA,SAAK,MAAMC,QAAX,IAAuB,OAAMnG,QAAA,CAAiB,OAAjB,EAA0B,WAA1B,CAAN,KAAgD,EAAvE,EAA2E;AAC1E,YAAMz9B,EAAE,GAAG4jC,QAAQ,CAAC,CAAD,CAAR,GAAcA,QAAQ,CAAC,CAAD,CAAR,CAAYn3B,OAAZ,CAAoB,2BAApB,EAAiD,EAAjD,CAAzB;AACA,UAAI,CAACzM,EAAD,IAAO2jC,SAAS,CAAC3jC,EAAD,CAApB,EAA0B;AAC1B2jC,eAAS,CAAC3jC,EAAD,CAAT,GAAgB4jC,QAAhB;AACA;;AAED,UAAMnG,mBAAA,CAAY,OAAZ,EAAqB,WAArB,EAAkC5rC,MAAM,CAACiT,MAAP,CAAc6+B,SAAd,CAAlC,CAAN;AACA;;AAXC,CAzyBe,EAqzBf;AACFtF,eAAa,EAAE,sBADb;;AAEF,QAAMzB,EAAN,GAAW;AACVtB,sCAAO,CAAC7xB,MAAR,CAAe,iCAAf;AAEA,UAAMk6B,SAAS,GAAG,EAAlB;;AACA,SAAK,MAAMC,QAAX,IAAuB,OAAMnG,QAAA,CAAiB,eAAjB,EAAkC,mBAAlC,CAAN,KAAgE,EAAvF,EAA2F;AAC1F,YAAMz9B,EAAE,GAAI,GAAE4jC,QAAQ,CAAC,CAAD,CAAI,IAAGA,QAAQ,CAAC,CAAD,CAAI,EAAzC;AACA,UAAI,CAAC5jC,EAAD,IAAO2jC,SAAS,CAAC3jC,EAAD,CAApB,EAA0B;AAC1B2jC,eAAS,CAAC3jC,EAAD,CAAT,GAAgB,CAACA,EAAD,EAAK4jC,QAAQ,CAAC,CAAD,CAAb,EAAkBA,QAAQ,CAAC,CAAD,CAA1B,CAAhB;AACA;;AAED,UAAMnG,mBAAA,CAAY,eAAZ,EAA6B,mBAA7B,EAAkD5rC,MAAM,CAACiT,MAAP,CAAc6+B,SAAd,CAAlD,CAAN;AACA;;AAbC,CArzBe,EAm0Bf;AACFtF,eAAa,EAAE,yBADb;;AAEF,QAAMzB,EAAN,GAAW;AACV,UAAMiH,eAAe,GAAGvI,kCAAO,CAACN,UAAR,CAAmB,eAAnB,EAAoC,MAAO,IAA3C,CAAxB;AACA,UAAM8I,QAAQ,GAAGjyC,MAAM,CAACqZ,IAAP,CAAY,MAAM24B,eAAe,CAAC9K,MAAhB,EAAlB,CAAjB;AACA+K,YAAQ,CAACvT,IAAT,CAAc,CAACpwB,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAAC4jC,aAAF,CAAgB3jC,CAAhB,EAAmBrN,SAAnB,EAA8B;AAAEixC,eAAS,EAAE;AAAb,KAA9B,CAAxB;AACA,UAAM1I,kCAAO,CAAC9xB,GAAR,CAAY,gBAAZ,EAA8Bs6B,QAAQ,CAACjxB,KAAT,CAAe,CAAC,CAAhB,EAAmB,CAAnB,KAAyB,IAAvD,CAAN;AAAoE,UAAMgxB,eAAe,CAACnK,cAAhB,CAA+BoK,QAA/B,CAAN;AACpE;;AAPC,CAn0Be,CAAnB;;AA+0BA,MAAMG,gBAAgB,GAAGC,kBAAkB,EAA3C;;AAEO,eAAeC,OAAf,GAAyB;AAC/B,QAAM/F,UAAU,GAAG,MAAM6F,gBAAzB;AACA,MAAI,CAAC7F,UAAU,CAAC9qC,MAAhB,EAAwB;AAExB,QAAM6uB,yCAAU,CAACic,UAAD,EAAa,MAAMgG,gBAAN,IAA0B;AACtDxlC,WAAO,CAAC4lB,GAAR,CAAY,aAAZ,EAA2B4f,gBAAgB,CAAC/F,aAA5C;AACA,UAAM+F,gBAAgB,CAACxH,EAAjB,EAAN;AAEAtB,sCAAO,CAAC9xB,GAAR,CAAY,mBAAZ,EAAiC46B,gBAAgB,CAAC/F,aAAlD;AACA,GALe,CAAhB;AAOAz/B,SAAO,CAAC4lB,GAAR,CAAY,qCAAZ;AACA;;AAED,eAAe0f,kBAAf,GAAoC;AACnC,QAAMG,mBAAmB,GAAG,MAAMC,sBAAsB,EAAxD;;AAGA,MAAID,mBAAmB,KAAK,KAA5B,EAAmC;AAGlC/I,sCAAO,CAAC9xB,GAAR,CAAY,mBAAZ,EAAiC40B,kBAAU,CAACvrB,KAAX,CAAiB,CAAC,CAAlB,EAAqB,CAArB,EAAwBwrB,aAAzD;AACA,WAAO,EAAP;AACA;;AAED,SAAOnN,wBAAc,CAACkN,kBAAD,EAAa,CAAC;AAAEC;AAAF,GAAD,KAAuBA,aAAa,KAAKgG,mBAAtD,CAArB;AACA;;AAID,eAAeC,sBAAf,GAAwE;AACvE,QAAMC,iBAAiB,GAAG,MAAMjJ,kCAAO,CAACnyB,GAAR,CAAY,mBAAZ,CAAhC;;AAEA,MAAI,OAAOo7B,iBAAP,KAA6B,WAAjC,EAA8C;AAE7C3lC,WAAO,CAAC4lC,IAAR,CAAa,iCAAb;AACA,WAAO,KAAP;AACA,GAJD,MAIO,IAAID,iBAAiB,KAAK,IAA1B,EAAgC;AAEtC,QAAK,MAAD,CAAS13B,IAAT,CAAc03B,iBAAd,CAAJ,EAAsC;AAGrC,aADmC,CAAC,SAAD,EAAY,SAAZ,CAC5B,CAA2BA,iBAAiB,GAAG,CAA/C,CAAP;AACA,KAJD,MAIO,IAAI,CAACnG,kBAAU,CAAC1nC,GAAX,CAAeuvB,CAAC,IAAIA,CAAC,CAACoY,aAAtB,EAAqCxvB,QAArC,CAA8C01B,iBAA9C,CAAL,EAAuE;AAE7E3lC,aAAO,CAAC4lC,IAAR,CAAc,0DAAyDD,iBAAkB,EAAzF;AACA,aAAO,KAAP;AACA,KAJM,MAIA;AAEN,aAAOA,iBAAP;AACA;AACD,GAdM,MAcA,IAAI,MAAMjJ,kCAAO,CAAC55B,GAAR,CAAY,sBAAZ,CAAV,EAA+C;AAErD,WAAO,SAAP;AACA,GAHM,MAGA,IACN,OAAM45B,kCAAO,CAAC55B,GAAR,CAAY,sBAAZ,CAAN,MACA,MAAM45B,kCAAO,CAAC55B,GAAR,CAAY,sBAAZ,CADN,MAEA,MAAM45B,kCAAO,CAAC55B,GAAR,CAAY,sBAAZ,CAFN,MAGA,MAAM45B,kCAAO,CAAC55B,GAAR,CAAY,sBAAZ,CAHN,MAIA,MAAM45B,kCAAO,CAAC55B,GAAR,CAAY,oBAAZ,CAJN,CADM,EAML;AAED,WAAO,IAAP;AACA,GATM,MASA;AAEN,WAAO,KAAP;AACA;AACD,C;;;;AC35BD;AAEA;AAEA;AAEAyiC,OAAO;AAGP1b,WAAW,CAAC,eAAD,EAAkB0b,OAAlB,CAAX,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMM,UAAU,GAAG,IAAIttB,OAAJ,EAAnB;AACA,MAAMutB,MAAM,GAAG,IAAI1qC,GAAJ,EAAf;AACA,MAAM2qC,YAAY,GAAG,IAAI,MAAM,EAAV,EAArB;AAOO,MAAMC,WAAN,CAAY;AASL,SAANF,MAAM,CAACG,GAAD,EAAkB;AAC9B,WAAOD,WAAK,CAACE,aAAN,CAAoBD,GAApB,EAAyBnuC,GAAzB,CAA6BK,CAAC,IAAI6tC,WAAK,CAACG,WAAN,CAAkBhuC,CAAlB,CAAlC,CAAP;AACA;;AAE0B,SAApBiuC,oBAAoB,CAACH,GAAD,EAAwB;AAClD,WAAOD,WAAK,CAACE,aAAN,CAAoBD,GAApB,EAAyBrsC,MAAzB,CAAgC6Z,CAAC,IAAIA,CAAC,CAAChW,YAAvC,CAAP;AACA;;AAEmB,SAAb4oC,aAAa,CAACJ,GAAD,EAAkB;AACrC,WAAO7hB,kCAAS,CAAC4hB,WAAK,CAACI,oBAAN,CAA2BH,GAA3B,CAAD,EAAkCvuC,GAAG,IAAI;AACxD,YAAMkL,KAAK,GAAGojC,WAAK,CAACxtC,IAAN,CAAWd,GAAX,CAAd;AACA,UAAIkL,KAAJ,EAAW,OAAO,CAACA,KAAD,CAAP;AACX,KAHe,CAAhB;AAIA;;AAYiB,SAAXujC,WAAW,CAACxnC,OAAD,EAAsC;AACvD,UAAMiE,KAAK,GAAGojC,WAAK,CAACxtC,IAAN,CAAWmG,OAAX,CAAd;;AACA,QAAI,CAACiE,KAAL,EAAY;AACX,YAAM,IAAIhI,KAAJ,CAAW,kCAAiCinB,MAAM,CAACljB,OAAD,CAAU,EAA5D,CAAN;AACA;;AACD,WAAOiE,KAAP;AACA;;AAEU,SAAJpK,IAAI,CAACmG,OAAD,EAAwC;AAClD,QAAI,CAACA,OAAL,EAAc,OAAO,IAAP;AAEd,QAAIA,OAAO,YAAYqnC,WAAvB,EAA8B,OAAOrnC,OAAP;AAE9B,UAAM2nC,YAAY,GAAG3nC,OAAO,CAAC6pB,OAAR,CAAgBwd,WAAK,CAACO,aAAtB,CAArB;AACA,QAAI,CAACD,YAAL,EAAmB,OAAO,IAAP;AAEnB,QAAIT,UAAU,CAAC/iC,GAAX,CAAewjC,YAAf,CAAJ,EAAkC,OAAOT,UAAU,CAACt7B,GAAX,CAAe+7B,YAAf,CAAP;AAElC,UAAMzjC,KAAK,GAAGyjC,YAAY,CAACvsC,aAAb,CAA2BisC,WAAK,CAACQ,aAAjC,KAAmDF,YAAjE;AACA,UAAM1jC,KAAK,GAAG,IAAIojC,WAAJ,CAAUD,YAAV,EAAwBzsC,gCAAQ,CAACgtC,YAAD,EAAe/sC,WAAf,CAAhC,EAA6DsJ,KAA7D,CAAd;AAEAmjC,eAAK,CAACE,aAAN,CAAoBvpC,KAApB,CAA0BC,KAA1B;AACAipC,cAAU,CAACj7B,GAAX,CAAe07B,YAAf,EAA6B1jC,KAA7B;AACAkjC,UAAM,CAACzqC,GAAP,CAAWuH,KAAX;AAEA,WAAOA,KAAP;AACA;;AAEDyZ,aAAW,CAAC8c,KAAD,EAA6Bv2B,KAA7B,EAAiDC,KAAjD,EAAqE;AAAA,SAtChFlE,OAsCgF;AAAA,SArChFkE,KAqCgF;AAAA,SAnChFvI,MAmCgF;AAAA,SAlChF7B,QAkCgF,GAlCrE,IAAI2C,GAAJ,EAkCqE;AAAA,SA/BhFqrC,KA+BgF,GA9B/E;AAAEC,eAAS,EAAE,KAAb;AAAoB/C,aAAO,EAAE,EAA7B;AAAiC5gC,eAAS,EAAE,EAA5C;AAAgD4jC,UAAI,EAAE,IAAIj8B,GAAJ;AAAtD,KA8B+E;AAAA,SAyDhFk8B,wBAzDgF,GAyDrDv7B,yDAA0B,CAAC,MAAM;AAC3D,WAAK1M,OAAL,CAAagW,SAAb,CAAuBkyB,MAAvB,CAA8B,mBAA9B,EAAmD,KAAKC,gBAAL,CAAsB,IAAtB,MAGlD,KAAKnoC,OAAL,CAAahG,OAAb,CAAqB,+BAArB,KAEArF,KAAK,CAACkF,IAAN,CAAW,KAAKC,QAAhB,EAA0BgP,IAA1B,CAA+BgM,CAAC,IAAI,CAACA,CAAC,CAACqzB,gBAAF,EAArC,CALkD,CAAnD;AAOA,KARoD,CAzD2B;;AAC/E,QAAI3N,KAAK,KAAK4M,YAAd,EAA4B;AAC3B,YAAM,IAAInrC,KAAJ,CAAU,gEAAV,CAAN;AACA;;AAED,SAAK+D,OAAL,GAAeiE,KAAf;AACA,SAAKC,KAAL,GAAaA,KAAb;AAEA,UAAMkkC,EAAE,GAAG,KAAKpoC,OAAL,CAAaqoC,aAAxB;AACA,SAAK1sC,MAAL,GAAcysC,EAAE,IAAIf,WAAK,CAACxtC,IAAN,CAAYuuC,EAAD,CAAUve,OAAV,CAAkB,QAAlB,CAAX,CAApB;AACA,QAAI,KAAKluB,MAAT,EAAiB,KAAKA,MAAL,CAAY7B,QAAZ,CAAqB4C,GAArB,CAAyB,IAAzB;AACjB;;AAED4rC,UAAQ,GAAG;AACV,QAAI,KAAKR,KAAL,CAAWC,SAAf,EAA0B;AAC1B,SAAKD,KAAL,CAAWC,SAAX,GAAuB,IAAvB;AACA,SAAKD,KAAL,CAAW1jC,SAAX,CAAqBjL,GAArB,CAAyBsS,EAAE,IAAIA,EAAE,EAAjC;AACA,SAAKq8B,KAAL,CAAW9C,OAAX,CAAmB7rC,GAAnB,CAAuBsS,EAAE,IAAIA,EAAE,EAA/B;AACA;;AAED88B,qBAAmB,CAACC,MAAc,GAAG,EAAlB,EAAsB;AACxC,UAAMjB,aAAa,GAAGF,WAAK,CAACE,aAAN,EAAtB;AACA,UAAMkB,GAAG,GAAGlB,aAAa,CAAC9/B,OAAd,CAAsB,KAAKzH,OAA3B,CAAZ;AACA,UAAMH,GAAG,GAAGF,IAAI,CAACC,GAAL,CAAS6oC,GAAG,GAAGD,MAAf,EAAuB,CAAvB,CAAZ;AACA,UAAM5oC,GAAG,GAAGD,IAAI,CAACE,GAAL,CAAS4oC,GAAG,GAAGD,MAAf,EAAuBjB,aAAa,CAACxxC,MAAd,GAAuB,CAA9C,CAAZ;;AACA,SAAK,IAAIsS,CAAC,GAAGxI,GAAb,EAAkBwI,CAAC,IAAIzI,GAAvB,EAA4ByI,CAAC,EAA7B,EAAiC;AAChC,YAAMpE,KAAK,GAAGojC,WAAK,CAACG,WAAN,CAAkBD,aAAa,CAACl/B,CAAD,CAA/B,CAAd;AACA,UAAI,CAACpE,KAAK,CAAC6jC,KAAN,CAAYC,SAAb,IAA0B9jC,KAAK,CAACykC,SAAN,EAA9B,EAAiDzkC,KAAK,CAACqkC,QAAN;AACjD;AACD;;AAEDtnC,QAAM,GAAG;AAER,UAAMA,MAAM,GAAGvB,gDAAyB,CAAC,KAAKyE,KAAN,CAAzB,IAAyC;AAAEvD,QAAE,EAAE,KAAKuD,KAAL,CAAWvF,qBAAX,GAAmCI;AAAzC,KAAxD;AACA,QAAI,CAACiC,MAAL,EAAa;AACbG,yBAAqB,CAAC,MAAM;AAC3B,UAAI,CAAC,KAAK+C,KAAL,CAAWpF,YAAhB,EAA8B;AAC9B4B,4CAAe,CAAC,KAAKwD,KAAN,EAAa1O,SAAb,EAAwB;AAAEoL,mBAAW,EAAE,MAAf;AAAuBI;AAAvB,OAAxB,CAAf;AACA,KAHoB,CAArB;AAIA;;AAED2nC,eAAa,CAACp1B,KAAD,EAAW;AACvB,SAAKvT,OAAL,CAAagW,SAAb,CAAuBkyB,MAAvB,CAA8B,uBAA9B,EAAuD,CAAC,CAAC30B,KAAzD;;AAEA,QAAI,KAAKq1B,SAAL,EAAJ,EAAsB;AACrB,WAAKX,wBAAL;;AACA,WAAK,MAAMhO,CAAX,IAAgB,KAAK4O,UAAL,EAAhB,EAAmC5O,CAAC,CAACgO,wBAAF;AACnC;AACD;;AAEDa,kBAAgB,CAACjlC,QAAD,EAA+B;AAC9C,SAAK,MAAMklC,GAAX,IAAkB,KAAK/oC,OAAL,CAAazD,gBAAb,CAA8B,yCAA9B,CAAlB,EAA4FwsC,GAAG,CAACnqC,MAAJ;;AAC5F,SAAKoB,OAAL,CAAagpC,OAAb,CAAqB,GAAGnlC,QAAxB;AACA;;AAcDolC,gBAAc,CAAChyB,KAAD,EAAiC;AAC9C,QAAI,CAAC,KAAKyxB,SAAL,EAAD,IAAqB,CAACzxB,KAAK,CAACyxB,SAAN,EAA1B,EAA6C;AAC7C,WAAQzxB,KAAK,CAAC/S,KAAN,CAAYglC,uBAAZ,CAAoC,KAAKhlC,KAAzC,IAAkD1J,IAAI,CAAC2uC,2BAAxD,GAAuF,IAAvF,GAA8F,MAArG;AACA;;AAEDC,cAAY,GAAU;AACrB,QAAInlC,KAAK,GAAG,IAAZ;AAEA,QAAIolC,OAAO,GAAG,KAAKrpC,OAAnB;;AACA,WAAQqpC,OAAO,GAAGA,OAAO,CAAChB,aAA1B,EAA0C;AACzC,UAAIgB,OAAO,CAACrvC,OAAR,CAAgBqtC,WAAK,CAACO,aAAtB,CAAJ,EAA0C3jC,KAAK,GAAGtJ,gCAAQ,CAAC0uC,OAAD,EAAUzuC,WAAV,CAAhB;AAC1C;;AAED,WAAOysC,WAAK,CAACG,WAAN,CAAkBvjC,KAAlB,CAAP;AACA;;AAED4kC,YAAU,GAAY;AACrB,UAAMS,OAAO,GAAG,EAAhB;AACA,QAAIC,KAAK,GAAG,IAAZ;;AACA,WAAQA,KAAK,GAAGA,KAAK,CAAC5tC,MAAtB,EAA+B2tC,OAAO,CAAC/wC,IAAR,CAAagxC,KAAb;;AAC/B,WAAOD,OAAP;AACA;;AAEDE,SAAO,CAAC;AAAE1oC,aAAS,GAAG,MAAd;AAAsB2oC,uBAAmB,GAAG;AAA5C,MAAsH,EAAvH,EAA2HtC,MAAqB,GAAGE,WAAK,CAACE,aAAN,EAAnJ,EAAkL;AACxL,QAAIzxC,KAAK,GAAGqxC,MAAM,CAAC1/B,OAAP,CAAe,KAAKzH,OAApB,CAAZ;AACA,QAAIxE,MAAJ;;AAEA,OAAG;AACF1F,WAAK,IAAIgL,SAAS,KAAK,MAAd,GAAuB,CAAvB,GAA2B,CAAC,CAArC;AACA,YAAM4oC,OAAO,GAAGvC,MAAM,CAACrxC,KAAD,CAAtB;AACA0F,YAAM,GAAGkuC,OAAT;AACA,UAAI,CAACluC,MAAL,EAAa,OAAO,IAAP;AACb,UAAIiuC,mBAAmB,IAAIjuC,MAAM,CAACxB,OAAP,CAAe,eAAf,CAA3B,EAA4D;AAC5D,KAND,QAMS,CAACwB,MAAM,CAACsD,YANjB;;AAQA,WAAOuoC,WAAK,CAACxtC,IAAN,CAAW2B,MAAX,CAAP;AACA;;AAEDmuC,gBAAc,CAACtkC,OAAD,EAAqB;AAClC,QAAI,CAAC,KAAKrF,OAAL,CAAaqoC,aAAlB,EAAiC,OAAO,IAAP;AAEjC,UAAMlB,MAAM,GAAGxyC,KAAK,CAACkF,IAAN,CAAW,KAAKmG,OAAL,CAAaqoC,aAAb,CAA2BvuC,QAAtC,EACbmB,MADa,CACNzB,CAAC,IAAIA,CAAC,CAACQ,OAAF,CAAUqtC,WAAK,CAACO,aAAhB,CADC,CAAf;AAGA,WAAO,KAAK4B,OAAL,CAAankC,OAAb,EAAsB8hC,MAAtB,CAAP;AACA;;AAEDyC,YAAU,CAACryC,IAAD,EAAiC,GAAG4O,IAApC,EAA2D;AACpE,UAAM3K,MAAM,GAAG4P,OAAO,CAAC/E,KAAR,CAAc9O,IAAd,EAAoB,IAApB,EAA0B4O,IAA1B,CAAf;;AACA,QAAI3K,MAAJ,EAAY;AACX,aAAOA,MAAP;AACA,KAFD,MAEO;AACN,UAAI,KAAKG,MAAT,EAAiB,OAAO,KAAKA,MAAL,CAAYiuC,UAAZ,CAAuBryC,IAAvB,EAA6B,GAAG4O,IAAhC,CAAP;AACjB;AACD;;AAED0jC,mBAAiB,CAACxkC,OAAU,GAAG;AAAEokC,uBAAmB,EAAE;AAAvB,GAAd,EAAqD;AACrE,QAAI,KAAKzpC,OAAL,CAAalB,YAAjB,EAA+B,OAAO,IAAP;AAC/B,WAAO,KAAK0qC,OAAL,CAAa;AAAE1oC,eAAS,EAAE,MAAb;AAAqB,SAAGuE;AAAxB,KAAb,KAAmD,KAAKmkC,OAAL,CAAa;AAAE1oC,eAAS,EAAE,IAAb;AAAmB,SAAGuE;AAAtB,KAAb,CAA1D;AACA;;AAEDykC,WAAS,GAAY;AACpB,WAAO,KAAK9pC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,SAAhC,CAAP;AACA;;AAEDiuC,aAAW,GAAY;AACtB,WAAO,KAAK/pC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,WAAhC,CAAP;AACA;;AAEDkuC,QAAM,GAAY;AACjB,WAAO,KAAKhqC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,MAAhC,KAA2C,KAAKkE,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,oBAAhC,CAAlD;AACA;;AAEDmuC,YAAU,GAAY;AACrB,QAAI,CAAC,KAAKD,MAAL,EAAL,EAAoB;AACnB,aAAO,KAAP;AACA;;AACD,QAAI,KAAKhqC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,oBAAhC,CAAJ,EAA2D;AAC1D,aAAO,CAAC,KAAKkE,OAAL,CAAa5E,aAAb,CAA2B,GAA3B,EAAgC4a,SAAhC,CAA0Cla,QAA1C,CAAmD,MAAnD,CAAR;AACA,KAFD,MAEO;AACN,aAAO,CAAC,KAAKkE,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,MAAhC,CAAR;AACA;AACD;;AAEDouC,YAAU,GAAY;AACrB,QAAI,CAAC,KAAKF,MAAL,EAAL,EAAoB;AACnB,aAAO,KAAP;AACA;;AACD,QAAI,KAAKhqC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,oBAAhC,CAAJ,EAA2D;AAC1D,aAAO,KAAKkE,OAAL,CAAa5E,aAAb,CAA2B,GAA3B,EAAgC4a,SAAhC,CAA0Cla,QAA1C,CAAmD,MAAnD,CAAP;AACA,KAFD,MAEO;AACN,aAAO,KAAKkE,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,MAAhC,CAAP;AACA;AACD;;AAED8sC,WAAS,GAAY;AACpB,WAAO,KAAK5oC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,SAAhC,KAA8C,KAAKkE,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,aAAhC,CAArD;AACA;;AAEDquC,mBAAiB,GAAY;AAC5B,WAAO,KAAKvB,SAAL,MAAoB,CAAC,CAAC,KAAK5oC,OAAL,CAAaqoC,aAAnC,IAAoD,KAAKroC,OAAL,CAAaqoC,aAAb,CAA2BryB,SAA3B,CAAqCla,QAArC,CAA8C,eAA9C,CAA3D;AACA;;AAEDsuC,UAAQ,GAAW;AAClB,UAAMpqC,OAAO,GAAG,KAAKqqC,eAAL,EAAhB;AACA,WAAOrqC,OAAO,IAAIA,OAAO,CAACmD,WAAnB,IAAkC,EAAzC;AACA;;AAEDknC,iBAAe,GAAuB;AACrC,WAAQ,KAAKnmC,KAAL,CAAW9I,aAAX,CAAyB,yBAAzB,KACP,KAAK8I,KAAL,CAAW9I,aAAX,CAAyB,QAAzB,CADD;AAEA;;AAEDkvC,aAAW,GAAW;AACrB,UAAMtqC,OAAO,GAAG,KAAKqqC,eAAL,EAAhB;;AACA,QAAIrqC,OAAJ,EAAa;AACZ,aAAOA,OAAO,CAAC2V,IAAf;AACA;;AACD,WAAO,EAAP;AACA;;AAED40B,aAAW,GAAsB;AAChC,WAAO5vC,gCAAQ,CAAC,KAAKuJ,KAAL,CAAW9I,aAAX,CAAyB,wBAAzB,CAAD,EAAqDs7B,iBAArD,CAAf;AACA;;AAED8T,YAAU,GAAW;AACpB,WAAO,KAAKxqC,OAAL,CAAayqC,OAAb,CAAqB7e,GAArB,IAA4B,KAAK2e,WAAL,GAAmB50B,IAAtD;AACA;;AAED+0B,aAAW,GAAgB;AAC1B,WAAO,KAAKxmC,KAAL,CAAW9I,aAAX,CAAyB,KAAzB,CAAP;AACA;;AAEDuvC,iBAAe,GAAuB;AACrC,UAAM/nC,CAAC,GAAG,KAAKsB,KAAL,CAAW9I,aAAX,CAAyB,+BAAzB,CAAV;AACA,WAAOwH,CAAC,YAAY8zB,iBAAb,GAAiC9zB,CAAjC,GAAqCpN,SAA5C;AACA;;AAEDo1C,qBAAmB,GAAuB;AACzC,WAAQ,KAAK1mC,KAAL,CAAW9I,aAAX,CAAyB,UAAzB,CAAR;AACA;;AAEDyvC,gBAAc,GAAuB;AACpC,WAAQ,KAAK3mC,KAAL,CAAW9I,aAAX,CAAyB,kCAAzB,CAAR;AACA;;AAED0vC,YAAU,GAAsB;AAC/B,WAAQ,KAAK5mC,KAAL,CAAW9I,aAAX,CAAyB,oBAAzB,CAAR;AACA;;AAED2vC,qBAAmB,GAAW;AAE7B,UAAMC,eAAe,GAAG,KAAK9mC,KAAL,CAAW9I,aAAX,CAAyB,cAAzB,CAAxB;AACA,UAAMmY,KAAK,GAAGy3B,eAAe,IAAK,OAAD,CAAUx8B,IAAV,CAAew8B,eAAe,CAAC7nC,WAA/B,CAAjC;AACA,WAAOoQ,KAAK,IAAI2O,QAAQ,CAAC3O,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAjB,IAAmC,CAA1C;AACA;;AAEiB,SAAX03B,WAAW,CAACC,QAAD,EAAgC;AACjD,WAAOhpB,QAAQ,CAACgpB,QAAQ,CAACja,KAAT,IAAkBia,QAAQ,CAAC/nC,WAA5B,EAAyC,EAAzC,CAAR,IAAwD,CAA/D;AACA;;AAEDgoC,UAAQ,GAAY;AACnB,UAAMnrC,OAAO,GAAG,KAAKorC,sBAAL,EAAhB;;AAEA,WAAOprC,OAAO,IAAIqnC,WAAK,CAAC4D,WAAN,CAAkBjrC,OAAlB,CAAlB;AACA;;AAEDorC,wBAAsB,GAAiB;AACtC,QAAI,KAAKpB,MAAL,EAAJ,EAAmB;AAClB,aAAO,KAAKhqC,OAAL,CAAa5E,aAAb,CAA2B,CACjC,kCADiC,EAEjC,8BAFiC,EAGjC,oCAHiC,EAIjC,eAJiC,EAKhCma,IALgC,CAK3B,IAL2B,CAA3B,CAAP;AAMA,KAPD,MAOO;AACN,aAAO,KAAKrR,KAAL,CAAW9I,aAAX,CAAyB,mBAAzB,CAAP;AACA;AACD;;AAEDiwC,qBAAmB,GAAiC;AACnD,UAAMC,YAAY,GAAGvyC,GAAG,IAAI,CAACA,GAAD,EAAMsuC,WAAK,CAAC4D,WAAN,CAAkBlyC,GAAlB,CAAN,CAA5B;;AACA,QAAI,KAAKixC,MAAL,EAAJ,EAAmB;AAClB,aAAOr1C,KAAK,CAACkF,IAAN,CAAW,KAAKmG,OAAL,CAAazD,gBAAb,CAA8B,iCAA9B,CAAX,EAA6EpD,GAA7E,CAAiFmyC,YAAjF,CAAP;AACA,KAFD,MAEO;AACN,aAAO32C,KAAK,CAACkF,IAAN,CAAW,KAAKqK,KAAL,CAAW3H,gBAAX,CAA4B,mBAA5B,CAAX,EAA6DpD,GAA7D,CAAiEmyC,YAAjE,CAAP;AACA;AACD;;AAEDC,WAAS,GAAY;AACpB,UAAMn+B,IAAI,GAAG,KAAKpN,OAAL,CAAa0T,YAAb,CAA0B,aAA1B,CAAb;;AACA,QAAItG,IAAJ,EAAU;AACT,aAAOA,IAAP;AACA;;AACD,UAAMpN,OAAO,GAAG,KAAKwrC,gBAAL,EAAhB;;AACA,QAAIxrC,OAAJ,EAAa;AACZ,YAAMuT,KAAK,GAAGxB,iCAAO,CAACK,OAAR,CAAgB5D,IAAhB,CAAqBxO,OAAO,CAACqU,QAA7B,CAAd;;AACA,UAAId,KAAJ,EAAW;AACV,eAAOA,KAAK,CAAC,CAAD,CAAZ;AACA;AACD;AACD;;AAEDk4B,cAAY,GAAW;AACtB,UAAMC,MAAM,GAAG,KAAKH,SAAL,EAAf;;AACA,QAAIG,MAAJ,EAAY;AACX,aAAQ,SAAQA,MAAO,GAAvB;AACA;;AACD,WAAO,EAAP;AACA;;AAEDF,kBAAgB,GAAuB;AACtC,WAAQ,KAAKtnC,KAAL,CAAW9I,aAAX,CAAyB,2CAAzB,CAAR;AACA;;AAEDuwC,cAAY,GAAY;AACvB,UAAMv+B,IAAI,GAAG,KAAKpN,OAAL,CAAa0T,YAAb,CAA0B,gBAA1B,CAAb;;AACA,QAAItG,IAAJ,EAAU;AACT,aAAOA,IAAP;AACA;;AACD,UAAMpN,OAAO,GAAG,KAAK4rC,gBAAL,EAAhB;;AACA,QAAI5rC,OAAJ,EAAa;AACZ,YAAMuT,KAAK,GAAGxB,iCAAO,CAACgB,SAAR,CAAkBvE,IAAlB,CAAuBxO,OAAO,CAACqU,QAA/B,CAAd;;AACA,UAAId,KAAJ,EAAW;AACV,eAAOA,KAAK,CAAC,CAAD,CAAZ;AACA;AACD,KALD,MAKO;AACN,aAAOkB,kDAAgB,EAAvB;AACA;AACD;;AAEDm3B,kBAAgB,GAAuB;AACtC,QAAI,KAAK5B,MAAL,EAAJ,EAAmB;AAClB,aAAQ,KAAK9lC,KAAL,CAAW9I,aAAX,CAAyB,+CAAzB,CAAR;AACA,KAFD,MAEO,IAAI,KAAKwtC,SAAL,EAAJ,EAAsB;AAE5B,aAAQ,KAAK1kC,KAAL,CAAW9I,aAAX,CAAyB,4CAAzB,CAAR;AACA;AACD;;AAEDywC,eAAa,GAAW;AACvB,UAAMz+B,IAAI,GAAG,KAAKpN,OAAL,CAAa0T,YAAb,CAA0B,aAA1B,CAAb;;AACA,QAAItG,IAAJ,EAAU;AACT,aAAOA,IAAP;AACA;;AAED,UAAMpN,OAAO,GAAG,KAAK8rC,iBAAL,EAAhB;;AACA,QAAI9rC,OAAJ,EAAa;AACZ,aAAOA,OAAO,CAACmD,WAAf;AACA;;AAED,UAAM+oB,IAAI,GAAG,KAAK6f,iBAAL,EAAb;;AACA,QAAI7f,IAAJ,EAAU;AACT,aAAOA,IAAP;AACA;;AAED,UAAMnZ,SAAS,GAAG,KAAK44B,YAAL,EAAlB;;AACA,QAAI54B,SAAJ,EAAe;AACd,aAAQ,QAAOA,SAAU,EAAzB;AACA;;AAED,WAAO,YAAP;AACA;;AAEDi5B,kBAAgB,GAAW;AAC1B,UAAMt2B,IAAI,GAAG,KAAKo2B,iBAAL,EAAb;;AACA,QAAIp2B,IAAJ,EAAU;AACT,aAAOA,IAAI,CAACC,IAAZ;AACA;;AACD,WAAQ,WAAU,KAAKk2B,aAAL,EAAqB,GAAvC;AACA;;AAEDC,mBAAiB,GAAuB;AACvC,WAAQ,KAAK5nC,KAAL,CAAW9I,aAAX,CAAyB,WAAzB,CAAR;AACA;;AAED2wC,mBAAiB,GAAW;AAC3B,UAAM3+B,IAAI,GAAG,KAAKpN,OAAL,CAAa0T,YAAb,CAA0B,aAA1B,CAAb;;AACA,QAAItG,IAAJ,EAAU;AACT,aAAOA,IAAP;AACA;;AAED,UAAMpN,OAAO,GAAG,KAAKA,OAAL,CAAa5E,aAAb,CAA2B,SAA3B,CAAhB;AACA,QAAI,CAAC4E,OAAL,EAAc,OAAO,EAAP;AACd,UAAMksB,IAAI,GAAGlsB,OAAO,CAACmD,WAAR,IAAuB,EAApC;AACA,WAAO+oB,IAAI,CAAChd,OAAL,CAAa,WAAb,EAA0B,EAA1B,CAAP;AACA;;AAED+8B,iBAAe,GAAY;AAC1B,UAAMjsC,OAAO,GAAG,KAAKksC,sBAAL,EAAhB;AACA,QAAI,CAAClsC,OAAL,EAAc;AACd,WAAOkiB,QAAQ,CAAE,KAAD,CAAQ1T,IAAR,CACfxO,OAAO,CAAC0T,YAAR,CAAqB,WAArB,KACA1T,OAAO,CAACmD,WAFO,CAAD,EAGZ,EAHY,CAAR,IAGG,CAHV;AAIA;;AAED+oC,wBAAsB,GAAiB;AACtC,QAAI,KAAKlC,MAAL,EAAJ,EAAmB;AAClB,aAAO,KAAK9lC,KAAL,CAAW9I,aAAX,CAAyB,oBAAzB,CAAP;AACA,KAFD,MAEO,IAAI,KAAKwtC,SAAL,EAAJ,EAAsB;AAC5B,aAAO,KAAK1kC,KAAL,CAAW9I,aAAX,CAAyB,0BAAzB,CAAP;AACA;AACD;;AAED+wC,qBAAmB,GAAW;AAC7B,UAAMC,SAAS,GAAG,KAAKC,uBAAL,EAAlB;AACA,QAAI,CAACD,SAAL,EAAgB,OAAO,EAAP;AAChB,WAAOA,SAAS,CAACE,GAAV,IAAiB,EAAxB;AACA;;AAEDD,yBAAuB,GAAsB;AAC5C,WAAQ,KAAKrsC,OAAL,CAAa5E,aAAb,CAA2B,gBAA3B,CAAR;AACA;;AAEDmxC,kBAAgB,GAAW;AAC1B,UAAMvsC,OAAO,GAAG,KAAKwsC,mBAAL,EAAhB;AACA,WAAOxsC,OAAO,IAAIA,OAAO,CAACmD,WAAnB,IAAkC,EAAzC;AACA;;AAEDqpC,qBAAmB,GAAiB;AACnC,WAAO,KAAKtoC,KAAL,CAAW9I,aAAX,CAAyB,0BAAzB,CAAP;AACA;;AAEDqxC,kBAAgB,GAAW;AAC1B,UAAMzsC,OAAO,GAAG,KAAK0sC,mBAAL,EAAhB;AACA,WAAO1sC,OAAO,IAAIA,OAAO,CAACmD,WAAnB,IAAkC,EAAzC;AACA;;AAEDupC,qBAAmB,GAAiB;AACnC,WAAO,KAAKxoC,KAAL,CAAW9I,aAAX,CAAyB,mBAAzB,CAAP;AACA;;AAEDuxC,0BAAwB,GAAiB;AACxC,WAAO,KAAKzoC,KAAL,CAAW9I,aAAX,CAAyB,kBAAzB,CAAP;AACA;;AAEDwxC,iBAAe,GAAiB;AAC/B,WAAO,KAAKC,cAAL,CAAoB,mBAApB,CAAP;AACA;;AAEDC,mBAAiB,GAAiB;AACjC,WAAO,KAAKD,cAAL,CAAoB,uBAApB,CAAP;AACA;;AAEDA,gBAAc,CAAClzC,QAAD,EAAiC;AAC9C,UAAMozC,eAA4B,GAAI,KAAK7oC,KAAL,CAAW6oC,eAAjD;;AACA,QAAIA,eAAe,CAACC,OAAhB,KAA4B,GAAhC,EAAqC;AACpC,aAAQD,eAAe,CAACA,eAAjB,CAAuC3xC,aAAvC,CAAqDzB,QAArD,CAAP;AACA,KAFD,MAEO;AACN,aAAOozC,eAAe,CAAC3xC,aAAhB,CAA8BzB,QAA9B,CAAP;AACA;AACD;;AAEDszC,cAAY,GAAU;AACrB,UAAMjtC,OAAO,GAAG,KAAKktC,mBAAL,EAAhB;AACA,WAAOltC,OAAO,IAAI,IAAI2D,IAAJ,CAAS3D,OAAO,CAAC0T,YAAR,CAAqB,UAArB,CAAT,CAAlB;AACA;;AAEDw5B,qBAAmB,GAAiB;AACnC,WAAO,KAAKhpC,KAAL,CAAW9I,aAAX,CAAyB,MAAzB,CAAP;AACA;;AAED+xC,sBAAoB,GAAW;AAC9B,UAAMntC,OAAO,GAAG,KAAKotC,2BAAL,EAAhB;AACA,WAAOptC,OAAO,IAAK2D,IAAI,CAACkuB,KAAL,CAAW7xB,OAAO,CAAC0T,YAAR,CAAqB,UAArB,CAAX,IAA+C,IAA3D,IAAoE,CAA3E;AACA;;AAED05B,6BAA2B,GAAiB;AAC3C,WAAO,KAAKlpC,KAAL,CAAW9I,aAAX,CAAyB,uBAAzB,CAAP;AACA;;AAEDiyC,aAAW,GAAW;AACrB,WAAO,KAAKrtC,OAAL,CAAa0T,YAAb,CAA0B,eAA1B,KAA8C,EAArD;AACA;;AAED45B,qBAAmB,GAAiB;AACnC,WAAO,KAAKppC,KAAL,CAAW9I,aAAX,CAAyB,YAAzB,CAAP;AACA;;AAEDmyC,SAAO,GAAY;AAClB,UAAMC,IAAI,GAAGtrB,QAAQ,CAAC,KAAKliB,OAAL,CAAa0T,YAAb,CAA0B,WAA1B,CAAD,EAAyC,EAAzC,CAArB;AACA,QAAI,CAACuvB,KAAK,CAACuK,IAAD,CAAV,EAAkB,OAAOA,IAAP;AAClB;;AAEDC,gBAAc,GAAiB;AAC9B,QAAI,CAAC,KAAKzD,MAAL,EAAL,EAAoB;AACpB,WAAO,KAAKhqC,OAAL,CAAa5E,aAAb,CAA2B,OAA3B,CAAP;AACA;;AAEDsyC,mBAAiB,GAAiB;AACjC,WAAO,KAAKxpC,KAAL,CAAW9I,aAAX,CAAyB,UAAzB,CAAP;AACA;;AAEDuyC,iCAA+B,GAAiB;AAC/C,WAAO,KAAKzpC,KAAL,CAAW9I,aAAX,CAAyB,SAAzB,CAAP;AACA;;AAEDwyC,oBAAkB,CAACnd,KAAD,EAAiBod,MAAjB,EAAiCC,sBAA+B,GAAG,KAAnE,EAAwF;AACzG,UAAM5F,MAAM,GAAG,KAAKyF,+BAAL,EAAf;AACA,QAAI,CAACzF,MAAL,EAAa;AACb,QAAIzX,KAAJ,EAAWyX,MAAM,CAAC7jC,YAAP,CAAoB,iBAApB,EAAuCwpC,MAAvC;AACX,QAAI,KAAKE,WAAL,OAAuBtd,KAA3B,EAAkC;AAClC,QAAI,CAACA,KAAD,IAAUqd,sBAAV,IAAoC5F,MAAM,CAACx0B,YAAP,CAAoB,iBAApB,MAA2Cm6B,MAAnF,EAA2F;AAC3F,QAAI,CAACpd,KAAL,EAAYyX,MAAM,CAAC8F,eAAP,CAAuB,iBAAvB;AACZhxC,gCAAK,CAACkrC,MAAD,CAAL;AACA;;AAED+F,aAAW,GAAW;AACrB,UAAMjuC,OAAO,GAAG,KAAKkuC,kBAAL,EAAhB;;AACA,QAAIluC,OAAJ,EAAa;AACZ,aAAOA,OAAO,CAACmD,WAAf;AACA;;AACD,WAAO,EAAP;AACA;;AAED+qC,oBAAkB,GAAiB;AAClC,WAAO,KAAKhqC,KAAL,CAAW9I,aAAX,CAAyB,eAAzB,CAAP;AACA;;AAED+yC,QAAM,GAAY;AACjB,WAAO,KAAKnuC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,QAAhC,KAA6C,CAAC,CAAC,KAAKoI,KAAL,CAAW9I,aAAX,CAAyB,aAAzB,CAAtD;AACA;;AAEDgzC,WAAS,GAAY;AACpB,QAAI,KAAKpuC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,eAAhC,CAAJ,EAAsD;AACrD,aAAO,CAAC,CAAC,KAAKoI,KAAL,CAAW9I,aAAX,CAAyB,gBAAzB,CAAT;AACA;;AACD,WAAO,KAAK4E,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,SAAhC,CAAP;AACA;;AAEDuyC,aAAW,GAAY;AACtB,WAAO,CAAC,CAAC,KAAK1B,wBAAL,EAAT;AACA;;AAED2B,UAAQ,GAAY;AACnB,QAAI,KAAKtuC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,eAAhC,CAAJ,EAAsD;AACrD,aAAO,KAAKkE,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,kBAAhC,CAAP;AACA;;AACD,WAAO,KAAKkE,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,QAAhC,CAAP;AACA;;AAEDyyC,WAAS,GAAY;AACpB,WAAO,KAAKvuC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,SAAhC,CAAP;AACA;;AAEDqsC,kBAAgB,CAACqG,iBAA0B,GAAG,KAA9B,EAA8C;AAE7D,QAAI,KAAKxuC,OAAL,CAAahG,OAAb,CAAqB,2CAArB,CAAJ,EAAuE,OAAO,IAAP;AACvE,QAAI,CAAC,KAAKgG,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,uBAAhC,CAAL,EAA+D,OAAO,KAAP;AAC/D,QAAI,KAAKkE,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,gCAAhC,CAAJ,EAAuE,OAAO,KAAP;;AACvE,QAAI0yC,iBAAJ,EAAuB;AACtB,UAAI,KAAKxuC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,mBAAhC,KAAwD,KAAKkE,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,cAAhC,CAA5D,EAA6G,OAAO,KAAP;AAC7G,aAAO,IAAP;AACA,KAHD,MAGO;AACN,UAAI,KAAKkE,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,yBAAhC,CAAJ,EAAgE,OAAO,IAAP;AAChE,aAAO,CAAC,KAAKkE,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,mBAAhC,CAAR;AACA;AACD;;AAEDiyC,aAAW,GAAY;AACtB,WAAO,KAAK/tC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,WAAhC,CAAP;AACA;;AAGD4sC,WAAS,GAAY;AAEpB,QAAI,KAAK1oC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,UAAhC,CAAJ,EAAiD,OAAO,KAAP;AAEjD,QAAI,CAACK,QAAQ,CAACsC,IAAT,CAAcuX,SAAd,CAAwBla,QAAxB,CAAiC,sBAAjC,CAAD,IAA6D,KAAKqsC,gBAAL,EAAjE,EAA0F,OAAO,KAAP;AAC1F,UAAM;AAAExsC;AAAF,QAAa,IAAnB;;AACA,QAAIA,MAAJ,EAAY;AACX,UAAIA,MAAM,CAACoyC,WAAP,EAAJ,EAA0B,OAAO,KAAP;AAC1B,UAAIpyC,MAAM,CAACqE,OAAP,CAAegW,SAAf,CAAyBla,QAAzB,CAAkC,qBAAlC,CAAJ,EAA8D,OAAO,KAAP;AAC9D,UAAI,CAACH,MAAM,CAAC+sC,SAAP,EAAL,EAAyB,OAAO,KAAP;AACzB;;AAED,WAAO,IAAP;AACA;;AAED+F,kBAAgB,GAAY;AAC3B,WAAO,EACN,KAAKzuC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,2BAAhC,KACC,CAACK,QAAQ,CAACsC,IAAT,CAAcuX,SAAd,CAAwBla,QAAxB,CAAiC,sBAAjC,CAAD,IAA6D,KAAKqsC,gBAAL,CAAsB,IAAtB,CAD9D,IAEA,KAAK4F,WAAL,EAFA,IAGA,CAAC,KAAKrF,SAAL,EAJK,CAAP;AAMA;;AAEDgG,YAAU,GAAG;AACZ,WAAO,KAAK1uC,OAAL,CAAagW,SAAb,CAAuBla,QAAvB,CAAgC,cAAhC,CAAP;AACA;;AAED6yC,WAAS,GAAG;AACX,WAAO,KAAKzqC,KAAL,CAAW8R,SAAX,CAAqBla,QAArB,CAA8B,OAA9B,CAAP;AACA;;AAED8yC,aAAW,GAAG;AACb,WAAO,KAAK1qC,KAAL,CAAW8R,SAAX,CAAqBla,QAArB,CAA8B,UAA9B,CAAP;AACA;;AAED+yC,WAAS,GAAG;AACX,WAAO,KAAK3qC,KAAL,CAAW8R,SAAX,CAAqBla,QAArB,CAA8B,SAA9B,CAAP;AACA;;AAxnBiB;AAANurC,W,CACLO,a,GAAgB,6B;AADXP,W,CAELQ,a,GAAgB,Q;AAFXR,W,CAKLE,a,GAAgBzpC,kCAAO,CAAC,CAACwpC,GAAgB,GAAGnrC,QAAQ,CAACsC,IAAT,CAAcrD,aAAd,CAA4B,uBAA5B,CAApB,KAC9BzG,KAAK,CAACkF,IAAN,CAAWytC,GAAG,CAAC/qC,gBAAJ,CAAqB8qC,WAAK,CAACO,aAA3B,CAAX,CAD6B,C;;;;;;;;ACrB/B;AACA;AACA;AACA;AACA;AACA;AAOA,MAAMkH,eAOL,GAAG;AACH3K,MAAI,EAAE,EADH;AAEH4K,UAAQ,EAAE;AAFP,CAPJ;AAeA,MAAMC,aAML,GAAG;AACHC,SAAO,EAAE,EADN;AAEH3yB,SAAO,EAAE,EAFN;AAGH4yB,MAAI,EAAE,EAHH;AAIHn8B,WAAS,EAAE;AAJR,CANJ;;AAcA,MAAMo8B,WAAW,GAAG1jC,EAAE,IAAI;AAAE,MAAI;AAAE,WAAOA,EAAE,EAAT;AAAc,GAApB,CAAqB,OAAOjS,CAAP,EAAU;AAAE6H,WAAO,CAACC,KAAR,CAAc9H,CAAd;AAAmB;AAAE,CAAlF;;AAEA,MAAM41C,WAAW,GAAG,CAACp0C,QAAD,EAAWq0C,eAAX,EAA4B;AAAEjrC,WAAF;AAAa3B;AAAb,IAAoB,EAAhD,KAAuD;AAC1E,QAAMwB,KAAK,GAAGojC,WAAK,CAACxtC,IAAN,CAAWw1C,eAAX,CAAd;;AACA,MAAIprC,KAAJ,EAAW;AAEV,UAAMqrC,IAAI,GAAGvvC,+BAAI,CAAC,MAAMovC,WAAW,CAACn0C,QAAD,CAAlB,CAAjB;AACA,QAAIyH,EAAJ,EAAQwB,KAAK,CAAC6jC,KAAN,CAAYE,IAAZ,CAAiB/7B,GAAjB,CAAqBxJ,EAArB,EAAyB6sC,IAAzB;AACR,KAAClrC,SAAS,GAAGH,KAAK,CAAC6jC,KAAN,CAAY1jC,SAAf,GAA2BH,KAAK,CAAC6jC,KAAN,CAAY9C,OAAjD,EAA0DzsC,IAA1D,CAA+D+2C,IAA/D;AACA,QAAIlrC,SAAS,IAAIH,KAAK,CAAC6jC,KAAN,CAAYC,SAA7B,EAAwCuH,IAAI;AAC5C,GAND,MAMO;AACNH,eAAW,CAACn0C,QAAD,CAAX;AACA;AACD,CAXD;;AAaA,SAASu0C,eAAT,CAAyBz6C,IAAzB,EAA+BkL,OAA/B,EAAwC;AACvC,OAAK,MAAM;AAAErG,YAAF;AAAYqB,YAAZ;AAAsBqK,WAAtB;AAA+BmqC;AAA/B,GAAX,IAA0DV,eAAe,CAACh6C,IAAD,CAAzE,EAAiF;AAChF,UAAM+O,QAAQ,GAAGlK,QAAQ,IAAI,CAACqG,OAAO,CAAChG,OAAR,CAAgBL,QAAhB,CAAb,GAChBhF,KAAK,CAACkF,IAAN,CAAWmG,OAAO,CAACzD,gBAAR,CAAyB5C,QAAzB,CAAX,CADgB,GAEhB,CAACqG,OAAD,CAFD;;AAGA,SAAK,MAAMxG,CAAX,IAAgBqK,QAAhB,EAA0B;AACzB,UAAI2rC,UAAU,CAACrrC,GAAX,CAAe3K,CAAf,CAAJ,EAAuB;AACvBg2C,gBAAU,CAAC9yC,GAAX,CAAelD,CAAf;AACA41C,iBAAW,CAAC,MAAMp0C,QAAQ,CAACxB,CAAD,CAAf,EAAoBA,CAApB,EAAuB6L,OAAvB,CAAX;AACA;AACD;AACD;;AAED,MAAMoqC,OAAO,GAAG,IAAI1jC,GAAJ,EAAhB;;AAEA,SAAS2jC,aAAT,CAAuB1vC,OAAvB,EAA6C;AAC5C,QAAMiE,KAAK,GAAGojC,WAAK,CAACG,WAAN,CAAkBxnC,OAAlB,CAAd;AAGA,QAAMyC,EAAE,GAAGwB,KAAK,CAACopC,WAAN,EAAX;;AAEA,MAAI5qC,EAAE,CAAC1M,MAAH,KAAc,CAAlB,EAAqB;AACpB,UAAM45C,QAAQ,GAAGF,OAAO,CAAC7jC,GAAR,CAAYnJ,EAAZ,CAAjB;AACA,QAAIktC,QAAQ,KAAK3vC,OAAjB,EAA0B;;AAC1B,QAAI2vC,QAAQ,IAAIxzC,QAAQ,CAACL,QAAT,CAAkB6zC,QAAlB,CAAhB,EAA6C;AAC5C3vC,aAAO,CAACpB,MAAR;AACA;AACA;;AAED6wC,WAAO,CAACxjC,GAAR,CAAYxJ,EAAZ,EAAgBzC,OAAhB;AACA;;AAED,QAAM4vC,qBAAqB,GAC1B3rC,KAAK,CAAC+lC,MAAN,MAAkBgF,aAAa,CAACE,IAAhC,IACAjrC,KAAK,CAAC2kC,SAAN,MAAqBoG,aAAa,CAACC,OADnC,IAEAhrC,KAAK,CAAC6lC,SAAN,MAAqBkF,aAAa,CAAC1yB,OAFnC,IAGArY,KAAK,CAAC8lC,WAAN,MAAuBiF,aAAa,CAACj8B,SAHrC,IAIA,EALD;;AAOA,OAAK,MAAM;AAAE/X,YAAF;AAAYqK,WAAZ;AAAqBmqC;AAArB,GAAX,IAAgDI,qBAAhD,EAAuE;AACtE,QAAIJ,UAAU,CAACrrC,GAAX,CAAeF,KAAf,CAAJ,EAA2B;AAC3BurC,cAAU,CAAC9yC,GAAX,CAAeuH,KAAf;AACAmrC,eAAW,CAAC,MAAMp0C,QAAQ,CAACiJ,KAAD,CAAf,EAAwBA,KAAK,CAACjE,OAA9B,EAAuCqF,OAAvC,CAAX;AACA;AACD;;AAEM,SAAStB,cAAT,CAAwB4P,KAAxB,EAAyD3Y,QAAzD,EAAyFqK,OAAzF,EAAmH;AACzH,MAAI,CAACsO,KAAL,EAAYA,KAAK,GAAGrf,MAAM,CAACqZ,IAAP,CAAYqhC,aAAZ,CAAR;AACZ,QAAM9qC,KAAK,GAAG;AAAElJ,YAAF;AAAYqK,WAAZ;AAAqBmqC,cAAU,EAAE,IAAI1rC,OAAJ;AAAjC,GAAd;;AACA,OAAK,MAAMhP,IAAX,IAAmB6e,KAAnB,EAA0Bq7B,aAAa,CAACl6C,IAAD,CAAb,CAAoByD,IAApB,CAAyB2L,KAAzB;AAC1B;AAEM,SAAS2rC,gBAAT,CAA0Bl8B,KAA1B,EAA4Dha,QAA5D,EAA+EqB,QAA/E,EAAiHqK,OAAjH,EAA2I;AACjJ,QAAMnB,KAAK,GAAG;AAAEvK,YAAF;AAAYqB,YAAZ;AAAsBqK,WAAtB;AAA+BmqC,cAAU,EAAE,IAAI1rC,OAAJ;AAA3C,GAAd;;AACA,OAAK,MAAMhP,IAAX,IAAmB6e,KAAnB,EAA0Bm7B,eAAe,CAACh6C,IAAD,CAAf,CAAsByD,IAAtB,CAA2B2L,KAA3B;AAC1B;AAEM,SAAS4rC,YAAT,CAAsB3L,IAAtB,EAAyC;AAC/C,MAAIA,IAAI,CAACnqC,OAAL,CAAaqtC,WAAK,CAACO,aAAnB,CAAJ,EAAuC8H,aAAa,CAACvL,IAAD,CAAb;;AACvC,OAAK,MAAMprC,GAAX,IAAkBorC,IAAI,CAAC5nC,gBAAL,CAAsB8qC,WAAK,CAACO,aAA5B,CAAlB,EAA8D8H,aAAa,CAAC32C,GAAD,CAAb;;AAC9Dw2C,iBAAe,CAAC,MAAD,EAASpL,IAAT,CAAf;AACA;AAED,MAAM4L,oBAAoB,GAAG,oBAA7B;;AAEA,MAAMC,gBAAgB,GAAG,MAAM;AAC9B,OAAK,MAAMj3C,GAAX,IAAkB,CAAC,GAAGoD,QAAQ,CAAC8zC,sBAAT,CAAgCF,oBAAhC,CAAJ,CAAlB,EAA8Eh3C,GAAG,CAACid,SAAJ,CAAcpX,MAAd,CAAqBmxC,oBAArB;AAC9E,CAFD;;AAIO,eAAeG,qBAAf,GAAuC;AAC7C,QAAMC,kBAA0B,GAAGxwC,IAAI,CAACypB,IAAL,CAAWwI,MAAM,CAACwe,WAAP,GAAqBryC,MAAM,CAACsyC,gBAA7B,GAAiD,EAA3D,CAAnC;AACA,QAAMC,SAAS,GAAGn0C,QAAQ,CAACsC,IAAT,CAAcrD,aAAd,CAA4B,uBAA5B,CAAlB;AAGA2I,gBAAc,CAAC,CAAC,MAAD,CAAD,EAAW,MAAME,KAAN,IAAe;AACvC,UAAMqsC,SAAS,GAAGrsC,KAAK,CAACC,KAAN,CAAY9I,aAAZ,CAA0B,aAA1B,CAAlB;AACA,QAAI,CAACk1C,SAAL,EAAgB;AAChB,QAAI7xC,IAAI,GAAGwF,KAAK,CAACymC,WAAN,EAAX;;AACA,QAAI,CAACjsC,IAAD,IAAS6xC,SAAS,CAACt2C,OAAV,CAAkB,yBAAlB,CAAb,EAA2D;AAE1D,YAAM2C,2CAAoB,CAAC2zC,SAAD,EAAY,2DAAZ,CAA1B;AACA;;AACDv1C,2CAAgB,CAACu1C,SAAD,EAAY,MAAZ,EAAoB,MAAM;AACzC7xC,UAAI,GAAGwF,KAAK,CAACymC,WAAN,EAAP;AACA,UAAIjsC,IAAJ,EAAU8wC,eAAe,CAAC,UAAD,EAAa9wC,IAAb,CAAf;AACV,KAHe,CAAhB;AAIA,GAZa,EAYX;AAAE2F,aAAS,EAAE;AAAb,GAZW,CAAd;AAgBAL,gBAAc,CAAC,IAAD,EAAO,CAAC,MAAM;AAC3B,QAAInE,GAAG,GAAGuwC,kBAAV;AACA,UAAM/jC,KAAK,GAAG,EAAd;AACA,QAAI/D,CAAC,GAAG,CAAR;AAEAgZ,uCAAa,CAACrlB,IAAd,CAAmB,MAAM;AAAEu0C,iBAAW,CAAC,MAAM;AAAEnkC,aAAK,CAACrW,MAAN,GAAe,CAAf;AAAkBsS,SAAC,GAAG,CAAJ;AAAQ,OAAnC,EAAqC,MAAM2b,sBAA3C,CAAX;AAAgE,KAA3F;AACA,WAAO/f,KAAK,IAAI;AACf,YAAMkf,CAAC,GAAG9a,CAAC,EAAX;;AACA,YAAMovB,KAAK,GAAGrrB,KAAK,CAAC+W,CAAD,CAAL,GAAW,YAAY;AACpC,eAAO/W,KAAK,CAAC+W,CAAD,CAAZ;AAEA,cAAMqtB,UAAU,GAAGvsC,KAAK,CAAC6jC,KAAN,CAAYE,IAAZ,CAAiBp8B,GAAjB,CAAqB,QAArB,CAAnB;AACA,YAAI4kC,UAAU,YAAYv3C,OAA1B,EAAmC,MAAMu3C,UAAU,EAAhB;;AACnC,YAAIvsC,KAAK,CAAC6jC,KAAN,CAAYC,SAAZ,IAAyB9jC,KAAK,CAACykC,SAAN,EAA7B,EAAgD;AAC/CzkC,eAAK,CAACqkC,QAAN;AACA,SAFD,MAEO,IAAInlB,CAAC,GAAGvjB,GAAR,EAAa;AACnBA,aAAG;AACH,gBAAM6wC,SAAS,GAAGrkC,KAAK,CAACrS,IAAN,CAAW22C,OAAX,CAAlB;AACA,cAAID,SAAJ,EAAeA,SAAS;AACxB;AACD,OAZD;;AAaA,UAAIttB,CAAC,GAAGvjB,GAAR,EAAa63B,KAAK;AAClB,KAhBD;AAiBA,GAvBoB,GAAP,EAuBR;AAAErzB,aAAS,EAAE;AAAb,GAvBQ,CAAd;AA0BA,QAAMusC,EAAE,GAAG,IAAIC,oBAAJ,CAAyBvmC,OAAO,IAAI;AAC9C,SAAK,MAAM;AAAE7O,YAAF;AAAUq1C;AAAV,KAAX,IAAyCxmC,OAAzC,EAAkD;AACjD,UAAIwmC,cAAJ,EAAoB;AACnBF,UAAE,CAACG,SAAH,CAAat1C,MAAb;AACC6rC,mBAAK,CAACG,WAAN,CAAkBhsC,MAAlB,CAAD,CAA4B8sC,QAA5B;AACA;AACD;AACD,GAPU,EAOR;AAAEyI,cAAU,EAAE,MAAd;AAAsB9mC,SAAK,EAAE;AAA7B,GAPQ,CAAX;AASAlG,gBAAc,CAAC,IAAD,EAAO,MAAME,KAAN,IAAe;AACnC,QAAIA,KAAK,CAAC6jC,KAAN,CAAYC,SAAhB,EAA2B;AAE3B,QAAI,CAACuI,SAAS,CAACx0C,QAAV,CAAmBmI,KAAK,CAACjE,OAAzB,CAAL,EAAwC,MAAMtE,oCAAa,CAAC40C,SAAD,EAAYrsC,KAAK,CAACjE,OAAlB,CAAnB;AACxC2wC,MAAE,CAAC91C,OAAH,CAAWoJ,KAAK,CAACC,KAAjB;AACA,GALa,EAKX;AAAEE,aAAS,EAAE;AAAb,GALW,CAAd;;AAOA,QAAM4sC,qBAAqB,GAAG,MAAM;AACnC3J,eAAK,CAACE,aAAN,CAAoBvpC,KAApB,CAA0BC,KAA1B;AACA,UAAMspC,aAAa,GAAGF,WAAK,CAACE,aAAN,CAAoB+I,SAApB,CAAtB;AAEA,QAAIhtC,KAAK,GAAGikC,aAAa,CAACjyB,KAAd,CAAoB,CAAC,CAArB,EAAwB,CAAxB,CAAZ;;AACA,QAAIhS,KAAJ,EAAW;AAIV,UAAID,sCAAe,CAACC,KAAD,CAAnB,EAA4B;AAC3BikC,qBAAa,CAAC5vB,GAAd;;AAEA,YAAI4vB,aAAa,CAACxxC,MAAlB,EAA0B;AACzBuN,eAAK,GAAGikC,aAAa,CAACjyB,KAAd,CAAoB,CAAC,CAArB,EAAwB,CAAxB,CAAR;AACA,SAFD,MAEO;AACN,iBAAO,CAAChS,KAAK,CAAC2tC,sBAAd,EAAsC;AAAE3tC,iBAAK,GAAGA,KAAK,CAAC+kC,aAAd;AAA8B;;AACtE/kC,eAAK,GAAGA,KAAK,CAAC2tC,sBAAd;AACA;AACD;;AAEDjB,sBAAgB;;AAGhB,SAAG;AAAE1sC,aAAK,CAAC0S,SAAN,CAAgBtZ,GAAhB,CAAoBqzC,oBAApB;AAA4C,OAAjD,QAAyD,CAACzsC,KAAK,GAAGA,KAAK,CAAC+kC,aAAf,KAAiC/kC,KAAK,KAAKgtC,SAApG;AACA;;AAED,WAAO/I,aAAP;AACA,GA3BD;;AA6BA,SAAO,IAAP,EAAa;AACZ,UAAMA,aAAa,GAAGyJ,qBAAqB,EAA3C;;AACA,SAAK,MAAMx3C,CAAX,IAAgB+tC,aAAhB,EAA+BmI,aAAa,CAACl2C,CAAD,CAAb;;AAE/B,QAAI+tC,aAAa,CAACxxC,MAAd,IAAwBo6C,kBAA5B,EAAgD;;AAEhD,QAAI;AACH,YAAMl3C,OAAO,CAACC,IAAR,CAAa,CAClBmoB,mCAAa,CAACrlB,IAAd,CAAmB,MAAM/C,OAAO,CAAC8C,MAAR,EAAzB,CADkB,EAElB9C,OAAO,CAAC8rB,GAAR,CAAY,CAEXwiB,aAAa,CAACxxC,MAAd,GAAwB,IAAIkD,OAAJ,CAAYuT,GAAG,IAAI;AAAEjG,kBAAU,CAACiG,GAAD,EAAM,GAAN,CAAV;AAAuB,OAA5C,CAAxB,GAAyEvT,OAAO,CAACI,OAAR,EAF9D,EAGXiC,8CAAuB,CAACg1C,SAAD,EAAYjJ,WAAK,CAACO,aAAlB,CAHZ,CAAZ,CAFkB,CAAb,CAAN;AAQA,KATD,CASE,OAAOpuC,CAAP,EAAU;AAEX;AACA;AACD;AACD;AAEM,SAAS03C,sBAAT,GAAkC;AACxClB,kBAAgB;;AAGhB,MAAIp+B,4CAAU,CAAC,UAAD,CAAd,EAA4B;AAC3B,UAAMu/B,WAAW,GAAGh1C,QAAQ,CAACsC,IAAT,CAAcrD,aAAd,CAA4B,cAA5B,CAApB;AACA,QAAI+1C,WAAJ,EAAiB30C,gDAAyB,CAAC20C,WAAD,EAAc,QAAd,EAAwBrB,YAAxB,EAAsC,IAAtC,CAAzB;AACjB,GAHD,MAGO;AACN,UAAMsB,SAAS,GAAGtzC,kCAAO,CAAC/E,GAAG,IAAI;AAAE,UAAIA,GAAJ,EAASmC,6CAAsB,CAACnC,GAAD,EAAM,QAAN,EAAgB+2C,YAAhB,CAAtB;AAAsD,KAAzE,CAAzB;AACA/rC,kBAAc,CAAC,IAAD,EAAOE,KAAK,IAAI;AAAEmtC,eAAS,CAACntC,KAAK,CAACjE,OAAN,CAAcqoC,aAAf,CAAT;AAAyC,KAA3D,CAAd;AACA;;AAEDyH,cAAY,CAAC3zC,QAAQ,CAACsC,IAAV,CAAZ;AACA,C;;;;;;;;;;;;;;;AC3PD,GAAI4yC,QAAO,CAAGz3B,2BAAO,EAAI,GAAIA,4BAAJ,EAAzB,CAEey3B,oDAAf,E;;ACMA,GAAIC,YAAW,CAAG,CAACD,QAAD,CAAWjjC,2BAAX,CAAsB,SAAS7W,IAAT,CAAe6V,IAAf,CAAqB,CAC3DikC,QAAO,CAACplC,GAAR,CAAY1U,IAAZ,CAAkB6V,IAAlB,EACA,MAAO7V,KAAP,CACD,CAHD,CAKe+5C,4DAAf,E;;;;;;;;ACLA,QAASC,WAAT,CAAoBhzB,IAApB,CAA0B,CACxB,MAAO,WAAW,CAIhB,GAAIpY,KAAI,CAAG/E,SAAX,CACA,OAAQ+E,IAAI,CAACpQ,MAAb,EACE,IAAK,EAAL,CAAQ,MAAO,IAAIwoB,KAAJ,EAAP,CACR,IAAK,EAAL,CAAQ,MAAO,IAAIA,KAAJ,CAASpY,IAAI,CAAC,CAAD,CAAb,CAAP,CACR,IAAK,EAAL,CAAQ,MAAO,IAAIoY,KAAJ,CAASpY,IAAI,CAAC,CAAD,CAAb,CAAkBA,IAAI,CAAC,CAAD,CAAtB,CAAP,CACR,IAAK,EAAL,CAAQ,MAAO,IAAIoY,KAAJ,CAASpY,IAAI,CAAC,CAAD,CAAb,CAAkBA,IAAI,CAAC,CAAD,CAAtB,CAA2BA,IAAI,CAAC,CAAD,CAA/B,CAAP,CACR,IAAK,EAAL,CAAQ,MAAO,IAAIoY,KAAJ,CAASpY,IAAI,CAAC,CAAD,CAAb,CAAkBA,IAAI,CAAC,CAAD,CAAtB,CAA2BA,IAAI,CAAC,CAAD,CAA/B,CAAoCA,IAAI,CAAC,CAAD,CAAxC,CAAP,CACR,IAAK,EAAL,CAAQ,MAAO,IAAIoY,KAAJ,CAASpY,IAAI,CAAC,CAAD,CAAb,CAAkBA,IAAI,CAAC,CAAD,CAAtB,CAA2BA,IAAI,CAAC,CAAD,CAA/B,CAAoCA,IAAI,CAAC,CAAD,CAAxC,CAA6CA,IAAI,CAAC,CAAD,CAAjD,CAAP,CACR,IAAK,EAAL,CAAQ,MAAO,IAAIoY,KAAJ,CAASpY,IAAI,CAAC,CAAD,CAAb,CAAkBA,IAAI,CAAC,CAAD,CAAtB,CAA2BA,IAAI,CAAC,CAAD,CAA/B,CAAoCA,IAAI,CAAC,CAAD,CAAxC,CAA6CA,IAAI,CAAC,CAAD,CAAjD,CAAsDA,IAAI,CAAC,CAAD,CAA1D,CAAP,CACR,IAAK,EAAL,CAAQ,MAAO,IAAIoY,KAAJ,CAASpY,IAAI,CAAC,CAAD,CAAb,CAAkBA,IAAI,CAAC,CAAD,CAAtB,CAA2BA,IAAI,CAAC,CAAD,CAA/B,CAAoCA,IAAI,CAAC,CAAD,CAAxC,CAA6CA,IAAI,CAAC,CAAD,CAAjD,CAAsDA,IAAI,CAAC,CAAD,CAA1D,CAA+DA,IAAI,CAAC,CAAD,CAAnE,CAAP,CARV,CAUA,GAAIqrC,YAAW,CAAGn6B,sCAAU,CAACkH,IAAI,CAACvpB,SAAN,CAA5B,CACIuB,MAAM,CAAGgoB,IAAI,CAAClY,KAAL,CAAWmrC,WAAX,CAAwBrrC,IAAxB,CADb,CAKA,MAAOvR,oCAAQ,CAAC2B,MAAD,CAAR,CAAmBA,MAAnB,CAA4Bi7C,WAAnC,CACD,CArBD,CAsBD,CAEcD,0DAAf,E;;;;;AChCA,GAAIE,eAAc,CAAG,CAArB,CAYA,QAASC,WAAT,CAAoBn6C,IAApB,CAA0BgjB,OAA1B,CAAmCnU,OAAnC,CAA4C,CAC1C,GACImY,KAAI,CAAGgzB,WAAU,CAACh6C,IAAD,CADrB,CAGA,QAASo6C,QAAT,EAAmB,CACjB,GAAIlmC,GAAE,CAAI,MAAQ,OAASlX,wBAAjB,EAAyB,eAAgBo9C,QAA1C,CAAqDpzB,IAArD,CAA4DhnB,IAArE,CACA,MAAOkU,GAAE,CAACpF,KAAH,CALIkU,OAAO,CAAGk3B,cAKL,CAASrrC,OAAT,CAAmB,IAA5B,CAAkChF,SAAlC,CAAP,CACD,CACD,MAAOuwC,QAAP,CACD,CAEcD,0DAAf,E;;;;;AC1BA,GAAIzsC,UAAS,CAAGtF,IAAI,CAACC,GAArB,CAaA,QAASgyC,YAAT,CAAqBzrC,IAArB,CAA2B0rC,QAA3B,CAAqCC,OAArC,CAA8CC,SAA9C,CAAyD,CACvD,GAAIC,UAAS,CAAG,CAAC,CAAjB,CACIC,UAAU,CAAG9rC,IAAI,CAACpQ,MADtB,CAEIm8C,aAAa,CAAGJ,OAAO,CAAC/7C,MAF5B,CAGIo8C,SAAS,CAAG,CAAC,CAHjB,CAIIC,UAAU,CAAGP,QAAQ,CAAC97C,MAJ1B,CAKIs8C,WAAW,CAAGptC,SAAS,CAACgtC,UAAU,CAAGC,aAAd,CAA6B,CAA7B,CAL3B,CAMI37C,MAAM,CAAG5B,KAAK,CAACy9C,UAAU,CAAGC,WAAd,CANlB,CASA,MAAO,EAAEF,SAAF,CAAcC,UAArB,CAAiC,CAC/B77C,MAAM,CAAC47C,SAAD,CAAN,CAAoBN,QAAQ,CAACM,SAAD,CAA5B,CACD,CACD,MAAO,EAAEH,SAAF,CAAcE,aAArB,CAAoC,CAClC,GANgB,CAACH,SAMb,EAAeC,SAAS,CAAGC,UAA/B,CAA2C,CACzC17C,MAAM,CAACu7C,OAAO,CAACE,SAAD,CAAR,CAAN,CAA6B7rC,IAAI,CAAC6rC,SAAD,CAAjC,CACD,CACF,CACD,MAAOK,WAAW,EAAlB,CAAsB,CACpB97C,MAAM,CAAC47C,SAAS,EAAV,CAAN,CAAsBhsC,IAAI,CAAC6rC,SAAS,EAAV,CAA1B,CACD,CACD,MAAOz7C,OAAP,CACD,CAEcq7C,4DAAf,E;;ACrCA,GAAI3sC,4BAAS,CAAGtF,IAAI,CAACC,GAArB,CAaA,QAAS0yC,iBAAT,CAA0BnsC,IAA1B,CAAgC0rC,QAAhC,CAA0CC,OAA1C,CAAmDC,SAAnD,CAA8D,CAC5D,GAAIC,UAAS,CAAG,CAAC,CAAjB,CACIC,UAAU,CAAG9rC,IAAI,CAACpQ,MADtB,CAEIw8C,YAAY,CAAG,CAAC,CAFpB,CAGIL,aAAa,CAAGJ,OAAO,CAAC/7C,MAH5B,CAIIy8C,UAAU,CAAG,CAAC,CAJlB,CAKIC,WAAW,CAAGZ,QAAQ,CAAC97C,MAL3B,CAMIs8C,WAAW,CAAGptC,2BAAS,CAACgtC,UAAU,CAAGC,aAAd,CAA6B,CAA7B,CAN3B,CAOI37C,MAAM,CAAG5B,KAAK,CAAC09C,WAAW,CAAGI,WAAf,CAPlB,CAUA,MAAO,EAAET,SAAF,CAAcK,WAArB,CAAkC,CAChC97C,MAAM,CAACy7C,SAAD,CAAN,CAAoB7rC,IAAI,CAAC6rC,SAAD,CAAxB,CACD,CACD,GAAItvB,OAAM,CAAGsvB,SAAb,CACA,MAAO,EAAEQ,UAAF,CAAeC,WAAtB,CAAmC,CACjCl8C,MAAM,CAACmsB,MAAM,CAAG8vB,UAAV,CAAN,CAA8BX,QAAQ,CAACW,UAAD,CAAtC,CACD,CACD,MAAO,EAAED,YAAF,CAAiBL,aAAxB,CAAuC,CACrC,GAVgB,CAACH,SAUb,EAAeC,SAAS,CAAGC,UAA/B,CAA2C,CACzC17C,MAAM,CAACmsB,MAAM,CAAGovB,OAAO,CAACS,YAAD,CAAjB,CAAN,CAAyCpsC,IAAI,CAAC6rC,SAAS,EAAV,CAA7C,CACD,CACF,CACD,MAAOz7C,OAAP,CACD,CAEc+7C,sEAAf,E;;AChCA,QAASI,aAAT,CAAsBz7C,KAAtB,CAA6B07C,WAA7B,CAA0C,CACxC,GAAI58C,OAAM,CAAGkB,KAAK,CAAClB,MAAnB,CACIQ,MAAM,CAAG,CADb,CAGA,MAAOR,MAAM,EAAb,CAAiB,CACf,GAAIkB,KAAK,CAAClB,MAAD,CAAL,GAAkB48C,WAAtB,CAAmC,CACjC,EAAEp8C,MAAF,CACD,CACF,CACD,MAAOA,OAAP,CACD,CAEcm8C,8DAAf,E;;ACfA,QAASE,WAAT,EAAsB,CAErB,CAEcA,0DAAf,E;;ACLA,GAAIC,iBAAgB,CAAG,UAAvB,CASA,QAASC,YAAT,CAAqBj+C,KAArB,CAA4B,CAC1B,KAAKk+C,WAAL,CAAmBl+C,KAAnB,CACA,KAAKm+C,WAAL,CAAmB,EAAnB,CACA,KAAKC,OAAL,CAAe,CAAf,CACA,KAAKC,YAAL,CAAoB,KAApB,CACA,KAAKC,aAAL,CAAqB,EAArB,CACA,KAAKC,aAAL,CAAqBP,gBAArB,CACA,KAAKQ,SAAL,CAAiB,EAAjB,CACD,CAGDP,WAAW,CAAC99C,SAAZ,CAAwBqiB,sCAAU,CAACu7B,WAAU,CAAC59C,SAAZ,CAAlC,CACA89C,WAAW,CAAC99C,SAAZ,CAAsB0oB,WAAtB,CAAoCo1B,WAApC,CAEeA,4DAAf,E;;;;;ACjBA,GAAIQ,QAAO,CAAG,CAACjC,QAAD,CAAW/tB,uBAAX,CAAkB,SAAS/rB,IAAT,CAAe,CAC7C,MAAO85C,SAAO,CAACzlC,GAAR,CAAYrU,IAAZ,CAAP,CACD,CAFD,CAIe+7C,oDAAf,E;;ACbA,GAAIC,UAAS,CAAG,EAAhB,CAEeA,wDAAf,E;;ACAA,GAAIx+C,YAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,4BAAc,CAAGF,WAAW,CAACE,cAAjC,CASA,QAASu+C,YAAT,CAAqBj8C,IAArB,CAA2B,CACzB,GAAIhB,OAAM,CAAIgB,IAAI,CAAC8kB,IAAL,CAAY,EAA1B,CACIplB,KAAK,CAAGs8C,UAAS,CAACh9C,MAAD,CADrB,CAEIR,MAAM,CAAGd,2BAAc,CAACK,IAAf,CAAoBi+C,UAApB,CAA+Bh9C,MAA/B,EAAyCU,KAAK,CAAClB,MAA/C,CAAwD,CAFrE,CAIA,MAAOA,MAAM,EAAb,CAAiB,CACf,GAAIqX,KAAI,CAAGnW,KAAK,CAAClB,MAAD,CAAhB,CACI09C,SAAS,CAAGrmC,IAAI,CAAC7V,IADrB,CAEA,GAAIk8C,SAAS,EAAI,IAAb,EAAqBA,SAAS,EAAIl8C,IAAtC,CAA4C,CAC1C,MAAO6V,KAAI,CAACiP,IAAZ,CACD,CACF,CACD,MAAO9lB,OAAP,CACD,CAEci9C,4DAAf,E;;ACpBA,QAASE,cAAT,CAAuB7+C,KAAvB,CAA8B8+C,QAA9B,CAAwC,CACtC,KAAKZ,WAAL,CAAmBl+C,KAAnB,CACA,KAAKm+C,WAAL,CAAmB,EAAnB,CACA,KAAKY,SAAL,CAAiB,CAAC,CAACD,QAAnB,CACA,KAAKE,SAAL,CAAiB,CAAjB,CACA,KAAKC,UAAL,CAAkBt+C,SAAlB,CACD,CAEDk+C,aAAa,CAAC1+C,SAAd,CAA0BqiB,sCAAU,CAACu7B,WAAU,CAAC59C,SAAZ,CAApC,CACA0+C,aAAa,CAAC1+C,SAAd,CAAwB0oB,WAAxB,CAAsCg2B,aAAtC,CAEeA,gEAAf,E;;;;;;;;;;;ACVA,QAASK,aAAT,CAAsBpC,OAAtB,CAA+B,CAC7B,GAAIA,OAAO,WAAYmB,aAAvB,CAAoC,CAClC,MAAOnB,QAAO,CAACqC,KAAR,EAAP,CACD,CACD,GAAIz9C,OAAM,CAAG,GAAIm9C,eAAJ,CAAkB/B,OAAO,CAACoB,WAA1B,CAAuCpB,OAAO,CAACiC,SAA/C,CAAb,CACAr9C,MAAM,CAACy8C,WAAP,CAAqBprC,qCAAS,CAAC+pC,OAAO,CAACqB,WAAT,CAA9B,CACAz8C,MAAM,CAACs9C,SAAP,CAAoBlC,OAAO,CAACkC,SAA5B,CACAt9C,MAAM,CAACu9C,UAAP,CAAoBnC,OAAO,CAACmC,UAA5B,CACA,MAAOv9C,OAAP,CACD,CAEcw9C,8DAAf,E;;ACdA,GAAIh/C,0BAAW,CAAGT,MAAM,CAACU,SAAzB,CAGA,GAAIC,6BAAc,CAAGF,yBAAW,CAACE,cAAjC,CAuHA,QAASg/C,OAAT,CAAgBp/C,KAAhB,CAAuB,CACrB,GAAIiY,uCAAY,CAACjY,KAAD,CAAZ,EAAuB,CAACH,kCAAO,CAACG,KAAD,CAA/B,EAA0C,EAAEA,KAAK,WAAYi+C,aAAnB,CAA9C,CAA+E,CAC7E,GAAIj+C,KAAK,WAAY6+C,eAArB,CAAoC,CAClC,MAAO7+C,MAAP,CACD,CACD,GAAII,4BAAc,CAACK,IAAf,CAAoBT,KAApB,CAA2B,aAA3B,CAAJ,CAA+C,CAC7C,MAAOk/C,cAAY,CAACl/C,KAAD,CAAnB,CACD,CACF,CACD,MAAO,IAAI6+C,eAAJ,CAAkB7+C,KAAlB,CAAP,CACD,CAGDo/C,MAAM,CAACj/C,SAAP,CAAmB49C,WAAU,CAAC59C,SAA9B,CACAi/C,MAAM,CAACj/C,SAAP,CAAiB0oB,WAAjB,CAA+Bu2B,MAA/B,CAEeA,wDAAf,E;;ACrIA,QAASC,WAAT,CAAoB38C,IAApB,CAA0B,CACxB,GAAI48C,SAAQ,CAAGX,YAAW,CAACj8C,IAAD,CAA1B,CACI0f,KAAK,CAAGg9B,aAAM,CAACE,QAAD,CADlB,CAGA,GAAI,MAAOl9B,MAAP,EAAgB,UAAhB,EAA8B,EAAEk9B,QAAQ,GAAIrB,aAAW,CAAC99C,SAA1B,CAAlC,CAAwE,CACtE,MAAO,MAAP,CACD,CACD,GAAIuC,IAAI,GAAK0f,KAAb,CAAoB,CAClB,MAAO,KAAP,CACD,CACD,GAAI7J,KAAI,CAAGkmC,QAAO,CAACr8B,KAAD,CAAlB,CACA,MAAO,CAAC,CAAC7J,IAAF,EAAU7V,IAAI,GAAK6V,IAAI,CAAC,CAAD,CAA9B,CACD,CAEc8mC,0DAAf,E;;;;;ACVA,GAAIE,QAAO,CAAGv0B,oCAAQ,CAACyxB,YAAD,CAAtB,CAEe8C,oDAAf,E;;AClBA,GAAIC,cAAa,CAAG,mCAApB,CACIC,cAAc,CAAG,OADrB,CAUA,QAASC,eAAT,CAAwB38C,MAAxB,CAAgC,CAC9B,GAAI2b,MAAK,CAAG3b,MAAM,CAAC2b,KAAP,CAAa8gC,aAAb,CAAZ,CACA,MAAO9gC,MAAK,CAAGA,KAAK,CAAC,CAAD,CAAL,CAASqjB,KAAT,CAAe0d,cAAf,CAAH,CAAoC,EAAhD,CACD,CAEcC,kEAAf,E;;ACfA,GAAIC,cAAa,CAAG,2CAApB,CAUA,QAASC,kBAAT,CAA2B78C,MAA3B,CAAmC88C,OAAnC,CAA4C,CAC1C,GAAI3+C,OAAM,CAAG2+C,OAAO,CAAC3+C,MAArB,CACA,GAAI,CAACA,MAAL,CAAa,CACX,MAAO6B,OAAP,CACD,CACD,GAAIiN,UAAS,CAAG9O,MAAM,CAAG,CAAzB,CACA2+C,OAAO,CAAC7vC,SAAD,CAAP,CAAqB,CAAC9O,MAAM,CAAG,CAAT,CAAa,IAAb,CAAoB,EAArB,EAA2B2+C,OAAO,CAAC7vC,SAAD,CAAvD,CACA6vC,OAAO,CAAGA,OAAO,CAACn/B,IAAR,CAAaxf,MAAM,CAAG,CAAT,CAAa,IAAb,CAAoB,GAAjC,CAAV,CACA,MAAO6B,OAAM,CAACsX,OAAP,CAAeslC,aAAf,CAA8B,uBAAyBE,OAAzB,CAAmC,QAAjE,CAAP,CACD,CAEcD,wEAAf,E;;;;;;;;;;;AClBA,GAAIhD,kCAAc,CAAG,CAArB,CACIkD,kBAAkB,CAAG,CADzB,CAEIC,eAAe,CAAG,CAFtB,CAGIC,qBAAqB,CAAG,EAH5B,CAIIC,iBAAiB,CAAG,EAJxB,CAKIC,uBAAuB,CAAG,EAL9B,CAMIC,aAAa,CAAG,GANpB,CAOIC,eAAe,CAAG,GAPtB,CAQIC,cAAc,CAAG,GARrB,CAWA,GAAIC,UAAS,CAAG,CACd,CAAC,KAAD,CAAQH,aAAR,CADc,CAEd,CAAC,MAAD,CAASvD,iCAAT,CAFc,CAGd,CAAC,SAAD,CAAYkD,kBAAZ,CAHc,CAId,CAAC,OAAD,CAAUC,eAAV,CAJc,CAKd,CAAC,YAAD,CAAeC,qBAAf,CALc,CAMd,CAAC,MAAD,CAASK,cAAT,CANc,CAOd,CAAC,SAAD,CAAYJ,iBAAZ,CAPc,CAQd,CAAC,cAAD,CAAiBC,uBAAjB,CARc,CASd,CAAC,OAAD,CAAUE,eAAV,CATc,CAAhB,CAoBA,QAASG,kBAAT,CAA2BV,OAA3B,CAAoCn6B,OAApC,CAA6C,CAC3CsJ,qCAAS,CAACsxB,SAAD,CAAY,SAAS9qB,IAAT,CAAe,CAClC,GAAIx1B,MAAK,CAAG,KAAOw1B,IAAI,CAAC,CAAD,CAAvB,CACA,GAAK9P,OAAO,CAAG8P,IAAI,CAAC,CAAD,CAAf,EAAuB,CAACvG,yCAAa,CAAC4wB,OAAD,CAAU7/C,KAAV,CAAzC,CAA2D,CACzD6/C,OAAO,CAACn8C,IAAR,CAAa1D,KAAb,EACD,CACF,CALQ,CAAT,CAMA,MAAO6/C,QAAO,CAAC1hB,IAAR,EAAP,CACD,CAEcoiB,wEAAf,E;;AC9BA,QAASC,gBAAT,CAAyB1D,OAAzB,CAAkC2D,SAAlC,CAA6C/6B,OAA7C,CAAsD,CACpD,GAAI3iB,OAAM,CAAI09C,SAAS,CAAG,EAA1B,CACA,MAAO99C,wCAAW,CAACm6C,OAAD,CAAU8C,kBAAiB,CAAC78C,MAAD,CAASw9C,kBAAiB,CAACb,eAAc,CAAC38C,MAAD,CAAf,CAAyB2iB,OAAzB,CAA1B,CAA3B,CAAlB,CACD,CAEc86B,oEAAf,E;;ACfA,GAAI5D,8BAAc,CAAG,CAArB,CACIkD,iCAAkB,CAAG,CADzB,CAEIY,qBAAqB,CAAG,CAF5B,CAGIX,8BAAe,CAAG,CAHtB,CAIIE,gCAAiB,CAAG,EAJxB,CAKIC,sCAAuB,CAAG,EAL9B,CAwBA,QAASS,cAAT,CAAuBj+C,IAAvB,CAA6BgjB,OAA7B,CAAsCk7B,QAAtC,CAAgD9C,WAAhD,CAA6DvsC,OAA7D,CAAsEyrC,QAAtE,CAAgFC,OAAhF,CAAyF4D,MAAzF,CAAiGC,GAAjG,CAAsGC,KAAtG,CAA6G,CAC3G,GAAIC,QAAO,CAAGt7B,OAAO,CAAGq6B,8BAAxB,CACIkB,UAAU,CAAGD,OAAO,CAAG/D,OAAH,CAAat8C,SADrC,CAEIugD,eAAe,CAAGF,OAAO,CAAGrgD,SAAH,CAAes8C,OAF5C,CAGIkE,WAAW,CAAGH,OAAO,CAAGhE,QAAH,CAAcr8C,SAHvC,CAIIygD,gBAAgB,CAAGJ,OAAO,CAAGrgD,SAAH,CAAeq8C,QAJ7C,CAMAt3B,OAAO,EAAKs7B,OAAO,CAAGf,gCAAH,CAAuBC,sCAA1C,CACAx6B,OAAO,EAAI,EAAEs7B,OAAO,CAAGd,sCAAH,CAA6BD,gCAAtC,CAAX,CAEA,GAAI,EAAEv6B,OAAO,CAAGg7B,qBAAZ,CAAJ,CAAwC,CACtCh7B,OAAO,EAAI,EAAEk3B,6BAAc,CAAGkD,iCAAnB,CAAX,CACD,CACD,GAAI1pB,QAAO,CAAG,CACZ1zB,IADY,CACNgjB,OADM,CACGnU,OADH,CACY4vC,WADZ,CACyBF,UADzB,CACqCG,gBADrC,CAEZF,eAFY,CAEKL,MAFL,CAEaC,GAFb,CAEkBC,KAFlB,CAAd,CAKA,GAAIr/C,OAAM,CAAGk/C,QAAQ,CAACpvC,KAAT,CAAe7Q,SAAf,CAA0By1B,OAA1B,CAAb,CACA,GAAIipB,WAAU,CAAC38C,IAAD,CAAd,CAAsB,CACpB68C,QAAO,CAAC79C,MAAD,CAAS00B,OAAT,CAAP,CACD,CACD10B,MAAM,CAACo8C,WAAP,CAAqBA,WAArB,CACA,MAAO0C,iBAAe,CAAC9+C,MAAD,CAASgB,IAAT,CAAegjB,OAAf,CAAtB,CACD,CAEci7B,gEAAf,E;;AChDA,QAASU,UAAT,CAAmB3+C,IAAnB,CAAyB,CAEvB,MADaA,KACN,CAAOo7C,WAAd,CACD,CAEcuD,wDAAf,E;;;;;ACRA,GAAIhxC,UAAS,CAAGvF,IAAI,CAACE,GAArB,CAYA,QAASs2C,QAAT,CAAiBl/C,KAAjB,CAAwB2N,OAAxB,CAAiC,CAC/B,GAAI8V,UAAS,CAAGzjB,KAAK,CAAClB,MAAtB,CACIA,MAAM,CAAGmP,SAAS,CAACN,OAAO,CAAC7O,MAAT,CAAiB2kB,SAAjB,CADtB,CAEI07B,QAAQ,CAAGxuC,qCAAS,CAAC3Q,KAAD,CAFxB,CAIA,MAAOlB,MAAM,EAAb,CAAiB,CACf,GAAID,MAAK,CAAG8O,OAAO,CAAC7O,MAAD,CAAnB,CACAkB,KAAK,CAAClB,MAAD,CAAL,CAAgBI,mCAAO,CAACL,KAAD,CAAQ4kB,SAAR,CAAP,CAA4B07B,QAAQ,CAACtgD,KAAD,CAApC,CAA8CN,SAA9D,CACD,CACD,MAAOyB,MAAP,CACD,CAEck/C,oDAAf,E;;AC3BA,GAAIE,YAAW,CAAG,wBAAlB,CAWA,QAASC,eAAT,CAAwBr/C,KAAxB,CAA+B07C,WAA/B,CAA4C,CAC1C,GAAI78C,MAAK,CAAG,CAAC,CAAb,CACIC,MAAM,CAAGkB,KAAK,CAAClB,MADnB,CAEIstB,QAAQ,CAAG,CAFf,CAGI9sB,MAAM,CAAG,EAHb,CAKA,MAAO,EAAET,KAAF,CAAUC,MAAjB,CAAyB,CACvB,GAAIlB,MAAK,CAAGoC,KAAK,CAACnB,KAAD,CAAjB,CACA,GAAIjB,KAAK,GAAK89C,WAAV,EAAyB99C,KAAK,GAAKwhD,WAAvC,CAAoD,CAClDp/C,KAAK,CAACnB,KAAD,CAAL,CAAeugD,WAAf,CACA9/C,MAAM,CAAC8sB,QAAQ,EAAT,CAAN,CAAqBvtB,KAArB,CACD,CACF,CACD,MAAOS,OAAP,CACD,CAEc+/C,kEAAf,E;;ACjBA,GAAI7E,6BAAc,CAAG,CAArB,CACIkD,gCAAkB,CAAG,CADzB,CAEIC,6BAAe,CAAG,CAFtB,CAGIC,mCAAqB,CAAG,EAH5B,CAIIG,2BAAa,CAAG,GAJpB,CAKIE,4BAAc,CAAG,GALrB,CA0BA,QAASqB,aAAT,CAAsBh/C,IAAtB,CAA4BgjB,OAA5B,CAAqCnU,OAArC,CAA8CyrC,QAA9C,CAAwDC,OAAxD,CAAiE0E,aAAjE,CAAgFC,YAAhF,CAA8Ff,MAA9F,CAAsGC,GAAtG,CAA2GC,KAA3G,CAAkH,CAChH,GAEIc,UAAS,CAAGn8B,OAAO,CAAGo6B,gCAF1B,CAGI5C,SAAS,CAAGx3B,OAAO,EAAIq6B,6BAAe,CAAGC,mCAAtB,CAHvB,CAKIt2B,IAAI,CAAGm4B,SAAS,CAAGlhD,SAAH,CAAe+7C,WAAU,CAACh6C,IAAD,CAL7C,CAOA,QAASo6C,QAAT,EAAmB,CACjB,GAAI57C,OAAM,CAAGqL,SAAS,CAACrL,MAAvB,CACIoQ,IAAI,CAAGxR,KAAK,CAACoB,MAAD,CADhB,CAEID,KAAK,CAAGC,MAFZ,CAIA,MAAOD,KAAK,EAAZ,CAAgB,CACdqQ,IAAI,CAACrQ,KAAD,CAAJ,CAAcsL,SAAS,CAACtL,KAAD,CAAvB,CACD,CACD,GAAIi8C,SAAJ,CAAe,CACb,GAAIY,YAAW,CAAGuD,UAAS,CAACvE,OAAD,CAA3B,CACIgF,YAAY,CAAGjE,aAAY,CAACvsC,IAAD,CAAOwsC,WAAP,CAD/B,CAED,CACD,GAAId,QAAJ,CAAc,CACZ1rC,IAAI,CAAGyrC,YAAW,CAACzrC,IAAD,CAAO0rC,QAAP,CAAiBC,OAAjB,CAA0BC,SAA1B,CAAlB,CACD,CACD,GAAIyE,aAAJ,CAAmB,CACjBrwC,IAAI,CAAGmsC,iBAAgB,CAACnsC,IAAD,CAAOqwC,aAAP,CAAsBC,YAAtB,CAAoC1E,SAApC,CAAvB,CACD,CACDh8C,MAAM,EAAI4gD,YAAV,CACA,GAAI5E,SAAS,EAAIh8C,MAAM,CAAG6/C,KAA1B,CAAiC,CAC/B,GAAIE,WAAU,CAAGQ,eAAc,CAACnwC,IAAD,CAAOwsC,WAAP,CAA/B,CACA,MAAO6C,eAAa,CAClBj+C,IADkB,CACZgjB,OADY,CACHg8B,YADG,CACW5E,OAAO,CAACgB,WADnB,CACgCvsC,OADhC,CAElBD,IAFkB,CAEZ2vC,UAFY,CAEAJ,MAFA,CAEQC,GAFR,CAEaC,KAAK,CAAG7/C,MAFrB,CAApB,CAID,CACD,GAAIy7C,YAAW,CAhCJj3B,OAAO,CAAGk3B,4BAgCH,CAASrrC,OAAT,CAAmB,IAArC,CACIqF,EAAE,CAAGirC,SAAS,CAAGlF,WAAW,CAACj6C,IAAD,CAAd,CAAuBA,IADzC,CAGAxB,MAAM,CAAGoQ,IAAI,CAACpQ,MAAd,CACA,GAAI2/C,MAAJ,CAAY,CACVvvC,IAAI,CAAGgwC,QAAO,CAAChwC,IAAD,CAAOuvC,MAAP,CAAd,CACD,CAFD,IAEO,IAnCIn7B,OAAO,CAAG26B,4BAmCV,EAAUn/C,MAAM,CAAG,CAAvB,CAA0B,CAC/BoQ,IAAI,CAACywC,OAAL,GACD,CACD,GA1CUr8B,OAAO,CAAGy6B,2BA0ChB,EAASW,GAAG,CAAG5/C,MAAnB,CAA2B,CACzBoQ,IAAI,CAACpQ,MAAL,CAAc4/C,GAAd,CACD,CACD,GAAI,MAAQ,OAASphD,wBAAjB,EAAyB,eAAgBo9C,QAA7C,CAAsD,CACpDlmC,EAAE,CAAG8S,IAAI,EAAIgzB,WAAU,CAAC9lC,EAAD,CAAvB,CACD,CACD,MAAOA,GAAE,CAACpF,KAAH,CAASmrC,WAAT,CAAsBrrC,IAAtB,CAAP,CACD,CACD,MAAOwrC,QAAP,CACD,CAEc4E,8DAAf,E;;AC1EA,QAASM,YAAT,CAAqBt/C,IAArB,CAA2BgjB,OAA3B,CAAoCq7B,KAApC,CAA2C,CACzC,GAAIr3B,KAAI,CAAGgzB,WAAU,CAACh6C,IAAD,CAArB,CAEA,QAASo6C,QAAT,EAAmB,CACjB,GAAI57C,OAAM,CAAGqL,SAAS,CAACrL,MAAvB,CACIoQ,IAAI,CAAGxR,KAAK,CAACoB,MAAD,CADhB,CAEID,KAAK,CAAGC,MAFZ,CAGI48C,WAAW,CAAGuD,UAAS,CAACvE,OAAD,CAH3B,CAKA,MAAO77C,KAAK,EAAZ,CAAgB,CACdqQ,IAAI,CAACrQ,KAAD,CAAJ,CAAcsL,SAAS,CAACtL,KAAD,CAAvB,CACD,CACD,GAAIg8C,QAAO,CAAI/7C,MAAM,CAAG,CAAT,EAAcoQ,IAAI,CAAC,CAAD,CAAJ,GAAYwsC,WAA1B,EAAyCxsC,IAAI,CAACpQ,MAAM,CAAG,CAAV,CAAJ,GAAqB48C,WAA/D,CACV,EADU,CAEV2D,eAAc,CAACnwC,IAAD,CAAOwsC,WAAP,CAFlB,CAIA58C,MAAM,EAAI+7C,OAAO,CAAC/7C,MAAlB,CACA,GAAIA,MAAM,CAAG6/C,KAAb,CAAoB,CAClB,MAAOJ,eAAa,CAClBj+C,IADkB,CACZgjB,OADY,CACHg8B,aADG,CACW5E,OAAO,CAACgB,WADnB,CACgCn9C,SADhC,CAElB2Q,IAFkB,CAEZ2rC,OAFY,CAEHt8C,SAFG,CAEQA,SAFR,CAEmBogD,KAAK,CAAG7/C,MAF3B,CAApB,CAGD,CACD,GAAI0V,GAAE,CAAI,MAAQ,OAASlX,wBAAjB,EAAyB,eAAgBo9C,QAA1C,CAAqDpzB,IAArD,CAA4DhnB,IAArE,CACA,MAAO8O,kCAAK,CAACoF,EAAD,CAAK,IAAL,CAAWtF,IAAX,CAAZ,CACD,CACD,MAAOwrC,QAAP,CACD,CAEckF,4DAAf,E;;ACxCA,GAAIpF,8BAAc,CAAG,CAArB,CAcA,QAASqF,cAAT,CAAuBv/C,IAAvB,CAA6BgjB,OAA7B,CAAsCnU,OAAtC,CAA+CyrC,QAA/C,CAAyD,CACvD,GACItzB,KAAI,CAAGgzB,WAAU,CAACh6C,IAAD,CADrB,CAGA,QAASo6C,QAAT,EAAmB,CACjB,GAAIK,UAAS,CAAG,CAAC,CAAjB,CACIC,UAAU,CAAG7wC,SAAS,CAACrL,MAD3B,CAEIo8C,SAAS,CAAG,CAAC,CAFjB,CAGIC,UAAU,CAAGP,QAAQ,CAAC97C,MAH1B,CAIIoQ,IAAI,CAAGxR,KAAK,CAACy9C,UAAU,CAAGH,UAAd,CAJhB,CAKIxmC,EAAE,CAAI,MAAQ,OAASlX,wBAAjB,EAAyB,eAAgBo9C,QAA1C,CAAqDpzB,IAArD,CAA4DhnB,IALrE,CAOA,MAAO,EAAE46C,SAAF,CAAcC,UAArB,CAAiC,CAC/BjsC,IAAI,CAACgsC,SAAD,CAAJ,CAAkBN,QAAQ,CAACM,SAAD,CAA1B,CACD,CACD,MAAOF,UAAU,EAAjB,CAAqB,CACnB9rC,IAAI,CAACgsC,SAAS,EAAV,CAAJ,CAAoB/wC,SAAS,CAAC,EAAE4wC,SAAH,CAA7B,CACD,CACD,MAAO3rC,kCAAK,CAACoF,EAAD,CAjBD8O,OAAO,CAAGk3B,6BAiBJ,CAASrrC,OAAT,CAAmB,IAAxB,CAA8BD,IAA9B,CAAZ,CACD,CACD,MAAOwrC,QAAP,CACD,CAEcmF,gEAAf,E;;ACrCA,GAAIT,uBAAW,CAAG,wBAAlB,CAGA,GAAI5E,0BAAc,CAAG,CAArB,CACIkD,6BAAkB,CAAG,CADzB,CAEIY,gCAAqB,CAAG,CAF5B,CAGIX,0BAAe,CAAG,CAHtB,CAIII,wBAAa,CAAG,GAJpB,CAKIC,0BAAe,CAAG,GALtB,CAQA,GAAI/vC,qBAAS,CAAGvF,IAAI,CAACE,GAArB,CAkBA,QAASk3C,UAAT,CAAmB3pC,IAAnB,CAAyBxV,MAAzB,CAAiC,CAC/B,GAAI2iB,QAAO,CAAGnN,IAAI,CAAC,CAAD,CAAlB,CACI4pC,UAAU,CAAGp/C,MAAM,CAAC,CAAD,CADvB,CAEIq/C,UAAU,CAAG18B,OAAO,CAAGy8B,UAF3B,CAGI5jB,QAAQ,CAAG6jB,UAAU,EAAIxF,yBAAc,CAAGkD,6BAAjB,CAAsCK,wBAA1C,CAHzB,CAKA,GAAIkC,QAAO,CACPF,UAAU,EAAIhC,wBAAf,EAAkCz6B,OAAO,EAAIq6B,0BAA9C,EACEoC,UAAU,EAAIhC,wBAAf,EAAkCz6B,OAAO,EAAI06B,0BAA7C,EAAkE7nC,IAAI,CAAC,CAAD,CAAJ,CAAQrX,MAAR,EAAkB6B,MAAM,CAAC,CAAD,CAD3F,EAEEo/C,UAAU,GAAKhC,wBAAa,CAAGC,0BAArB,CAAX,EAAsDr9C,MAAM,CAAC,CAAD,CAAN,CAAU7B,MAAV,EAAoB6B,MAAM,CAAC,CAAD,CAAhF,EAAyF2iB,OAAO,EAAIq6B,0BAHvG,CAMA,GAAI,EAAExhB,QAAQ,EAAI8jB,OAAd,CAAJ,CAA4B,CAC1B,MAAO9pC,KAAP,CACD,CAED,GAAI4pC,UAAU,CAAGvF,yBAAjB,CAAiC,CAC/BrkC,IAAI,CAAC,CAAD,CAAJ,CAAUxV,MAAM,CAAC,CAAD,CAAhB,CAEAq/C,UAAU,EAAI18B,OAAO,CAAGk3B,yBAAV,CAA2B,CAA3B,CAA+B8D,gCAA7C,CACD,CAED,GAAI1gD,MAAK,CAAG+C,MAAM,CAAC,CAAD,CAAlB,CACA,GAAI/C,KAAJ,CAAW,CACT,GAAIg9C,SAAQ,CAAGzkC,IAAI,CAAC,CAAD,CAAnB,CACAA,IAAI,CAAC,CAAD,CAAJ,CAAUykC,QAAQ,CAAGD,YAAW,CAACC,QAAD,CAAWh9C,KAAX,CAAkB+C,MAAM,CAAC,CAAD,CAAxB,CAAd,CAA6C/C,KAA/D,CACAuY,IAAI,CAAC,CAAD,CAAJ,CAAUykC,QAAQ,CAAGyE,eAAc,CAAClpC,IAAI,CAAC,CAAD,CAAL,CAAUipC,sBAAV,CAAjB,CAA0Cz+C,MAAM,CAAC,CAAD,CAAlE,CACD,CAED/C,KAAK,CAAG+C,MAAM,CAAC,CAAD,CAAd,CACA,GAAI/C,KAAJ,CAAW,CACTg9C,QAAQ,CAAGzkC,IAAI,CAAC,CAAD,CAAf,CACAA,IAAI,CAAC,CAAD,CAAJ,CAAUykC,QAAQ,CAAGS,iBAAgB,CAACT,QAAD,CAAWh9C,KAAX,CAAkB+C,MAAM,CAAC,CAAD,CAAxB,CAAnB,CAAkD/C,KAApE,CACAuY,IAAI,CAAC,CAAD,CAAJ,CAAUykC,QAAQ,CAAGyE,eAAc,CAAClpC,IAAI,CAAC,CAAD,CAAL,CAAUipC,sBAAV,CAAjB,CAA0Cz+C,MAAM,CAAC,CAAD,CAAlE,CACD,CAED/C,KAAK,CAAG+C,MAAM,CAAC,CAAD,CAAd,CACA,GAAI/C,KAAJ,CAAW,CACTuY,IAAI,CAAC,CAAD,CAAJ,CAAUvY,KAAV,CACD,CAED,GAAImiD,UAAU,CAAGhC,wBAAjB,CAAgC,CAC9B5nC,IAAI,CAAC,CAAD,CAAJ,CAAUA,IAAI,CAAC,CAAD,CAAJ,EAAW,IAAX,CAAkBxV,MAAM,CAAC,CAAD,CAAxB,CAA8BsN,oBAAS,CAACkI,IAAI,CAAC,CAAD,CAAL,CAAUxV,MAAM,CAAC,CAAD,CAAhB,CAAjD,CACD,CAED,GAAIwV,IAAI,CAAC,CAAD,CAAJ,EAAW,IAAf,CAAqB,CACnBA,IAAI,CAAC,CAAD,CAAJ,CAAUxV,MAAM,CAAC,CAAD,CAAhB,CACD,CAEDwV,IAAI,CAAC,CAAD,CAAJ,CAAUxV,MAAM,CAAC,CAAD,CAAhB,CACAwV,IAAI,CAAC,CAAD,CAAJ,CAAU6pC,UAAV,CAEA,MAAO7pC,KAAP,CACD,CAEc2pC,wDAAf,E;;;;;AC7EA,GAAI/xC,gBAAe,CAAG,qBAAtB,CAGA,GAAIysC,2BAAc,CAAG,CAArB,CACIkD,8BAAkB,CAAG,CADzB,CAEIC,2BAAe,CAAG,CAFtB,CAGIC,iCAAqB,CAAG,EAH5B,CAIIC,6BAAiB,CAAG,EAJxB,CAKIC,mCAAuB,CAAG,EAL9B,CAQA,GAAI9vC,sBAAS,CAAGtF,IAAI,CAACC,GAArB,CA2BA,QAASu3C,WAAT,CAAoB5/C,IAApB,CAA0BgjB,OAA1B,CAAmCnU,OAAnC,CAA4CyrC,QAA5C,CAAsDC,OAAtD,CAA+D4D,MAA/D,CAAuEC,GAAvE,CAA4EC,KAA5E,CAAmF,CACjF,GAAIc,UAAS,CAAGn8B,OAAO,CAAGo6B,8BAA1B,CACA,GAAI,CAAC+B,SAAD,EAAc,MAAOn/C,KAAP,EAAe,UAAjC,CAA6C,CAC3C,KAAM,IAAIwO,UAAJ,CAAcf,eAAd,CAAN,CACD,CACD,GAAIjP,OAAM,CAAG87C,QAAQ,CAAGA,QAAQ,CAAC97C,MAAZ,CAAqB,CAA1C,CACA,GAAI,CAACA,MAAL,CAAa,CACXwkB,OAAO,EAAI,EAAEu6B,6BAAiB,CAAGC,mCAAtB,CAAX,CACAlD,QAAQ,CAAGC,OAAO,CAAGt8C,SAArB,CACD,CACDmgD,GAAG,CAAGA,GAAG,GAAKngD,SAAR,CAAoBmgD,GAApB,CAA0B1wC,qBAAS,CAACsd,oCAAS,CAACozB,GAAD,CAAV,CAAiB,CAAjB,CAAzC,CACAC,KAAK,CAAGA,KAAK,GAAKpgD,SAAV,CAAsBogD,KAAtB,CAA8BrzB,oCAAS,CAACqzB,KAAD,CAA/C,CACA7/C,MAAM,EAAI+7C,OAAO,CAAGA,OAAO,CAAC/7C,MAAX,CAAoB,CAArC,CAEA,GAAIwkB,OAAO,CAAGw6B,mCAAd,CAAuC,CACrC,GAAIyB,cAAa,CAAG3E,QAApB,CACI4E,YAAY,CAAG3E,OADnB,CAGAD,QAAQ,CAAGC,OAAO,CAAGt8C,SAArB,CACD,CACD,GAAI4X,KAAI,CAAGspC,SAAS,CAAGlhD,SAAH,CAAe89C,QAAO,CAAC/7C,IAAD,CAA1C,CAEA,GAAI0zB,QAAO,CAAG,CACZ1zB,IADY,CACNgjB,OADM,CACGnU,OADH,CACYyrC,QADZ,CACsBC,OADtB,CAC+B0E,aAD/B,CAC8CC,YAD9C,CAEZf,MAFY,CAEJC,GAFI,CAECC,KAFD,CAAd,CAKA,GAAIxoC,IAAJ,CAAU,CACR2pC,UAAS,CAAC9rB,OAAD,CAAU7d,IAAV,CAAT,CACD,CACD7V,IAAI,CAAG0zB,OAAO,CAAC,CAAD,CAAd,CACA1Q,OAAO,CAAG0Q,OAAO,CAAC,CAAD,CAAjB,CACA7kB,OAAO,CAAG6kB,OAAO,CAAC,CAAD,CAAjB,CACA4mB,QAAQ,CAAG5mB,OAAO,CAAC,CAAD,CAAlB,CACA6mB,OAAO,CAAG7mB,OAAO,CAAC,CAAD,CAAjB,CACA2qB,KAAK,CAAG3qB,OAAO,CAAC,CAAD,CAAP,CAAaA,OAAO,CAAC,CAAD,CAAP,GAAez1B,SAAf,CAChBkhD,SAAS,CAAG,CAAH,CAAOn/C,IAAI,CAACxB,MADL,CAEjBkP,qBAAS,CAACgmB,OAAO,CAAC,CAAD,CAAP,CAAal1B,MAAd,CAAsB,CAAtB,CAFb,CAIA,GAAI,CAAC6/C,KAAD,EAAUr7B,OAAO,EAAIq6B,2BAAe,CAAGC,iCAAtB,CAArB,CAAmE,CACjEt6B,OAAO,EAAI,EAAEq6B,2BAAe,CAAGC,iCAApB,CAAX,CACD,CACD,GAAI,CAACt6B,OAAD,EAAYA,OAAO,EAAIk3B,0BAA3B,CAA2C,CACzC,GAAIl7C,OAAM,CAAGm7C,WAAU,CAACn6C,IAAD,CAAOgjB,OAAP,CAAgBnU,OAAhB,CAAvB,CACD,CAFD,IAEO,IAAImU,OAAO,EAAIq6B,2BAAX,EAA8Br6B,OAAO,EAAIs6B,iCAA7C,CAAoE,CACzEt+C,MAAM,CAAGsgD,YAAW,CAACt/C,IAAD,CAAOgjB,OAAP,CAAgBq7B,KAAhB,CAApB,CACD,CAFM,IAEA,IAAI,CAACr7B,OAAO,EAAIu6B,6BAAX,EAAgCv6B,OAAO,GAAKk3B,0BAAc,CAAGqD,6BAAtB,CAAxC,GAAqF,CAAChD,OAAO,CAAC/7C,MAAlG,CAA0G,CAC/GQ,MAAM,CAAGugD,cAAa,CAACv/C,IAAD,CAAOgjB,OAAP,CAAgBnU,OAAhB,CAAyByrC,QAAzB,CAAtB,CACD,CAFM,IAEA,CACLt7C,MAAM,CAAGggD,aAAY,CAAClwC,KAAb,CAAmB7Q,SAAnB,CAA8By1B,OAA9B,CAAT,CACD,CACD,GAAIva,OAAM,CAAGtD,IAAI,CAAGkkC,YAAH,CAAiB8C,QAAlC,CACA,MAAOiB,iBAAe,CAAC3kC,MAAM,CAACna,MAAD,CAAS00B,OAAT,CAAP,CAA0B1zB,IAA1B,CAAgCgjB,OAAhC,CAAtB,CACD,CAEc48B,0DAAf,E;;ACtGA,GAAItC,iCAAqB,CAAG,EAA5B,CAwCA,QAASjrC,WAAT,CAAoBrS,IAApB,CAA0Bq+C,KAA1B,CAAiCv9C,KAAjC,CAAwC,CACtCu9C,KAAK,CAAGv9C,KAAK,CAAG7C,SAAH,CAAeogD,KAA5B,CACA,GAAIr/C,OAAM,CAAG4gD,WAAU,CAAC5/C,IAAD,CAAOs9C,gCAAP,CAA8Br/C,SAA9B,CAAyCA,SAAzC,CAAoDA,SAApD,CAA+DA,SAA/D,CAA0EA,SAA1E,CAAqFogD,KAArF,CAAvB,CACAr/C,MAAM,CAACo8C,WAAP,CAAqB/oC,UAAU,CAAC+oC,WAAhC,CACA,MAAOp8C,OAAP,CACD,CAGDqT,UAAU,CAAC+oC,WAAX,CAAyB,EAAzB,CAEe/oC,8FAAf,E;;;;;;;;;;;;AClDA,GAAI5E,gBAAe,CAAG,qBAAtB,CAmBA,QAASoyC,OAAT,CAAgBj0B,CAAhB,CAAmB5rB,IAAnB,CAAyB,CACvB,GAAIhB,OAAJ,CACA,GAAI,MAAOgB,KAAP,EAAe,UAAnB,CAA+B,CAC7B,KAAM,IAAIwO,UAAJ,CAAcf,eAAd,CAAN,CACD,CACDme,CAAC,CAAGZ,oCAAS,CAACY,CAAD,CAAb,CACA,MAAO,WAAW,CAChB,GAAI,EAAEA,CAAF,CAAM,CAAV,CAAa,CACX5sB,MAAM,CAAGgB,IAAI,CAAC8O,KAAL,CAAW,IAAX,CAAiBjF,SAAjB,CAAT,CACD,CACD,GAAI+hB,CAAC,EAAI,CAAT,CAAY,CACV5rB,IAAI,CAAG/B,SAAP,CACD,CACD,MAAOe,OAAP,CACD,CARD,CASD,CAEc6gD,2DAAf,E;;ACnBA,QAASr3C,KAAT,CAAcxI,IAAd,CAAoB,CAClB,MAAO6/C,iBAAM,CAAC,CAAD,CAAI7/C,IAAJ,CAAb,CACD,CAEcwI,kFAAf,E","file":"background.entry.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 99);\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport castPath from './_castPath.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nexport default baseSet;\n","import baseGet from './_baseGet.js';\nimport baseSet from './_baseSet.js';\nimport castPath from './_castPath.js';\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nexport default basePickBy;\n","import basePickBy from './_basePickBy.js';\nimport hasIn from './hasIn.js';\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nexport default basePick;\n","import Symbol from './_Symbol.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nexport default isFlattenable;\n","import arrayPush from './_arrayPush.js';\nimport isFlattenable from './_isFlattenable.js';\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nexport default baseFlatten;\n","import baseFlatten from './_baseFlatten.js';\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nexport default flatten;\n","import flatten from './flatten.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nexport default flatRest;\n","import basePick from './_basePick.js';\nimport flatRest from './_flatRest.js';\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nexport default pick;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport createAssigner from './_createAssigner.js';\nimport keysIn from './keysIn.js';\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assign\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  copyObject(source, keysIn(source), object);\n});\n\nexport default assignIn;\n","/* @flow */\n\nimport { memoize, assignIn, once, pick } from 'lodash-es';\nimport { downcast } from './flow';\n\nexport function waitForEvent(ele: EventTarget, ...events: string[]): Promise<Event> {\n\treturn Promise.race(events.map(event =>\n\t\tnew Promise(resolve => {\n\t\t\tele.addEventListener(event, function fire(e) {\n\t\t\t\tele.removeEventListener(event, fire);\n\t\t\t\tresolve(e);\n\t\t\t});\n\t\t}),\n\t));\n}\n\nexport function waitForChild(ele: Element, selector: string): Promise<HTMLElement> {\n\treturn new Promise(resolve => {\n\t\tconst child = Array.from(ele.children).find(child => child.matches(selector));\n\t\tif (child) {\n\t\t\tresolve(child);\n\t\t\treturn;\n\t\t}\n\n\t\tconst observer = new MutationObserver(mutations => {\n\t\t\tfor (const mutation of mutations) {\n\t\t\t\tfor (const node of mutation.addedNodes) {\n\t\t\t\t\tif (node.nodeType === Node.ELEMENT_NODE && (node: any).matches(selector)) {\n\t\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\t\tresolve(downcast(node, HTMLElement));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tobserver.observe(ele, { childList: true });\n\t});\n}\n\nexport function watchForChildren(ele: Element, selector: string, callback: (ele: HTMLElement) => any): void {\n\tfor (const child of Array.from(ele.children).filter(child => child.matches(selector))) {\n\t\tcallback(child);\n\t}\n\n\twatchForFutureChildren(ele, selector, callback);\n}\n\nexport function watchForFutureChildren(ele: Element, selector: string, callback: (ele: HTMLElement) => any): void {\n\tnew MutationObserver(mutations => {\n\t\tfor (const mutation of mutations) {\n\t\t\tfor (const node of mutation.addedNodes) {\n\t\t\t\tif (node.nodeType === Node.ELEMENT_NODE && (node: any).matches(selector)) {\n\t\t\t\t\tcallback(downcast(node, HTMLElement));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}).observe(ele, { childList: true });\n}\n\nexport function waitForDescendant(ele: Element, selector: string): Promise<HTMLElement> {\n\treturn new Promise(resolve => {\n\t\tconst child = ele.querySelector(selector);\n\t\tif (child) {\n\t\t\tresolve(child);\n\t\t\treturn;\n\t\t}\n\n\t\tconst observer = new MutationObserver(mutations => {\n\t\t\tfor (const mutation of mutations) {\n\t\t\t\tfor (const node of mutation.addedNodes) {\n\t\t\t\t\tif (node.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t\t\t// the desired node may a descendant of an added node,\n\t\t\t\t\t\t// so scanning through addedNodes is not sufficient\n\t\t\t\t\t\tconst child = ele.querySelector(selector);\n\t\t\t\t\t\tif (child) {\n\t\t\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\t\t\tresolve(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// stop iteration now, since we've already run querySelector over all children\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tobserver.observe(ele, { childList: true, subtree: true });\n\t});\n}\n\nexport function waitForDescendantChange(ele: Element, selector: string): Promise<void> {\n\treturn new Promise(resolve => {\n\t\tconst found = () => {\n\t\t\tobserver.disconnect();\n\t\t\tresolve();\n\t\t};\n\n\t\tconst observer = new MutationObserver(mutations => {\n\t\t\tfor (const mutation of mutations) {\n\t\t\t\tif ((mutation.target: any).matches(selector)) return found();\n\t\t\t\tfor (const node of mutation.addedNodes) {\n\t\t\t\t\tif (node.nodeType === Node.ELEMENT_NODE && (node: any).querySelector(selector)) return found();\n\t\t\t\t}\n\t\t\t\tfor (const node of mutation.removedNodes) {\n\t\t\t\t\tif (node.nodeType === Node.ELEMENT_NODE && (node: any).querySelector(selector)) return found();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tobserver.observe(ele, { childList: true, subtree: true });\n\t});\n}\n\nexport function waitForAttach(parent: HTMLElement, el: HTMLElement, cancel?: Promise<*>): Promise<void> {\n\tif (parent.contains(el)) return Promise.resolve();\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst observer = new MutationObserver(() => {\n\t\t\tif (parent.contains(el)) {\n\t\t\t\tresolve();\n\t\t\t\tobserver.disconnect();\n\t\t\t}\n\t\t});\n\n\t\tobserver.observe(parent, { subtree: true, childList: true });\n\t\tif (cancel) cancel.then(() => { observer.disconnect(); reject(new Error('Canceled')); });\n\t});\n}\n\nexport function waitForDetach(el: HTMLElement, cancel?: Promise<*>): Promise<void> {\n\t// Use `document.documentElement` as parent since using other closer element may not detect removal\n\tconst parent = document.documentElement;\n\n\tif (!parent.contains(el)) return Promise.resolve();\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst observer = new MutationObserver(() => {\n\t\t\tif (!parent.contains(el)) {\n\t\t\t\tresolve();\n\t\t\t\tobserver.disconnect();\n\t\t\t}\n\t\t});\n\n\t\tobserver.observe(parent, { subtree: true, childList: true });\n\t\tif (cancel) cancel.then(() => { observer.disconnect(); reject(new Error('Canceled')); });\n\t});\n}\n\nexport function watchForDescendants(ele: Element, selector: string, callback: (ele: HTMLElement) => any, ignoreChildrenIfAddedNodeMatches: boolean = false): void {\n\tfor (const child of ele.querySelectorAll(selector)) {\n\t\tcallback(child);\n\t}\n\n\twatchForFutureDescendants(ele, selector, callback, ignoreChildrenIfAddedNodeMatches);\n}\n\nexport function watchForFutureDescendants(ele: Element, selector: string, callback: (ele: HTMLElement) => any, ignoreChildrenIfAddedNodeMatches: boolean = false): void {\n\tnew MutationObserver(mutations => {\n\t\t// avoid calling the callback twice if streamed-in children match the same selectors as their parents\n\t\t// i.e. nested comments that are rendered at pageload\n\t\tconst children = new Set();\n\t\tfor (const mutation of mutations) {\n\t\t\tfor (const node of mutation.addedNodes) {\n\t\t\t\tif (node.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t\t// the node itself may match...\n\t\t\t\t\tif ((node: any).matches(selector)) {\n\t\t\t\t\t\tchildren.add(node);\n\t\t\t\t\t\tif (ignoreChildrenIfAddedNodeMatches) continue;\n\t\t\t\t\t}\n\t\t\t\t\t// ...or some of its children may match\n\t\t\t\t\tfor (const child of (node: any).querySelectorAll(selector)) {\n\t\t\t\t\t\tchildren.add(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (const child of children) {\n\t\t\tcallback(downcast(child, HTMLElement));\n\t\t}\n\t}).observe(ele, { childList: true, subtree: true });\n}\n\n// Limitation: Only runs check when `ele`''s attributes are changed\nexport function waitForSelectorMatch(ele: HTMLElement, selector: string): Promise<void> {\n\tif (ele.matches(selector)) return Promise.resolve();\n\n\treturn new Promise(resolve => {\n\t\tconst observer = new MutationObserver(() => {\n\t\t\tif (ele.matches(selector)) {\n\t\t\t\tresolve();\n\t\t\t\tobserver.disconnect();\n\t\t\t}\n\t\t});\n\n\t\tobserver.observe(ele, { attributes: true });\n\t});\n}\n\nexport function empty<T: Element>(parent: T): T {\n\twhile (parent.lastChild) parent.removeChild(parent.lastChild);\n\treturn parent;\n}\n\nexport function click(obj: EventTarget, button: number = 0): void {\n\tobj.dispatchEvent(new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tdetail: 0,\n\t\tscreenX: 1,\n\t\tscreenY: 1,\n\t\tclientX: 1,\n\t\tclientY: 1,\n\t\tbutton,\n\t}));\n}\n\nclick.isProgrammaticEvent = (e: MouseEvent): boolean => e.clientX === 1 && e.clientY === 1;\n\nexport const getViewportSize = memoize((): { width: number, height: number } => {\n\twaitForEvent(window, 'resize').then(() => { getViewportSize.cache.clear(); });\n\n\tlet visualViewport;\n\n\tif (window.visualViewport) {\n\t\tvisualViewport = window.visualViewport;\n\t} else {\n\t\tconst viewportSizedElement = document.createElement('div');\n\t\tviewportSizedElement.style.width = viewportSizedElement.style.height = '100%';\n\t\tviewportSizedElement.style.position = 'fixed';\n\t\tdocument.body.appendChild(viewportSizedElement);\n\t\tvisualViewport = viewportSizedElement.getBoundingClientRect();\n\n\t\t// Try less accurate method in case this didn't work (workaround for potensial Firefox issue)\n\t\tif (!visualViewport.height || !visualViewport.width) {\n\t\t\tvisualViewport = document.documentElement.getBoundingClientRect();\n\t\t}\n\n\t\tviewportSizedElement.remove();\n\t}\n\n\treturn pick(visualViewport, ['height', 'width']);\n});\n\nexport function elementInViewport(ele: HTMLElement): boolean {\n\tif (!ele || !ele.offsetParent) return false;\n\n\tconst { top, left, bottom, right } = ele.getBoundingClientRect();\n\n\treturn (\n\t\ttop >= 0 &&\n\t\tleft >= 0 &&\n\t\tbottom <= getViewportSize().height &&\n\t\tright <= getViewportSize().width\n\t);\n}\n\nfunction getViewportDimensions() {\n\tconst headerOffset = getHeaderOffset();\n\tconst left = window.pageXOffset;\n\tconst top = window.pageYOffset + headerOffset;\n\tconst width = getViewportSize().width;\n\tconst height = getViewportSize().height - headerOffset;\n\n\treturn {\n\t\tyOffset: headerOffset,\n\t\tleft,\n\t\ttop,\n\t\tbottom: top + height,\n\t\tright: left + width,\n\t\twidth,\n\t\theight,\n\t};\n}\n\n// Returns percentage of the element that is within the viewport along the y-axis\n// Note that it doesn't matter where the element is on the x-axis, it can be totally invisible to the user\n// and this function might still return 1!\nexport function getPercentageVisibleYAxis(obj: Element): number {\n\tconst rect = obj.getBoundingClientRect();\n\tconst top = Math.max(0, rect.bottom - rect.height);\n\tconst bottom = Math.min(getViewportSize().height, rect.bottom);\n\tif (rect.height === 0) {\n\t\treturn 0;\n\t}\n\treturn Math.max(0, (bottom - top) / rect.height);\n}\n\nconst padBottom = once(() => {\n\tconst element = document.createElement('div');\n\telement.style.clear = 'both';\n\tconst extraPadding = 50; // In case the body's height reduces\n\treturn (scrollTop, viewportHeight) => {\n\t\tconst currentPadding = element.clientHeight;\n\t\tconst paddingRequired = extraPadding +\n\t\t\t-(document.documentElement.scrollHeight - scrollTop - viewportHeight - currentPadding);\n\t\tif (paddingRequired > 0) document.body.append(element);\n\t\telse element.remove();\n\t\telement.style.height = `${paddingRequired}px`;\n\t};\n});\n\nlet recentScroll = false;\nlet scrollInvokationToken;\n\nexport type ScrollStyle = 'none' | 'top' | 'adopt' | 'middle' | 'page' | 'legacy' | 'directional';\ntype Direction = 'up' | 'down';\ntype Anchor = {| to: number, from?: number |};\n\nexport function scrollToElement(to: HTMLElement, from: ?HTMLElement, {\n\tscrollStyle,\n\trestrictDirectionTo,\n\tdirection: selectedDirection,\n\tanchor,\n\twaitTillVisible,\n}: {|\n\tscrollStyle: ScrollStyle,\n\trestrictDirectionTo?: Direction,\n\tdirection?: Direction,\n\tanchor?: Anchor,\n\twaitTillVisible?: boolean,\n|}) {\n\tconst _scrollInvokationToken = scrollInvokationToken = {}; // Unique object used to check this whether invokation has been superseded\n\n\tif (scrollStyle === 'none' && !anchor) {\n\t\treturn;\n\t}\n\n\tif (waitTillVisible && !to.offsetParent) {\n\t\t// Try again next frame\n\t\trequestAnimationFrame(() => {\n\t\t\tif (scrollInvokationToken === _scrollInvokationToken) scrollToElement(...arguments); // eslint-disable-line prefer-rest-params\n\t\t});\n\t\treturn;\n\t}\n\n\tif (!to.offsetParent) {\n\t\tconsole.error('Element is not visible.');\n\t\treturn;\n\t}\n\n\tif (scrollStyle === 'none' && anchor) {\n\t\tconst diff = to.getBoundingClientRect().top - anchor.to;\n\t\tif (diff) window.scrollBy(0, diff);\n\t}\n\n\tconst viewport = getViewportDimensions();\n\n\tconst target = assignIn({}, to.getBoundingClientRect()); // top, right, bottom, left are relative to viewport\n\ttarget.top -= viewport.yOffset;\n\ttarget.bottom -= viewport.yOffset;\n\n\tconst top = viewport.top + target.top - 5; /* offset */\n\n\tif (scrollStyle === 'middle' && target.height >= viewport.height) {\n\t\tscrollStyle = 'top';\n\t}\n\n\tlet compensateHeader = true;\n\tlet scrollY;\n\n\tif (scrollStyle === 'top') {\n\t\t// Always scroll element to top of page; pad bottom if necessary\n\t\tpadBottom()(top, viewport.height);\n\t\tscrollY = top;\n\t} else if (from && scrollStyle === 'adopt') {\n\t\t// Replace the viewport position of `from` with `element`\n\t\tconst fromTop = anchor && typeof anchor.from === 'number' ?\n\t\t\tanchor.from :\n\t\t\tfrom.getBoundingClientRect().top;\n\t\tlet diff = to.getBoundingClientRect().top - fromTop;\n\n\t\tif (fromTop < 0) {\n\t\t\t// Compensate to show top when it is above viewport\n\t\t\tdiff += fromTop;\n\t\t} else if (fromTop > viewport.height - 60) {\n\t\t\t// Always show at minimum the top 60px of the element\n\t\t\tdiff += fromTop - viewport.height + 60;\n\t\t}\n\n\t\tscrollY = window.scrollY + diff;\n\t\tcompensateHeader = false;\n\t} else if (scrollStyle === 'middle') {\n\t\tconst buffer = (viewport.height - target.height) / 2;\n\t\tconst newScrollY = top - buffer;\n\n\t\tif (elementInViewport(to)) {\n\t\t\tconst viewportDirection = newScrollY >= window.scrollY ? 'down' : 'up';\n\t\t\t// Having these go in opposite directions is jarring\n\t\t\tif (viewportDirection !== selectedDirection) return;\n\t\t}\n\n\t\tscrollY = newScrollY;\n\t} else if (target.top >= 0 && target.bottom <= viewport.height) {\n\t\t// Element is already completely inside viewport\n\t\t// (remember, top and bottom are relative to viewport)\n\t\t// do nothing\n\t} else if (scrollStyle === 'legacy') {\n\t\t// Element not completely in viewport, so scroll to top\n\t\tscrollY = top;\n\t} else if (target.top < viewport.yOffset) {\n\t\t// Element starts above viewport\n\t\t// So, align top of element to top of viewport\n\t\tscrollY = top;\n\t} else if (viewport.height < target.bottom &&\n\t\ttarget.height < viewport.height) {\n\t\t// Visible part of element starts or extends below viewport\n\t\tif (scrollStyle === 'page') {\n\t\t\tscrollY = top;\n\t\t} else {\n\t\t\t// So, align bottom of target to bottom of viewport\n\t\t\tscrollY = viewport.top + target.bottom - viewport.height;\n\t\t}\n\t} else {\n\t\t// Visible part of element below the viewport but it'll fill the viewport, or fallback\n\t\t// So, align top of element to top of viewport\n\t\tscrollY = top;\n\t}\n\n\tif (scrollY !== undefined) {\n\t\tif (compensateHeader) scrollY -= getHeaderOffset();\n\t\tconst scollDirection = scrollY > viewport.top ? 'down' : 'up';\n\t\tif (viewport.top === scrollY || (restrictDirectionTo && restrictDirectionTo !== scollDirection)) return;\n\t\twindow.scrollTo(0, scrollY);\n\t\trecentScroll = true;\n\t\twaitForEvent(window, 'scroll').then(() => { recentScroll = false; });\n\t}\n}\n\nscrollToElement.isProgrammaticEvent = (): boolean => recentScroll;\n\nconst headerIds = { fullWidth: [], partialWidth: [] };\n\nexport function _addHeaderId(elementId: string, partialWidth: boolean = false) {\n\theaderIds[partialWidth ? 'partialWidth' : 'fullWidth'].push(elementId);\n}\n\nexport const getHeaderOffset = memoize((includePartialWidthHeaders?: boolean = false): number => {\n\tconst headers = [\n\t\t...headerIds.fullWidth,\n\t\t...(includePartialWidthHeaders ? headerIds.partialWidth : []),\n\t];\n\n\treturn headers\n\t\t.map(id => document.getElementById(id))\n\t\t.reduce((a, b) => a + b.getBoundingClientRect().height, 0);\n});\n\nexport const getD2xBodyOffset = memoize(() => {\n\ttry {\n\t\treturn document.getElementById('2x-container').offsetTop;\n\t} catch (e) {\n\t\treturn 65;\n\t}\n});\n\nexport function addCSS(css: string) {\n\tlet style = addStyle(css);\n\treturn {\n\t\tremove() {\n\t\t\tif (!style) return;\n\t\t\tstyle.remove();\n\t\t\tstyle.textContent = '';\n\t\t\tstyle = undefined;\n\t\t},\n\t};\n}\n\nfunction addStyle(css) {\n\tconst style = document.createElement('style');\n\tstyle.textContent = css;\n\n\t(document.head || document.documentElement).appendChild(style);\n\n\treturn style;\n}\n\nexport const isLastNodeInDOM = (node: Node) => {\n\tlet _last = node;\n\tdo {\n\t\tif (_last.nextSibling) break;\n\t} while ((_last = _last.parentNode));\n\treturn !_last;\n};\n\n// r2 Reddit clone certain elements, e.g. when replying or editing a post\n// This will remove elements that have a specific attribute, but have not been registered\nexport const preventCloning = (() => {\n\t// Prevent breaking ava test\n\tif (typeof window === 'undefined') return (e: *) => e;\n\n\tconst attribute = `res-prevent-cloning-${Date.now()}`; // Include date to prevent the attribute being misused in a selector\n\tconst elements = new WeakSet();\n\n\t// Delay adding the observer a little, to not slow down init\n\t// Things are practially never cloned _before_ the page is fully loaded, so this is a OK solutoin\n\twaitForEvent(window, 'DOMContentLoaded', 'load').then(() => {\n\t\tconst { watchForThings } = require('./watchers'); // avoid test issue\n\t\twatchForThings(null, thing => {\n\t\t\tfor (const ele of [...thing.entry.querySelectorAll(`[${attribute}]`)]) { if (!elements.has(ele)) ele.remove(); }\n\t\t}, { immediate: true });\n\t});\n\n\treturn (element: HTMLElement) => {\n\t\telement.setAttribute(attribute, '');\n\t\telements.add(element);\n\t\treturn element;\n\t};\n})();\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nexport default last;\n","import baseGet from './_baseGet.js';\nimport baseSlice from './_baseSlice.js';\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nexport default parent;\n","import castPath from './_castPath.js';\nimport last from './last.js';\nimport parent from './_parent.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nexport default baseUnset;\n","import baseUnset from './_baseUnset.js';\nimport isIndex from './_isIndex.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAt` without support for individual\n * indexes or capturing the removed elements.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {number[]} indexes The indexes of elements to remove.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAt(array, indexes) {\n  var length = array ? indexes.length : 0,\n      lastIndex = length - 1;\n\n  while (length--) {\n    var index = indexes[length];\n    if (length == lastIndex || index !== previous) {\n      var previous = index;\n      if (isIndex(index)) {\n        splice.call(array, index, 1);\n      } else {\n        baseUnset(array, index);\n      }\n    }\n  }\n  return array;\n}\n\nexport default basePullAt;\n","import baseIteratee from './_baseIteratee.js';\nimport basePullAt from './_basePullAt.js';\n\n/**\n * Removes all elements from `array` that `predicate` returns truthy for\n * and returns an array of the removed elements. The predicate is invoked\n * with three arguments: (value, index, array).\n *\n * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n * to pull elements from an array by value.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new array of removed elements.\n * @example\n *\n * var array = [1, 2, 3, 4];\n * var evens = _.remove(array, function(n) {\n *   return n % 2 == 0;\n * });\n *\n * console.log(array);\n * // => [1, 3]\n *\n * console.log(evens);\n * // => [2, 4]\n */\nfunction remove(array, predicate) {\n  var result = [];\n  if (!(array && array.length)) {\n    return result;\n  }\n  var index = -1,\n      indexes = [],\n      length = array.length;\n\n  predicate = baseIteratee(predicate, 3);\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result.push(value);\n      indexes.push(index);\n    }\n  }\n  basePullAt(array, indexes);\n  return result;\n}\n\nexport default remove;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","/**\n * This function is like `baseIndexOf` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOfWith(array, value, fromIndex, comparator) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(array[index], value)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseIndexOfWith;\n","import arrayMap from './_arrayMap.js';\nimport baseIndexOf from './_baseIndexOf.js';\nimport baseIndexOfWith from './_baseIndexOfWith.js';\nimport baseUnary from './_baseUnary.js';\nimport copyArray from './_copyArray.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAllBy` without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAll(array, values, iteratee, comparator) {\n  var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n      index = -1,\n      length = values.length,\n      seen = array;\n\n  if (array === values) {\n    values = copyArray(values);\n  }\n  if (iteratee) {\n    seen = arrayMap(array, baseUnary(iteratee));\n  }\n  while (++index < length) {\n    var fromIndex = 0,\n        value = values[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n      if (seen !== array) {\n        splice.call(seen, fromIndex, 1);\n      }\n      splice.call(array, fromIndex, 1);\n    }\n  }\n  return array;\n}\n\nexport default basePullAll;\n","import basePullAll from './_basePullAll.js';\n\n/**\n * This method is like `_.pull` except that it accepts an array of values to remove.\n *\n * **Note:** Unlike `_.difference`, this method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pullAll(array, ['a', 'c']);\n * console.log(array);\n * // => ['b', 'b']\n */\nfunction pullAll(array, values) {\n  return (array && array.length && values && values.length)\n    ? basePullAll(array, values)\n    : array;\n}\n\nexport default pullAll;\n","import baseRest from './_baseRest.js';\nimport pullAll from './pullAll.js';\n\n/**\n * Removes all given values from `array` using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n * to remove elements from an array by predicate.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {...*} [values] The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pull(array, 'a', 'c');\n * console.log(array);\n * // => ['b', 'b']\n */\nvar pull = baseRest(pullAll);\n\nexport default pull;\n","/* @flow */\n\nexport function* range(start: number, end: number): Iterable<number> {\n\tfor (let i = start; i < end; ++i) { // eslint-disable-line no-restricted-syntax\n\t\tyield i;\n\t}\n}\n\n/* eslint-disable no-redeclare, no-unused-vars */\ndeclare function zip<A>(a: Iterable<A>): Iterable<[A]>;\ndeclare function zip<A, B>(a: Iterable<A>, b: Iterable<B>): Iterable<[A, B]>;\ndeclare function zip<A, B, C>(a: Iterable<A>, b: Iterable<B>, c: Iterable<C>): Iterable<[A, B, C]>;\n/* eslint-enable no-unused-vars */\n\nexport function* zip(...iterables) {\n\tconst generators = iterables.map(it => it[Symbol.iterator]());\n\tlet results;\n\n\twhile ((results = generators.map(gen => gen.next())).some(r => !r.done)) {\n\t\tyield results.map(r => r.value);\n\t}\n}\n/* eslint-enable no-redeclare */\n","/* @flow */\n\nimport { pull, debounce, once, curryRight, remove } from 'lodash-es';\nimport { zip } from './generator';\n\nexport function waitFor<T>(callback: () => ?T, interval?: number = 1): Promise<T> {\n\treturn new Promise(resolve => {\n\t\t(function repeat() {\n\t\t\tconst val = callback();\n\t\t\tif (!val) {\n\t\t\t\tsetTimeout(repeat, interval);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresolve(val);\n\t\t})();\n\t});\n}\n\n/*\n Iterate through an array in chunks, executing a callback on each element.\n Each chunk is handled asynchronously from the others with a delay betwen each batch.\n This will change the timeout dynamically based on current screen performance in an effort\n to work as fast as possibly without blocking the screen.\n */\n\nexport const forEachChunked = (() => {\n\tconst framerate = 30;\n\tconst frameTime = 1000 / framerate;\n\n\tconst queues = [];\n\n\tconst run = frameThrottle(() => {\n\t\tconst start = performance.now();\n\t\tdo {\n\t\t\tremove(queues, ({ generator, callback, resolve, reject }): boolean | void => {\n\t\t\t\tconst { value, done } = generator.next();\n\n\t\t\t\tif (done) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tcallback(value);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (generator.return) generator.return();\n\t\t\t\t\treject(e);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t// stop if there are no queues left\n\t\t\tif (!queues.length) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} while (performance.now() - start < frameTime);\n\t\trun();\n\t});\n\n\treturn curryRight(<T>(collection: Iterable<T>, callback: (x: T) => void) =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tconst iterable = (Symbol.iterator in collection) ? collection : Array.from(collection); // eslint-disable-line no-restricted-syntax\n\t\t\t// $FlowIssue https://github.com/facebook/flow/issues/1163, https://github.com/facebook/flow/issues/1015\n\t\t\tqueues.push({ generator: iterable[Symbol.iterator](), callback, resolve, reject });\n\t\t\trun();\n\t\t}),\n\t);\n})();\n\n/*\n * Will accumulate values until `size` elements are accumulated or `delay` milliseconds pass.\n * `callback` accepts an array of batched values and should return an array of results **in the same order**.\n * If it throws, all promises will be rejected with the same error.\n * If one of the results is an instance of `Error`, the corresponding promise will be rejected with that error.\n */\nexport function batch<T, V>(callback: (xs: T[]) => Promise<Iterable<Error | Promise<V> | V> | void> | void, { size = 100, delay = 50, flushBeforeUnload = false }: {| size?: number, delay?: number, flushBeforeUnload?: boolean |} = {}): (x: T) => Promise<V> {\n\tlet invoke;\n\n\tfunction* batchAccumulator() {\n\t\tconst entries = [];\n\t\tconst promises = [];\n\n\t\tfunction addPromise(): Promise<V> {\n\t\t\tif (entries.length) {\n\t\t\t\treturn new Promise((resolve, reject) => { promises.push({ resolve, reject }); });\n\t\t\t} else {\n\t\t\t\treturn (undefined: any); // dummy - never observed\n\t\t\t}\n\t\t}\n\n\t\tinvoke = once(async () => {\n\t\t\tstartNewBatch();\n\t\t\tif (!entries.length) return;\n\t\t\ttry {\n\t\t\t\tconst results = await callback(entries) || [];\n\t\t\t\tfor (const [{ resolve, reject }, result] of zip(promises, results)) {\n\t\t\t\t\tif (result instanceof Error) reject(result);\n\t\t\t\t\telse resolve(result);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tfor (const { reject } of promises) {\n\t\t\t\t\treject(e);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst timeout = delay ? debounce(invoke, delay) : throttle(invoke);\n\n\t\twhile (entries.length < size) {\n\t\t\tconst entry = yield addPromise();\n\t\t\tif (entry === undefined) throw new Error('undefined passed into batch generator');\n\t\t\tentries.push(entry);\n\t\t\ttimeout();\n\t\t}\n\n\t\tconst lastPromise = addPromise();\n\t\tinvoke();\n\t\tyield lastPromise;\n\t}\n\n\tlet currentBatch;\n\n\tfunction startNewBatch() {\n\t\tcurrentBatch = batchAccumulator();\n\t\tcurrentBatch.next(); // prime the generator, so the first `.next(value)` isn't lost\n\t}\n\n\tstartNewBatch();\n\n\tif (flushBeforeUnload) window.addEventListener('beforeunload', () => { invoke(); }, true);\n\n\treturn entry => {\n\t\tconst { value } = currentBatch.next(entry);\n\t\tif (value === undefined) throw new Error('Batch generator was not replaced after completion');\n\t\treturn value;\n\t};\n}\n\nfunction always<T>(promise: Promise<T>, callback: (x: T) => Promise<void> | void): Promise<void> {\n\treturn promise.then(callback, callback);\n}\n\n// Like _asyncToGenerator, but calls back into the generator synchronously if the value is not a promise\n// unless you're certain that you need to avoid asynchronicity at all costs, just use an async function\nexport function fastAsync<A, B, C, D, E, F, G, R>(\n\tcallback: (a: A, b: B, c: C, d: D, e: E, f: F, g: G) => Generator<any, R, any>,\n): (a: A, b: B, c: C, d: D, e: E, f: F, g: G) => R | Promise<R> {\n\treturn function(...args) {\n\t\treturn (function next(generator, arg, throwing) {\n\t\t\tconst { value, done } = !throwing ? generator.next(arg) : generator.throw(arg);\n\n\t\t\tif (done) {\n\t\t\t\treturn value;\n\t\t\t} else if (!(value instanceof Promise)) {\n\t\t\t\treturn next(generator, value, false);\n\t\t\t} else {\n\t\t\t\treturn value.then(\n\t\t\t\t\tval => next(generator, val, false),\n\t\t\t\t\terr => next(generator, err, true),\n\t\t\t\t);\n\t\t\t}\n\t\t})(Reflect.apply(callback, this, args), undefined, false);\n\t};\n}\n\n/* eslint-disable no-redeclare, no-unused-vars */\ndeclare function asyncFlow<A1, A2, A3, A4, RA, RB, F1: (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<RA> | RB>\n\t(f1: F1): (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<RA> | Promise<RB> | RB;\ndeclare function asyncFlow<A1, A2, A3, A4, B, RA, RB, F1: (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<B> | B, F2: (b: B) => Promise<RA> | RB>\n\t(f1: F1, f2: F2): (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<RA> | Promise<RB> | RB;\ndeclare function asyncFlow<A1, A2, A3, A4, B, C, RA, RB, F1: (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<B> | B, F2: (b: B) => Promise<C> | C, F3: (c: C) => Promise<RA> | RB>\n\t(f1: F1, f2: F2, f3: F3): (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<RA> | Promise<RB> | RB;\ndeclare function asyncFlow<A1, A2, A3, A4, B, C, D, RA, RB, F1: (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<B> | B, F2: (b: B) => Promise<C> | C, F3: (c: C) => Promise<D> | D, F4: (d: D) => Promise<RA> | RB>\n\t(f1: F1, f2: F2, f3: F3, f4: F4): (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<RA> | Promise<RB> | RB;\ndeclare function asyncFlow<A1, A2, A3, A4, B, C, D, E, RA, RB, F1: (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<B> | B, F2: (b: B) => Promise<C> | C, F3: (c: C) => Promise<D> | D, F4: (d: D) => Promise<E> | E, F5: (e: E) => Promise<RA> | RB>\n\t(f1: F1, f2: F2, f3: F3, f4: F4, f5: F5): (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<RA> | Promise<RB> | RB;\ndeclare function asyncFlow<A1, A2, A3, A4, B, C, D, E, F, RA, RB, F1: (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<B> | B, F2: (b: B) => Promise<C> | C, F3: (c: C) => Promise<D> | D, F4: (d: D) => Promise<E> | E, F5: (e: E) => Promise<F> | F, F6: (f: F) => Promise<RA> | RB>\n\t(f1: F1, f2: F2, f3: F3, f4: F4, f5: F5, f6: F6): (a1: A1, a2: A2, a3: A3, a4: A4) => Promise<RA> | Promise<RB> | RB;\n\nexport function asyncFlow(firstFn, ...fns) {\n\treturn fastAsync(function*(...args) {\n\t\tlet accum = firstFn(...args);\n\t\tfor (const fn of fns) {\n\t\t\taccum = fn(yield accum);\n\t\t}\n\t\treturn accum;\n\t});\n}\n\n// once the promise has resolved, its value is available synchronously\n// intended for use with fastAsync\nexport function reifyPromise<T>(promise: Promise<T>): { get(): T | Promise<T> } {\n\tlet val = promise;\n\tpromise.then(x => { val = x; });\n\treturn { get: () => val };\n}\n\nexport function keyedMutex<V, T:(...args: any) => Promise<V> | V>(\n\tcallback: T,\n\tkeyResolver?: (...args: any) => mixed = x => x,\n): T {\n\tconst queues = new Map();\n\n\treturn (function(...args) {\n\t\tconst key = keyResolver(...args);\n\n\t\t// https://github.com/facebook/flow/issues/34\n\t\tconst tail = queues.has(key) ?\n\t\t\talways(queues.get(key) /*:: || Promise.resolve() */, () => Reflect.apply(callback, this, args)) :\n\t\t\tReflect.apply(callback, this, args);\n\n\t\tif (tail instanceof Promise) {\n\t\t\tqueues.set(key, tail);\n\n\t\t\talways(tail, () => {\n\t\t\t\tif (queues.get(key) === tail) queues.delete(key);\n\t\t\t});\n\t\t}\n\n\t\treturn tail;\n\t}: any);\n}\n\nexport function mutex<V, T:(...args: any) => Promise<V> | V>(callback: T): T {\n\tlet queue;\n\n\treturn (function(...args) {\n\t\tconst tail = queue ?\n\t\t\talways(queue, () => Reflect.apply(callback, this, args)) :\n\t\t\tReflect.apply(callback, this, args);\n\n\t\tif (tail instanceof Promise) {\n\t\t\tqueue = tail;\n\n\t\t\talways(tail, () => {\n\t\t\t\tif (queue === tail) queue = undefined;\n\t\t\t});\n\t\t}\n\n\t\treturn tail;\n\t}: any);\n}\n\n// `callback` is invoked when the micro task queue is emptied\n// returns a promise that resolves when callback resolves\nexport function throttle(callback: () => void | Promise<void>): () => Promise<void> {\n\tlet promise: ?Promise<*>;\n\n\treturn () => {\n\t\tpromise = promise || Promise.resolve().then(() => {\n\t\t\tpromise = null;\n\t\t\tcallback();\n\t\t});\n\t\treturn promise;\n\t};\n}\n\n// Invokes callback after the returned function has not been invoked for `debounce` number of frames\nexport function frameDebounce(callback: () => any, debounce: number = 1): () => void {\n\tlet remaining: number;\n\n\tconst update = frameThrottle(() => {\n\t\tif (remaining) requestAnimationFrame(() => { update(); });\n\t\telse callback();\n\t\tremaining -= 1;\n\t});\n\n\treturn () => {\n\t\tremaining = debounce;\n\t\trequestAnimationFrame(() => { update(); });\n\t};\n}\n\n/**\n * Returns a wrapper function, similar to _.throttle, that will invoke `callback` at most once per frame.\n * `callback` will be invoked with the arguments provided to the most recent call of the wrapper function.\n */\nexport function frameThrottle<V>(callback: (...args: any) => V): (...args: any) => Promise<V> {\n\tlet args = [];\n\tlet promise;\n\n\treturn (...a) => {\n\t\targs = a;\n\t\tpromise = promise || new Promise((res, rej) => {\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tpromise = null;\n\t\t\t\ttry {\n\t\t\t\t\tres(callback(...args));\n\t\t\t\t} catch (e) {\n\t\t\t\t\trej(e);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn promise;\n\t};\n}\n\n/*\n * Similar to throttle, but callbacks are ordered:\n * When the returned wrapper function is invoked, `callback` will be placed last in the execution queue\n */\nexport const throttleQueuePositionReset = (() => {\n\tlet queues = [];\n\n\tconst run = throttle(() => {\n\t\tfor (const fn of queues) {\n\t\t\ttry {\n\t\t\t\tfn();\n\t\t\t} catch (e) { /* empty */ }\n\t\t}\n\t\tqueues = [];\n\t});\n\n\treturn function(callback: () => void) {\n\t\tlet args = [];\n\t\tlet queued = false;\n\n\t\tfunction runCallback() {\n\t\t\tqueued = false;\n\t\t\tcallback();\n\t\t}\n\n\t\treturn (...a: Array<*>) => {\n\t\t\targs = a;\n\n\t\t\tif (queued) {\n\t\t\t\tpull(queues, callback);\n\t\t\t} else {\n\t\t\t\tqueued = true;\n\t\t\t}\n\n\t\t\tqueues.push(callback);\n\t\t\trun();\n\t\t};\n\t};\n})();\n\n/**\n * Returns a wrapper function, similar to _.throttle, that will only invoke the latest `callback` in the next upcoming idle period.\n * `callback` will be invoked with the arguments provided to the most recent call of the wrapper function.\n */\nexport function idleThrottle<V>(callback: (...args: any) => V): (...args: any) => Promise<V> {\n\tlet args = [];\n\tlet promise;\n\n\treturn (...a) => {\n\t\targs = a;\n\t\tpromise = promise || new Promise((res, rej) => {\n\t\t\trequestIdleCallback(() => {\n\t\t\t\tpromise = null;\n\t\t\t\ttry {\n\t\t\t\t\tres(callback(...args));\n\t\t\t\t} catch (e) {\n\t\t\t\t\trej(e);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn promise;\n\t};\n}\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Stack from './_Stack.js';\nimport baseIsEqual from './_baseIsEqual.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport default baseIsMatch;\n","import isObject from './isObject.js';\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nexport default isStrictComparable;\n","import isStrictComparable from './_isStrictComparable.js';\nimport keys from './keys.js';\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nexport default getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nexport default matchesStrictComparable;\n","import baseIsMatch from './_baseIsMatch.js';\nimport getMatchData from './_getMatchData.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nexport default baseMatches;\n","import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n","import baseIsEqual from './_baseIsEqual.js';\nimport get from './get.js';\nimport hasIn from './hasIn.js';\nimport isKey from './_isKey.js';\nimport isStrictComparable from './_isStrictComparable.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\nimport toKey from './_toKey.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nexport default baseMatchesProperty;\n","import baseGet from './_baseGet.js';\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nexport default basePropertyDeep;\n","import baseProperty from './_baseProperty.js';\nimport basePropertyDeep from './_basePropertyDeep.js';\nimport isKey from './_isKey.js';\nimport toKey from './_toKey.js';\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nexport default property;\n","import baseMatches from './_baseMatches.js';\nimport baseMatchesProperty from './_baseMatchesProperty.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\nimport property from './property.js';\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nexport default baseIteratee;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nexport default arrayAggregator;\n","import isArrayLike from './isArrayLike.js';\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nexport default createBaseEach;\n","import baseForOwn from './_baseForOwn.js';\nimport createBaseEach from './_createBaseEach.js';\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nexport default baseEach;\n","import baseEach from './_baseEach.js';\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nexport default baseAggregator;\n","import arrayAggregator from './_arrayAggregator.js';\nimport baseAggregator from './_baseAggregator.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nexport default createAggregator;\n","import createAggregator from './_createAggregator.js';\n\n/**\n * Creates an array of elements split into two groups, the first of which\n * contains elements `predicate` returns truthy for, the second of which\n * contains elements `predicate` returns falsey for. The predicate is\n * invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of grouped elements.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': false },\n *   { 'user': 'fred',    'age': 40, 'active': true },\n *   { 'user': 'pebbles', 'age': 1,  'active': false }\n * ];\n *\n * _.partition(users, function(o) { return o.active; });\n * // => objects for [['fred'], ['barney', 'pebbles']]\n *\n * // The `_.matches` iteratee shorthand.\n * _.partition(users, { 'age': 1, 'active': false });\n * // => objects for [['pebbles'], ['barney', 'fred']]\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.partition(users, ['active', false]);\n * // => objects for [['barney', 'pebbles'], ['fred']]\n *\n * // The `_.property` iteratee shorthand.\n * _.partition(users, 'active');\n * // => objects for [['fred'], ['barney', 'pebbles']]\n */\nvar partition = createAggregator(function(result, value, key) {\n  result[key ? 0 : 1].push(value);\n}, function() { return [[], []]; });\n\nexport default partition;\n","/* @flow */\n\nimport { once, partition, memoize } from 'lodash-es';\nimport { waitForEvent } from './dom';\n\nexport function matchesPageLocation(includes: Array<PageType | AppType | RegExp>, excludes: Array<PageType | AppType | RegExp> = []): boolean {\n\tconst [includeStrings, includeRegExps]: any = partition(includes, (x: string | RegExp): boolean => typeof x === 'string');\n\tconst [excludeStrings, excludeRegExps]: any = partition(excludes, (x: string | RegExp): boolean => typeof x === 'string');\n\n\treturn (\n\t\t!excludes.length ||\n\t\t!(isPageType(...excludeStrings) || isAppType(...excludeStrings) || matchesPageRegex(...excludeRegExps))\n\t) && (\n\t\t!includes.length ||\n\t\t(isPageType(...includeStrings) || isAppType(...includeStrings) || matchesPageRegex(...includeRegExps))\n\t);\n}\n\n/* eslint-disable key-spacing */\nexport const regexes: { [string]: RegExp } = {\n\tfrontpage:        /^\\/(?:hot|new|rising|controversial|top)?(?:\\/|$)/i,\n\tcomments:         /^\\/(?:r\\/([\\w\\.]+)\\/|(u(?:ser)?\\/[\\w-]+)\\/)?comments\\/([a-z0-9]+)(?:\\/|$)/i,\n\tcommentsLinklist: /^\\/(r\\/[\\w\\.\\+]+\\/|u(?:ser)?\\/[\\w-]+\\/)?comments\\/?$/i,\n\tinbox:            /^\\/(?:r\\/([\\w\\.]+)\\/)?message(?:\\/|$)/i,\n\tprofile:          /^\\/user\\/([\\w\\-]+)(?:\\/(?:(?!m\\/)(\\w+)))?\\/?$/i,\n\tprofile2x:        /^\\/user\\/([\\w\\-]+)(?:\\/(?:(?!m\\/)(\\w+)))?\\/?$/i,\n\tprofileCommentsPage: /^\\/user\\/([\\w\\-]+)\\/comments\\/([a-z0-9]+)(?:\\/|$)/i,\n\tsubmit:           /^\\/(?:r\\/([\\w\\.\\+]+)\\/)?submit(?:\\/|$)/i,\n\tprefs:            /^\\/prefs(?:\\/|$)/i,\n\taccount:          /^\\/account-activity(?:\\/|$)/i,\n\twiki:             /^\\/(?:r\\/([\\w\\.]+)\\/)?wiki(?:\\/|$)/i,\n\tstylesheet:       /^\\/(?:r\\/([\\w\\.]+)\\/)about\\/stylesheet(?:\\/|$)/i,\n\tsearch:           /^\\/(?:r\\/[\\w\\.\\+]+\\/|(?:me|user\\/[\\w\\-]+)\\/[mf]\\/[\\w\\.\\+]+\\/|domain\\/[^\\/]+\\/)?search(?:\\/|$)/i,\n\tcommentPermalink: /^\\/(?:r\\/([\\w\\.]+)\\/)?comments\\/([a-z0-9]+)\\/[^\\/]*\\/([a-z0-9]+)(?:\\/|$)/i,\n\tduplicates:       /^\\/r\\/[\\w\\.\\+]+\\/duplicates\\/([a-z0-9]+)/i,\n\tsubreddit:        /^\\/r\\/([\\w\\.\\+]+)(?:\\/|$)/i,\n\tsubredditAbout:   /^\\/r\\/([\\w\\.]+)\\/about(?:\\/(?!modqueue|reports|spam|unmoderated|edited)|$)/i,\n\tmodqueue:         /^\\/(?:r|me\\/f)\\/([\\w\\.\\+]+)\\/about\\/(?:modqueue|reports|spam|unmoderated|edited)(?:\\/|$)/i,\n\tmultireddit:      /^\\/((?:me|user\\/[\\w\\-]+)\\/[mf]\\/[\\w\\.\\+]+)(?:\\/|$)/i,\n\tdomain:           /^\\/domain\\/([\\w\\.]+)(?:\\/|$)/i,\n\tcomposeMessage:   /^\\/(?:r\\/([\\w\\.\\+]+)\\/)?message\\/compose(?:\\/|$)/i,\n\tliveThread:       /^\\/live\\/(?!create(?:\\/|$))([a-z0-9]+)(?:\\/|$)/i,\n};\n/* eslint-enable key-spacing */\n\nexport const execRegexes: { [string]: (path: string) => ?string[] } = {\n\tcomments: path => {\n\t\tconst match = regexes.comments.exec(path);\n\t\tif (!match) return match;\n\t\tmatch.splice(1, 2, match[1] || match[2] && match[2].replace(/^u.*\\//, 'u_'));\n\t\treturn match;\n\t},\n};\n\nexport type PageType = 'wiki' | 'search' | 'profile' | 'profile2x' | 'profileCommentsPage' | 'stylesheet' | 'modqueue' | 'subredditAbout' | 'comments' | 'commentsLinklist' | 'liveThread' | 'inbox' | 'submit' | 'account' | 'prefs' | 'linklist';\nexport type AppType = 'r2' | 'd2x' | 'options';\n\nexport const appType = once((): AppType => {\n\tif (document.documentElement.hasAttribute('res-options')) {\n\t\treturn 'options';\n\t}\n\tif (document.documentElement.getAttribute('xmlns')) {\n\t\treturn 'r2';\n\t}\n\treturn 'd2x';\n});\n\nexport function isAppType(...types: AppType[]): boolean {\n\tconst thisApp = appType();\n\treturn types.some(type => type === thisApp);\n}\n\nconst appPageTypes: { [AppType]: {| default?: PageType, pageTypes: PageType[] |} } = {\n\tr2: {\n\t\tdefault: 'linklist',\n\t\tpageTypes: ['wiki', 'search', 'stylesheet', 'modqueue', 'subredditAbout', 'comments', 'commentsLinklist', 'profile', 'liveThread', 'inbox', 'submit', 'account', 'prefs'],\n\t},\n\td2x: {\n\t\tpageTypes: ['profile2x', 'profileCommentsPage', 'submit'],\n\t},\n\toptions: {\n\t\tpageTypes: [],\n\t},\n};\n\nexport const pageType = memoize((): ?PageType => {\n\twaitForEvent(document, 'reddit.urlChanged').then(() => {\n\t\tpageType.cache.clear();\n\t});\n\tconst spec = appPageTypes[appType()];\n\treturn spec.pageTypes.find(pageType => regexes[pageType].test(location.pathname)) || spec.default;\n});\n\nexport function isPageType(...types: PageType[]): boolean {\n\tconst thisPage = pageType();\n\treturn types.some(type => type === thisPage);\n}\n\nexport function matchesPageRegex(...regexps: RegExp[]): boolean {\n\treturn regexps.some(regex => regex.test(location.pathname));\n}\n\nexport const currentSubreddit = once((): string | void => {\n\tconst match = location.pathname.match(regexes.subreddit);\n\tif (match) return match[1];\n});\n\nexport function isCurrentSubreddit(...subreddits: string[]): boolean {\n\tconst sub = (currentSubreddit() || '').toLowerCase();\n\tif (!sub) return false;\n\treturn subreddits.some(v => v.toLowerCase() === sub);\n}\n\nexport const currentMultireddit = once((): string | void => {\n\tconst match = location.pathname.match(regexes.multireddit);\n\tif (match) return match[1];\n});\n\nexport function isCurrentMultireddit(...multireddits: string[]): boolean {\n\tconst multi = (currentMultireddit() || '').toLowerCase();\n\tif (!multi) return false;\n\treturn multireddits.some(v => v.toLowerCase() === multi);\n}\n\nexport const currentDomain = once((): string | void => {\n\tconst match = location.pathname.match(regexes.domain);\n\tif (match) return match[1];\n});\n\nexport const currentUserProfile = once((): string | void => {\n\tconst match = location.pathname.match(regexes.profile);\n\tif (match) return match[1];\n});\n\nexport const fullLocation = (pathname: string = location.pathname) => {\n\tconst regex = Object.keys(regexes).find(key => pathname.match(regexes[key]));\n\tif (!regex) return pathname.toLowerCase();\n\n\t// examples: domain-youtube.com, user-gueor, subreddit-enhancement+resissues\n\treturn [\n\t\tregex,\n\t\t...(pathname.match(regexes[regex]) || []).slice(1), // ignore matched string\n\t]\n\t\t.filter(v => v)\n\t\t.join('-')\n\t\t.toLowerCase();\n};\n\n// A link is a comment code if all these conditions are true:\n// * It has no content (i.e. content.length === 0)\n// * Its href is of the form \"/code\" or \"#code\"\n//\n// In case it's not clear, here is a list of some common comment\n// codes on a specific subreddit:\n// https://www.reddit.com/r/metarage/comments/p3eqe/full_updated_list_of_comment_faces_wcodes/\n// also for CSS hacks to do special formatting, like /r/CSSlibrary\n\nconst COMMENT_CODE_REGEX = /^[\\/#].+$/;\n\nexport function isCommentCode(link: HTMLAnchorElement): boolean {\n\t// don't add annotations for hidden links - these are used as CSS\n\t// hacks on subreddits to do special formatting, etc.\n\n\t// Note that link.href will return the full href (which includes the\n\t// reddit.com domain). We don't want that.\n\tconst href = link.getAttribute('href');\n\n\tconst emptyText = link.textContent.length === 0;\n\tconst isCommentCode = COMMENT_CODE_REGEX.test(href);\n\n\treturn emptyText && isCommentCode;\n}\n\nexport function isEmptyLink(link: HTMLAnchorElement): boolean {\n\t// Note that link.href will return the full href (which includes the\n\t// reddit.com domain). We don't want that.\n\tconst href = link.getAttribute('href');\n\treturn typeof href !== 'string' || href.startsWith('javascript:') || href === '#'; // eslint-disable-line no-script-url\n}\n\nexport const inQuarantinedSubreddit = once(() => document.body.classList.contains('quarantine'));\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n","/* @flow */\n\n/* eslint-disable no-redeclare, no-unused-vars */\ndeclare function downcast<From, To: From>(val: From, ty: Class<To>): To;\ndeclare function downcast(val: mixed, ty: 'boolean'): boolean;\ndeclare function downcast(val: mixed, ty: 'number'): number;\ndeclare function downcast(val: mixed, ty: 'string'): string;\n/* eslint-enable no-unused-vars */\n\nexport function downcast(val, ty) {\n\tif (\n\t\t// only perform the check in dev mode, but hide this from Flow\n\t\t/*:: ` */ process.env.NODE_ENV !== 'development' || /*:: ` && */\n\t\t(typeof ty === 'string' ? typeof val === ty : val instanceof ty) // eslint-disable-line valid-typeof\n\t) {\n\t\treturn val;\n\t}\n\n\tthrow new TypeError(`Expected ${val} to be instance of ${ty}.`);\n}\n/* eslint-enable no-redeclare */\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","import baseFor from './_baseFor.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nexport default baseForOwn;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","/* @flow */\n\nimport { waitFor } from './async';\nimport { waitForChild, waitForEvent, waitForDescendant } from './dom';\n\nexport const bodyStart: Promise<*> = waitForChild(document.documentElement, 'body')\n\t// `document.body === null` at this point has been reported for users of Firefox and Chrome,\n\t// so wait till the reference has been updated before progressing\n\t.then(() => waitFor(() => document.body, 10));\n\nexport const contentStart: Promise<*> = bodyStart\n\t.then(() => Promise.race([\n\t\tbodyStart.then(() => waitForDescendant(document.body, '#siteTable')),\n\t\tcontentLoaded,\n\t]));\n\nexport const contentLoaded: Promise<*> = bodyStart\n\t.then(() => Promise.race([\n\t\twaitForEvent(window, 'DOMContentLoaded', 'load'),\n\t\twaitFor(() => document.readyState === 'interactive' || document.readyState === 'complete', 500),\n\t]));\n\nexport const loadComplete: Promise<*> = bodyStart\n\t.then(() => Promise.race([\n\t\twaitForEvent(window, 'load'),\n\t\twaitFor(() => document.readyState === 'complete', 500),\n\t]));\n\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import toNumber from './toNumber.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nexport default toFinite;\n","import toFinite from './toFinite.js';\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nexport default toInteger;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default baseProperty;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nexport default noop;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import baseIndexOf from './_baseIndexOf.js';\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nexport default arrayIncludes;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","/* @flow */\n\nexport const MINUTE = 1000 * 60;\nexport const HOUR = 60 * MINUTE;\nexport const DAY = 24 * HOUR;\nexport const WEEK = 7 * DAY;\n\nexport function fromSecondsToTime(timeInSeconds: number) {\n\tconst seconds = timeInSeconds % 60;\n\tconst minutes = Math.floor(timeInSeconds / 60) % 60;\n\tconst hours = Math.floor(timeInSeconds / 3600);\n\n\tconst time = [minutes, seconds];\n\tif (hours > 0) {\n\t\ttime.unshift(hours);\n\t}\n\n\treturn time.map(part => String(part).padStart(2, '0')).join(':');\n}\n","/* @flow */\nimport { curryRight } from 'lodash-es';\nimport { fastAsync } from './async';\n\nexport type Iteratee<T, R> = (e: T, i: number, a: T[]) => R;\n\n/*\n * If `callback` returns a promise, waits for the promise to resolve before advancing to the next item.\n */\nexport async function forEachSeq<T>(iterable: Iterable<T>, callback: (x: T) => ?Promise<void>): Promise<void> {\n\tfor (const val of iterable) {\n\t\tawait callback(val); // eslint-disable-line no-await-in-loop\n\t}\n}\n\nexport async function asyncFilter<T>(array: T[], predicate: Iteratee<T, Promise<mixed>>): Promise<T[]> {\n\tconst shouldKeep = await Promise.all(array.map(predicate));\n\treturn array.filter((e, i) => shouldKeep[i]);\n}\n\nexport async function asyncReduce<T, V>(iterable: Iterable<T>, callback: (acc: V, e: T) => Promise<V>, initialValue: V): Promise<V> {\n\tlet accumulator = initialValue;\n\n\tfor (const val of iterable) {\n\t\taccumulator = await callback(accumulator, val); // eslint-disable-line no-await-in-loop\n\t}\n\n\treturn accumulator;\n}\n\nexport const asyncFind = fastAsync(function* asyncFind<T>(iterable: Iterable<T>, predicate: (x: T) => Promise<mixed> | mixed) {\n\tfor (const val of iterable) {\n\t\tif (yield predicate(val)) return val;\n\t}\n});\n\n/**\n * @template T, V\n * @param {Promise<T>[]} array\n * @param {function(V, T): V} reduce\n * @param {V} initialValue\n * @param {V} baseCase\n * @returns {Promise<T>}\n */\nfunction concurrentFold<T, V>(array: Promise<T>[], reduce: (a: V, b: T) => V, initialValue: V, baseCase: V): Promise<V> {\n\tif (!array.length) return Promise.resolve(initialValue);\n\n\treturn new Promise((resolve, reject) => {\n\t\tlet remaining = array.length;\n\t\tlet accum = initialValue;\n\n\t\tfunction onResolve(x) {\n\t\t\tif (remaining === 0) return;\n\n\t\t\taccum = reduce(accum, x);\n\n\t\t\tif (accum === baseCase || --remaining === 0) {\n\t\t\t\tremaining = 0;\n\t\t\t\tresolve(accum);\n\t\t\t}\n\t\t}\n\n\t\tfunction onReject(err) {\n\t\t\tif (remaining === 0) return;\n\n\t\t\tremaining = 0;\n\t\t\treject(err);\n\t\t}\n\n\t\tarray.forEach(promise => promise.then(onResolve, onReject));\n\t});\n}\n\n/*\n * Guaranteed to execute concurrently, unlike `Array.prototype.some`.\n * Rejects on a best-effort basis if any of the promises reject.\n * May resolve to `true` even if some of the promises reject.\n */\nexport function asyncSome<T>(array: T[], predicate: Iteratee<T, Promise<mixed>>): Promise<boolean> {\n\treturn concurrentFold(array.map(predicate), (a, b) => a || !!b, false, true);\n}\n\n/*\n * Guaranteed to execute concurrently, unlike `Array.prototype.every`.\n * Rejects on a best-effort basis if any of the promises reject.\n * May resolve to `false` even if some of the promises reject.\n */\nexport function asyncEvery<T>(array: T[], predicate: Iteratee<T, Promise<mixed>>): Promise<boolean> {\n\treturn concurrentFold(array.map(predicate), (a, b) => a && !!b, true, false);\n}\n\n// Flow doesn't understand `Array.prototype.filter` refining types (yet https://github.com/facebook/flow/issues/34)\n// so this is necessary if you want to do `arr.filter(...).map(...)`\nexport const filterMap = curryRight(<T, V>(iterable: Iterable<T>, callback: (x: T) => ?[V]): V[] => {\n\tconst mapped = [];\n\tfor (const x of iterable) {\n\t\tconst result = callback(x);\n\t\tif (result) mapped.push(result[0]);\n\t}\n\treturn mapped;\n});\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nexport default baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default strictIndexOf;\n","import baseFindIndex from './_baseFindIndex.js';\nimport baseIsNaN from './_baseIsNaN.js';\nimport strictIndexOf from './_strictIndexOf.js';\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nexport default baseIndexOf;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nexport default baseHasIn;\n","import castPath from './_castPath.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isIndex from './_isIndex.js';\nimport isLength from './isLength.js';\nimport toKey from './_toKey.js';\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nexport default hasPath;\n","import baseHasIn from './_baseHasIn.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nexport default hasIn;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","module.exports = __webpack_public_path__ + \"css-off.png\";","module.exports = __webpack_public_path__ + \"css-off-small.png\";","module.exports = __webpack_public_path__ + \"css-on.png\";","module.exports = __webpack_public_path__ + \"css-on-small.png\";","(function() {\n  'use strict';\n  \n  var collator;\n  try {\n    collator = (typeof Intl !== \"undefined\" && typeof Intl.Collator !== \"undefined\") ? Intl.Collator(\"generic\", { sensitivity: \"base\" }) : null;\n  } catch (err){\n    console.log(\"Collator could not be initialized and wouldn't be used\");\n  }\n\n  var levenshtein = require('fastest-levenshtein');\n\n  // arrays to re-use\n  var prevRow = [],\n    str2Char = [];\n  \n  /**\n   * Based on the algorithm at http://en.wikipedia.org/wiki/Levenshtein_distance.\n   */\n  var Levenshtein = {\n    /**\n     * Calculate levenshtein distance of the two strings.\n     *\n     * @param str1 String the first string.\n     * @param str2 String the second string.\n     * @param [options] Additional options.\n     * @param [options.useCollator] Use `Intl.Collator` for locale-sensitive string comparison.\n     * @return Integer the levenshtein distance (0 and above).\n     */\n    get: function(str1, str2, options) {\n      var useCollator = (options && collator && options.useCollator);\n      \n      if (useCollator) {\n        var str1Len = str1.length,\n          str2Len = str2.length;\n        \n        // base cases\n        if (str1Len === 0) return str2Len;\n        if (str2Len === 0) return str1Len;\n\n        // two rows\n        var curCol, nextCol, i, j, tmp;\n\n        // initialise previous row\n        for (i=0; i<str2Len; ++i) {\n          prevRow[i] = i;\n          str2Char[i] = str2.charCodeAt(i);\n        }\n        prevRow[str2Len] = str2Len;\n\n        var strCmp;\n        // calculate current row distance from previous row using collator\n        for (i = 0; i < str1Len; ++i) {\n          nextCol = i + 1;\n\n          for (j = 0; j < str2Len; ++j) {\n            curCol = nextCol;\n\n            // substution\n            strCmp = 0 === collator.compare(str1.charAt(i), String.fromCharCode(str2Char[j]));\n\n            nextCol = prevRow[j] + (strCmp ? 0 : 1);\n\n            // insertion\n            tmp = curCol + 1;\n            if (nextCol > tmp) {\n              nextCol = tmp;\n            }\n            // deletion\n            tmp = prevRow[j + 1] + 1;\n            if (nextCol > tmp) {\n              nextCol = tmp;\n            }\n\n            // copy current col value into previous (in preparation for next iteration)\n            prevRow[j] = curCol;\n          }\n\n          // copy last col value into previous (in preparation for next iteration)\n          prevRow[j] = nextCol;\n        }\n        return nextCol;\n      }\n      return levenshtein.distance(str1, str2);\n    }\n\n  };\n\n  // amd\n  if (typeof define !== \"undefined\" && define !== null && define.amd) {\n    define(function() {\n      return Levenshtein;\n    });\n  }\n  // commonjs\n  else if (typeof module !== \"undefined\" && module !== null && typeof exports !== \"undefined\" && module.exports === exports) {\n    module.exports = Levenshtein;\n  }\n  // web worker\n  else if (typeof self !== \"undefined\" && typeof self.postMessage === 'function' && typeof self.importScripts === 'function') {\n    self.Levenshtein = Levenshtein;\n  }\n  // browser main thread\n  else if (typeof window !== \"undefined\" && window !== null) {\n    window.Levenshtein = Levenshtein;\n  }\n}());\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","\"use strict\";\nconst peq = new Uint32Array(0x10000);\nconst myers_32 = (a, b) => {\n  const n = a.length;\n  const m = b.length;\n  const lst = 1 << (n - 1);\n  let pv = -1;\n  let mv = 0;\n  let sc = n;\n  let i = n;\n  while (i--) {\n    peq[a.charCodeAt(i)] |= 1 << i;\n  }\n  for (i = 0; i < m; i++) {\n    let eq = peq[b.charCodeAt(i)];\n    const xv = eq | mv;\n    eq |= ((eq & pv) + pv) ^ pv;\n    mv |= ~(eq | pv);\n    pv &= eq;\n    if (mv & lst) {\n      sc++;\n    }\n    if (pv & lst) {\n      sc--;\n    }\n    mv = (mv << 1) | 1;\n    pv = (pv << 1) | ~(xv | mv);\n    mv &= xv;\n  }\n  i = n;\n  while (i--) {\n    peq[a.charCodeAt(i)] = 0;\n  }\n  return sc;\n};\n\nconst myers_x = (a, b) => {\n  const n = a.length;\n  const m = b.length;\n  const mhc = [];\n  const phc = [];\n  const hsize = Math.ceil(n / 32);\n  const vsize = Math.ceil(m / 32);\n  let score = m;\n  for (let i = 0; i < hsize; i++) {\n    phc[i] = -1;\n    mhc[i] = 0;\n  }\n  let j = 0;\n  for (; j < vsize - 1; j++) {\n    let mv = 0;\n    let pv = -1;\n    const start = j * 32;\n    const end = Math.min(32, m) + start;\n    for (let k = start; k < end; k++) {\n      peq[b.charCodeAt(k)] |= 1 << k;\n    }\n    score = m;\n    for (let i = 0; i < n; i++) {\n      const eq = peq[a.charCodeAt(i)];\n      const pb = (phc[(i / 32) | 0] >>> i) & 1;\n      const mb = (mhc[(i / 32) | 0] >>> i) & 1;\n      const xv = eq | mv;\n      const xh = ((((eq | mb) & pv) + pv) ^ pv) | eq | mb;\n      let ph = mv | ~(xh | pv);\n      let mh = pv & xh;\n      if ((ph >>> 31) ^ pb) {\n        phc[(i / 32) | 0] ^= 1 << i;\n      }\n      if ((mh >>> 31) ^ mb) {\n        mhc[(i / 32) | 0] ^= 1 << i;\n      }\n      ph = (ph << 1) | pb;\n      mh = (mh << 1) | mb;\n      pv = mh | ~(xv | ph);\n      mv = ph & xv;\n    }\n    for (let k = start; k < end; k++) {\n      peq[b.charCodeAt(k)] = 0;\n    }\n  }\n  let mv = 0;\n  let pv = -1;\n  const start = j * 32;\n  const end = Math.min(32, m - start) + start;\n  for (let k = start; k < end; k++) {\n    peq[b.charCodeAt(k)] |= 1 << k;\n  }\n  score = m;\n  for (let i = 0; i < n; i++) {\n    const eq = peq[a.charCodeAt(i)];\n    const pb = (phc[(i / 32) | 0] >>> i) & 1;\n    const mb = (mhc[(i / 32) | 0] >>> i) & 1;\n    const xv = eq | mv;\n    const xh = ((((eq | mb) & pv) + pv) ^ pv) | eq | mb;\n    let ph = mv | ~(xh | pv);\n    let mh = pv & xh;\n    score += (ph >>> (m - 1)) & 1;\n    score -= (mh >>> (m - 1)) & 1;\n    if ((ph >>> 31) ^ pb) {\n      phc[(i / 32) | 0] ^= 1 << i;\n    }\n    if ((mh >>> 31) ^ mb) {\n      mhc[(i / 32) | 0] ^= 1 << i;\n    }\n    ph = (ph << 1) | pb;\n    mh = (mh << 1) | mb;\n    pv = mh | ~(xv | ph);\n    mv = ph & xv;\n  }\n  for (let k = start; k < end; k++) {\n    peq[b.charCodeAt(k)] = 0;\n  }\n  return score;\n};\n\nconst distance = (a, b) => {\n  if (a.length > b.length) {\n    const tmp = b;\n    b = a;\n    a = tmp;\n  }\n  if (a.length === 0) {\n    return b.length;\n  }\n  if (a.length <= 32) {\n    return myers_32(a, b);\n  }\n  return myers_x(a, b);\n};\n\nconst closest = (str, arr) => {\n  let min_distance = Infinity;\n  let min_index = 0;\n  for (let i = 0; i < arr.length; i++) {\n    const dist = distance(str, arr[i]);\n    if (dist < min_distance) {\n      min_distance = dist;\n      min_index = i;\n    }\n  }\n  return arr[min_index];\n};\n\nmodule.exports = {\n  closest, distance\n}\n","module.exports = function() {\n\tthrow new Error(\"define cannot be used indirect\");\n};\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","/**\n * The inverse of `_.toPairs`; this method returns an object composed\n * from key-value `pairs`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} pairs The key-value pairs.\n * @returns {Object} Returns the new object.\n * @example\n *\n * _.fromPairs([['a', 1], ['b', 2]]);\n * // => { 'a': 1, 'b': 2 }\n */\nfunction fromPairs(pairs) {\n  var index = -1,\n      length = pairs == null ? 0 : pairs.length,\n      result = {};\n\n  while (++index < length) {\n    var pair = pairs[index];\n    result[pair[0]] = pair[1];\n  }\n  return result;\n}\n\nexport default fromPairs;\n","/* @flow */\n\ntype MessagePayload = {|\n\ttype: string,\n\tdata?: mixed,\n|};\n\ntype ResponsePayload = {|\n\tdata?: mixed,\n\terror?: {| message: string, stack: string |},\n|};\n\ntype InternalMessageSender<MsgCtx> = (msg: MessagePayload, context: MsgCtx) => Promise<ResponsePayload>;\n\ntype InternalMessageHandler<ListenerCtx> = (msg: MessagePayload, sendResponse: (response: ResponsePayload) => void, context: ListenerCtx) => boolean;\n\nexport type MessageSender<MsgCtx> = (type: string, data: mixed, context: MsgCtx) => Promise<any>;\n\nexport type AddListener<Ctx> = (type: string, callback: ListenerCallback<Ctx>) => void;\n\ntype ListenerCallback<Ctx> = (data: any, context: Ctx) => Promise<mixed> | mixed;\n\nclass MessageHandlerError extends Error {\n\tconstructor(message, stack) {\n\t\tsuper();\n\t\tthis.message = message;\n\t\tthis.stack = stack;\n\t}\n}\n\nexport function createMessageHandler<MsgCtx, ListenerCtx>(_sendMessage: InternalMessageSender<MsgCtx>, errorOnUnrecognizedTypes: boolean = false): {|\n\t_handleMessage: InternalMessageHandler<ListenerCtx>,\n\tsendMessage: MessageSender<MsgCtx>,\n\taddListener: AddListener<ListenerCtx>,\n|} {\n\tconst listeners = new Map();\n\n\tfunction addListener(type, callback) {\n\t\tif (listeners.has(type)) {\n\t\t\tthrow new Error(`Listener for \"${type}\" already exists.`);\n\t\t}\n\t\tlisteners.set(type, callback);\n\t}\n\n\tasync function sendMessage(type, data, context) {\n\t\tconst { data: newData, error } = await _sendMessage({ type, data }, context);\n\t\tif (error) {\n\t\t\tthrow new MessageHandlerError(error.message, `${error.stack}\\n    at target's \"${type}\" handler`);\n\t\t} else {\n\t\t\treturn newData;\n\t\t}\n\t}\n\n\tfunction _handleMessage({ type, data }, sendResponse, context) {\n\t\tconst listener = listeners.get(type);\n\t\tif (!listener) {\n\t\t\tif (errorOnUnrecognizedTypes) {\n\t\t\t\tsendResponse({ error: { message: `Unrecognised message type: ${type}`, stack: '' } });\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tlet response;\n\n\t\ttry {\n\t\t\tresponse = listener(data, context);\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\tsendResponse({ error: { message: e.message, stack: e.stack } });\n\t\t\treturn false;\n\t\t}\n\n\t\tif (response instanceof Promise) {\n\t\t\tresponse\n\t\t\t\t.then(\n\t\t\t\t\tdata => sendResponse({ data }),\n\t\t\t\t\te => {\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\tsendResponse({ error: { message: e.message, stack: e.stack } });\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t// true = response will be handled asynchronously (needed for Chrome)\n\t\t\treturn true;\n\t\t} else {\n\t\t\tsendResponse({ data: response });\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn {\n\t\t_handleMessage,\n\t\tsendMessage,\n\t\taddListener,\n\t};\n}\n","/* @flow */\n\nexport function apiToPromise(func: (...args: mixed[]) => void): (...args: mixed[]) => Promise<any> {\n\treturn (...args) =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tfunc(...args, (...results) => {\n\t\t\t\tif (chrome.runtime.lastError) {\n\t\t\t\t\treject(new Error(chrome.runtime.lastError.message));\n\t\t\t\t} else {\n\t\t\t\t\tresolve(results.length > 1 ? results : results[0]);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n}\n","/* @flow */\n\nimport { createMessageHandler } from '../utils/messaging';\nimport { apiToPromise } from '../utils/api';\n\nconst _sendMessage = apiToPromise(chrome.tabs.sendMessage);\n\nconst {\n\t_handleMessage,\n\tsendMessage,\n\taddListener,\n} = createMessageHandler((obj, tabId) => _sendMessage(tabId, obj));\n\nchrome.runtime.onMessage.addListener((obj, sender, sendResponse) => _handleMessage(obj, sendResponse, sender));\n\nexport {\n\tsendMessage,\n\taddListener,\n};\n","/* @flow */\n\nimport { fromPairs } from 'lodash-es';\nimport { addListener } from './messaging';\n\naddListener('ajax', async ({ method, url, headers, data, credentials }) => {\n\tconst rawResponse = await fetch(url, {\n\t\tmethod,\n\t\theaders,\n\t\tcredentials,\n\t\tbody: data,\n\t});\n\n\treturn {\n\t\tok: rawResponse.ok,\n\t\tstatus: rawResponse.status,\n\t\theaders: fromPairs(Array.from(rawResponse.headers.entries())),\n\t\ttext: await rawResponse.text(),\n\t};\n});\n","/* @flow */\nimport { apiToPromise } from '../utils/api';\nimport { addListener } from './messaging';\n\naddListener('authFlow', ({ domain, clientId, scope, interactive }) => {\n\tconst redirectUri = process.env.BUILD_TARGET !== 'firefox' ? 'https://redditenhancementsuite.com/oauth' : chrome.identity.getRedirectURL();\n\tconst url = new URL(domain);\n\turl.searchParams.set('client_id', clientId);\n\turl.searchParams.set('scope', scope);\n\turl.searchParams.set('response_type', 'token');\n\turl.searchParams.set('redirect_uri', redirectUri);\n\n\tif (process.env.BUILD_TARGET !== 'firefox') {\n\t\t// Chrome supports chrome.identity.launchAuthFlow.\n\t\t// However--and quite inexplicably--the auth process is performed in a separate context whose cookies\n\t\t// are cleared whenever the browser is restarted, making noninteractive auth pretty much useless.\n\t\t// Instead, fully emulate the flow in the main context, where users will remain logged in when\n\t\t// they expect to be, i.e., as long as they're logged into the main site.\n\t\t// As a bonus, we can use redditenhancementsuite.com as the redirect instead of chromiumapp.org.\n\t\tif (interactive) {\n\t\t\treturn emulateAuthFlowInNewWindow(url.href, redirectUri);\n\t\t} else {\n\t\t\treturn emulateAuthFlowInBackground(url.href);\n\t\t}\n\t} else if (process.env.BUILD_TARGET === 'firefox') {\n\t\t// Firefox correctly supports chrome.identity.launchAuthFlow.\n\t\treturn apiToPromise(chrome.identity.launchWebAuthFlow)({ url: url.href, interactive });\n\t}\n});\n\nasync function emulateAuthFlowInNewWindow(url: string, redirectUri: string): Promise<string> {\n\t// Emulate interactive auth.\n\t// Open a popup window, then track its progress with chrome.tabs,\n\t// succeeding if it navigates to our redirect URL, and failing if it's\n\t// closed before then.\n\tconst { tabs: [{ id }] } = await apiToPromise(chrome.windows.create)({ url, type: 'popup' });\n\n\treturn new Promise((resolve, reject) => {\n\t\tfunction updateListener(tabId, updates) {\n\t\t\tif (tabId !== id) return;\n\n\t\t\tif (updates.url && updates.url.startsWith(redirectUri)) {\n\t\t\t\tstopListening();\n\t\t\t\tresolve(updates.url);\n\t\t\t\tapiToPromise(chrome.tabs.remove)(id);\n\t\t\t}\n\t\t}\n\n\t\tfunction removeListener(tabId) {\n\t\t\tif (tabId !== id) return;\n\t\t\tstopListening();\n\t\t\treject(new Error('User cancelled or denied access.'));\n\t\t}\n\n\t\tfunction stopListening() {\n\t\t\tchrome.tabs.onUpdated.removeListener(updateListener);\n\t\t\tchrome.tabs.onRemoved.removeListener(removeListener);\n\t\t}\n\n\t\tchrome.tabs.onUpdated.addListener(updateListener);\n\t\tchrome.tabs.onRemoved.addListener(removeListener);\n\t});\n}\n\nfunction emulateAuthFlowInBackground(url: string): Promise<string> {\n\t// Emulate noninteractive auth.\n\t// Fetch the auth page. If the user is preauthorized, we will 302\n\t// to the redirect URL. However, because the token is passed in the hash,\n\t// and fetch/XHR responses don't include the hash, we must use the\n\t// webRequest API to read the redirect URL.\n\treturn new Promise((resolve, reject) => {\n\t\tfunction headersListener({ redirectUrl }) {\n\t\t\tstopListening();\n\t\t\tresolve(redirectUrl);\n\t\t}\n\n\t\tfunction stopListening() {\n\t\t\tchrome.webRequest.onBeforeRedirect.removeListener(headersListener);\n\t\t}\n\n\t\tchrome.webRequest.onBeforeRedirect.addListener(headersListener, { urls: [url] });\n\n\t\tfetch(url, { credentials: 'include' })\n\t\t\t.then(() => {\n\t\t\t\tstopListening();\n\t\t\t\treject(new Error('User interaction is required.'));\n\t\t\t}, e => {\n\t\t\t\tstopListening();\n\t\t\t\treject(new Error(`Authorization page could not be loaded: ${e.message}`));\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\t});\n}\n","/* @flow */\n\nimport { addListener } from './messaging';\n\naddListener('download', ({ url, filename }, { tab: { incognito } }) => {\n\tchrome.downloads.download({ url, filename, ...(process.env.BUILD_TARGET !== 'firefox' ? {} : { incognito }) });\n});\n","/* @flow */\n\nimport { apiToPromise } from '../utils/api';\nimport { addListener } from './messaging';\n\naddListener('addURLToHistory', url => {\n\tchrome.history.addUrl({ url });\n});\n\naddListener('isURLVisited', async url => {\n\tconst visits = await apiToPromise(chrome.history.getVisits)({ url });\n\treturn visits.length > 0;\n});\n","import baseAssignValue from './_baseAssignValue.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseIteratee from './_baseIteratee.js';\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\n\nexport default mapValues;\n","/* @flow */\n/* eslint-disable camelcase */\n\nimport de from './de.json';\nimport el from './el.json';\nimport en from './en.json';\nimport en_lolcat from './en@lolcat.json';\nimport en_pirate from './en@pirate.json';\nimport en_CA from './en_CA.json';\nimport en_GB from './en_GB.json';\nimport es from './es.json';\nimport es_419 from './es_419.json';\nimport he from './he.json';\nimport it from './it.json';\nimport nl_NL from './nl_NL.json';\nimport pl from './pl.json';\nimport pt from './pt.json';\nimport pt_BR from './pt_BR.json';\nimport pt_PT from './pt_PT.json';\n\nexport default {\n\tde,\n\tel,\n\ten,\n\ten_lolcat,\n\ten_pirate,\n\ten_CA,\n\ten_GB,\n\tes,\n\tes_419,\n\the,\n\tit,\n\tnl_NL,\n\tpl,\n\tpt,\n\tpt_BR,\n\tpt_PT,\n};\n","/* @flow */\n\nimport { mapValues } from 'lodash-es';\nimport locales from './locales';\n\n// `en-ca` -> `en_CA`\nfunction redditLocaleToTransifexLocale(redditLocale) {\n\tswitch (redditLocale) {\n\t\tcase 'leet':\n\t\t\treturn 'en'; // doesn't appear to exist\n\t\tcase 'lol':\n\t\t\treturn 'en_lolcat';\n\t\tcase 'pir':\n\t\t\treturn 'en_pirate';\n\t\tcase 'es-ar': // argentina\n\t\tcase 'es-cl': // chile\n\t\t\treturn 'es_419'; // latin america\n\t\tdefault: {\n\t\t\t// `es-ar` -> `es_ar`\n\t\t\tconst normalized = redditLocale.replace('-', '_');\n\t\t\tconst inx = normalized.indexOf('_');\n\t\t\tif (inx === -1) {\n\t\t\t\t// `zh` -> `zh`\n\t\t\t\treturn normalized;\n\t\t\t} else {\n\t\t\t\t// `en_au` -> `en_AU`\n\t\t\t\treturn `${normalized.slice(0, inx)}_${normalized.slice(inx + 1).toUpperCase()}`;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function getLocaleDictionary(localeName: string): { [string]: string } {\n\tconst transifexLocale = redditLocaleToTransifexLocale(localeName);\n\n\tconst mergedLocales = {\n\t\t// 3. Default (en)\n\t\t...locales.en,\n\t\t// 2. Match without region (en_CA -> en)\n\t\t...locales[transifexLocale.slice(0, transifexLocale.indexOf('_'))],\n\t\t// 1. Exact match (en_CA -> en_CA)\n\t\t...locales[transifexLocale],\n\t};\n\n\treturn mapValues(mergedLocales, x => x.message);\n}\n","/* @flow */\n\nimport { getLocaleDictionary } from '../../../locales';\nimport { addListener } from './messaging';\n\naddListener('i18n', locale => getLocaleDictionary(locale));\n","/* @flow */\n\nimport { apiToPromise } from '../utils/api';\nimport { addListener } from './messaging';\n\naddListener('loadScript', async ({ url }, { tab: { id: tabId }, frameId }) => {\n\tawait apiToPromise(chrome.tabs.executeScript)(tabId, { file: url, frameId, runAt: 'document_start' });\n});\n","/* @flow */\n\nimport { addListener } from './messaging';\n\nlet lastRedditLocale = navigator.language || 'en';\n\naddListener('getLastRedditLocale', () => lastRedditLocale);\naddListener('setLastRedditLocale', v => { lastRedditLocale = v; });\n","/* @flow */\n\nimport { apiToPromise } from '../utils/api';\nimport { addListener, sendMessage } from './messaging';\n\naddListener('multicast', async ({ name, args, crossContext }, sender) => {\n\t// Firefox has more than just (non)incognito, so we must limit to each cookieStoreId.\n\tconst CONTEXT_KEY = process.env.BUILD_TARGET === 'firefox' ? 'cookieStoreId' : 'incognito';\n\n\tconst redditTabs = await apiToPromise(chrome.tabs.query)({ url: 'https://*.reddit.com/*', status: 'complete' });\n\tconst nonSelfTabsInSameContext = redditTabs\n\t\t.filter(tab => (\n\t\t\t(sender.frameId || tab.id !== sender.tab.id) &&\n\t\t\t(crossContext || tab[CONTEXT_KEY] === sender.tab[CONTEXT_KEY])\n\t\t));\n\n\treturn Promise.all(nonSelfTabsInSameContext.map(({ id: tabId }) => sendMessage('multicast', { name, args }, tabId)));\n});\n","/* @flow */\n\nimport cssOff from '../../../images/css-off.png';\nimport cssOffSmall from '../../../images/css-off-small.png';\nimport cssOn from '../../../images/css-on.png';\nimport cssOnSmall from '../../../images/css-on-small.png';\nimport { addListener, sendMessage } from './messaging';\n\nchrome.pageAction.onClicked.addListener(tab => {\n\tsendMessage('pageActionClick', undefined, tab.id);\n});\n\naddListener('pageAction', ({ operation, state }, { tab }) => {\n\tswitch (operation) {\n\t\tcase 'show':\n\t\t\tchrome.pageAction.show(tab.id);\n\t\t\tchrome.pageAction.setIcon({\n\t\t\t\ttabId: tab.id,\n\t\t\t\tpath: { /* eslint-disable quote-props */\n\t\t\t\t\t'19': state ? cssOnSmall : cssOffSmall,\n\t\t\t\t\t'38': state ? cssOn : cssOff,\n\t\t\t\t},\n\t\t\t});\n\t\t\tchrome.pageAction.setTitle({\n\t\t\t\ttabId: tab.id,\n\t\t\t\ttitle: state ? 'Subreddit Style On' : 'Subreddit Style Off',\n\t\t\t});\n\t\t\tbreak;\n\t\tcase 'hide':\n\t\t\tchrome.pageAction.hide(tab.id);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error(`Invalid pageAction operation: ${operation}`);\n\t}\n});\n","/* @flow */\n\nimport { apiToPromise } from '../utils/api';\nimport { addListener } from './messaging';\n\naddListener('permissions', handleMessage);\n\nexport function handleMessage({ operation, permissions, origins }: *) {\n\tswitch (operation) {\n\t\tcase 'contains':\n\t\t\treturn apiToPromise(chrome.permissions.contains)({ permissions, origins });\n\t\tcase 'request':\n\t\t\treturn apiToPromise(chrome.permissions.request)({ permissions, origins })\n\t\t\t\t.catch(() => makePromptWindow({ permissions, origins }));\n\t\tdefault:\n\t\t\tthrow new Error(`Invalid permissions operation: ${operation}`);\n\t}\n}\n\nasync function makePromptWindow({ permissions, origins }) {\n\tconst url = new URL('prompt.html', location.origin);\n\turl.searchParams.set('permissions', JSON.stringify(permissions));\n\turl.searchParams.set('origins', JSON.stringify(origins));\n\n\tconst width = 630;\n\tconst height = 255;\n\t// Display popup on middle of screen\n\tconst left = Math.floor(screen.width / 2 - width / 2);\n\tconst top = Math.floor(screen.height / 2 - height / 2);\n\n\tconst { tabs: [{ id }] } = await apiToPromise(chrome.windows.create)({ url: url.href, type: 'popup', width, height, left, top });\n\n\treturn new Promise(resolve => {\n\t\tfunction updateListener(tabId, updates) {\n\t\t\tif (tabId !== id) return;\n\n\t\t\tconst url = updates.url && new URL(updates.url);\n\t\t\tif (url && url.searchParams.has('result')) {\n\t\t\t\tstopListening();\n\t\t\t\tconst result = url.searchParams.get('result');\n\t\t\t\tif (!result) return;\n\t\t\t\tresolve(JSON.parse(result));\n\t\t\t\tapiToPromise(chrome.tabs.remove)(id);\n\t\t\t}\n\t\t}\n\n\t\tfunction removeListener(tabId) {\n\t\t\tif (tabId !== id) return;\n\t\t\tstopListening();\n\t\t\tresolve(false);\n\t\t}\n\n\t\tfunction stopListening() {\n\t\t\tchrome.tabs.onUpdated.removeListener(updateListener);\n\t\t\tchrome.tabs.onRemoved.removeListener(removeListener);\n\t\t}\n\n\t\tchrome.tabs.onUpdated.addListener(updateListener);\n\t\tchrome.tabs.onRemoved.addListener(removeListener);\n\t});\n}\n","/* @flow */\n\nimport { addListener } from './messaging';\n\nconst session = new Map();\naddListener('session', ([operation, key, value]) => {\n\tswitch (operation) {\n\t\tcase 'get':\n\t\t\treturn session.get(key);\n\t\tcase 'set':\n\t\t\tsession.set(key, value);\n\t\t\tbreak;\n\t\tcase 'delete':\n\t\t\treturn session.delete(key);\n\t\tcase 'has':\n\t\t\treturn session.has(key);\n\t\tcase 'clear':\n\t\t\treturn session.clear();\n\t\tdefault:\n\t\t\tthrow new Error(`Invalid session operation: ${operation}`);\n\t}\n});\n","/* @flow */\n\nimport { keyedMutex } from '../../utils/async';\nimport { apiToPromise } from '../utils/api';\nimport { addListener } from './messaging';\n\nconst __set = apiToPromise((items, callback) => chrome.storage.local.set(items, callback));\nconst _set = (key, value) => __set({ [key]: value });\nconst __get = apiToPromise((keys, callback) => chrome.storage.local.get(keys, callback));\nconst _get = async (key, defaultValue = null) => (await __get({ [key]: defaultValue }))[key];\n\naddListener('storage-cas', keyedMutex(async ([key, defaultValue, oldValue, newValue]) => {\n\tconst storedValue = await _get(key, defaultValue);\n\tif (storedValue !== oldValue) return false;\n\tawait _set(key, newValue);\n\treturn true;\n}, ([key]) => key));\n","/* @flow */\n\nimport { addListener } from './messaging';\n\naddListener('openNewTabs', ({ urls, focusIndex }, { tab }) => {\n\turls.forEach((url, i) => {\n\t\tchrome.tabs.create({\n\t\t\turl,\n\t\t\tactive: i === focusIndex,\n\t\t\tindex: tab.index + 1 + i,\n\t\t\topenerTabId: tab.id,\n\t\t\t// Firefox needs cookieStoreId to open in correct container\n\t\t\t...(process.env.BUILD_TARGET === 'firefox' ? { cookieStoreId: tab.cookieStoreId } : {}),\n\t\t});\n\t});\n});\n\n","/* @flow */\n\nexport class LRUCache<K, V> {\n\tmap: Map<K, {\n\t\tvalue: V,\n\t\tcreateTime: number,\n\t\thitTime: number,\n\t}>;\n\n\tcapacity: number;\n\n\tconstructor(capacity: number) {\n\t\tthis.map = new Map();\n\t\tthis.capacity = capacity;\n\t}\n\n\tget(key: K, maxAge: number = Infinity): V | void {\n\t\tconst now = Date.now();\n\t\tconst entry = this.map.get(key);\n\t\tif (entry && (now - entry.createTime < maxAge)) {\n\t\t\tentry.hitTime = now;\n\t\t\treturn entry.value;\n\t\t}\n\t}\n\n\tset(key: K, value: V): this {\n\t\tconst now = Date.now();\n\t\tthis.map.set(key, { value, createTime: now, hitTime: now });\n\n\t\tif (this.map.size > this.capacity) {\n\t\t\t// Evict least-recently used (hit)\n\t\t\tArray.from(this.map.entries())\n\t\t\t\t.sort(([, a], [, b]) => b.hitTime - a.hitTime)\n\t\t\t\t.slice((this.capacity / 2) | 0)\n\t\t\t\t.forEach(([key]) => this.map.delete(key));\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tdelete(key: K): boolean {\n\t\treturn this.map.delete(key);\n\t}\n\n\tclear(): void {\n\t\tthis.map.clear();\n\t}\n}\n","/* @flow */\n\nimport { LRUCache } from '../../utils/Cache';\nimport { addListener } from './messaging';\n\nconst cache = new LRUCache(512);\naddListener('XHRCache', ([operation, key, value]) => {\n\tswitch (operation) {\n\t\tcase 'set':\n\t\t\tcache.set(key, value);\n\t\t\tbreak;\n\t\tcase 'check':\n\t\t\treturn cache.get(key, value);\n\t\tcase 'delete':\n\t\t\treturn cache.delete(key);\n\t\tcase 'clear':\n\t\t\treturn cache.clear();\n\t\tdefault:\n\t\t\tthrow new Error(`Invalid XHRCache operation: ${operation}`);\n\t}\n});\n","/* generated by sibling-loader */\nimport * as _0 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/ajax.js\";\nimport * as _1 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/auth.js\";\nimport * as _2 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/download.js\";\nimport * as _3 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/history.js\";\nimport * as _4 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/i18n.js\";\nimport * as _5 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/loadScript.js\";\nimport * as _6 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/localePersistor.js\";\nimport * as _7 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/messaging.js\";\nimport * as _8 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/multicast.js\";\nimport * as _9 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/pageAction.js\";\nimport * as _10 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/permissions.js\";\nimport * as _11 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/session.js\";\nimport * as _12 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/storage.js\";\nimport * as _13 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/tabs.js\";\nimport * as _14 from \"/home/travis/build/honestbleeps/Reddit-Enhancement-Suite/lib/environment/background/xhrCache.js\";\nexport default { \"ajax.js\": _0, \"auth.js\": _1, \"download.js\": _2, \"history.js\": _3, \"i18n.js\": _4, \"loadScript.js\": _5, \"localePersistor.js\": _6, \"messaging.js\": _7, \"multicast.js\": _8, \"pageAction.js\": _9, \"permissions.js\": _10, \"session.js\": _11, \"storage.js\": _12, \"tabs.js\": _13, \"xhrCache.js\": _14 };","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arrayIncludesWith;\n","import Set from './_Set.js';\nimport noop from './noop.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nexport default createSet;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport cacheHas from './_cacheHas.js';\nimport createSet from './_createSet.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseUniq;\n","import baseIteratee from './_baseIteratee.js';\nimport baseUniq from './_baseUniq.js';\n\n/**\n * This method is like `_.uniq` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * uniqueness is computed. The order of result values is determined by the\n * order they occur in the array. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n * // => [2.1, 1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nfunction uniqBy(array, iteratee) {\n  return (array && array.length) ? baseUniq(array, baseIteratee(iteratee, 2)) : [];\n}\n\nexport default uniqBy;\n","import baseAssignValue from './_baseAssignValue.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseIteratee from './_baseIteratee.js';\n\n/**\n * The opposite of `_.mapValues`; this method creates an object with the\n * same values as `object` and keys generated by running each own enumerable\n * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n * with three arguments: (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapValues\n * @example\n *\n * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n *   return key + value;\n * });\n * // => { 'a1': 1, 'b2': 2 }\n */\nfunction mapKeys(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, iteratee(value, key, object), value);\n  });\n  return result;\n}\n\nexport default mapKeys;\n","import baseSlice from './_baseSlice.js';\n\n/**\n * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n * without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {Function} predicate The function invoked per iteration.\n * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseWhile(array, predicate, isDrop, fromRight) {\n  var length = array.length,\n      index = fromRight ? length : -1;\n\n  while ((fromRight ? index-- : ++index < length) &&\n    predicate(array[index], index, array)) {}\n\n  return isDrop\n    ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n    : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n}\n\nexport default baseWhile;\n","import baseIteratee from './_baseIteratee.js';\nimport baseWhile from './_baseWhile.js';\n\n/**\n * Creates a slice of `array` with elements taken from the end. Elements are\n * taken until `predicate` returns falsey. The predicate is invoked with\n * three arguments: (value, index, array).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.takeRightWhile(users, function(o) { return !o.active; });\n * // => objects for ['fred', 'pebbles']\n *\n * // The `_.matches` iteratee shorthand.\n * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n * // => objects for ['pebbles']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.takeRightWhile(users, ['active', false]);\n * // => objects for ['fred', 'pebbles']\n *\n * // The `_.property` iteratee shorthand.\n * _.takeRightWhile(users, 'active');\n * // => []\n */\nfunction takeRightWhile(array, predicate) {\n  return (array && array.length)\n    ? baseWhile(array, baseIteratee(predicate, 3), false, true)\n    : [];\n}\n\nexport default takeRightWhile;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","import arrayFilter from './_arrayFilter.js';\nimport arrayMap from './_arrayMap.js';\nimport baseProperty from './_baseProperty.js';\nimport baseTimes from './_baseTimes.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.zip` except that it accepts an array of grouped\n * elements and creates an array regrouping the elements to their pre-zip\n * configuration.\n *\n * @static\n * @memberOf _\n * @since 1.2.0\n * @category Array\n * @param {Array} array The array of grouped elements to process.\n * @returns {Array} Returns the new array of regrouped elements.\n * @example\n *\n * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n * // => [['a', 1, true], ['b', 2, false]]\n *\n * _.unzip(zipped);\n * // => [['a', 'b'], [1, 2], [true, false]]\n */\nfunction unzip(array) {\n  if (!(array && array.length)) {\n    return [];\n  }\n  var length = 0;\n  array = arrayFilter(array, function(group) {\n    if (isArrayLikeObject(group)) {\n      length = nativeMax(group.length, length);\n      return true;\n    }\n  });\n  return baseTimes(length, function(index) {\n    return arrayMap(array, baseProperty(index));\n  });\n}\n\nexport default unzip;\n","import apply from './_apply.js';\nimport arrayMap from './_arrayMap.js';\nimport unzip from './unzip.js';\n\n/**\n * This method is like `_.unzip` except that it accepts `iteratee` to specify\n * how regrouped values should be combined. The iteratee is invoked with the\n * elements of each group: (...group).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Array\n * @param {Array} array The array of grouped elements to process.\n * @param {Function} [iteratee=_.identity] The function to combine\n *  regrouped values.\n * @returns {Array} Returns the new array of regrouped elements.\n * @example\n *\n * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n * // => [[1, 10, 100], [2, 20, 200]]\n *\n * _.unzipWith(zipped, _.add);\n * // => [3, 30, 300]\n */\nfunction unzipWith(array, iteratee) {\n  if (!(array && array.length)) {\n    return [];\n  }\n  var result = unzip(array);\n  if (iteratee == null) {\n    return result;\n  }\n  return arrayMap(result, function(group) {\n    return apply(iteratee, undefined, group);\n  });\n}\n\nexport default unzipWith;\n","import baseRest from './_baseRest.js';\nimport unzipWith from './unzipWith.js';\n\n/**\n * This method is like `_.zip` except that it accepts `iteratee` to specify\n * how grouped values should be combined. The iteratee is invoked with the\n * elements of each group: (...group).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Array\n * @param {...Array} [arrays] The arrays to process.\n * @param {Function} [iteratee=_.identity] The function to combine\n *  grouped values.\n * @returns {Array} Returns the new array of grouped elements.\n * @example\n *\n * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n *   return a + b + c;\n * });\n * // => [111, 222]\n */\nvar zipWith = baseRest(function(arrays) {\n  var length = arrays.length,\n      iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n  iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n  return unzipWith(arrays, iteratee);\n});\n\nexport default zipWith;\n","/* @flow */\n\nconst escapeLookups = {\n\t'&': '&amp;',\n\t'\"': '&quot;',\n\t\"'\": '&apos;', // eslint-disable-line quotes\n\t'<': '&lt;',\n\t'>': '&gt;',\n\t'/': '&#47;',\n};\n\nexport function escapeHTML(str: ?string): string {\n\treturn str ?\n\t\tstr.toString().replace(/[&\"'<>\\/]/g, m => escapeLookups[m]) :\n\t\t'';\n}\n","/* @flow */\n\nimport { zipWith } from 'lodash-es';\nimport levenshtein from 'fast-levenshtein';\nimport { downcast } from './flow';\nimport { escapeHTML } from './html';\nimport type { Iteratee } from './array';\n\ntype StringTagFunction<V> = (s: string[], ...values: V[]) => string;\ntype HtmlTagValues = ?false | string | number | OpaqueSafeString | OpaqueSafeString[];\n\nfunction stringTagFunction<T>(valueTransform: Iteratee<T, string | void>): StringTagFunction<T> {\n\treturn (strings, ...values) =>\n\t\tzipWith(\n\t\t\tstrings,\n\t\t\tvalues.map(valueTransform),\n\t\t\t(s, v) => `${s}${v === undefined ? '' : v}`,\n\t\t).join('');\n}\n\nexport const encode: StringTagFunction<string> = stringTagFunction(encodeURIComponent);\n\nexport const escape: StringTagFunction<string> = stringTagFunction(escapeHTML);\n\ntype OpaqueSafeString = {| __safe__: string |};\n\nexport function safe(str: string): OpaqueSafeString {\n\treturn { __safe__: str };\n}\n\nconst MAX_DISTANCE_RATIO = 0.05;\n\nexport function areSimilar(a: string, b: string): boolean {\n\treturn levenshtein.get(a, b) <= MAX_DISTANCE_RATIO * Math.max(a.length, b.length);\n}\n\nexport const regexRegex = /^\\/(.*)\\/([sgimu]+)?$/;\n\nconst htmlTagFunction = stringTagFunction(x => {\n\t// avoid treating 0 as falsy and rendering nothing\n\tif (typeof x === 'number') return String(x);\n\t// falsy values not rendered\n\tif (!x) return '';\n\t// bare strings/numbers are escaped\n\tif (typeof x === 'string') return escapeHTML(x);\n\t// arrays of safe strings\n\tif (Array.isArray(x)) return x.filter(s => s && typeof s.__safe__ === 'string').map(s => s.__safe__).join('');\n\t// safe strings\n\tif (x.hasOwnProperty('__safe__')) return x.__safe__;\n\tthrow new TypeError(`Invalid html template interpolation: ${String(x)}`);\n});\n\n/**\n * Intended for mustache-like HTML templates:\n * - falsy values are not rendered\n * - arrays are joined with the empty string\n * - strings are html-escaped, single element string tuples are not\n */\nexport const html = (s: string[], ...values: HtmlTagValues[]) => {\n\tconst markup = htmlTagFunction(s, ...values);\n\n\t// <template> elements allow out-of-place elements e.g. <tr> without a <table>\n\t// but they cause weird issues in Firefox (#4222), and it's unlikely that you'll need\n\t// to use <tr>, except embedded in another template with string._html`<tr>...</tr>`,\n\t// which doesn't have this limitation.\n\tconst template = document.createElement('div');\n\ttemplate.innerHTML = markup;\n\tif (template.childElementCount !== 1) {\n\t\tthrow new Error(`Html template should have exactly one root node, but had ${template.childElementCount}`);\n\t}\n\tconst child = downcast(template.firstElementChild, HTMLElement);\n\tchild.remove();\n\treturn child;\n};\n\n/**\n * Intended for nested arrays or optional values in HTML templates.\n */\nexport const _html = (s: string[], ...values: HtmlTagValues[]) => safe(htmlTagFunction(s, ...values));\n","/* @flow */\n\nimport { once } from 'lodash-es';\nimport { ajax } from '../environment';\nimport type { CurrentRedditUser, RedditAccount } from '../types/reddit';\nimport { MINUTE } from './time';\nimport { isAppType, regexes } from './location';\nimport * as string from './string';\n\nexport const isLoggedIn = once(() => {\n\tif (loggedInUser()) {\n\t\treturn true;\n\t} else if (document.querySelector('header a[href^=\"/message/inbox\"]')) {\n\t\treturn true;\n\t}\n});\n\nexport const loggedInUser = once((): string | void => documentLoggedInUser(document));\n\nexport const documentLoggedInUser = (document: Document | Element): string | void => {\n\tif (isAppType('d2x')) {\n\t\t// The first text node in the user button contains the username\n\t\tconst findFirstTextNode = e => [...e.childNodes].filter(v => v.nodeType === 3).concat(...[...e.children].map(findFirstTextNode));\n\t\tconst button = document.querySelector('#USER_DROPDOWN_ID > *');\n\t\tconst username = button && findFirstTextNode(button)[0];\n\t\treturn username && username.textContent;\n\t}\n\n\tconst link: ?HTMLAnchorElement = (document.querySelector('#header-bottom-right > span.user > a'): any);\n\tif (!link || link.classList.contains('login-required')) return;\n\tconst profile = regexes.profile.exec(link.pathname);\n\tif (profile) {\n\t\treturn profile[1];\n\t}\n};\n\nexport const isModeratorAnywhere = once((): boolean => !!(document.getElementById('modmail') || document.querySelector('[href=\"/r/mod/\"]')));\n\nexport const loggedInUserHash = once(async (): Promise<?string> => {\n\tconst hashEle = document.querySelector('[name=uh]');\n\tif (hashEle instanceof HTMLInputElement) {\n\t\treturn hashEle.value;\n\t}\n\n\tconst userInfo = await loggedInUserInfo();\n\treturn userInfo && userInfo.data && userInfo.data.modhash;\n});\n\nexport const loggedInUserInfo = once((): Promise<CurrentRedditUser | void> =>\n\t!isLoggedIn() ? Promise.resolve() : ajax({ url: '/api/me.json', type: 'json' })\n\t\t.then(data => data.data && data.data.modhash ? data : undefined));\n\nconst usernameRE = /(?:u|user)\\/([\\w\\-]{3,20}(?![\\w\\-]))/;\n\nexport const usernameSelector = [\n\t'.contents .author',\n\t'p.tagline a.author',\n\t'#friend-table span.user a',\n\t'.sidecontentbox .author',\n\t'div.md a[href^=\"/u/\"]:not([href*=\"/m/\"])',\n\t'div.md a[href*=\"reddit.com/u/\"]:not([href*=\"/m/\"])',\n\t'.usertable a.author',\n\t'.parent > a.author',\n\t'.usertable span.user a',\n\t'div.wiki-page-content .author',\n\t'.Post__authorLink', // Newish profile page\n].join(', ');\n\nexport function getUsernameFromLink(element: HTMLElement): ?string {\n\tif (!(element instanceof HTMLAnchorElement)) return;\n\n\tconst { href, origin } = element;\n\n\t// The link should refer to this site\n\tif (!location.origin.endsWith(origin.split('.').slice(-2).join('.'))) return;\n\n\tconst [, username] = href.match(usernameRE) || [];\n\tif (username) return username;\n}\n\nexport function getUserInfo(username: ?string = loggedInUser()): Promise<RedditAccount> {\n\tif (!username) {\n\t\treturn Promise.reject(new Error('getUserInfo: null/undefined username'));\n\t}\n\n\treturn ajax({\n\t\turl: string.encode`/user/${username}/about.json`,\n\t\ttype: 'json',\n\t\tcacheFor: 10 * MINUTE,\n\t});\n}\n","/* @flow */\n\nimport {\n\tloggedInUser,\n\tloggedInUserHash,\n} from '../../utils/user';\nimport { contentStart } from '../../utils/pagePhases';\nimport { waitForEvent } from '../../utils/dom';\n\nexport const data: {|\n\tuserHash: ?string,\n\tusername: ?string,\n\torigin: string,\n\tpathname: string,\n|} = {\n\tuserHash: null,\n\tusername: null,\n\torigin: 'https://www.reddit.com',\n\tpathname: location.pathname,\n};\n\nif (location.protocol.startsWith('http')) {\n\tdata.origin = location.origin;\n\n\tcontentStart.then(() => {\n\t\tdata.username = loggedInUser();\n\t\tloggedInUserHash().then(hash => { data.userHash = hash; });\n\t});\n}\n\nexport function retrieveFromParent() {\n\tif (window === window.parent) return Promise.resolve();\n\n\treturn waitForEvent(window, 'message').then(({ data: { context } }: any) => {\n\t\tObject.assign(data, context);\n\t});\n}\n","/* @flow */\n\nimport { createMessageHandler } from '../utils/messaging';\nimport { apiToPromise } from '../utils/api';\n\nconst _sendMessage = apiToPromise(chrome.runtime.sendMessage);\n\nconst {\n\t_handleMessage,\n\tsendMessage,\n\taddListener,\n} = createMessageHandler(obj => _sendMessage(obj));\n\nchrome.runtime.onMessage.addListener((obj, sender, sendResponse) => _handleMessage(obj, sendResponse));\n\nexport {\n\tsendMessage,\n\taddListener,\n};\n","/* @flow */\n\nexport function isPrivateBrowsing(): boolean {\n\treturn chrome.extension.inIncognitoContext;\n}\n","/* @flow */\n\nimport { sendMessage } from './messaging';\nimport { isPrivateBrowsing } from './privateBrowsing';\n\nexport async function addURLToHistory(url: string): Promise<void> {\n\tif (isPrivateBrowsing()) return;\n\n\tawait sendMessage('addURLToHistory', url);\n}\n\nexport function isURLVisited(url: string): Promise<boolean> {\n\treturn sendMessage('isURLVisited', url);\n}\n","/* @flow */\n\nimport { sendMessage } from './messaging';\n\nexport function set(key: string, value: mixed) {\n\treturn sendMessage('XHRCache', ['set', key, value]);\n}\n\nexport function check(key: string, maxAge?: number /* milliseconds */): Promise<any | void> {\n\treturn sendMessage('XHRCache', ['check', key, maxAge]);\n}\n\nfunction delete_(key: string) {\n\treturn sendMessage('XHRCache', ['delete', key]);\n}\nexport { delete_ as delete };\n\nexport function clear() {\n\treturn sendMessage('XHRCache', ['clear']);\n}\n","/* @flow */\n\nimport { fromPairs } from 'lodash-es';\nimport { context } from '../../environment';\nimport { sendMessage } from './messaging';\nimport * as XhrCache from './xhrCache';\n\ntype ResponseType = 'text' | 'json' | 'raw';\ntype MethodType = 'GET' | 'HEAD' | 'POST' | 'PUT' | 'PATCH' | 'DELETE';\n\ntype AjaxOptions<Ty: ResponseType | void> = {|\n\tmethod?: MethodType,\n\turl: string,\n\tquery?: { [string]: string | number | boolean },\n\theaders?: { [string]: string },\n\tdata?: string | { [string]: string },\n\ttype?: Ty,\n\tcacheFor?: number,\n\tcredentials?: 'include' | 'omit',\n|};\n\nclass FetchError extends Error {\n\tstatus: number;\n\n\tconstructor(url, status) {\n\t\tsuper(`${url} failed with status ${status}`);\n\t\tthis.status = status;\n\t}\n}\n\n/* eslint-disable no-redeclare */\ndeclare function ajax(opt: AjaxOptions<void>): Promise<string>;\ndeclare function ajax(opt: AjaxOptions<'text'>): Promise<string>;\ndeclare function ajax(opt: AjaxOptions<'json'>): Promise<{ [string | number]: any }>;\ndeclare function ajax(opt: AjaxOptions<'raw'>): Promise<{\n\tok: boolean,\n\tstatus: number,\n\theaders: { [string]: string },\n\ttext: string,\n}>;\n\n/**\n * Send a fetch request.\n *\n * `method`, `url`, and `headers` behave in the obvious way.\n * `query` adds query params to `url`.\n * `data` objects will be sent as application/x-www-form-urlencoded.\n * `data` strings will be sent as-is.\n * `type` affects the return type, either 'text' or 'json'.\n * `cacheFor` is a TTL, in milliseconds.\n */\nexport async function ajax(options: AjaxOptions<*>) {\n\tconst { method, url, headers, data, type, cacheFor, sameOrigin, credentials } = buildRequestParams(options);\n\n\tif (cacheFor) {\n\t\tconst cached = await XhrCache.check(url, cacheFor);\n\t\tif (cached) {\n\t\t\treturn processResponse(cached, type);\n\t\t}\n\t}\n\n\tconst response = await (sameOrigin ?\n\t\tfetch(url, {\n\t\t\tmethod,\n\t\t\theaders,\n\t\t\tcredentials,\n\t\t\tbody: data,\n\t\t}).then(async r => ({\n\t\t\tok: r.ok,\n\t\t\tstatus: r.status,\n\t\t\theaders: fromPairs(Array.from(r.headers.entries())),\n\t\t\ttext: await r.text(),\n\t\t})) :\n\t\tsendMessage('ajax', { method, url, headers, data, credentials })\n\t);\n\n\tif (!response.ok) {\n\t\tthrow new FetchError(url, response.status);\n\t}\n\n\tif (cacheFor) {\n\t\tXhrCache.set(url, response);\n\t}\n\n\treturn processResponse(response, type);\n}\n/* eslint-enable no-redeclare */\n\najax.invalidate = (options: AjaxOptions<*>) =>\n\tXhrCache.delete(buildRequestParams(options).url);\n\nfunction buildRequestParams({ method = 'GET', url, query = {}, headers = {}, data, type = 'text', credentials, cacheFor = 0 }): {|\n\tmethod: MethodType,\n\turl: string,\n\theaders: { [string]: string },\n\tdata: string | void,\n\ttype: ResponseType,\n\tcacheFor: number,\n\tsameOrigin: boolean,\n\tcredentials: 'omit' | 'include',\n|} {\n\tconst siteOrigin = new URL(context.origin);\n\n\t// Expand relative URLs\n\tconst requestURL = new URL(url, siteOrigin);\n\n\t// Append query string to URL\n\tfor (const [key, val] of Object.entries(query)) {\n\t\trequestURL.searchParams.set(key, String(val));\n\t}\n\n\tconst sameSite = requestURL.hostname.split('.').slice(-2).join('.') === siteOrigin.hostname.split('.').slice(-2).join('.');\n\tif (sameSite) {\n\t\t// Add `app=res` to same-origin request URLs\n\t\trequestURL.searchParams.set('app', 'res');\n\n\t\t// include cookies for same-origin requests (to load correct posts, etc.)\n\t\tif (!credentials) credentials = 'include';\n\n\t\tif (method !== 'GET' && method !== 'HEAD') {\n\t\t\t// Send modhash for same-origin non-GET requests\n\t\t\tif (context.userHash) headers['X-Modhash'] = context.userHash;\n\t\t}\n\n\t\t// new.reddit.com specifically selects the reddit desktop web frontend service.\n\t\t// AJAX requests should be sent to www.reddit.com, which will select the correct\n\t\t// service based on the path.\n\t\trequestURL.hostname = requestURL.hostname.replace(/new\\./, 'www.');\n\t}\n\n\tconst sameOrigin = siteOrigin.origin === requestURL.origin;\n\n\t// Convert plain data objects to application/x-www-form-urlencoded\n\tif (typeof data === 'object') {\n\t\theaders['Content-Type'] = 'application/x-www-form-urlencoded';\n\t\t// this needs to be a string because Edge doesn't support sending URlSearchParams\n\t\t// (the fetch polyfill passes it through to XHR, which is correct behaviour)\n\t\tdata = new URLSearchParams(data).toString();\n\t}\n\n\treturn {\n\t\tmethod,\n\t\turl: requestURL.href,\n\t\theaders,\n\t\tdata,\n\t\ttype,\n\t\tcacheFor,\n\t\tcredentials: credentials || 'omit',\n\t\tsameOrigin,\n\t};\n}\n\nfunction processResponse(response, type: ResponseType) {\n\tswitch (type) {\n\t\tcase 'text':\n\t\t\treturn response.text;\n\t\tcase 'json':\n\t\t\treturn JSON.parse(response.text);\n\t\tcase 'raw':\n\t\t\treturn response;\n\t\tdefault:\n\t\t\tthrow new Error(`Invalid type: ${type}`);\n\t}\n}\n","/* @flow */\n\nimport { sendMessage } from './messaging';\n\nexport function download(url: string, filename?: string) {\n\t// Firefox and Chrome <a download> is same-origin only\n\tsendMessage('download', {\n\t\t// resolve relative URLs\n\t\turl: new URL(url, location.href).href,\n\t\tfilename,\n\t});\n}\n","/* @flow */\n\nexport function getExtensionId(): string {\n\treturn chrome.runtime.id;\n}\n\nexport const getURL = chrome.runtime.getURL;\n\nexport const getOptionsURL = (hash: string = '') => new URL(hash, getURL('options.html'));\nexport const isOptionsPage = () => location.origin === getOptionsURL().origin;\n","/* @flow */\n\nexport const CACHED_LANG_KEY = 'RES.i18nCachedLang';\nexport const CACHED_MESSAGES_KEY = 'RES.i18nCachedMessages';\nexport const CACHED_MESSAGES_TOKEN_KEY = 'RES.i18nCachedMessagesToken';\n","export default \"5.22.5\";","/* @flow */\n\nimport { CACHED_LANG_KEY, CACHED_MESSAGES_KEY, CACHED_MESSAGES_TOKEN_KEY } from '../../constants/localStorage';\nimport { sendMessage } from './messaging';\nimport buildToken from 'exec-loader!../../../build/buildToken'; // eslint-disable-line import/no-extraneous-dependencies\n\nconst REDDIT_LANGUAGES = new Set(['en', 'af', 'ar', 'be', 'bg', 'bn-IN', 'bn-bd', 'bs', 'ca', 'cs', 'cy', 'da', 'de', 'el', 'en-au', 'en-ca', 'en-gb', 'en-us', 'eo', 'es', 'es-ar', 'es-mx', 'et', 'eu', 'fa', 'fi', 'fil', 'fr', 'fr-ca', 'fy-NL', 'ga-ie', 'gd', 'gl', 'he', 'hi', 'hr', 'hu', 'hy', 'id', 'is', 'it', 'ja', 'kn_IN', 'ko', 'la', 'leet', 'lol', 'lt', 'lv', 'ms', 'mt-MT', 'nl', 'nn', 'no', 'pir', 'pl', 'pt', 'pt-pt', 'pt_BR', 'ro', 'ru', 'sk', 'sl', 'sr', 'sr-la', 'sv', 'ta', 'th', 'tr', 'uk', 'vi', 'zh', 'zh-cn']);\n// reddit languages which are not valid browser languages\nconst SPECIAL_LANGUAGES = new Set(['leet', 'lol', 'pir']);\n\nexport let locale = navigator.language || 'en'; // May be changed depending on Reddit language\n\nfunction isValidLocale(localeString) {\n\t// there doesn't appear to be a proper way to check if a language tag is valid, so we have to do this\n\ttry {\n\t\treturn typeof (0).toLocaleString(localeString) === 'string';\n\t} catch (e) {\n\t\treturn false;\n\t}\n}\n\nfunction getRedditLocale() {\n\tconst redditLocale = typeof document !== 'undefined' && document.documentElement.getAttribute('lang');\n\tif (redditLocale && (REDDIT_LANGUAGES.has(redditLocale))) {\n\t\t// `pt_BR` -> `pt-br`\n\t\tconst locale = redditLocale.toLowerCase().replace('_', '-');\n\t\tif (isValidLocale(locale)) {\n\t\t\trequestIdleCallback(() => { sendMessage('setLastRedditLocale', locale); });\n\t\t\treturn locale;\n\t\t}\n\t}\n\n\treturn sendMessage('getLastRedditLocale');\n}\n\nlet messages;\n\nexport async function _loadI18n(): Promise<void> {\n\tconst redditLocale = await getRedditLocale();\n\tif (redditLocale && !SPECIAL_LANGUAGES.has(redditLocale)) locale = redditLocale;\n\n\t// fast path: i18n dictionary is cached\n\t// should be hit almost every time\n\tif (\n\t\tlocalStorage.getItem(CACHED_LANG_KEY) === redditLocale &&\n\t\tlocalStorage.getItem(CACHED_MESSAGES_TOKEN_KEY) === buildToken\n\t) {\n\t\ttry {\n\t\t\t// eslint-disable-next-line require-atomic-updates\n\t\t\tmessages = JSON.parse(localStorage.getItem(CACHED_MESSAGES_KEY) || '');\n\t\t\treturn;\n\t\t} catch (e) {\n\t\t\tconsole.error('Failed to parse cached i18n', e);\n\t\t}\n\t}\n\n\t// slow path: wait for background page to send new locales\n\t// will be hit the first (ever) pageload on a new domain\n\t// or after clearing localStorage\n\tmessages = await sendMessage('i18n', redditLocale);\n\n\ttry { // Fails if remaining localStorage space is insufficient\n\t\tlocalStorage.setItem(CACHED_MESSAGES_KEY, JSON.stringify(messages));\n\t\tlocalStorage.setItem(CACHED_LANG_KEY, redditLocale);\n\t\tlocalStorage.setItem(CACHED_MESSAGES_TOKEN_KEY, buildToken);\n\t} catch (e) {\n\t\tconsole.error('Could not cache i18n - RES will load VERY slowly', e);\n\t\t// XXX: reddit has a habit of filling up these localstorage keys, so speculatively delete them\n\t\tlocalStorage.removeItem('ads.adserverDownvotePixel');\n\t\tlocalStorage.removeItem('ads.adserverUpvotePixel');\n\t}\n}\n\n// Behaves like https://developer.chrome.com/extensions/i18n#method-getMessage\nexport function i18n(messageName: string, ...substitutions: Array<string | number>): string {\n\tif (!messageName) return '';\n\n\tif (!messages) {\n\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\tthrow new Error(`i18n called too early! key: ${messageName}`);\n\t\t} else {\n\t\t\tconsole.error('i18n called too early! key:', messageName);\n\t\t\treturn messageName;\n\t\t}\n\t}\n\n\tconst message = messages[messageName];\n\n\tif (!message) return messageName;\n\n\t// Fast path: avoid running regex when there are no substitutions\n\tif (substitutions.length === 0) return message;\n\n\t// Replace direct references to substitutions, e.g. `First substitution: $1`\n\t// Maximum of 9 substitutions allowed, i.e. only one number after the `$`\n\treturn message.replace(/\\$(\\d)\\b(?!\\$)/g, (match, number) => substitutions[number - 1]);\n\n\t// Chrome also supports named placeholders, e.g. `Error: $error_message$`\n\t// but Transifex does not create the `placeholders` field in exported JSON\n\t// https://developer.chrome.com/extensions/i18n#examples-getMessage\n}\n","/* @flow */\n\nimport { memoize } from 'lodash-es';\nimport { sendMessage } from './messaging';\n\nexport const loadScript = memoize((url: string) => sendMessage('loadScript', { url }));\n","/* @flow */\n\nimport { memoize } from 'lodash-es';\nimport { mutex } from '../../utils/async';\nimport { sendMessage } from './messaging';\n\ntype Perms = Array<string>;\n\nfunction filterPerms(perms) {\n\tconst permissions = perms.filter(p => !p.includes('://') && p !== '<all_urls>');\n\tconst origins = perms.filter(p => p.includes('://') || p === '<all_urls>');\n\treturn { permissions, origins };\n}\n\n/**\n * @param {Array<string>} perms Permissions to check if granted\n * @returns {Promise<boolean>}\n */\nexport const has = memoize(\n\t(perms: Perms) => sendMessage('permissions', { operation: 'contains', ...filterPerms(perms) }),\n\tperms => perms.join(','),\n);\n\n/**\n * @param {Array<string>} perms Optional Chrome permissions to request.\n * @param {string} perms Name of site to request permission for\n * @returns {Promise<void, *>} Resolves if the permissions are granted, rejects otherwise.\n */\nexport const request = mutex(async (perms: Perms) => {\n\tif (await has(perms)) return;\n\n\tconst { permissions, origins } = filterPerms(perms);\n\n\tconst granted = await sendMessage('permissions', { operation: 'request', permissions, origins });\n\tif (granted) {\n\t\thas.cache.set(perms.join(','), true);\n\t} else {\n\t\tthrow new Error(`Permission not granted for: ${perms.join(', ')}`);\n\t}\n});\n","/* @flow */\n\nimport { sendMessage } from './messaging';\nimport * as Permissions from './permissions';\n\nexport async function launchAuthFlow({\n\tdomain,\n\tclientId,\n\tscope = '',\n\tpermissions,\n}: {|\n\tdomain: string,\n\tclientId: string,\n\tscope?: string,\n\tpermissions: Array<string>,\n|}, warnUserInteraction: (message: string) => Promise<void>): Promise<string> {\n\tif (permissions.length && !await Permissions.has(permissions)) {\n\t\tconst resAuth = 'https://redditenhancementsuite.com/oauth';\n\t\t// Firefox can use `launchWebAuthFlow` and doesn't need to redirect to our domain\n\t\tif (process.env.BUILD_TARGET !== 'firefox' && !await Permissions.has([resAuth])) {\n\t\t\tpermissions.push(resAuth);\n\t\t}\n\n\t\tawait warnUserInteraction(permissions.includes(resAuth) ? 'You may be redirected to redditenhancementsuite.com to complete the login process.' : '');\n\n\t\tawait Permissions.request(permissions);\n\t}\n\n\tlet responseUrl;\n\ttry {\n\t\tresponseUrl = await sendMessage('authFlow', { domain, clientId, scope, interactive: false });\n\t} catch (e) {\n\t\tconsole.error('Noninteractive auth failed:', e);\n\n\t\tresponseUrl = await sendMessage('authFlow', { domain, clientId, scope, interactive: true });\n\t}\n\n\tconst hash = new URL(responseUrl).hash.slice(1);\n\tconst token = new URLSearchParams(hash).get('access_token');\n\n\tif (!token) throw new Error('No token found in response.');\n\n\treturn token;\n}\n","/* @flow */\n\nimport { addListener, sendMessage } from './messaging';\n\nconst callbacks = new Map();\n\naddListener('multicast', ({ name, args }) => {\n\tconst callback = callbacks.get(name);\n\t// Not every foreground pages subscribes to every multicast\n\tif (callback) return callback(...args);\n});\n\n/*\n * Creates a wrapper function that will invoke `callback` in all other tabs.\n */\nexport function multicast<T:(...args: any) => any>(callback: T, { name, local = true, crossContext = true }: {| name: string, local?: boolean, crossContext?: boolean |}): T {\n\tif (callbacks.has(name)) {\n\t\tthrow new Error(`Multicast handler with name \"${name}\" exists.`);\n\t}\n\n\tcallbacks.set(name, callback);\n\n\tfunction localOnly(...args) {\n\t\tcallback(...args);\n\t}\n\n\tconst invoke: any = (...args) => {\n\t\tsendMessage('multicast', { name, args, crossContext });\n\n\t\tif (local) {\n\t\t\tlocalOnly(...args);\n\t\t}\n\t};\n\n\tinvoke.local = localOnly;\n\n\treturn invoke;\n}\n","/* @flow */\n\nimport { sendMessage } from './messaging';\n\nexport function openNewTab(url: string, focus?: boolean = true) {\n\treturn openNewTabs(focus, url);\n}\n\ntype Focus = 'first' | 'last' | 'none' | boolean;\n\nexport function openNewTabs(focus: Focus, ...urls: string[]) {\n\tlet focusIndex;\n\n\tif (typeof focus !== 'string') focus = !!focus;\n\n\tswitch (focus) {\n\t\tcase 'first':\n\t\t\tfocusIndex = 0;\n\t\t\tbreak;\n\t\tcase true:\n\t\tcase 'last':\n\t\t\tfocusIndex = urls.length - 1;\n\t\t\tbreak;\n\t\tcase false:\n\t\tcase 'none':\n\t\t\tfocusIndex = -1;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error(`Invalid focus specified: ${focus}`);\n\t}\n\n\t// Expand relative URLs\n\turls = urls.map(url => new URL(url, location.href).href);\n\n\treturn sendMessage('openNewTabs', { urls, focusIndex });\n}\n","/* @flow */\n\nimport { frameThrottle } from '../../utils/async';\nimport { addListener, sendMessage } from './messaging';\n\nconst clickListeners = [];\n\nexport function onClick(callback: () => void) {\n\tclickListeners.push(callback);\n}\n\naddListener('pageActionClick', () => { for (const fn of clickListeners) fn(); });\n\n// Don't update before page is visible, as Firefox (buggily?) ignores pageAction updates to hidden pages\nconst update = frameThrottle(value => sendMessage('pageAction', value));\n\nexport function show(state?: boolean = false) {\n\treturn update({ operation: 'show', state });\n}\n\nexport function hide() {\n\treturn update({ operation: 'hide' });\n}\n","/* @flow */\n\nimport { sendMessage } from './messaging';\n\nexport function get(key: string): Promise<any | void> {\n\treturn sendMessage('session', ['get', key]);\n}\n\nexport function set(key: string, value: mixed) {\n\treturn sendMessage('session', ['set', key, value]);\n}\n\nexport function delete_(key: string) {\n\treturn sendMessage('session', ['delete', key]);\n}\nexport { delete_ as delete };\n\nexport function has(key: string): Promise<boolean> {\n\treturn sendMessage('session', ['has', key]);\n}\n\nexport function clear() {\n\treturn sendMessage('session', ['clear']);\n}\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import arrayEach from './_arrayEach.js';\nimport baseCreate from './_baseCreate.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseIteratee from './_baseIteratee.js';\nimport getPrototype from './_getPrototype.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isTypedArray from './isTypedArray.js';\n\n/**\n * An alternative to `_.reduce`; this method transforms `object` to a new\n * `accumulator` object which is the result of running each of its own\n * enumerable string keyed properties thru `iteratee`, with each invocation\n * potentially mutating the `accumulator` object. If `accumulator` is not\n * provided, a new object with the same `[[Prototype]]` will be used. The\n * iteratee is invoked with four arguments: (accumulator, value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The custom accumulator value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.transform([2, 3, 4], function(result, n) {\n *   result.push(n *= n);\n *   return n % 2 == 0;\n * }, []);\n * // => [4, 9]\n *\n * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] }\n */\nfunction transform(object, iteratee, accumulator) {\n  var isArr = isArray(object),\n      isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n  iteratee = baseIteratee(iteratee, 4);\n  if (accumulator == null) {\n    var Ctor = object && object.constructor;\n    if (isArrLike) {\n      accumulator = isArr ? new Ctor : [];\n    }\n    else if (isObject(object)) {\n      accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n    }\n    else {\n      accumulator = {};\n    }\n  }\n  (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n    return iteratee(accumulator, value, index, object);\n  });\n  return accumulator;\n}\n\nexport default transform;\n","/* @flow */\n\n/*\n * Roughly equivalent to `$.extend(true, target, source)`\n * Unfortunately lodash does not seem to offer any function that does this:\n * _.assign/_.extend/Object.assign are not recursive\n * _.merge and _.defaultsDeep ignore undefined values\n */\nexport function extendDeep(target: { [string]: mixed }, source: { [string]: mixed }): { [string]: mixed } {\n\tfor (const key of Object.keys(source)) {\n\t\tif (\n\t\t\ttarget[key] && source[key] &&\n\t\t\ttypeof target[key] === 'object' && typeof source[key] === 'object' &&\n\t\t\t!Array.isArray(source[key]) && !Array.isArray(target[key])\n\t\t) {\n\t\t\textendDeep(target[key], source[key]);\n\t\t} else {\n\t\t\ttarget[key] = source[key];\n\t\t}\n\t}\n\treturn target;\n}\n","/* @flow */\n\nimport { transform, once } from 'lodash-es';\nimport { extendDeep } from '../../utils/object';\nimport { batch, keyedMutex } from '../../utils/async';\nimport { apiToPromise } from '../utils/api';\nimport { sendMessage } from './messaging';\n\nconst __set = apiToPromise((items, callback) => chrome.storage.local.set(items, callback));\nconst _set = (key, value) => __set({ [key]: value });\nconst __get = apiToPromise((keys, callback) => chrome.storage.local.get(keys, callback));\nconst _get = async (key, defaultValue = null) => (await __get({ [key]: defaultValue }))[key];\nconst _delete = apiToPromise((keys, callback) => chrome.storage.local.remove(keys, callback));\nconst _clear = apiToPromise(callback => chrome.storage.local.clear(callback));\n\nconst withLockOn = keyedMutex(<T>(key: string, fn: () => T): T => fn());\n\nexport function get(key: string): Promise<any | null> {\n\treturn withLockOn(key, () => _get(key, null));\n}\n\nexport function getAll(): Promise<{ [string]: mixed }> {\n\treturn __get(null);\n}\n\nexport function getMultiple<T: string>(keys: T[]): Promise<{ [T]: any | null }> {\n\tconst defaults = {};\n\tfor (const k of keys) {\n\t\tdefaults[k] = null;\n\t}\n\treturn __get(defaults);\n}\n\nexport function set(key: string, value: mixed): Promise<void> {\n\treturn withLockOn(key, () => _set(key, value));\n}\n\nexport function setMultiple(valueMap: { +[string]: mixed }): Promise<void> {\n\treturn __set(valueMap);\n}\n\nfunction compareAndSet(key: string, defaultValue: mixed, oldValue: mixed, newValue: mixed): Promise<boolean> {\n\t// Redirect to the background instance as it allows for a common mutex,\n\t// preventing race conditions when several tabs invokes this function around the same time\n\treturn sendMessage('storage-cas', [key, defaultValue, oldValue, newValue]);\n}\n\n/*\n * Deeply patches an object in storage, like extendDeep().\n */\nfunction patch(key: string, value: { [string]: mixed }): Promise<void> {\n\treturn withLockOn(key, async () => {\n\t\tconst extended = extendDeep(await _get(key) || {}, value);\n\t\treturn _set(key, extended);\n\t});\n}\n\n/*\n * Shallowly patches an object in storage, like Object.assign().\n */\nfunction patchShallow(key: string, value: { [string]: mixed }): Promise<void> {\n\treturn withLockOn(key, async () => {\n\t\tconst extended = Object.assign(await _get(key) || {}, value);\n\t\treturn _set(key, extended);\n\t});\n}\n\n/*\n * Deletes a property on a value in storage.\n * i.e. `deletePath('userTaggerStorageKey', 'username', 'tag')`\n * will `delete userTaggerStoredValue.username.tag`\n */\nfunction deletePaths(key: string, paths: string[][]): Promise<void> {\n\treturn withLockOn(key, async () => {\n\t\tconst stored = await _get(key);\n\t\tif (!stored) return;\n\t\tfor (const path of paths) {\n\t\t\tpath.reduce((obj, key, i, { length }) => {\n\t\t\t\tif (!obj) return;\n\t\t\t\tif (i < length - 1) return obj[key];\n\t\t\t\tdelete obj[key];\n\t\t\t}, stored);\n\t\t}\n\t\treturn _set(key, stored);\n\t});\n}\n\nfunction delete_(key: string): Promise<void> {\n\treturn withLockOn(key, () => _delete(key));\n}\nexport { delete_ as delete };\n\nexport function deleteMultiple(keys: string[]): Promise<void> {\n\treturn _delete(keys);\n}\n\nexport function has(key: string): Promise<boolean> {\n\treturn withLockOn(key, async () => {\n\t\tconst sentinel = Math.random();\n\t\treturn (await _get(key, sentinel)) !== sentinel;\n\t});\n}\n\nexport async function keys(): Promise<string[]> {\n\treturn Object.keys(await __get(null));\n}\n\nexport function clear(): Promise<void> {\n\treturn _clear();\n}\n\nclass Wrapper<T> {\n\t_key: () => string;\n\t_default: T;\n\n\tconstructor(key: $PropertyType<this, '_key'>, def: T) {\n\t\tthis._key = key;\n\t\tthis._default = def;\n\t}\n\n\tget(): Promise<T> {\n\t\treturn get(this._key()).then(val => (val === null ? this._default : val));\n\t}\n\n\tset(value: T): Promise<void> {\n\t\treturn set(this._key(), value);\n\t}\n\n\tpatch(value: $Shape<T>): Promise<void> {\n\t\treturn patch(this._key(), (value: any));\n\t}\n\n\tcompareAndSet(oldValue: T, newValue: T): Promise<boolean> {\n\t\treturn compareAndSet(this._key(), this._default, oldValue, newValue);\n\t}\n\n\tdeletePath(...path: string[]): Promise<void> {\n\t\treturn deletePaths(this._key(), [path]);\n\t}\n\n\tdelete(): Promise<void> {\n\t\treturn delete_(this._key());\n\t}\n\n\thas(): Promise<boolean> {\n\t\treturn has(this._key());\n\t}\n}\n\nexport function wrap<T>(key: string | () => string /* pure */, defaultValue: T): Wrapper<T> {\n\tconst keyGenerator = typeof key === 'string' ? () => key : once(key);\n\t// $FlowIssue\n\treturn new Wrapper(keyGenerator, defaultValue);\n}\n\nclass PrefixWrapper<T> {\n\t_prefix: string;\n\t_keyMapper: (key: string) => string;\n\t_default: () => T;\n\t_get: *;\n\n\tconstructor(prefix: string, def: () => T, keyMapper: (key: string) => string, batching: boolean) {\n\t\tthis._prefix = prefix;\n\t\tthis._default = def;\n\t\tthis._keyMapper = keyMapper;\n\n\t\tif (batching) {\n\t\t\tthis._get = batch(async keys => {\n\t\t\t\tconst v = await this.getMultipleNullable(keys);\n\t\t\t\treturn keys.map(key => v[this._keyMapper(key)]);\n\t\t\t}, { size: Infinity, delay: 0 });\n\t\t} else {\n\t\t\tthis._get = key => get(this._keyGen(key));\n\t\t}\n\t}\n\n\t_keyGen(key: string): string {\n\t\treturn this._prefix + this._keyMapper(key);\n\t}\n\n\tget(key: string): Promise<T> {\n\t\treturn this._get(key).then(val => (val === null ? this._default() : val));\n\t}\n\n\tgetNullable(key: string): Promise<T | null> {\n\t\treturn this._get(key);\n\t}\n\n\tasync getAll(): Promise<{ [string]: T }> {\n\t\tconst everything = await getAll();\n\t\treturn transform(everything, (acc, v, k) => {\n\t\t\tif (k.startsWith(this._prefix)) {\n\t\t\t\tacc[k.slice(this._prefix.length)] = v;\n\t\t\t}\n\t\t}, {});\n\t}\n\n\tasync getMultiple(keys: string[]): Promise<{ [string]: T }> {\n\t\tconst rawValues = await getMultiple(keys.map(k => this._keyGen(k)));\n\t\treturn transform(rawValues, (acc, v, k) => {\n\t\t\tacc[k.slice(this._prefix.length)] = (v === null ? this._default() : v);\n\t\t}, {});\n\t}\n\n\tasync getMultipleNullable(keys: string[]): Promise<{ [string]: T | null }> {\n\t\tconst rawValues = await getMultiple(keys.map(k => this._keyGen(k)));\n\t\treturn transform(rawValues, (acc, v, k) => {\n\t\t\tacc[k.slice(this._prefix.length)] = v;\n\t\t}, {});\n\t}\n\n\tset(key: string, value: T): Promise<void> {\n\t\treturn set(this._keyGen(key), value);\n\t}\n\n\tpatch(key: string, value: $Shape<T>): Promise<void> {\n\t\treturn patch(this._keyGen(key), (value: any));\n\t}\n\n\tdeletePath(key: string, ...path: string[]): Promise<void> {\n\t\treturn deletePaths(this._keyGen(key), [path]);\n\t}\n\n\tdelete(key: string): Promise<void> {\n\t\treturn delete_(this._keyGen(key));\n\t}\n\n\tdeleteMultiple(keys: string[]): Promise<void> {\n\t\treturn deleteMultiple(keys.map(k => this._keyGen(k)));\n\t}\n\n\thas(key: string): Promise<boolean> {\n\t\treturn has(this._keyGen(key));\n\t}\n}\n\nexport function wrapPrefix<T>(prefix: string, defaultValue: () => T, destructiveKeyMapper: (key: string) => string = x => x, batching: boolean = false): PrefixWrapper<T> {\n\treturn new PrefixWrapper(prefix, defaultValue, destructiveKeyMapper, batching);\n}\n\nclass BlobWrapper<T> {\n\t_rootKey: string;\n\t_default: () => T;\n\n\tconstructor(rootKey: string, def: () => T) {\n\t\tthis._rootKey = rootKey;\n\t\tthis._default = def;\n\t}\n\n\tget(key: string): Promise<T> {\n\t\treturn get(this._rootKey).then(val => (\n\t\t\t(val === null || val[key] === undefined) ? this._default() : val[key]\n\t\t));\n\t}\n\n\tgetNullable(key: string): Promise<T | null> {\n\t\treturn get(this._rootKey).then(val => (\n\t\t\t(val === null || val[key] === undefined) ? null : val[key]\n\t\t));\n\t}\n\n\tgetAll(): Promise<{ [string]: T }> {\n\t\treturn get(this._rootKey).then(val => (val === null ? {} : val));\n\t}\n\n\tasync getMultiple(keys: string[]): Promise<{ [string]: T }> {\n\t\tconst rawValues = (await get(this._rootKey)) || {};\n\t\treturn transform(keys, (acc, key) => {\n\t\t\tacc[key] = rawValues[key] === undefined ? this._default() : rawValues[key];\n\t\t}, {});\n\t}\n\n\tasync getMultipleNullable(keys: string[]): Promise<{ [string]: T | null }> {\n\t\tconst rawValues = (await get(this._rootKey)) || {};\n\t\treturn transform(keys, (acc, key) => {\n\t\t\tacc[key] = rawValues[key] === undefined ? null : rawValues[key];\n\t\t}, {});\n\t}\n\n\tset(key: string, value: T): Promise<void> {\n\t\treturn patchShallow(this._rootKey, { [key]: value });\n\t}\n\n\tpatch(key: string, value: $Shape<T>): Promise<void> {\n\t\treturn patch(this._rootKey, { [key]: value });\n\t}\n\n\tdeletePath(key: string, ...path: string[]): Promise<void> {\n\t\treturn deletePaths(this._rootKey, [[key, ...path]]);\n\t}\n\n\tdelete(key: string): Promise<void> {\n\t\treturn deletePaths(this._rootKey, [[key]]);\n\t}\n\n\tdeleteMultiple(keys: string[]): Promise<void> {\n\t\treturn deletePaths(this._rootKey, keys.map(k => [k]));\n\t}\n\n\thas(key: string): Promise<boolean> {\n\t\treturn get(this._rootKey).then(val => (val !== null && val[key] !== undefined));\n\t}\n\n\tclear(): Promise<void> {\n\t\treturn delete_(this._rootKey);\n\t}\n}\n\nexport function wrapBlob<T>(rootKey: string, defaultValue: () => T): BlobWrapper<T> {\n\treturn new BlobWrapper(rootKey, defaultValue);\n}\n","/* @flow */\n\nexport { data as context } from './foreground/context';\nexport { addURLToHistory, isURLVisited } from './foreground/history';\nexport { ajax } from './foreground/ajax';\nexport { download } from './foreground/download';\nexport { getExtensionId, getURL, isOptionsPage, getOptionsURL } from './foreground/id';\nexport { locale, i18n, _loadI18n } from './foreground/i18n';\nexport { loadScript } from './foreground/loadScript';\nexport { isPrivateBrowsing } from './foreground/privateBrowsing';\nexport { launchAuthFlow } from './foreground/auth';\nexport { multicast } from './foreground/multicast';\nexport { openNewTab, openNewTabs } from './foreground/tabs';\nexport * as PageAction from './foreground/pageAction';\nexport * as Permissions from './foreground/permissions';\nexport * as Session from './foreground/session';\nexport * as Storage from './foreground/storage';\nexport * as XhrCache from './foreground/xhrCache';\n","/* @flow */\n\nimport { Storage } from '../../environment';\n\nexport const storage = Storage.wrapBlob('RES.modulePrefs',\n\t(): boolean => { throw new Error('Default module enabled state should never be accessed'); });\n\nexport function setEnabled(moduleId: string, enable: boolean) {\n\treturn storage.set(moduleId, enable);\n}\n","/* @flow */\n\nimport type { PageType, AppType } from '../utils/location';\nimport type { KeyArray } from '../utils/keycode';\n\n// separate because indexer syntax is not supported in normal (no `declare`) classes\ndeclare class Indexable { // eslint-disable-line no-unused-vars\n\t[Symbol | $Keys<this>]: any;\n}\n\nexport class Module<RawOpt: { [string]: any }, Opt: { [string]: ModuleOption<RawOpt> } = RawOpt> /*:: extends Indexable */ {\n\tmoduleID: string;\n\n\tmoduleName: string;\n\tcategory: string = '';\n\tdescription: string = '';\n\tdescriptionRaw: boolean = false; // Whether the message is HTML and should not be run through i18n / markdown\n\tkeywords: Array<string> = [];\n\tbodyClass: boolean = false;\n\toptions: Opt = ({}: any);\n\tinclude: Array<PageType | AppType | RegExp> = [];\n\texclude: Array<PageType | AppType | RegExp> = [];\n\tshouldRun: () => boolean = () => true;\n\tonToggle: (enabling: boolean) => void = () => {};\n\tonSaveSettings: (changedSettings: any) => void = () => {};\n\n\thidden: boolean = false;\n\tdisabledByDefault: boolean = false;\n\talwaysEnabled: boolean = false;\n\tsort: number = 0;\n\n\t// no default value for cleaner profiling (modules without a stage defined won't be timed)\n\tonInit: (() => Promise<void> | void) | void = undefined;\n\tbeforeLoad: (() => Promise<void> | void) | void = undefined;\n\tcontentStart: (() => Promise<void> | void) | void = undefined;\n\tgo: (() => Promise<void> | void) | void = undefined;\n\tafterLoad: (() => Promise<void> | void) | void = undefined;\n\talways: (() => Promise<void> | void) | void = undefined;\n\n\tpermissions: {|\n\t\trequiredPermissions: Array<string>,\n\t\tmessage?: string,\n\t|} = {\n\t\trequiredPermissions: [],\n\t};\n\n\tconstructor(moduleID: string) {\n\t\t/*:: super(); */\n\t\tthis.moduleID = moduleID;\n\t\tthis.moduleName = moduleID;\n\t}\n}\n\nexport type OpaqueModuleId = string | { moduleID: string, module?: void } | { module: { moduleID: string } };\n\nexport function getModuleId(opaqueId: OpaqueModuleId): string {\n\tif (!opaqueId) {\n\t\tthrow new TypeError(`Expected module, moduleID, or namespace; found: ${opaqueId}`);\n\t}\n\n\tif (typeof opaqueId === 'string') {\n\t\t// raw moduleID\n\t\treturn opaqueId;\n\t} else if (opaqueId.module) {\n\t\t// namespace\n\t\treturn opaqueId.module.moduleID;\n\t} else {\n\t\t// assume module-like object\n\t\treturn opaqueId.moduleID;\n\t}\n}\n\nexport type ModuleOption<Ctx> =\n\t| BooleanOption<Ctx>\n\t| TextOption<Ctx>\n\t| EnumOption<Ctx>\n\t| KeycodeOption<Ctx>\n\t| ListOption<Ctx>\n\t| SelectOption<Ctx>\n\t| TableOption<Ctx, any>\n\t| ButtonOption<Ctx>\n\t| ColorOption<Ctx>\n\t| BuilderOption<Ctx>;\n\ntype CommonOptionProps<Ctx> = {|\n\ttitle: string,\n\tdescription: string,\n\tkeywords?: Array<string>,\n\tdependsOn?: (opt: Ctx) => boolean,\n\tadvanced?: boolean,\n\tnoconfig?: boolean,\n\t// Intentionally do not pass in the new value\n\t// so that it must be read out of `module.options[key].value`\n\t// for easier grepping (and to enforce stricter types where possible).\n\tonChange?: () => void,\n|};\n\nexport type BooleanOption<Ctx> = {|\n\ttype: 'boolean',\n\tvalue: boolean,\n\tbodyClass?: boolean | string,\n\t...CommonOptionProps<Ctx>,\n|};\n\nexport type TextOption<Ctx> = {|\n\ttype: 'text',\n\tvalue: string,\n\t...CommonOptionProps<Ctx>,\n|};\n\nexport type EnumOption<Ctx> = {|\n\ttype: 'enum',\n\tvalue: string,\n\tvalues: Array<{\n\t\tname: string,\n\t\tvalue: string,\n\t}>,\n\tbodyClass?: boolean | string,\n\t...CommonOptionProps<Ctx>,\n|};\n\nexport type KeycodeOption<Ctx> = {|\n\ttype: 'keycode',\n\tvalue: KeyArray,\n\t// special for keyboardNav\n\tgoMode?: boolean,\n\tcallback?: () => void,\n\tinclude?: Array<PageType | AppType | RegExp>,\n\trequiresModules?: Array<OpaqueModuleId>,\n\tmustBeLoggedIn?: boolean,\n\t...CommonOptionProps<Ctx>,\n|};\n\nexport type ListOption<Ctx> = {|\n\ttype: 'list',\n\tlistType: ListType,\n\tvalue: string,\n\t...CommonOptionProps<Ctx>,\n|};\n\ntype ListType = 'subreddits';\n\nexport type SelectOption<Ctx> = {|\n\ttype: 'select',\n\tvalue: string,\n\tvalues: Array<{\n\t\tname: string,\n\t\tvalue: string,\n\t\tstyle: string,\n\t}>,\n\t...CommonOptionProps<Ctx>,\n|};\n\nexport type TableOption<Ctx, V: $ReadOnlyArray<any>> = {|\n\ttype: 'table',\n\taddRowText?: string,\n\tfields: TableField[],\n\tvalue: V[],\n\tsort?: (a: V, b: V) => number,\n\t...CommonOptionProps<Ctx>,\n|};\n\ntype TableField = HiddenField | TextField | BooleanField | ListField | PasswordField | KeycodeField | TextareaField | EnumField | ColorField | SelectField;\n\ntype HiddenField = {|\n\ttype: 'hidden',\n\tkey: string,\n\tname: string,\n\tvalue?: string,\n|};\n\ntype TextField = {|\n\ttype: 'text',\n\tkey: string,\n\tname: string,\n\tvalue?: string,\n|};\n\ntype BooleanField = {|\n\ttype: 'boolean',\n\tkey: string,\n\tname: string,\n\tvalue: boolean,\n|};\n\ntype ListField = {|\n\ttype: 'list',\n\tkey: string,\n\tname: string,\n\tlistType: ListType,\n|};\n\ntype PasswordField = {|\n\ttype: 'password',\n\tkey: string,\n\tname: string,\n|};\n\ntype KeycodeField = {|\n\ttype: 'keycode',\n\tkey: string,\n\tname: string,\n|};\n\ntype TextareaField = {|\n\ttype: 'textarea',\n\tkey: string,\n\tname: string,\n|};\n\ntype EnumField = {|\n\ttype: 'enum',\n\tkey: string,\n\tname: string,\n\tvalue: string,\n\tvalues: Array<{\n\t\tname: string,\n\t\tvalue: string,\n\t}>,\n|};\n\ntype ColorField = {|\n\ttype: 'color',\n\tkey: string,\n\tname: string,\n|};\n\ntype SelectField = {|\n\ttype: 'select',\n\tkey: string,\n\tname: string,\n\tvalue: string,\n\tvalues: Array<{\n\t\tname: string,\n\t\tvalue: string,\n\t\tstyle?: string,\n\t}>,\n|};\n\nexport type ButtonOption<Ctx> = {|\n\ttype: 'button',\n\ttext?: string | HTMLElement,\n\tcallback?: (() => Promise<void> | void) | string | { moduleID: string },\n\tvalues?: Array<{ text: $PropertyType<ButtonOption<Ctx>, 'text'>, callback: $PropertyType<ButtonOption<Ctx>, 'callback'> }>,\n\t...CommonOptionProps<Ctx>,\n|};\n\nexport type ColorOption<Ctx> = {|\n\ttype: 'color',\n\tvalue: string,\n\t...CommonOptionProps<Ctx>,\n|};\n\nexport type BuilderOption<Ctx> = {|\n\ttype: 'builder',\n\taddItemText: string,\n\tdefaultTemplate: () => BuilderRootValue,\n\tcases: { [string]: BuilderCase<*> },\n\tvalue: BuilderRootValue[],\n\tcustomOptionsFields: Array<Array<BuilderField | string>>,\n\t...CommonOptionProps<Ctx>,\n|};\n\nexport type BuilderRootValue = {|\n\tnote: string,\n\tver: number,\n\tid: string,\n\tbody: BuilderValue,\n\topts?: {\n\t\t[string]: mixed,\n\t\t// Some typed (reserved) values in order to simplify type checking\n\t\tname?: string,\n\t},\n|};\n\nexport type BuilderValue = {\n\ttype: string,\n\t[string]: any,\n};\n\ntype BuilderCase = {\n\ttext: string,\n\tfields: Array<BuilderField | string>,\n};\n\ntype BuilderField = BuilderSelectField | BuilderMultiField | BuilderDurationField | BuilderChecksetField | BuilderNumberField | BuilderCheckboxField | BuilderGenericInputField;\n\ntype PredefinedSelectChoice = 'COMPARISON';\n\ntype BuilderSelectField = {|\n\ttype: 'select',\n\toptions: Array<string | [string, string]> | PredefinedSelectChoice,\n\tid: string,\n|};\n\ntype BuilderMultiField = {|\n\ttype: 'multi',\n\tinclude: 'all',\n\tid: string,\n|};\n\ntype BuilderDurationField = {|\n\ttype: 'duration',\n\tid: string,\n|};\n\ntype BuilderChecksetField = {|\n\ttype: 'checkset',\n\titems: string[],\n\tid: string,\n|};\n\ntype BuilderNumberField = {|\n\ttype: 'number',\n\tid: string,\n|};\n\ntype BuilderCheckboxField = {|\n\ttype: 'check',\n\tid: string,\n\tlabel: string,\n|};\n\ntype BuilderGenericInputField = {|\n\ttype: string,\n\tid: string,\n|};\n","/* @flow */\n\nimport { Storage } from '../../environment';\nimport { getModuleId } from '../module';\nimport type { OpaqueModuleId } from '../module';\n\n// Don't batch in Firefox, as that may make the storage very slow on init\nexport const storage = Storage.wrapPrefix('RESoptions.', (): { [string]: any } => ({}), undefined, process.env.BUILD_TARGET !== 'firefox');\n\nexport const loadRaw = (moduleId: string) => storage.get(moduleId);\n\nexport async function get(opaqueId: OpaqueModuleId, optionKey: string) {\n\tconst options = await storage.get(getModuleId(opaqueId));\n\treturn options && options[optionKey];\n}\n\nexport async function getValue(opaqueId: OpaqueModuleId, optionKey: string) {\n\tconst option = await get(getModuleId(opaqueId), optionKey);\n\treturn option && option.value;\n}\n\nexport function set(opaqueId: OpaqueModuleId, optionKey: string, value: mixed) {\n\tif ((/_[\\d]+$/).test(optionKey)) {\n\t\toptionKey = optionKey.replace(/_[\\d]+$/, '');\n\t}\n\n\treturn storage.patch(getModuleId(opaqueId), { [optionKey]: { value } });\n}\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","/* @flow */\n\nimport { isEqual } from 'lodash-es';\nimport { Storage } from '../../environment';\nimport * as Options from '../options/storage';\n\nexport async function updateOption(moduleID: string, optionName: string, formerDefaultValue: mixed, valueOrFunction: mixed) {\n\ttry {\n\t\tconst option = await Options.get(moduleID, optionName);\n\t\t// If no value for this option is stored, it will always use the current default value\n\t\t// and so it doesn't need to be updated.\n\t\tif (!option) return;\n\n\t\t// Only update this option to the new default value if its current value\n\t\t// hasn't been changed from the former default value.\n\t\tif (!optionMatchesFormerDefaultValue(option, formerDefaultValue)) return;\n\n\t\tconst newValue = updateValue(option.value, valueOrFunction);\n\n\t\tif (typeof newValue !== 'undefined') {\n\t\t\tawait Options.set(moduleID, optionName, newValue);\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(`Couldn't migrate ${moduleID}::${optionName} from`, formerDefaultValue, 'to/via', valueOrFunction, e);\n\t}\n}\n\nexport async function forceUpdateOption(moduleID: string, optionName: string, valueOrFunction: mixed) {\n\t// ☢ ☠ ☣  DANGER, WILL ROBINSON, DANGER ☠ ☣ ☢\n\t// Make sure valueOrFunction doesn't destroy user settings!\n\ttry {\n\t\tconst option = await Options.get(moduleID, optionName);\n\t\t// If no value for this option is stored, it will always use the current default value\n\t\t// and so it doesn't need to be updated.\n\t\tif (!option) return;\n\n\t\tconst newValue = updateValue(option.value, valueOrFunction);\n\n\t\tif (typeof newValue !== 'undefined') {\n\t\t\tawait Options.set(moduleID, optionName, newValue);\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(`Couldn't migrate ${moduleID}::${optionName} to`, valueOrFunction, e);\n\t}\n}\n\nexport async function moveOption(oldModuleID: string, oldOptionName: string, newModuleID: string, newOptionName: string, valueOrFunction?: mixed) {\n\ttry {\n\t\tconst option = await Options.get(oldModuleID, oldOptionName);\n\t\t// If no value for this option is stored, it had been using the old default value\n\t\t// and so we do not need to change the new option, since it will also be using the default value.\n\t\tif (!option) return;\n\n\t\tconst newValue = updateValue(option.value, valueOrFunction);\n\n\t\tif (typeof newValue !== 'undefined') {\n\t\t\tawait Options.set(newModuleID, newOptionName, newValue);\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(`Couldn't migrate ${oldModuleID}::${oldOptionName} to ${newModuleID}::${newOptionName} via`, valueOrFunction, e);\n\t}\n}\n\nexport async function moveStorageToOption(oldKey: string, newModuleID: string, newOptionName: string, valueOrFunction?: mixed) {\n\tconst oldValue = await Storage.get(oldKey);\n\n\tif (oldValue === null) {\n\t\treturn;\n\t}\n\n\tconst newValue = updateValue(oldValue, valueOrFunction);\n\n\ttry {\n\t\tif (typeof newValue !== 'undefined') {\n\t\t\tawait Options.set(newModuleID, newOptionName, newValue);\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(`Couldn't migrate storage ${oldKey} to ${newModuleID}::${newOptionName} via`, valueOrFunction, e);\n\t}\n}\n\n// This function compares a given option value to its \"former default\" -- the default\n// before an attempted migration. Options aren't always a string, so equivalency won't\n// work. Note that \"option\" needs to be the actual option object, NOT option.value.\nfunction optionMatchesFormerDefaultValue(option, formerDefaultValue) {\n\tif (!option) {\n\t\toption = {\n\t\t\ttype: 'legacy',\n\t\t\tvalue: undefined,\n\t\t};\n\t}\n\tconst oldValue = option.value;\n\n\t// keyCodes once customized also save metaKey in a 5th index, but we used\n\t// to not store the metakey, so they have a length of 4 by default. In order\n\t// to do a proper array comparison, we need the lengths to match, so if a\n\t// 5th element is not present, push false into the array.\n\tif (oldValue && (option.type === 'keycode') && (option.value.length === 4)) {\n\t\toldValue.push(false);\n\t}\n\n\t// Check if the oldValue differs from the former default value. If it doesn't,\n\t// then the user set something custom and we should honor that.\n\treturn isEqual(formerDefaultValue, oldValue);\n}\n\nfunction updateValue(oldValue, valueOrFunction) {\n\tif (typeof valueOrFunction === 'function') {\n\t\treturn valueOrFunction(oldValue);\n\t} else if (typeof valueOrFunction !== 'undefined') {\n\t\treturn valueOrFunction;\n\t} else {\n\t\treturn oldValue;\n\t}\n}\n","/* @flow */\n\nimport { takeRightWhile, isObject, mapKeys, uniqBy } from 'lodash-es';\nimport { Storage } from '../../environment';\nimport { forEachSeq } from '../../utils/array';\nimport { execRegexes } from '../../utils/location';\nimport * as Modules from '../modules/storage';\nimport * as Options from '../options/storage';\nimport * as Migrators from './migrators';\n\nconst migrations = [\n\t{\n\t\tversionNumber: 'legacyMigrators',\n\t\tasync go() {\n\t\t\t// userbarHider.beforeLoad()\n\t\t\tawait Migrators.moveStorageToOption('RESmodules.styleTweaks.userbarState', 'userbarHider', 'userbarState');\n\n\t\t\t// commentTools.migrateData()\n\t\t\tconst macroVersion = await Storage.get('RESmodules.commentTools.macroDataVersion');\n\t\t\tif (macroVersion === null || macroVersion === 0) {\n\t\t\t\t// In this case it is unmigrated or uncreated\n\t\t\t\tconst previewOptions = await Storage.get('RESoptions.commentPreview');\n\t\t\t\tif (previewOptions !== null) {\n\t\t\t\t\tif (typeof previewOptions.commentingAs !== 'undefined') {\n\t\t\t\t\t\tawait Migrators.forceUpdateOption('commentTools', 'commentingAs', previewOptions.commentingAs.value);\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof previewOptions.keyboardShortcuts !== 'undefined') {\n\t\t\t\t\t\tawait Migrators.forceUpdateOption('commentTools', 'keyboardShortcuts', previewOptions.keyboardShortcuts.value);\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof previewOptions.subredditAutocomplete !== 'undefined') {\n\t\t\t\t\t\tawait Migrators.forceUpdateOption('commentTools', 'subredditAutocomplete', previewOptions.subredditAutocomplete.value);\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof previewOptions.macros !== 'undefined') {\n\t\t\t\t\t\tpreviewOptions.macros.value.forEach(macro => {\n\t\t\t\t\t\t\twhile (macro.length < 4) {\n\t\t\t\t\t\t\t\tmacro.push('');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait Migrators.forceUpdateOption('commentTools', 'macros', previewOptions.macros.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (macroVersion === 1) {\n\t\t\t\tawait Migrators.forceUpdateOption('commentTools', 'macros', macros =>\n\t\t\t\t\t(macros || []).map(macro => {\n\t\t\t\t\t\twhile (macro.length < 4) {\n\t\t\t\t\t\t\tmacro.push('');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn macro;\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// saveComments.loadSavedComments()\n\t\t\tconst storedComments = await Storage.get('RESmodules.saveComments.savedComments');\n\t\t\tif (Array.isArray(storedComments)) {\n\t\t\t\tconst newFormat = {};\n\t\t\t\tfor (const storedComment of storedComments) {\n\t\t\t\t\tconst urlSplit = storedComment.href.split('/');\n\t\t\t\t\tconst thisID = urlSplit[urlSplit.length - 1];\n\t\t\t\t\tnewFormat[thisID] = storedComment;\n\t\t\t\t}\n\t\t\t\tStorage.set('RESmodules.saveComments.savedComments', newFormat);\n\t\t\t}\n\t\t},\n\t}, {\n\t\tversionNumber: '4.5.0.0',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('betteReddit', 'searchSubredditByDefault', 'searchHelper', 'searchSubredditByDefault');\n\n\t\t\tawait Migrators.moveOption('styleTweaks', 'lightSwitch', 'nightMode', 'nightSwitch');\n\t\t\tawait Migrators.moveOption('styleTweaks', 'lightOrDark', 'nightMode', 'nightModeOn', value => (value === 'dark'));\n\t\t\tawait Migrators.moveOption('styleTweaks', 'useSubredditStyleInDarkMode', 'nightMode', 'useSubredditStyles');\n\n\t\t\tawait Migrators.moveStorageToOption('RESmodules.styleTweaks.nightModeWhitelist', 'nightMode', 'subredditStylesWhitelist', value => {\n\t\t\t\ttry {\n\t\t\t\t\treturn JSON.parse(value || '').join(',');\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tconst userTags = await Storage.get('RESmodules.userTagger.tags') || {};\n\t\t\t\tupdateTagStorageCaseInsensitive(userTags);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('Could not migrate user tags, please post this error to /r/RESissues', e);\n\t\t\t}\n\n\t\t\t// check for /r/ hack from when reddit changed its format and broke RES filters\n\t\t\tawait Migrators.forceUpdateOption('filteReddit', 'subreddits', subreddits =>\n\t\t\t\t(subreddits || []).map(subreddit => {\n\t\t\t\t\tconst check = subreddit[0];\n\t\t\t\t\tif (check.startsWith('/r/')) {\n\t\t\t\t\t\tsubreddit[0] = check.substr(3);\n\t\t\t\t\t}\n\t\t\t\t\treturn subreddit;\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tfunction updateTagStorageCaseInsensitive(tags) {\n\t\t\t\tconst usernames = Object.keys(tags);\n\n\t\t\t\tfor (const username of usernames) {\n\t\t\t\t\tconst lower = username.toLowerCase();\n\t\t\t\t\tif (lower === username) continue;\n\n\t\t\t\t\tconst destination = tags[lower] = tags[lower] || {};\n\t\t\t\t\tconst source = tags[username];\n\n\t\t\t\t\tif (source.votes) {\n\t\t\t\t\t\tdestination.votes = (parseInt(destination.votes, 10) || 0) + (parseInt(source.votes, 10) || 0);\n\t\t\t\t\t}\n\t\t\t\t\tif (source.color && (!destination.color || destination.color === 'none')) {\n\t\t\t\t\t\tdestination.color = source.color;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (source.tag) {\n\t\t\t\t\t\tdestination.tag = destination.tag ? `${destination.tag} | ` : '';\n\t\t\t\t\t\tdestination.tag += source.tag;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (source.ignore) {\n\t\t\t\t\t\tdestination.ignore = source.ignore;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (source.link) {\n\t\t\t\t\t\tif (destination.link) {\n\t\t\t\t\t\t\tdestination.tag = destination.tag ? `${destination.tag} | ` : '';\n\t\t\t\t\t\t\tdestination.tag += source.link;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdestination.link = source.link;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete tags[username]; // safe because of \"lower === username.toLowerCase\" guard above\n\t\t\t\t}\n\n\t\t\t\tStorage.set('RESmodules.userTagger.tags', tags);\n\t\t\t\tStorage.set('RESmodules.userTagger.casefix', true);\n\t\t\t}\n\t\t},\n\t}, {\n\t\tversionNumber: '4.5.0.2',\n\t\tasync go() {\n\t\t\tawait Migrators.updateOption('keyboardNav', 'imageMoveUp', [38, false, false, true, false], [38, false, true, false, false]);\n\t\t\tawait Migrators.updateOption('keyboardNav', 'imageMoveDown', [40, false, false, true, false], [40, false, true, false, false]);\n\t\t\tawait Migrators.updateOption('keyboardNav', 'imageMoveLeft', [37, false, false, true, false], [37, false, true, false, false]);\n\t\t\tawait Migrators.updateOption('keyboardNav', 'imageMoveRight', [39, false, false, true, false], [39, false, true, false, false]);\n\t\t},\n\t}, {\n\t\tversionNumber: '4.5.0.3',\n\t\tgo() {\n\t\t\t// Token migration for the benefit of developers or people running bleeding-edge\n\t\t},\n\t}, {\n\t\tversionNumber: '4.5.1',\n\t\tasync go() {\n\t\t\tawait Migrators.forceUpdateOption('voteEnhancements', 'colorCommentScore', value => {\n\t\t\t\t// v4.5.0.2 (fresh installs) onwards have the correct default value\n\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\n\t\t\t\t// 4.5.0.1 migration\n\t\t\t\treturn value ? 'automatic' : 'none';\n\t\t\t});\n\n\t\t\tconst notificationsOptions = await Options.loadRaw('notifications');\n\t\t\tconst sticky = notificationsOptions && notificationsOptions.sticky.value;\n\t\t\tconst keyNavOptions = await Options.loadRaw('keyboardNav');\n\t\t\tconst fg = keyNavOptions && keyNavOptions.focusFGColorNight.value;\n\t\t\tconst bg = keyNavOptions && keyNavOptions.focusBGColorNight.value;\n\t\t\tconst test = document.createElement('div');\n\n\t\t\t// perNotification may have only been present in dev releases, but check for it and update as it's\n\t\t\t// no longer a valid option.\n\t\t\tif (sticky === 'perNotification') {\n\t\t\t\tawait Migrators.forceUpdateOption('notifications', 'sticky', 'notificationType');\n\t\t\t}\n\n\t\t\t// If night mode focus foreground color === night mode focus background color,\n\t\t\t// force them back to new defaults.\n\t\t\t//\n\t\t\t// Since it may be rgba or hex and we're not sure, let's do something clever to\n\t\t\t// make sure we can compare the colors.\n\t\t\ttest.style.color = fg || '';\n\t\t\ttest.style.backgroundColor = bg || '';\n\t\t\tconst fgCalculated = test.style.color;\n\t\t\tconst bgCalculated = test.style.backgroundColor;\n\t\t\tif ((fg === bg) || (fgCalculated === bgCalculated)) {\n\t\t\t\tawait Migrators.forceUpdateOption('keyboardNav', 'focusBGColorNight', '#373737');\n\t\t\t\tawait Migrators.forceUpdateOption('keyboardNav', 'focusFGColorNight', '#DDDDDD');\n\t\t\t}\n\n\t\t\t// Show all options for all users\n\t\t\tawait Migrators.moveOption('settingsNavigation', 'showAdvancedOptions', 'settingsNavigation', 'showAllOptions', true);\n\t\t\tawait Migrators.moveOption('settingsNavigation', 'showAdvancedOptionsAlert', 'settingsNavigation', 'showAllOptionsAlert');\n\t\t},\n\t}, {\n\t\tversionNumber: '4.5.3',\n\t\tasync go() {\n\t\t\tawait Migrators.updateOption('searchHelper', 'addSubmitButton', true, false);\n\t\t\tawait Migrators.moveOption('keyboardNav', 'save', 'keyboardNav', 'savePost');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'save', 'keyboardNav', 'saveRES');\n\t\t},\n\t}, {\n\t\tversionNumber: '4.5.4',\n\t\tasync go() {\n\t\t\tawait Migrators.forceUpdateOption('filteReddit', 'keywords', values => {\n\t\t\t\tfor (const value of values || []) {\n\t\t\t\t\tif (value && value[3] === 'undefined') {\n\t\t\t\t\t\tvalue[3] = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t});\n\t\t\tawait Migrators.updateOption('quickMessage', 'quickModeratorMessage', false, true);\n\t\t},\n\t}, {\n\t\tversionNumber: '4.5.5',\n\t\tasync go() {\n\t\t\tconst keyNavOptions = await Options.loadRaw('keyboardNav');\n\t\t\tif (keyNavOptions && keyNavOptions.scrollTop && keyNavOptions.scrollTop.value) {\n\t\t\t\tawait Migrators.updateOption('keyboardNav', 'scrollStyle', 'directional', 'top');\n\t\t\t}\n\t\t\tawait Migrators.moveOption('betteReddit', 'uncheckSendRepliesToInbox', 'submitHelper', 'uncheckSendRepliesToInbox');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'openBigEditor', 'commentPreview', 'openBigEditor');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'autoSelectOnScroll', 'selectedEntry', 'autoSelectOnScroll');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'clickFocus', 'selectedEntry', 'selectOnClick');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'addFocusBGColor', 'selectedEntry', 'addFocusBGColor');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'focusBGColor', 'selectedEntry', 'focusBGColor');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'focusBGColorNight', 'selectedEntry', 'focusBGColorNight');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'focusFGColorNight', 'selectedEntry', 'focusFGColorNight');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'addFocusBorder', 'selectedEntry', 'addFocusBorder');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'focusBorder', 'selectedEntry', 'focusBorder');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'focusBorderNight', 'selectedEntry', 'focusBorderNight');\n\n\t\t\tfunction updateFadeSpeed(value) {\n\t\t\t\tif (value === undefined || value === null || isNaN(value) || value < 0 || value > 1) {\n\t\t\t\t\treturn '0.7';\n\t\t\t\t} else {\n\t\t\t\t\treturn (1 - value).toFixed(2);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait Migrators.forceUpdateOption('hover', 'fadeSpeed', updateFadeSpeed);\n\t\t\tawait Migrators.forceUpdateOption('showParent', 'fadeSpeed', updateFadeSpeed);\n\t\t\tawait Migrators.forceUpdateOption('subredditInfo', 'fadeSpeed', updateFadeSpeed);\n\t\t\tawait Migrators.forceUpdateOption('userTagger', 'fadeSpeed', updateFadeSpeed);\n\n\t\t\tawait Migrators.forceUpdateOption('commentTools', 'macros', value =>\n\t\t\t\t[\n\t\t\t\t\t['reddiquette', '[reddiquette](/wiki/reddiquette) '],\n\t\t\t\t\t['Promote RES', '[Reddit Enhancement Suite](https://redditenhancementsuite.com \"also /r/Enhancement\") '],\n\t\t\t\t\t['Current timestamp', '{{now}} '],\n\t\t\t\t\t...(value || []),\n\t\t\t\t],\n\t\t\t);\n\n\t\t\tawait Migrators.moveOption('betteReddit', 'showUnreadCount', 'orangered', 'showUnreadCount');\n\t\t\tawait Migrators.moveOption('betteReddit', 'retroUnreadCount', 'orangered', 'retroUnreadCount');\n\t\t\tawait Migrators.moveOption('betteReddit', 'showUnreadCountInFavicon', 'orangered', 'showUnreadCountInFavicon');\n\t\t\tawait Migrators.moveOption('betteReddit', 'unreadLinksToInbox', 'orangered', 'unreadLinksToInbox');\n\t\t\tawait Migrators.moveOption('betteReddit', 'hideModMail', 'orangered', 'hideModMail');\n\n\t\t\tawait Migrators.moveOption('quickMessage', 'quickModeratorMessage', 'quickMessage', 'handleSideLinks');\n\n\t\t\tawait Migrators.updateOption('showKarma', 'useCommas', false, true);\n\n\t\t\tawait Migrators.moveOption('keyboardNav', 'moveDown', 'keyboardNav', 'moveDownComment');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'moveUp', 'keyboardNav', 'moveUpComment');\n\n\t\t\tawait Migrators.moveOption('userTagger', 'hoverInfo', 'userInfo', 'hoverInfo');\n\t\t\tawait Migrators.moveOption('userTagger', 'useQuickMessage', 'userInfo', 'useQuickMessage');\n\t\t\tawait Migrators.moveOption('userTagger', 'hoverDelay', 'userInfo', 'hoverDelay');\n\t\t\tawait Migrators.moveOption('userTagger', 'fadeDelay', 'userInfo', 'fadeDelay');\n\t\t\tawait Migrators.moveOption('userTagger', 'fadeSpeed', 'userInfo', 'fadeSpeed');\n\t\t\tawait Migrators.moveOption('userTagger', 'gildComments', 'userInfo', 'gildComments');\n\t\t\tawait Migrators.moveOption('userTagger', 'highlightButton', 'userInfo', 'highlightButton');\n\t\t\tawait Migrators.moveOption('userTagger', 'highlightColor', 'userInfo', 'highlightColor');\n\t\t\tawait Migrators.moveOption('userTagger', 'highlightColorHover', 'userInfo', 'highlightColorHover');\n\t\t\tawait Migrators.moveOption('userTagger', 'USDateFormat', 'userInfo', 'USDateFormat');\n\n\t\t\tawait Migrators.forceUpdateOption('notifications', 'notificationTypes', rows =>\n\t\t\t\tuniqBy(rows, ([modId, notificationId]) => `${modId}###${notificationId}`),\n\t\t\t);\n\t\t},\n\t}, {\n\t\tversionNumber: '4.7.0-scrubCaches',\n\t\tasync go() {\n\t\t\t// Trailing '.' on some keys is important\n\t\t\tconst cacheKeyParts = [\n\t\t\t\t'RESmodules.neverEndingReddit.lastPage',\n\t\t\t\t'RESmodules.neverEndingReddit.lastVisibleIndex',\n\t\t\t\t'RESUtils.cache',\n\t\t\t\t'RESUtils.moderatedSubCache',\n\t\t\t\t'RESUtils.sendFromCache',\n\t\t\t\t'RESUtils.userInfoCache',\n\t\t\t\t'RESmodules.keyboardNavLastIndex',\n\t\t\t\t'RESmodules.selectedThing.lastSelectedCache',\n\t\t\t\t'TBCache.', // may have been copied from foreground\n\t\t\t\t'Toolbox.',\n\t\t\t\t'RESmodules.betteReddit.msgCount.lastCheck',\n\t\t\t\t'RESmodules.subredditManager.subreddits.',\n\t\t\t\t'RESmodules.subredditManager.mySubredditList',\n\t\t\t];\n\n\t\t\tawait (await Storage.keys())\n\t\t\t\t.filter(key => cacheKeyParts.some(part => key.includes(part)))\n\t\t\t\t.map(key => Storage.delete(key));\n\t\t},\n\t}, {\n\t\tversionNumber: '4.7.0-voteWeight',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('userTagger', 'colorUser', 'userTagger', 'trackVoteWeight');\n\t\t},\n\t}, {\n\t\tversionNumber: '4.7.0-commentStyle',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('styleTweaks', 'commentBoxes', 'commentStyle', 'commentBoxes');\n\t\t\tawait Migrators.moveOption('styleTweaks', 'commentRounded', 'commentStyle', 'commentRounded');\n\t\t\tawait Migrators.moveOption('styleTweaks', 'commentHoverBorder', 'commentStyle', 'commentHoverBorder');\n\t\t\tawait Migrators.moveOption('styleTweaks', 'commentIndent', 'commentStyle', 'commentIndent');\n\t\t\tawait Migrators.moveOption('styleTweaks', 'continuity', 'commentStyle', 'continuity');\n\t\t},\n\t}, {\n\t\tversionNumber: '4.7.0-keyboardNav-scrollStyle-better-name',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('keyboardNav', 'scrollStyle', 'keyboardNav', 'linearScrollStyle');\n\t\t},\n\t}, {\n\t\tversionNumber: '4.7.0-hideLEC',\n\t\tasync go() {\n\t\t\tawait Migrators.updateOption('singleClick', 'hideLEC', false, true);\n\t\t},\n\t}, {\n\t\tversionNumber: '4.7.0-showImages-siteModuleIDs',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('showImages', 'display uploadly', 'showImages', 'display_uploadly');\n\t\t\tawait Migrators.moveOption('showImages', 'display eroshare', 'showImages', 'display_eroshare');\n\t\t\tawait Migrators.moveOption('showImages', 'display iLoopit - gif maker', 'showImages', 'display_iloopit');\n\t\t\tawait Migrators.moveOption('showImages', 'display Coub', 'showImages', 'display_coub');\n\t\t\tawait Migrators.moveOption('showImages', 'display LiveCap', 'showImages', 'display_livecap');\n\t\t\tawait Migrators.moveOption('showImages', 'display twitter', 'showImages', 'display_twitter');\n\t\t\tawait Migrators.moveOption('showImages', 'display futurism', 'showImages', 'display_futurism');\n\t\t\tawait Migrators.moveOption('showImages', 'display gfycat', 'showImages', 'display_gfycat');\n\t\t\tawait Migrators.moveOption('showImages', 'display gifyoutube', 'showImages', 'display_gifs');\n\t\t\tawait Migrators.moveOption('showImages', 'display vidble', 'showImages', 'display_vidble');\n\t\t\tawait Migrators.moveOption('showImages', 'display fitbamob', 'showImages', 'display_fitbamob');\n\t\t\tawait Migrators.moveOption('showImages', 'display giflike', 'showImages', 'display_giflike');\n\t\t\tawait Migrators.moveOption('showImages', 'display CtrlV.in', 'showImages', 'display_ctrlv');\n\t\t\tawait Migrators.moveOption('showImages', 'display snag.gy', 'showImages', 'display_snag');\n\t\t\tawait Migrators.moveOption('showImages', 'display picshd', 'showImages', 'display_picshd');\n\t\t\tawait Migrators.moveOption('showImages', 'display min.us', 'showImages', 'display_minus');\n\t\t\tawait Migrators.moveOption('showImages', 'display fiveHundredPx', 'showImages', 'display_fiveHundredPx');\n\t\t\tawait Migrators.moveOption('showImages', 'display flickr', 'showImages', 'display_flickr');\n\t\t\tawait Migrators.moveOption('showImages', 'display steam', 'showImages', 'display_steam');\n\t\t\tawait Migrators.moveOption('showImages', 'display deviantART', 'showImages', 'display_deviantart');\n\t\t\tawait Migrators.moveOption('showImages', 'display tumblr', 'showImages', 'display_tumblr');\n\t\t\tawait Migrators.moveOption('showImages', 'display memecrunch', 'showImages', 'display_memecrunch');\n\t\t\tawait Migrators.moveOption('showImages', 'display imgflip', 'showImages', 'display_imgflip');\n\t\t\tawait Migrators.moveOption('showImages', 'display livememe', 'showImages', 'display_livememe');\n\t\t\tawait Migrators.moveOption('showImages', 'display makeameme', 'showImages', 'display_makeameme');\n\t\t\tawait Migrators.moveOption('showImages', 'display memegen', 'showImages', 'display_memegen');\n\t\t\tawait Migrators.moveOption('showImages', 'display redditbooru', 'showImages', 'display_redditbooru');\n\t\t\tawait Migrators.moveOption('showImages', 'display youtube', 'showImages', 'display_youtube');\n\t\t\tawait Migrators.moveOption('showImages', 'display vimeo', 'showImages', 'display_vimeo');\n\t\t\tawait Migrators.moveOption('showImages', 'display soundcloud', 'showImages', 'display_soundcloud');\n\t\t\tawait Migrators.moveOption('showImages', 'display clyp', 'showImages', 'display_clyp');\n\t\t\tawait Migrators.moveOption('showImages', 'display memedad', 'showImages', 'display_memedad');\n\t\t\tawait Migrators.moveOption('showImages', 'display ridewithgps', 'showImages', 'display_ridewithgps');\n\t\t\tawait Migrators.moveOption('showImages', 'display photobucket', 'showImages', 'display_photobucket');\n\t\t\tawait Migrators.moveOption('showImages', 'display giphy', 'showImages', 'display_giphy');\n\t\t\tawait Migrators.moveOption('showImages', 'display streamable', 'showImages', 'display_streamable');\n\t\t\tawait Migrators.moveOption('showImages', 'display qwipit', 'showImages', 'display_qwipit');\n\t\t\tawait Migrators.moveOption('showImages', 'display radd.it', 'showImages', 'display_raddit');\n\t\t\tawait Migrators.moveOption('showImages', 'display pastebin', 'showImages', 'display_pastebin');\n\t\t\tawait Migrators.moveOption('showImages', 'display github gists', 'showImages', 'display_github');\n\t\t\tawait Migrators.moveOption('showImages', 'display Microsoft OneDrive', 'showImages', 'display_onedrive');\n\t\t\tawait Migrators.moveOption('showImages', 'display Oddshot', 'showImages', 'display_oddshot');\n\t\t\tawait Migrators.moveOption('showImages', 'display Miiverse', 'showImages', 'display_miiverse');\n\t\t\tawait Migrators.moveOption('showImages', 'display swirl', 'showImages', 'display_swirl');\n\t\t},\n\t}, {\n\t\tversionNumber: '4.7.1-changeDefaultImageMaxSizeRetry',\n\t\tasync go() {\n\t\t\tawait Migrators.updateOption('showImages', 'maxWidth', 640, '100%');\n\t\t\tawait Migrators.updateOption('showImages', 'maxHeight', 480, '80%');\n\t\t\tawait Migrators.updateOption('showImages', 'maxWidth', '640', '100%');\n\t\t\tawait Migrators.updateOption('showImages', 'maxHeight', '480', '80%');\n\t\t},\n\t}, {\n\t\tversionNumber: '4.7.4-galleryFilmstripGranularity',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('showImages', 'dontLoadAlbumsBiggerThan', 'showImages', 'filmstripLoadIncrement');\n\t\t},\n\t}, {\n\t\tversionNumber: '4.7.8-ner-hide-dupes',\n\t\tasync go() {\n\t\t\tawait Migrators.updateOption('neverEndingReddit', 'hideDupes', 'fade', 'hide');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.0.1-disable-redditmedia-lookup',\n\t\tasync go() {\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'expandoCommentRedirects', 'nothing');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.0.2-reenable-redditmedia-expando',\n\t\tasync go() {\n\t\t\tawait Migrators.updateOption('showImages', 'expandoCommentRedirects', 'nothing', 'expando');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.1.1-remove-multiredditnavbar-sectionlinks-workaround',\n\t\tasync go() {\n\t\t\tawait Migrators.forceUpdateOption('multiredditNavbar', 'sectionLinks', sectionLinks => {\n\t\t\t\tif (!sectionLinks) return;\n\t\t\t\tfor (const row of sectionLinks) {\n\t\t\t\t\trow[1] = row[1].replace(/^\\.\\.\\//, './');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t}, {\n\t\tversionNumber: '5.3.1-enable-hardIgnore',\n\t\tasync go() {\n\t\t\tawait Migrators.forceUpdateOption('userTagger', 'hardIgnore', true);\n\t\t},\n\t}, {\n\t\tversionNumber: '5.3.5-remove-updates-css',\n\t\tasync go() {\n\t\t\tawait Migrators.forceUpdateOption('stylesheet', 'loadStylesheets', rows =>\n\t\t\t\trows && rows.filter(row => row[0] !== 'https://cdn.redditenhancementsuite.com/updates.css'),\n\t\t\t);\n\n\t\t\tconst hideFloatingPauseButton = 'res-neverEndingReddit-hideFloatingPauseButton';\n\t\t\tawait Migrators.moveOption('stylesheet', 'bodyClasses', 'neverEndingReddit', 'showPauseButton', rows =>\n\t\t\t\t!!rows && rows.every(row => row[0] !== hideFloatingPauseButton),\n\t\t\t);\n\t\t\tawait Migrators.forceUpdateOption('stylesheet', 'bodyClasses', rows =>\n\t\t\t\trows && rows.filter(row => row[0] !== hideFloatingPauseButton),\n\t\t\t);\n\n\t\t\tlet shouldHideTagline = false;\n\t\t\tawait Migrators.forceUpdateOption('stylesheet', 'bodyClasses', rows => {\n\t\t\t\tif (!rows) return [];\n\t\t\t\tconst filteredRows = rows.filter(row => row[0] !== 'res-hide-tagline-frontpage');\n\t\t\t\tshouldHideTagline = filteredRows.length < rows.length;\n\t\t\t\treturn filteredRows;\n\t\t\t});\n\t\t\tif (shouldHideTagline) {\n\t\t\t\tMigrators.forceUpdateOption('stylesheet', 'snippets', rows => [\n\t\t\t\t\t...(rows || []),\n\t\t\t\t\t[\n\t\t\t\t\t\t'/* migrated from res-hide-tagline-frontpage */ .front-page .tagline { display: none; }',\n\t\t\t\t\t\t'everywhere',\n\t\t\t\t\t],\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t}, {\n\t\tversionNumber: '5.3.6-enable-hideUnvotable',\n\t\tasync go() {\n\t\t\tawait Migrators.forceUpdateOption('styleTweaks', 'hideUnvotable', true);\n\t\t},\n\t}, {\n\t\tversionNumber: '5.3.7-automaticNightMode-to-enum',\n\t\tasync go() {\n\t\t\tawait Migrators.forceUpdateOption('nightMode', 'automaticNightMode', value => (value === true) ? 'user' : 'none');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.5.0-commentLinks-rename',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('keyboardNav', 'commentsLinkNumbers', 'keyboardNav', 'linkNumbers');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'commentsLinkNumberPosition', 'keyboardNav', 'linkNumberPosition');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'commentsLinkToggleExpando', 'keyboardNav', 'linkToggleExpando');\n\t\t\tawait Migrators.moveOption('keyboardNav', 'commentsLinkNewTab', 'keyboardNav', 'linkNewTab');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.5.1-maxSize-to-string',\n\t\tasync go() {\n\t\t\tconst toString = x => (x ? String(x) : '');\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'maxWidth', toString);\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'maxHeight', toString);\n\t\t},\n\t}, {\n\t\tversionNumber: '5.5.3-disable-userbarHider',\n\t\tasync go() {\n\t\t\tconst notificationsOptions = await Options.loadRaw('notifications');\n\t\t\tif (!notificationsOptions ||\n\t\t\t\t!notificationsOptions.notificationTypes ||\n\t\t\t\t!notificationsOptions.notificationTypes.value ||\n\t\t\t\t!notificationsOptions.notificationTypes.value.some(([modId, notificationId]) => modId === 'userbarHider' && notificationId === 'userbarState')) {\n\t\t\t\t// user has never toggled userbarHider, disable it\n\t\t\t\tModules.setEnabled('userbarHider', false);\n\t\t\t}\n\t\t},\n\t}, {\n\t\tversionNumber: '5.5.11-update-notifications',\n\t\tasync go() {\n\t\t\tawait Migrators.updateOption('onboarding', 'updateNotification', 'releaseNotes', 'notification');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.6.1-shard-tags',\n\t\tasync go() {\n\t\t\tconst tags = await Storage.get('RESmodules.userTagger.tags') || {};\n\t\t\tconst remappedTags = mapKeys(tags, (v, k) => `tag.${k.toLowerCase()}`);\n\t\t\tawait Storage.setMultiple(remappedTags);\n\t\t},\n\t}, {\n\t\tversionNumber: '5.6.2-remove-old-tags',\n\t\tasync go() {\n\t\t\tawait Storage.delete('RESmodules.userTagger.tags');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.7.0-keyboardNav-showImages-decoupling',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('keyboardNav', 'mediaBrowseMode', 'showImages', 'mediaBrowse');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.7.1-shard-newCommentCount',\n\t\tasync go() {\n\t\t\tconst entries = await Storage.get('RESmodules.newCommentCount.counts') || {};\n\t\t\tconst remappedEntries = mapKeys(entries, (v, k) => `newCommentCount.${k}`);\n\t\t\tawait Storage.setMultiple(remappedEntries);\n\t\t\tawait Storage.delete('RESmodules.newCommentCount.counts');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.7.3-commandLine-menu-opening',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('commandLine', 'launchFromMenuButton', 'RESMenu', 'gearIconClickAction', launchFromMenu =>\n\t\t\t\tlaunchFromMenu ? 'openCommandLine' : 'toggleMenuNoHover',\n\t\t\t);\n\t\t},\n\t}, {\n\t\tversionNumber: '5.7.4-shard-commentHidePersistor',\n\t\tasync go() {\n\t\t\tconst { hiddenThings } = await Storage.get('RESmodules.commentHidePersistor.hidePersistor') || {};\n\t\t\tif (!hiddenThings) return;\n\t\t\tconst remappedEntries = Object.entries(hiddenThings).reduce((acc, [k, v]) => {\n\t\t\t\tconst page = (execRegexes.comments(k) || [])[2];\n\t\t\t\tconst collapsedThings = v.reduce((acc, k) => (acc[k] = true) && acc, {});\n\t\t\t\tif (page && v.length) acc[`commentHidePersistor.${page}`] = { updateTime: Date.now(), collapsedThings };\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t\tawait Storage.setMultiple(remappedEntries);\n\t\t\tawait Storage.delete('RESmodules.commentHidePersistor.hidePersistor');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.8.2-unshard-newCommentCount-subscriptions',\n\t\tasync go() {\n\t\t\tconst subscriptions = {};\n\t\t\tfor (const [key, val] of Object.entries(await Storage.getAll())) {\n\t\t\t\tif (!key.startsWith('newCommentCount.')) continue;\n\t\t\t\tif ((val: any).subscriptionDate) subscriptions[key] = val;\n\t\t\t\t// don't bother deleting it; it's still valid for comment count storage\n\t\t\t\t// and it'll eventually be pruned as with any count\n\t\t\t}\n\t\t\tStorage.set('RESmodules.newCommentCount.subscriptions', subscriptions);\n\t\t},\n\t}, {\n\t\tversionNumber: '5.9.1-userTagger-refresh',\n\t\tasync go() {\n\t\t\tlet tags = await Storage.wrapPrefix('tag.', (): any => ({})).getAll();\n\t\t\tfor (const tag of Object.values(tags)) {\n\t\t\t\tif (tag.votes > 0) tag.votesUp = tag.votes;\n\t\t\t\tif (tag.votes < 0) tag.votesDown = -tag.votes;\n\t\t\t\tReflect.deleteProperty(tag, 'votes');\n\t\t\t\tif (tag.tag) tag.text = tag.tag;\n\t\t\t\tReflect.deleteProperty(tag, 'tag');\n\t\t\t\tif (tag.ignore) tag.ignored = tag.ignore;\n\t\t\t\tReflect.deleteProperty(tag, 'ignore');\n\t\t\t}\n\t\t\ttags = mapKeys(tags, (v, k) => `tag.${k}`); // Restore prefix\n\t\t\tawait Storage.setMultiple(tags);\n\t\t},\n\t}, {\n\t\tversionNumber: '5.9.1-selectedEntry',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('selectedEntry', 'addFocusBGColor', 'selectedEntry', 'setColors');\n\t\t\tawait Migrators.moveOption('selectedEntry', 'focusBGColor', 'selectedEntry', 'backgroundColor');\n\t\t\tawait Migrators.moveOption('selectedEntry', 'focusBGColorNight', 'selectedEntry', 'backgroundColorNight');\n\t\t\tawait Migrators.moveOption('selectedEntry', 'focusFGColorNight', 'selectedEntry', 'textColorNight');\n\t\t\tawait Migrators.moveOption('selectedEntry', 'addFocusBorder', 'selectedEntry', 'addOutline');\n\t\t\tawait Migrators.moveOption('selectedEntry', 'focusBorder', 'selectedEntry', 'outlineStyle');\n\t\t\tawait Migrators.moveOption('selectedEntry', 'focusBorderNight', 'selectedEntry', 'outlineStyleNight');\n\n\t\t\tif ((await Storage.get('RES.modulePrefs') || { selectedEntry: true }).selectedEntry === false) {\n\t\t\t\tawait Options.set('selectedEntry', 'setColors', false);\n\t\t\t\tawait Options.set('selectedEntry', 'addLine', true);\n\t\t\t}\n\t\t},\n\t}, {\n\t\tversionNumber: '5.9-no-option-spaces',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('showImages', 'prefer RES albums', 'showImages', 'preferResAlbums');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.9.2-numbers-to-strings',\n\t\tasync go() {\n\t\t\tfunction stringify(x) {\n\t\t\t\tif (typeof x === 'number') return x.toString();\n\t\t\t\treturn x;\n\t\t\t}\n\n\t\t\tawait Migrators.forceUpdateOption('betteReddit', 'hideLinkFadeDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('commentDepth', 'defaultCommentDepth', stringify);\n\t\t\tawait Migrators.forceUpdateOption('commentDepth', 'defaultMinimumComments', stringify);\n\t\t\tawait Migrators.forceUpdateOption('commentStyle', 'commentIndent', stringify);\n\t\t\tawait Migrators.forceUpdateOption('context', 'defaultContext', stringify);\n\t\t\tawait Migrators.forceUpdateOption('dashboard', 'defaultPosts', stringify);\n\t\t\tawait Migrators.forceUpdateOption('dashboard', 'tagsPerPage', stringify);\n\t\t\tawait Migrators.forceUpdateOption('hover', 'openDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('hover', 'fadeDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('hover', 'fadeSpeed', stringify);\n\t\t\tawait Migrators.forceUpdateOption('hover', 'width', stringify);\n\t\t\tawait Migrators.forceUpdateOption('messageMenu', 'hoverDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('messageMenu', 'fadeDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('messageMenu', 'fadeSpeed', stringify);\n\t\t\tawait Migrators.forceUpdateOption('multiredditNavbar', 'hoverDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('multiredditNavbar', 'fadeDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('multiredditNavbar', 'fadeSpeed', stringify);\n\t\t\tawait Migrators.forceUpdateOption('neverEndingReddit', 'pauseAfterEvery', stringify);\n\t\t\tawait Migrators.forceUpdateOption('newCommentCount', 'cleanComments', stringify);\n\t\t\tawait Migrators.forceUpdateOption('newCommentCount', 'subscriptionLength', stringify);\n\t\t\tawait Migrators.forceUpdateOption('nightMode', 'nightModeOverrideHours', stringify);\n\t\t\tawait Migrators.forceUpdateOption('notifications', 'closeDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('notifications', 'fadeOutLength', stringify);\n\t\t\tawait Migrators.forceUpdateOption('profileNavigator', 'hoverDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('profileNavigator', 'fadeDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('profileNavigator', 'fadeSpeed', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'browsePreloadCount', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'galleryPreloadCount', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'bufferScreens', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'selfTextMaxHeight', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'commentMaxHeight', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'filmstripLoadIncrement', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'useSlideshowWhenLargerThan', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showImages', 'maxSimultaneousPlaying', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showParent', 'hoverDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showParent', 'fadeDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('showParent', 'fadeSpeed', stringify);\n\t\t\tawait Migrators.forceUpdateOption('styleTweaks', 'highlightTopLevelSize', stringify);\n\t\t\tawait Migrators.forceUpdateOption('subredditInfo', 'hoverDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('subredditInfo', 'fadeDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('subredditInfo', 'fadeSpeed', stringify);\n\t\t\tawait Migrators.forceUpdateOption('subredditManager', 'shortcutDropdownDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('subredditManager', 'shortcutEditDropdownDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('userInfo', 'hoverDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('userInfo', 'fadeDelay', stringify);\n\t\t\tawait Migrators.forceUpdateOption('userInfo', 'fadeSpeed', stringify);\n\t\t},\n\t}, {\n\t\tversionNumber: '5.9-filteReddit-customFilter',\n\t\tasync go() {\n\t\t\tfunction convertPatt(type, patt, key) {\n\t\t\t\tif (typeof patt !== 'string' || !patt.length || (/^\\/(.*)\\/([gim]+)?$/).test(patt)) return;\n\t\t\t\tif (type === 'postTitle') {\n\t\t\t\t\treturn { [key]: `/${patt}/i` };\n\t\t\t\t} else if (['subreddit', 'domain', 'userFlair', 'linkFlair', 'username'].includes(type)) {\n\t\t\t\t\treturn { [key]: `/^(${patt})\\$/i` };\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst entries = {};\n\t\t\tconst f = await Storage.wrapPrefix('RESmodules.filteReddit.', (): any => ({})).getAll();\n\t\t\tfor (const [k, v] of Object.entries(f)) {\n\t\t\t\tif (typeof v === 'boolean') continue; // `filterlineVisibility` entries\n\t\t\t\tconst visible = f[`filterlineVisibility.${k}`] || false;\n\t\t\t\tconst entry = entries[`filterline.${k}`] = { filters: {}, visible };\n\t\t\t\tfor (const [id, { criterion, state, key }] of Object.entries(v.filters || {})) {\n\t\t\t\t\tconst type = key;\n\t\t\t\t\tentry.filters[id] = { type, state, criterion, ...convertPatt(type, criterion, 'criterion') };\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait Storage.setMultiple(entries);\n\n\t\t\tconst { customFilters } = await Options.loadRaw('filteReddit') || {};\n\t\t\tif (customFilters) {\n\t\t\t\tfor (const { body } of (customFilters.value || [])) {\n\t\t\t\t\tbody.of.forEach(function traverseAndUpdate(v) {\n\t\t\t\t\t\tif (v.type === 'group') v.of.forEach(traverseAndUpdate);\n\t\t\t\t\t\telse Object.assign(v, convertPatt(v.type, v.patt, 'patt'));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tawait Options.set('filteReddit', 'customFiltersP', customFilters.value);\n\t\t\t}\n\t\t},\n\t}, {\n\t\tversionNumber: '5.11.1-settingsConsole-builder-tweak',\n\t\tasync go() {\n\t\t\tconst { customFiltersP, customFiltersC } = await Options.loadRaw('filteReddit') || {};\n\t\t\tlet i = Date.now();\n\t\t\tfor (const v of [...((customFiltersP && customFiltersP.value) || []), ...((customFiltersC && customFiltersC.value) || [])]) {\n\t\t\t\tconst { body: { name }, ondemand } = v;\n\t\t\t\tv.opts = { ondemand, name };\n\t\t\t\tv.id = `customFilter-${String(i++)}`;\n\t\t\t\t// The trash values will be ignored by the builder, so no need to remove them\n\t\t\t}\n\t\t\tif (customFiltersP)\tawait Options.set('filteReddit', 'customFiltersP', customFiltersP.value);\n\t\t\tif (customFiltersC)\tawait Options.set('filteReddit', 'customFiltersC', customFiltersC.value);\n\t\t},\n\t}, {\n\t\tversionNumber: '5.13.3-userTagger-ignored-to-filteReddit',\n\t\tasync go() {\n\t\t\tconst ignoredUsers = Object.entries(await Storage.wrapPrefix('tag.', (): any => ({})).getAll())\n\t\t\t\t.filter(([, { ignored }]) => ignored)\n\t\t\t\t.map(([username]) => [username]);\n\t\t\tawait Options.set('filteReddit', 'users', ignoredUsers);\n\t\t},\n\t}, {\n\t\tversionNumber: '5.13.3-filterline-effects-and-clean',\n\t\tasync go() {\n\t\t\tfunction migrateFilters(filters = {}) {\n\t\t\t\tfor (const [id, filter] of Object.entries(filters)) {\n\t\t\t\t\tif (!isObject(filter)) {\n\t\t\t\t\t\tdelete filters[id];\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfilter.effects = { hide: filter.state !== null, ...filter.sideEffects };\n\t\t\t\t\tif (filter.state === null) filter.state = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet f = Storage.wrapPrefix('RESmodules.filteReddit.', (): any => ({}));\n\t\t\tfor (const [k, v] of Object.entries(await f.getAll())) {\n\t\t\t\tif (k.startsWith('commentDefault') || k.startsWith('postDefault')) {\n\t\t\t\t\tmigrateFilters(v);\n\t\t\t\t\tawait f.set(k, v); // eslint-disable-line no-await-in-loop\n\t\t\t\t} else {\n\t\t\t\t\tawait f.delete(k); // eslint-disable-line no-await-in-loop\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tf = Storage.wrapPrefix('filterline.', (): any => ({}));\n\t\t\tfor (const [k, v] of Object.entries(await f.getAll())) {\n\t\t\t\tif (v) {\n\t\t\t\t\t// This migration may already have been invoked for this filterline in a previous (failed) migration\n\t\t\t\t\tif (v.effects) continue;\n\t\t\t\t\tmigrateFilters(v.filters);\n\t\t\t\t\tv.lastUsed = Date.now();\n\t\t\t\t\tawait f.set(k, v); // eslint-disable-line no-await-in-loop\n\t\t\t\t} else {\n\t\t\t\t\tawait f.delete(k); // eslint-disable-line no-await-in-loop\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}, {\n\t\tversionNumber: '5.14.1-filteReddit-user-hardIgnore',\n\t\tasync go() { /* Moved to next migration since option was deleted */ },\n\t}, {\n\t\tversionNumber: '5.14.2-filteReddit-user-hide-soft',\n\t\tasync go() { /* Moved to later migration since option was heavily adjust */ },\n\t}, {\n\t\tversionNumber: '5.14.2-filteReddit-migration-repair',\n\t\tasync go() {\n\t\t\t// Due to uncareful (and slow) migration in 5.14.0, filterlines migrated may have been\n\t\t\t// started over multiple times, resulting in filters erronously activating.\n\t\t\t// This tries to undo that by detecting whether all filters have been enabled,\n\t\t\t// and setting `hide` back to false if that's the case\n\t\t\tfunction migrateRepair(filters): ?true {\n\t\t\t\tconst allHidden = filters.every(([, filter]) => filter.effects && Object.keys(filter.effects).length === 1 && filter.effects.hide);\n\t\t\t\tif (allHidden) {\n\t\t\t\t\tfor (const [id, filter] of filters) {\n\t\t\t\t\t\tif (['users', 'subreddits', 'keywords', 'domains', 'flair'].includes(id)) continue;\n\t\t\t\t\t\tfilter.effects = { hide: false };\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet f = Storage.wrapPrefix('RESmodules.filteReddit.', (): any => ({}));\n\t\t\tfor (const [k, v] of Object.entries(await f.getAll())) {\n\t\t\t\tif (migrateRepair(Object.entries(v))) await f.set(k, v); // eslint-disable-line no-await-in-loop\n\t\t\t}\n\n\t\t\tf = Storage.wrapPrefix('filterline.', (): any => ({}));\n\t\t\tfor (const [k, v] of Object.entries(await f.getAll())) {\n\t\t\t\tconst filters = v && v.filters && Object.entries(v.filters);\n\t\t\t\tif (filters && filters.length) {\n\t\t\t\t\tif (migrateRepair(filters)) await f.set(k, v); // eslint-disable-line no-await-in-loop\n\t\t\t\t} else {\n\t\t\t\t\tawait f.delete(k); // eslint-disable-line no-await-in-loop\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}, {\n\t\tversionNumber: '5.14.3-filteReddit-user-action-collapse',\n\t\tasync go() {\n\t\t\tconst hardIgnoreOption = await Options.get('userTagger', 'hardIgnore') ||\n\t\t\t\tawait Options.get('filteReddit', 'hardIgnoreUsers');\n\n\t\t\tlet hardIgnore = hardIgnoreOption ? hardIgnoreOption.value : true;\n\n\t\t\t// The usersMatchAction option may have been manually set to placeholder after 5.14\n\t\t\tconst usersMatchAction = await Options.get('filteReddit', 'usersMatchAction');\n\t\t\tif (usersMatchAction && usersMatchAction.value === 'placeholder') hardIgnore = false;\n\n\t\t\tawait Options.set('filteReddit', 'usersMatchAction', hardIgnore ? 'hide' : 'placeholder');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.14.4-new-module-subredditStyleToggle',\n\t\tasync go() {\n\t\t\tawait Migrators.moveOption('styleTweaks', 'subredditStyleBrowserToolbarButton', 'subredditStyleToggle', 'browserToolbarButton');\n\t\t\tawait Migrators.moveOption('styleTweaks', 'subredditStyleCheckbox', 'subredditStyleToggle', 'checkbox');\n\t\t\tconst ignored = await Storage.get('RESmodules.styleTweaks.ignoredSubredditStyles');\n\t\t\tif (ignored) {\n\t\t\t\tawait Storage.set('RESmodules.subredditStyleToggle.ignored', ignored);\n\t\t\t\tawait Storage.delete('RESmodules.styleTweaks.ignoredSubredditStyles');\n\t\t\t}\n\t\t},\n\t}, {\n\t\tversionNumber: '5.14.4-prune-interface',\n\t\tasync go() {\n\t\t\tawait Migrators.updateOption('newCommentCount', 'cleanComments', '7', '30');\n\t\t\tawait Storage.delete('RESmodules.readComments.lastClean');\n\t\t\tawait Storage.delete('RESmodules.newCommentCount.lastClean');\n\t\t\tawait Storage.delete('RESmodules.commentHidePersistor.lastClean');\n\t\t},\n\t}, {\n\t\tversionNumber: '5.17.0-hover-instances-id',\n\t\tasync go() {\n\t\t\tconst instances = {};\n\t\t\tfor (const instance of await Options.getValue('hover', 'instances') || []) {\n\t\t\t\tconst id = instance[0] = instance[0].replace(/(dropdownList|infocard)\\./, '');\n\t\t\t\tif (!id || instances[id]) continue;\n\t\t\t\tinstances[id] = instance;\n\t\t\t}\n\n\t\t\tawait Options.set('hover', 'instances', Object.values(instances));\n\t\t},\n\t}, {\n\t\tversionNumber: '5.17.0-notifications',\n\t\tasync go() {\n\t\t\tStorage.delete('RESmodules.notifications.recent');\n\n\t\t\tconst instances = {};\n\t\t\tfor (const instance of await Options.getValue('notifications', 'notificationTypes') || []) {\n\t\t\t\tconst id = `${instance[0]}-${instance[1]}`;\n\t\t\t\tif (!id || instances[id]) continue;\n\t\t\t\tinstances[id] = [id, instance[2], instance[3]];\n\t\t\t}\n\n\t\t\tawait Options.set('notifications', 'notificationTypes', Object.values(instances));\n\t\t},\n\t}, {\n\t\tversionNumber: '5.17.0-firstRun-to-last',\n\t\tasync go() {\n\t\t\tconst firstRunStorage = Storage.wrapPrefix('RES.firstRun.', () => (null: null | boolean));\n\t\t\tconst versions = Object.keys(await firstRunStorage.getAll());\n\t\t\tversions.sort((a, b) => a.localeCompare(b, undefined, { numerical: true }));\n\t\t\tawait Storage.set('highestVersion', versions.slice(-1)[0] || null); await firstRunStorage.deleteMultiple(versions);\n\t\t},\n\t},\n\n]; // ^^ Add new migrations ^^\n\nconst _migrationsToRun = getMigrationsToRun();\n\nexport async function migrate() {\n\tconst migrations = await _migrationsToRun;\n\tif (!migrations.length) return;\n\n\tawait forEachSeq(migrations, async currentMigration => {\n\t\tconsole.log('Migratating', currentMigration.versionNumber);\n\t\tawait currentMigration.go();\n\t\t// Checkpoint, in case the next migration crashes\n\t\tStorage.set('RESOptionsVersion', currentMigration.versionNumber);\n\t});\n\n\tconsole.log('All remaining migrations completed.');\n}\n\nasync function getMigrationsToRun() {\n\tconst lastMigratedVersion = await getLastMigratedVersion();\n\n\t// false specifically; we want to run all migrations on `null`\n\tif (lastMigratedVersion === false) {\n\t\t// Set the migrated version to the current latest migration,\n\t\t// in case the above loop didn't run (i.e. on first install)\n\t\tStorage.set('RESOptionsVersion', migrations.slice(-1)[0].versionNumber);\n\t\treturn [];\n\t}\n\n\treturn takeRightWhile(migrations, ({ versionNumber }) => versionNumber !== lastMigratedVersion);\n}\n\n// Returns a string like \"4.5.0.1\" (the last migration run),\n// null (run all migrations), or false (do not run migrations)\nasync function getLastMigratedVersion(): Promise<string | null | false> {\n\tconst RESOptionsVersion = await Storage.get('RESOptionsVersion');\n\n\tif (typeof RESOptionsVersion === 'undefined') {\n\t\t// Error occured sometime in the past, abort\n\t\tconsole.warn('RESOptionsVersion was undefined');\n\t\treturn false;\n\t} else if (RESOptionsVersion !== null) {\n\t\t// Migration has run before; verify/sanitize the version number\n\t\tif ((/^\\d$/).test(RESOptionsVersion)) {\n\t\t\t// Legacy format: integer number\n\t\t\tconst legacyOptionVersionMapping = ['4.5.0.0', '4.5.0.1'];\n\t\t\treturn legacyOptionVersionMapping[RESOptionsVersion - 1];\n\t\t} else if (!migrations.map(m => m.versionNumber).includes(RESOptionsVersion)) {\n\t\t\t// Abort, abort! Probably downgraded\n\t\t\tconsole.warn(`Couldn't find a migration matching RESOptionsVersion = ${RESOptionsVersion}`);\n\t\t\treturn false;\n\t\t} else {\n\t\t\t// RESOptionsVersion is a valid migration version number\n\t\t\treturn RESOptionsVersion;\n\t\t}\n\t} else if (await Storage.has('RES.firstRun.4.5.0.2')) {\n\t\t// 4.5.0.2 bug: RESOptionsVersion was not set on fresh installs.\n\t\treturn '4.5.0.2';\n\t} else if (\n\t\tawait Storage.has('RES.firstRun.4.3.2.1') ||\n\t\tawait Storage.has('RES.firstRun.4.3.1.2') ||\n\t\tawait Storage.has('RES.firstRun.4.3.0.3') ||\n\t\tawait Storage.has('RES.firstRun.4.2.0.2') ||\n\t\tawait Storage.has('RES.firstRun.4.1.5')\n\t) {\n\t\t// Upgraded from old version to a version which supports migrations; run all migrations\n\t\treturn null;\n\t} else {\n\t\t// New install, no migrations necessary\n\t\treturn false;\n\t}\n}\n","/* @flow */\n\n// load environment listeners\nimport 'sibling-loader!./environment/background/ajax';\n\nimport { migrate } from './core/migrate';\n\nimport { addListener } from './environment/background/messaging';\n\nmigrate();\n\n// Restoring a backup may require migrations to be run\naddListener('runMigrations', migrate);\n","/* @flow */\n\nimport { memoize } from 'lodash-es';\nimport { filterMap } from './array';\nimport { throttleQueuePositionReset } from './async';\nimport { click, getPercentageVisibleYAxis, scrollToElement } from './dom';\nimport { downcast } from './flow';\nimport { currentSubreddit, regexes } from './location';\n\nconst elementMap = new WeakMap();\nconst things = new Set();\nconst SECRET_TOKEN = new class {}();\n\n/**\n * Wrapper class around reddit's concept of a \"Thing\".\n * Use Thing.from or Thing.checkedFrom (fallible/infallible respectively) to construct a Thing.\n * Uniqueness is guaranteed, i.e. `Thing.from(element) === Thing.from(element)`.\n */\nexport class Thing {\n\tstatic thingSelector = '.thing, .search-result-link';\n\tstatic entrySelector = '.entry';\n\n\t// This query may be expensive and performed fairly often\n\tstatic thingElements = memoize((doc: HTMLElement = document.body.querySelector('.content[role=\"main\"]')): HTMLElement[] => (\n\t\tArray.from(doc.querySelectorAll(Thing.thingSelector))\n\t));\n\n\tstatic things(doc: *): Thing[] {\n\t\treturn Thing.thingElements(doc).map(e => Thing.checkedFrom(e));\n\t}\n\n\tstatic visibleThingElements(doc: *): HTMLElement[] {\n\t\treturn Thing.thingElements(doc).filter(v => v.offsetParent);\n\t}\n\n\tstatic visibleThings(doc: *): Thing[] {\n\t\treturn filterMap(Thing.visibleThingElements(doc), ele => {\n\t\t\tconst thing = Thing.from(ele);\n\t\t\tif (thing) return [thing];\n\t\t});\n\t}\n\n\telement: HTMLElement;\n\tentry: HTMLElement;\n\n\tparent: ?Thing;\n\tchildren = new Set();\n\n\t// Tasks are added and generally executed by watchers\n\ttasks: {| completed: boolean, visible: Array<() => any>, immediate: Array<() => any>, byId: Map<mixed, () => any> |} =\n\t\t{ completed: false, visible: [], immediate: [], byId: new Map() };\n\n\tstatic checkedFrom(element: HTMLElement | Thing): Thing {\n\t\tconst thing = Thing.from(element);\n\t\tif (!thing) {\n\t\t\tthrow new Error(`Could not construct Thing from ${String(element)}`);\n\t\t}\n\t\treturn thing;\n\t}\n\n\tstatic from(element: ?HTMLElement | Thing): ?Thing {\n\t\tif (!element) return null;\n\n\t\tif (element instanceof Thing) return element;\n\n\t\tconst thingElement = element.closest(Thing.thingSelector);\n\t\tif (!thingElement) return null;\n\n\t\tif (elementMap.has(thingElement)) return elementMap.get(thingElement);\n\n\t\tconst entry = thingElement.querySelector(Thing.entrySelector) || thingElement;\n\t\tconst thing = new Thing(SECRET_TOKEN, downcast(thingElement, HTMLElement), entry);\n\n\t\tThing.thingElements.cache.clear();\n\t\telementMap.set(thingElement, thing);\n\t\tthings.add(thing);\n\n\t\treturn thing;\n\t}\n\n\tconstructor(token: typeof SECRET_TOKEN, thing: HTMLElement, entry: HTMLElement) {\n\t\tif (token !== SECRET_TOKEN) {\n\t\t\tthrow new Error('Use Thing.from() or Thing.checkedFrom() instead of new Thing()');\n\t\t}\n\n\t\tthis.element = thing;\n\t\tthis.entry = entry;\n\n\t\tconst _p = this.element.parentElement;\n\t\tthis.parent = _p && Thing.from((_p: any).closest('.thing'));\n\t\tif (this.parent) this.parent.children.add(this);\n\t}\n\n\trunTasks() {\n\t\tif (this.tasks.completed) return;\n\t\tthis.tasks.completed = true;\n\t\tthis.tasks.immediate.map(fn => fn());\n\t\tthis.tasks.visible.map(fn => fn());\n\t}\n\n\trunSurroundingTasks(margin: number = 10) {\n\t\tconst thingElements = Thing.thingElements();\n\t\tconst idx = thingElements.indexOf(this.element);\n\t\tconst min = Math.max(idx - margin, 0);\n\t\tconst max = Math.min(idx + margin, thingElements.length - 1);\n\t\tfor (let i = min; i <= max; i++) { // eslint-disable-line no-restricted-syntax\n\t\t\tconst thing = Thing.checkedFrom(thingElements[i]);\n\t\t\tif (!thing.tasks.completed && thing.isVisible()) thing.runTasks();\n\t\t}\n\t}\n\n\tanchor() {\n\t\t// Keep the viewport anchored relative to this thing if it is in the viewport\n\t\tconst anchor = getPercentageVisibleYAxis(this.entry) && { to: this.entry.getBoundingClientRect().top };\n\t\tif (!anchor) return;\n\t\trequestAnimationFrame(() => {\n\t\t\tif (!this.entry.offsetParent) return;\n\t\t\tscrollToElement(this.entry, undefined, { scrollStyle: 'none', anchor });\n\t\t});\n\t}\n\n\tsetHideFilter(match: *) {\n\t\tthis.element.classList.toggle('res-thing-filter-hide', !!match);\n\n\t\tif (this.isComment()) {\n\t\t\tthis.refreshPartialVisibility();\n\t\t\tfor (const p of this.getParents()) p.refreshPartialVisibility();\n\t\t}\n\t}\n\n\tsetFilterReasons(elements: Array<HTMLElement>) {\n\t\tfor (const old of this.element.querySelectorAll('.res-thing-filter-remove-matching-entry')) old.remove();\n\t\tthis.element.prepend(...elements);\n\t}\n\n\t// `throttleQueuePositionReset` ensures that children will be evaluated first\n\t// Class is applied when a thing is hidden by a filter, but may have descendants that are not\n\trefreshPartialVisibility = throttleQueuePositionReset(() => {\n\t\tthis.element.classList.toggle('res-thing-partial', this.isHiddenByFilter(true) && (\n\t\t\t// Comment has unloaded comments whose state is still not known\n\t\t\t// TODO If clicking this causes the comment to disappear, notify!\n\t\t\tthis.element.matches('.morerecursion, .morechildren') ||\n\t\t\t// Comment has unfilter children\n\t\t\tArray.from(this.children).some(v => !v.isHiddenByFilter())\n\t\t));\n\t});\n\n\tgetDirectionOf(other: Thing): ?('down' | 'up') {\n\t\tif (!this.isVisible() || !other.isVisible()) return;\n\t\treturn (other.entry.compareDocumentPosition(this.entry) & Node.DOCUMENT_POSITION_FOLLOWING) ? 'up' : 'down';\n\t}\n\n\tgetThreadTop(): Thing {\n\t\tlet thing = this; // eslint-disable-line consistent-this\n\n\t\tlet current = this.element;\n\t\twhile ((current = current.parentElement)) {\n\t\t\tif (current.matches(Thing.thingSelector)) thing = downcast(current, HTMLElement);\n\t\t}\n\n\t\treturn Thing.checkedFrom(thing);\n\t}\n\n\tgetParents(): Thing[] {\n\t\tconst parents = [];\n\t\tlet level = this; // eslint-disable-line consistent-this\n\t\twhile ((level = level.parent)) parents.push(level);\n\t\treturn parents;\n\t}\n\n\tgetNext({ direction = 'down', excludeMoreChildren = false }: {| direction?: 'up' | 'down', excludeMoreChildren?: boolean |} = {}, things: HTMLElement[] = Thing.thingElements()): ?Thing {\n\t\tlet index = things.indexOf(this.element);\n\t\tlet target;\n\n\t\tdo {\n\t\t\tindex += direction === 'down' ? 1 : -1;\n\t\t\tconst _target = things[index];\n\t\t\ttarget = _target;\n\t\t\tif (!target) return null;\n\t\t\tif (excludeMoreChildren && target.matches('.morechildren')) continue;\n\t\t} while (!target.offsetParent);\n\n\t\treturn Thing.from(target);\n\t}\n\n\tgetNextSibling(options: *): ?Thing {\n\t\tif (!this.element.parentElement) return null;\n\n\t\tconst things = Array.from(this.element.parentElement.children)\n\t\t\t.filter(e => e.matches(Thing.thingSelector));\n\n\t\treturn this.getNext(options, things);\n\t}\n\n\tgetClosest(func: (...args: any) => ?Thing, ...args: mixed[]): ?Thing {\n\t\tconst target = Reflect.apply(func, this, args);\n\t\tif (target) {\n\t\t\treturn target;\n\t\t} else {\n\t\t\tif (this.parent) return this.parent.getClosest(func, ...args);\n\t\t}\n\t}\n\n\tgetClosestVisible(options: * = { excludeMoreChildren: true }): ?Thing {\n\t\tif (this.element.offsetParent) return this;\n\t\treturn this.getNext({ direction: 'down', ...options }) || this.getNext({ direction: 'up', ...options });\n\t}\n\n\tisMessage(): boolean {\n\t\treturn this.element.classList.contains('message');\n\t}\n\n\tisSubreddit(): boolean {\n\t\treturn this.element.classList.contains('subreddit');\n\t}\n\n\tisPost(): boolean {\n\t\treturn this.element.classList.contains('link') || this.element.classList.contains('search-result-link');\n\t}\n\n\tisLinkPost(): boolean {\n\t\tif (!this.isPost()) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.element.classList.contains('search-result-link')) {\n\t\t\treturn !this.element.querySelector('a').classList.contains('self');\n\t\t} else {\n\t\t\treturn !this.element.classList.contains('self');\n\t\t}\n\t}\n\n\tisSelfPost(): boolean {\n\t\tif (!this.isPost()) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.element.classList.contains('search-result-link')) {\n\t\t\treturn this.element.querySelector('a').classList.contains('self');\n\t\t} else {\n\t\t\treturn this.element.classList.contains('self');\n\t\t}\n\t}\n\n\tisComment(): boolean {\n\t\treturn this.element.classList.contains('comment') || this.element.classList.contains('was-comment');\n\t}\n\n\tisTopLevelComment(): boolean {\n\t\treturn this.isComment() && !!this.element.parentElement && this.element.parentElement.classList.contains('nestedlisting');\n\t}\n\n\tgetTitle(): string {\n\t\tconst element = this.getTitleElement();\n\t\treturn element && element.textContent || '';\n\t}\n\n\tgetTitleElement(): ?HTMLAnchorElement {\n\t\treturn (this.entry.querySelector('a.title, a.search-title') ||\n\t\t\tthis.entry.querySelector('.title'): any);\n\t}\n\n\tgetTitleUrl(): string {\n\t\tconst element = this.getTitleElement();\n\t\tif (element) {\n\t\t\treturn element.href;\n\t\t}\n\t\treturn '';\n\t}\n\n\tgetPostLink(): HTMLAnchorElement {\n\t\treturn downcast(this.entry.querySelector('a.title, a.search-link'), HTMLAnchorElement);\n\t}\n\n\tgetPostUrl(): string {\n\t\treturn this.element.dataset.url || this.getPostLink().href;\n\t}\n\n\tgetTextBody(): HTMLElement {\n\t\treturn this.entry.querySelector('.md');\n\t}\n\n\tgetCommentsLink(): ?HTMLAnchorElement {\n\t\tconst a = this.entry.querySelector('a.comments, a.search-comments');\n\t\treturn a instanceof HTMLAnchorElement ? a : undefined;\n\t}\n\n\tgetCommentPermalink(): ?HTMLAnchorElement {\n\t\treturn (this.entry.querySelector('a.bylink'): any);\n\t}\n\n\tgetHideElement(): ?HTMLAnchorElement {\n\t\treturn (this.entry.querySelector('.hide-button a, .unhide-button a'): any);\n\t}\n\n\tgetButtons(): HTMLAnchorElement {\n\t\treturn (this.entry.querySelector('.flat-list.buttons'): any);\n\t}\n\n\tgetNumberOfChildren(): number {\n\t\t// Parse the text, since all children elements may not be loaded\n\t\tconst numChildrenElem = this.entry.querySelector('.numchildren');\n\t\tconst match = numChildrenElem && (/(\\d+)/).exec(numChildrenElem.textContent);\n\t\treturn match && parseInt(match[1], 10) || 0;\n\t}\n\n\tstatic _parseScore(scoreEle: HTMLElement): number {\n\t\treturn parseInt(scoreEle.title || scoreEle.textContent, 10) || 0;\n\t}\n\n\tgetScore(): ?number {\n\t\tconst element = this._getActiveScoreElement();\n\t\t// parseInt() strips off the ' points' from comments\n\t\treturn element && Thing._parseScore(element);\n\t}\n\n\t_getActiveScoreElement(): ?HTMLElement {\n\t\tif (this.isPost()) {\n\t\t\treturn this.element.querySelector([\n\t\t\t\t'.midcol.unvoted > .score.unvoted',\n\t\t\t\t'.midcol.likes > .score.likes',\n\t\t\t\t'.midcol.dislikes > .score.dislikes',\n\t\t\t\t'.search-score',\n\t\t\t].join(', '));\n\t\t} else { // if (this.isComment()) {\n\t\t\treturn this.entry.querySelector('.tagline > .score');\n\t\t}\n\t}\n\n\tgetAllScoreElements(): Array<[HTMLElement, number]> {\n\t\tconst toScoreTuple = ele => [ele, Thing._parseScore(ele)];\n\t\tif (this.isPost()) {\n\t\t\treturn Array.from(this.element.querySelectorAll('.midcol > .score, .search-score')).map(toScoreTuple);\n\t\t} else { // if (this.isComment()) {\n\t\t\treturn Array.from(this.entry.querySelectorAll('.tagline > .score')).map(toScoreTuple);\n\t\t}\n\t}\n\n\tgetAuthor(): ?string {\n\t\tconst data = this.element.getAttribute('data-author');\n\t\tif (data) {\n\t\t\treturn data;\n\t\t}\n\t\tconst element = this.getAuthorElement();\n\t\tif (element) {\n\t\t\tconst match = regexes.profile.exec(element.pathname);\n\t\t\tif (match) {\n\t\t\t\treturn match[1];\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAuthorUrl(): string {\n\t\tconst author = this.getAuthor();\n\t\tif (author) {\n\t\t\treturn `/user/${author}/`;\n\t\t}\n\t\treturn '';\n\t}\n\n\tgetAuthorElement(): ?HTMLAnchorElement {\n\t\treturn (this.entry.querySelector('.tagline a.author, .search-author .author'): any);\n\t}\n\n\tgetSubreddit(): ?string {\n\t\tconst data = this.element.getAttribute('data-subreddit');\n\t\tif (data) {\n\t\t\treturn data;\n\t\t}\n\t\tconst element = this.getSubredditLink();\n\t\tif (element) {\n\t\t\tconst match = regexes.subreddit.exec(element.pathname);\n\t\t\tif (match) {\n\t\t\t\treturn match[1];\n\t\t\t}\n\t\t} else {\n\t\t\treturn currentSubreddit();\n\t\t}\n\t}\n\n\tgetSubredditLink(): ?HTMLAnchorElement {\n\t\tif (this.isPost()) {\n\t\t\treturn (this.entry.querySelector('.tagline a.subreddit, a.search-subreddit-link'): any);\n\t\t} else if (this.isComment()) {\n\t\t\t// TODO: does .parent a.subreddit work?\n\t\t\treturn (this.entry.querySelector('.parent a.subreddit, .tagline .subreddit a'): any);\n\t\t}\n\t}\n\n\tgetPostDomain(): string {\n\t\tconst data = this.element.getAttribute('data-domain');\n\t\tif (data) {\n\t\t\treturn data;\n\t\t}\n\n\t\tconst element = this.getPostDomainLink();\n\t\tif (element) {\n\t\t\treturn element.textContent;\n\t\t}\n\n\t\tconst text = this.getPostDomainText();\n\t\tif (text) {\n\t\t\treturn text;\n\t\t}\n\n\t\tconst subreddit = this.getSubreddit();\n\t\tif (subreddit) {\n\t\t\treturn `self.${subreddit}`;\n\t\t}\n\n\t\treturn 'reddit.com';\n\t}\n\n\tgetPostDomainUrl(): string {\n\t\tconst link = this.getPostDomainLink();\n\t\tif (link) {\n\t\t\treturn link.href;\n\t\t}\n\t\treturn `/domain/${this.getPostDomain()}/`;\n\t}\n\n\tgetPostDomainLink(): ?HTMLAnchorElement {\n\t\treturn (this.entry.querySelector('.domain a'): any);\n\t}\n\n\tgetPostDomainText(): string {\n\t\tconst data = this.element.getAttribute('data-domain');\n\t\tif (data) {\n\t\t\treturn data;\n\t\t}\n\n\t\tconst element = this.element.querySelector('.domain');\n\t\tif (!element) return '';\n\t\tconst text = element.textContent || '';\n\t\treturn text.replace(/[\\(\\)\\s]/g, '');\n\t}\n\n\tgetCommentCount(): ?number {\n\t\tconst element = this.getCommentCountElement();\n\t\tif (!element) return;\n\t\treturn parseInt((/\\d+/).exec(\n\t\t\telement.getAttribute('data-text') || // In case noCtrlF is applied\n\t\t\telement.textContent,\n\t\t), 10) || 0;\n\t}\n\n\tgetCommentCountElement(): ?HTMLElement {\n\t\tif (this.isPost()) {\n\t\t\treturn this.entry.querySelector('.buttons .comments');\n\t\t} else if (this.isComment()) {\n\t\t\treturn this.entry.querySelector('.buttons a.full-comments');\n\t\t}\n\t}\n\n\tgetPostThumbnailUrl(): string {\n\t\tconst thumbnail = this.getPostThumbnailElement();\n\t\tif (!thumbnail) return '';\n\t\treturn thumbnail.src || '';\n\t}\n\n\tgetPostThumbnailElement(): ?HTMLImageElement {\n\t\treturn (this.element.querySelector('.thumbnail img'): any);\n\t}\n\n\tgetPostFlairText(): string {\n\t\tconst element = this.getPostFlairElement();\n\t\treturn element && element.textContent || '';\n\t}\n\n\tgetPostFlairElement(): ?HTMLElement {\n\t\treturn this.entry.querySelector('.title > .linkflairlabel');\n\t}\n\n\tgetUserFlairText(): string {\n\t\tconst element = this.getUserFlairElement();\n\t\treturn element && element.textContent || '';\n\t}\n\n\tgetUserFlairElement(): ?HTMLElement {\n\t\treturn this.entry.querySelector('.tagline > .flair');\n\t}\n\n\tgetCrosspostBadgeElement(): ?HTMLElement {\n\t\treturn this.entry.querySelector('.crosspost-badge');\n\t}\n\n\tgetUpvoteButton(): ?HTMLElement {\n\t\treturn this._getVoteButton('div.up, div.upmod');\n\t}\n\n\tgetDownvoteButton(): ?HTMLElement {\n\t\treturn this._getVoteButton('div.down, div.downmod');\n\t}\n\n\t_getVoteButton(selector: string): ?HTMLElement {\n\t\tconst previousSibling: HTMLElement = (this.entry.previousSibling: any);\n\t\tif (previousSibling.tagName === 'A') {\n\t\t\treturn (previousSibling.previousSibling: any).querySelector(selector);\n\t\t} else {\n\t\t\treturn previousSibling.querySelector(selector);\n\t\t}\n\t}\n\n\tgetTimestamp(): ?Date {\n\t\tconst element = this.getTimestampElement();\n\t\treturn element && new Date(element.getAttribute('datetime'));\n\t}\n\n\tgetTimestampElement(): ?HTMLElement {\n\t\treturn this.entry.querySelector('time');\n\t}\n\n\tgetPostEditTimestamp(): number {\n\t\tconst element = this.getPostEditTimestampElement();\n\t\treturn element && (Date.parse(element.getAttribute('datetime')) / 1000) || 0;\n\t}\n\n\tgetPostEditTimestampElement(): ?HTMLElement {\n\t\treturn this.entry.querySelector('time.edited-timestamp');\n\t}\n\n\tgetFullname(): string {\n\t\treturn this.element.getAttribute('data-fullname') || '';\n\t}\n\n\tgetUserattrsElement(): ?HTMLElement {\n\t\treturn this.entry.querySelector('.userattrs');\n\t}\n\n\tgetRank(): ?number {\n\t\tconst rank = parseInt(this.element.getAttribute('data-rank'), 10);\n\t\tif (!isNaN(rank)) return rank;\n\t}\n\n\tgetRankElement(): ?HTMLElement {\n\t\tif (!this.isPost()) return;\n\t\treturn this.element.querySelector('.rank');\n\t}\n\n\tgetTaglineElement(): ?HTMLElement {\n\t\treturn this.entry.querySelector('.tagline');\n\t}\n\n\tgetCommentCollapseToggleElement(): ?HTMLElement {\n\t\treturn this.entry.querySelector('.expand');\n\t}\n\n\tsetCommentCollapse(state: boolean, reason: string, openOnlyWhenSameReason: boolean = false): ?HTMLElement {\n\t\tconst toggle = this.getCommentCollapseToggleElement();\n\t\tif (!toggle) return;\n\t\tif (state) toggle.setAttribute('collapse-reason', reason);\n\t\tif (this.isCollapsed() === state) return;\n\t\tif (!state && openOnlyWhenSameReason && toggle.getAttribute('collapse-reason') !== reason) return;\n\t\tif (!state) toggle.removeAttribute('collapse-reason');\n\t\tclick(toggle); // Simulate a click, so that the event bubbles\n\t}\n\n\tgetPostTime(): string {\n\t\tconst element = this.getPostTimeElement();\n\t\tif (element) {\n\t\t\treturn element.textContent;\n\t\t}\n\t\treturn '';\n\t}\n\n\tgetPostTimeElement(): ?HTMLElement {\n\t\treturn this.entry.querySelector('.tagline time');\n\t}\n\n\tisNSFW(): boolean {\n\t\treturn this.element.classList.contains('over18') || !!this.entry.querySelector('.nsfw-stamp');\n\t}\n\n\tisSpoiler(): boolean {\n\t\tif (this.element.classList.contains('search-result')) {\n\t\t\treturn !!this.entry.querySelector('.spoiler-stamp');\n\t\t}\n\t\treturn this.element.classList.contains('spoiler');\n\t}\n\n\tisCrosspost(): boolean {\n\t\treturn !!this.getCrosspostBadgeElement();\n\t}\n\n\tisLocked(): boolean {\n\t\tif (this.element.classList.contains('search-result')) {\n\t\t\treturn this.element.classList.contains('linkflair-locked');\n\t\t}\n\t\treturn this.element.classList.contains('locked');\n\t}\n\n\tisDeleted(): boolean {\n\t\treturn this.element.classList.contains('deleted');\n\t}\n\n\tisHiddenByFilter(partialAsFiltered: boolean = false): boolean {\n\t\t// Keep in sync with the CSS rules\n\t\tif (this.element.matches('body.hideOver18 .over18:not(.allowOver18)')) return true;\n\t\tif (!this.element.classList.contains('res-thing-filter-hide')) return false;\n\t\tif (this.element.classList.contains('res-filterline-highlight-match')) return false;\n\t\tif (partialAsFiltered) {\n\t\t\tif (this.element.classList.contains('res-thing-partial') && this.element.classList.contains('res-selected')) return false;\n\t\t\treturn true;\n\t\t} else {\n\t\t\tif (this.element.classList.contains('res-thing-hide-children')) return true;\n\t\t\treturn !this.element.classList.contains('res-thing-partial');\n\t\t}\n\t}\n\n\tisCollapsed(): boolean {\n\t\treturn this.element.classList.contains('collapsed');\n\t}\n\n\t// Should be equivalent to `this.element.offsetParent !== null`\n\tisVisible(): boolean {\n\t\t// Promoted (ads) are often hidden by adblockers, so just assume that they're not visible\n\t\tif (this.element.classList.contains('promoted')) return false;\n\n\t\tif (!document.body.classList.contains('res-filters-disabled') && this.isHiddenByFilter()) return false;\n\t\tconst { parent } = this;\n\t\tif (parent) {\n\t\t\tif (parent.isCollapsed()) return false;\n\t\t\tif (parent.element.classList.contains('res-children-hidden')) return false; // `hideChildComments` module\n\t\t\tif (!parent.isVisible()) return false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisContentVisible(): boolean {\n\t\treturn !(\n\t\t\tthis.element.classList.contains('res-thing-has-placeholder') ||\n\t\t\t(!document.body.classList.contains('res-filters-disabled') && this.isHiddenByFilter(true)) ||\n\t\t\tthis.isCollapsed() ||\n\t\t\t!this.isVisible()\n\t\t);\n\t}\n\n\tisSelected() {\n\t\treturn this.element.classList.contains('res-selected');\n\t}\n\n\tisUpvoted() {\n\t\treturn this.entry.classList.contains('likes');\n\t}\n\n\tisDownvoted() {\n\t\treturn this.entry.classList.contains('dislikes');\n\t}\n\n\tisUnvoted() {\n\t\treturn this.entry.classList.contains('unvoted');\n\t}\n}\n\nif (process.env.NODE_ENV === 'development') {\n\t// for debugging only! do not use `getThingIsVisibleInconsistencies` in any committed code\n\twindow.getThingIsVisibleInconsistencies = () => Array.from(things).filter(v => v.isVisible() === !v.element.offsetParent);\n}\n","/* @flow */\n\nimport { memoize, once } from 'lodash-es';\nimport { Thing } from './Thing';\nimport { isPageType } from './location';\nimport { isLastNodeInDOM, watchForFutureChildren, watchForFutureDescendants, waitForAttach, waitForDescendantChange, waitForSelectorMatch, watchForChildren } from './dom';\nimport { contentLoaded } from './pagePhases';\nimport { MINUTE } from './time';\n\ntype WatcherOptions = {| immediate?: boolean, id?: mixed |};\n\ntype ElementWatcherType = 'page' | 'selfText';\ntype ElementWatcherCallback = (e: HTMLElement) => any;\n\nconst elementWatchers: {\n\t[ElementWatcherType]: Array<{\n\t\tselector: ?string,\n\t\tcallback: ElementWatcherCallback,\n\t\toptions?: WatcherOptions,\n\t\tregistered: WeakSet<*>,\n\t}>,\n} = {\n\tpage: [],\n\tselfText: [],\n};\n\ntype ThingWatcherType = 'comment' | 'message' | 'post' | 'subreddit';\ntype ThingWatcherCallback = (thing: Thing) => any;\n\nconst thingWatchers: {\n\t[ThingWatcherType]: Array<{\n\t\tcallback: ThingWatcherCallback,\n\t\toptions?: WatcherOptions,\n\t\tregistered: WeakSet<*>,\n\t}>,\n} = {\n\tcomment: [],\n\tmessage: [],\n\tpost: [],\n\tsubreddit: [],\n};\n\n// eslint-disable-next-line no-unused-vars\nconst runCallback = fn => { try { return fn(); } catch (e) { console.error(e); } };\n\nconst addCallback = (callback, actingOnElement, { immediate, id } = {}) => {\n\tconst thing = Thing.from(actingOnElement);\n\tif (thing) {\n\t\t// XXX The callback ought not be wrapped so many times\n\t\tconst task = once(() => runCallback(callback));\n\t\tif (id) thing.tasks.byId.set(id, task);\n\t\t(immediate ? thing.tasks.immediate : thing.tasks.visible).push(task);\n\t\tif (immediate || thing.tasks.completed) task();\n\t} else {\n\t\trunCallback(callback);\n\t}\n};\n\nfunction registerElement(type, element) {\n\tfor (const { selector, callback, options, registered } of elementWatchers[type]) {\n\t\tconst elements = selector && !element.matches(selector) ?\n\t\t\tArray.from(element.querySelectorAll(selector)) :\n\t\t\t[element];\n\t\tfor (const e of elements) {\n\t\t\tif (registered.has(e)) continue;\n\t\t\tregistered.add(e);\n\t\t\taddCallback(() => callback(e), e, options);\n\t\t}\n\t}\n}\n\nconst dupeSet = new Map();\n\nfunction registerThing(element: HTMLElement) {\n\tconst thing = Thing.checkedFrom(element);\n\n\t// Loading additional things (\"load more comments\", neverEndingReddit) may cause repeating posts; remove those\n\tconst id = thing.getFullname();\n\t// Some posts may not have a have an id, e.g. those that are deleted or placeholders\n\tif (id.length === 9) { // valid ids have 9 characters\n\t\tconst existing = dupeSet.get(id);\n\t\tif (existing === element) return; // `registerThing` is being run on an already added thing\n\t\tif (existing && document.contains(existing)) {\n\t\t\telement.remove();\n\t\t\treturn;\n\t\t}\n\n\t\tdupeSet.set(id, element);\n\t}\n\n\tconst thingWatcherCallbacks =\n\t\tthing.isPost() && thingWatchers.post ||\n\t\tthing.isComment() && thingWatchers.comment ||\n\t\tthing.isMessage() && thingWatchers.message ||\n\t\tthing.isSubreddit() && thingWatchers.subreddit ||\n\t\t[];\n\n\tfor (const { callback, options, registered } of thingWatcherCallbacks) {\n\t\tif (registered.has(thing)) continue;\n\t\tregistered.add(thing);\n\t\taddCallback(() => callback(thing), thing.element, options);\n\t}\n}\n\nexport function watchForThings(types: ?Array<ThingWatcherType>, callback: ThingWatcherCallback, options?: WatcherOptions) {\n\tif (!types) types = Object.keys(thingWatchers);\n\tconst entry = { callback, options, registered: new WeakSet() };\n\tfor (const type of types) thingWatchers[type].push(entry);\n}\n\nexport function watchForElements(types: Array<ElementWatcherType>, selector: ?string, callback: ElementWatcherCallback, options?: WatcherOptions) {\n\tconst entry = { selector, callback, options, registered: new WeakSet() };\n\tfor (const type of types) elementWatchers[type].push(entry);\n}\n\nexport function registerPage(page: HTMLElement) {\n\tif (page.matches(Thing.thingSelector)) registerThing(page);\n\tfor (const ele of page.querySelectorAll(Thing.thingSelector)) registerThing(ele);\n\tregisterElement('page', page);\n}\n\nconst HIDE_FOLLOWING_CLASS = 'res-hide-following';\n\nconst cleanHideClasses = () => {\n\tfor (const ele of [...document.getElementsByClassName(HIDE_FOLLOWING_CLASS)]) ele.classList.remove(HIDE_FOLLOWING_CLASS);\n};\n\nexport async function r2WatcherContentStart() {\n\tconst initialProcessSize: number = Math.ceil((screen.availHeight / window.devicePixelRatio) / 55 /* approx min height of a thing */);\n\tconst container = document.body.querySelector('.content[role=\"main\"]');\n\n\t// Add selftext observer\n\twatchForThings(['post'], async thing => {\n\t\tconst container = thing.entry.querySelector('div.expando');\n\t\tif (!container) return;\n\t\tlet body = thing.getTextBody();\n\t\tif (!body || container.matches('.thing.spoiler .expando')) {\n\t\t\t// The class `expando--with-interstitial` means that the text is blocked by the \"spoiler\" dialog\n\t\t\tawait waitForSelectorMatch(container, ':not(.expando--with-interstitial, .expando-uninitialized)');\n\t\t}\n\t\twatchForChildren(container, 'form', () => {\n\t\t\tbody = thing.getTextBody();\n\t\t\tif (body) registerElement('selfText', body);\n\t\t});\n\t}, { immediate: true });\n\n\t// Run tasks on a few things manually, since the IntersectionObserver requires at least one paint before invoking callback\n\t// By running tasks on what is likely to be displayed on first paint, we avoid an extra reflow\n\twatchForThings(null, (() => {\n\t\tlet max = initialProcessSize;\n\t\tconst queue = [];\n\t\tlet i = 0;\n\t\t// Reset every half minute so new things are processed fast when loading additional things via neverEndingReddit / \"more comments\" etc\n\t\tcontentLoaded.then(() => { setInterval(() => { queue.length = 0; i = 0; }, 0.5 * MINUTE); });\n\t\treturn thing => {\n\t\t\tconst n = i++;\n\t\t\tconst check = queue[n] = async () => {\n\t\t\t\tdelete queue[n];\n\t\t\t\t// Whether a thing will be visible, is usually ascertained when the filter task has been completed\n\t\t\t\tconst filterTask = thing.tasks.byId.get('filter');\n\t\t\t\tif (filterTask instanceof Promise) await filterTask();\n\t\t\t\tif (thing.tasks.completed || thing.isVisible()) {\n\t\t\t\t\tthing.runTasks();\n\t\t\t\t} else if (n < max) {\n\t\t\t\t\tmax++;\n\t\t\t\t\tconst nextCheck = queue.find(Boolean);\n\t\t\t\t\tif (nextCheck) nextCheck();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (n < max) check();\n\t\t};\n\t})(), { immediate: true });\n\n\t// Execute non-immediate callbacks on things when they become visible\n\tconst io = new IntersectionObserver(entries => {\n\t\tfor (const { target, isIntersecting } of entries) {\n\t\t\tif (isIntersecting) {\n\t\t\t\tio.unobserve(target);\n\t\t\t\t(Thing.checkedFrom(target)).runTasks();\n\t\t\t}\n\t\t}\n\t}, { rootMargin: '100%', delay: 200 });\n\n\twatchForThings(null, async thing => {\n\t\tif (thing.tasks.completed) return;\n\t\t// By starting observing before the element is attached (e.g. when invoked via neverEndingReddit), the IO may not trigger\n\t\tif (!container.contains(thing.element)) await waitForAttach(container, thing.element);\n\t\tio.observe(thing.entry);\n\t}, { immediate: true });\n\n\tconst getReadyThingElements = () => {\n\t\tThing.thingElements.cache.clear();\n\t\tconst thingElements = Thing.thingElements(container);\n\n\t\tlet _last = thingElements.slice(-1)[0];\n\t\tif (_last) {\n\t\t\t// Check if the last element (tree?) is complete\n\t\t\t// If there's no nodes in the DOM after it, its contents might not be ready to be processed\n\t\t\t// so hide it and defer work until it's ready\n\t\t\tif (isLastNodeInDOM(_last)) {\n\t\t\t\tthingElements.pop();\n\t\t\t\t// Set `_last` to the previously post or the element before (or before parent) this thing\n\t\t\t\tif (thingElements.length) {\n\t\t\t\t\t_last = thingElements.slice(-1)[0];\n\t\t\t\t} else {\n\t\t\t\t\twhile (!_last.previousElementSibling) { _last = _last.parentElement; }\n\t\t\t\t\t_last = _last.previousElementSibling;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcleanHideClasses();\n\t\t\t// Hide the following elements until 'contentLoaded',\n\t\t\t// to prevent them being painted without the 'immediate' watchers having been invoked on them\n\t\t\tdo { _last.classList.add(HIDE_FOLLOWING_CLASS); } while ((_last = _last.parentElement) && _last !== container);\n\t\t}\n\n\t\treturn thingElements;\n\t};\n\n\twhile (true) { // eslint-disable-line no-constant-condition\n\t\tconst thingElements = getReadyThingElements();\n\t\tfor (const e of thingElements) registerThing(e);\n\n\t\tif (thingElements.length >= initialProcessSize) return;\n\n\t\ttry {\n\t\t\tawait Promise.race([ // eslint-disable-line no-await-in-loop\n\t\t\t\tcontentLoaded.then(() => Promise.reject()), // eslint-disable-line prefer-promise-reject-errors\n\t\t\t\tPromise.all([\n\t\t\t\t\t// Give the browser some time to load additional posts into the DOM before continuing if we've already processed some\n\t\t\t\t\tthingElements.length ? (new Promise(res => { setTimeout(res, 100); })) : Promise.resolve(),\n\t\t\t\t\twaitForDescendantChange(container, Thing.thingSelector),\n\t\t\t\t]),\n\t\t\t]);\n\t\t} catch (e) {\n\t\t\t// `r2WatcherContentLoaded` has run by now\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport function r2WatcherContentLoaded() {\n\tcleanHideClasses();\n\n\t// Things may be edited/loaded using the Reddit interface\n\tif (isPageType('comments')) {\n\t\tconst commentarea = document.body.querySelector('.commentarea');\n\t\tif (commentarea) watchForFutureDescendants(commentarea, '.thing', registerPage, true);\n\t} else {\n\t\tconst watchList = memoize(ele => { if (ele) watchForFutureChildren(ele, '.thing', registerPage); });\n\t\twatchForThings(null, thing => { watchList(thing.element.parentElement); });\n\t}\n\n\tregisterPage(document.body);\n}\n","import WeakMap from './_WeakMap.js';\n\n/** Used to store function metadata. */\nvar metaMap = WeakMap && new WeakMap;\n\nexport default metaMap;\n","import identity from './identity.js';\nimport metaMap from './_metaMap.js';\n\n/**\n * The base implementation of `setData` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar baseSetData = !metaMap ? identity : function(func, data) {\n  metaMap.set(func, data);\n  return func;\n};\n\nexport default baseSetData;\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n/**\n * Creates a function that produces an instance of `Ctor` regardless of\n * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n *\n * @private\n * @param {Function} Ctor The constructor to wrap.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCtor(Ctor) {\n  return function() {\n    // Use a `switch` statement to work with class constructors. See\n    // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n    // for more details.\n    var args = arguments;\n    switch (args.length) {\n      case 0: return new Ctor;\n      case 1: return new Ctor(args[0]);\n      case 2: return new Ctor(args[0], args[1]);\n      case 3: return new Ctor(args[0], args[1], args[2]);\n      case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n      case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n      case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n      case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n    }\n    var thisBinding = baseCreate(Ctor.prototype),\n        result = Ctor.apply(thisBinding, args);\n\n    // Mimic the constructor's `return` behavior.\n    // See https://es5.github.io/#x13.2.2 for more details.\n    return isObject(result) ? result : thisBinding;\n  };\n}\n\nexport default createCtor;\n","import createCtor from './_createCtor.js';\nimport root from './_root.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the optional `this`\n * binding of `thisArg`.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createBind(func, bitmask, thisArg) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return fn.apply(isBind ? thisArg : this, arguments);\n  }\n  return wrapper;\n}\n\nexport default createBind;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array that is the composition of partially applied arguments,\n * placeholders, and provided arguments into a single array of arguments.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to prepend to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgs(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersLength = holders.length,\n      leftIndex = -1,\n      leftLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(leftLength + rangeLength),\n      isUncurried = !isCurried;\n\n  while (++leftIndex < leftLength) {\n    result[leftIndex] = partials[leftIndex];\n  }\n  while (++argsIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[holders[argsIndex]] = args[argsIndex];\n    }\n  }\n  while (rangeLength--) {\n    result[leftIndex++] = args[argsIndex++];\n  }\n  return result;\n}\n\nexport default composeArgs;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This function is like `composeArgs` except that the arguments composition\n * is tailored for `_.partialRight`.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to append to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgsRight(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersIndex = -1,\n      holdersLength = holders.length,\n      rightIndex = -1,\n      rightLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(rangeLength + rightLength),\n      isUncurried = !isCurried;\n\n  while (++argsIndex < rangeLength) {\n    result[argsIndex] = args[argsIndex];\n  }\n  var offset = argsIndex;\n  while (++rightIndex < rightLength) {\n    result[offset + rightIndex] = partials[rightIndex];\n  }\n  while (++holdersIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[offset + holders[holdersIndex]] = args[argsIndex++];\n    }\n  }\n  return result;\n}\n\nexport default composeArgsRight;\n","/**\n * Gets the number of `placeholder` occurrences in `array`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} placeholder The placeholder to search for.\n * @returns {number} Returns the placeholder count.\n */\nfunction countHolders(array, placeholder) {\n  var length = array.length,\n      result = 0;\n\n  while (length--) {\n    if (array[length] === placeholder) {\n      ++result;\n    }\n  }\n  return result;\n}\n\nexport default countHolders;\n","/**\n * The function whose prototype chain sequence wrappers inherit from.\n *\n * @private\n */\nfunction baseLodash() {\n  // No operation performed.\n}\n\nexport default baseLodash;\n","import baseCreate from './_baseCreate.js';\nimport baseLodash from './_baseLodash.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/**\n * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n *\n * @private\n * @constructor\n * @param {*} value The value to wrap.\n */\nfunction LazyWrapper(value) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__dir__ = 1;\n  this.__filtered__ = false;\n  this.__iteratees__ = [];\n  this.__takeCount__ = MAX_ARRAY_LENGTH;\n  this.__views__ = [];\n}\n\n// Ensure `LazyWrapper` is an instance of `baseLodash`.\nLazyWrapper.prototype = baseCreate(baseLodash.prototype);\nLazyWrapper.prototype.constructor = LazyWrapper;\n\nexport default LazyWrapper;\n","import metaMap from './_metaMap.js';\nimport noop from './noop.js';\n\n/**\n * Gets metadata for `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {*} Returns the metadata for `func`.\n */\nvar getData = !metaMap ? noop : function(func) {\n  return metaMap.get(func);\n};\n\nexport default getData;\n","/** Used to lookup unminified function names. */\nvar realNames = {};\n\nexport default realNames;\n","import realNames from './_realNames.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the name of `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {string} Returns the function name.\n */\nfunction getFuncName(func) {\n  var result = (func.name + ''),\n      array = realNames[result],\n      length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n  while (length--) {\n    var data = array[length],\n        otherFunc = data.func;\n    if (otherFunc == null || otherFunc == func) {\n      return data.name;\n    }\n  }\n  return result;\n}\n\nexport default getFuncName;\n","import baseCreate from './_baseCreate.js';\nimport baseLodash from './_baseLodash.js';\n\n/**\n * The base constructor for creating `lodash` wrapper objects.\n *\n * @private\n * @param {*} value The value to wrap.\n * @param {boolean} [chainAll] Enable explicit method chain sequences.\n */\nfunction LodashWrapper(value, chainAll) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__chain__ = !!chainAll;\n  this.__index__ = 0;\n  this.__values__ = undefined;\n}\n\nLodashWrapper.prototype = baseCreate(baseLodash.prototype);\nLodashWrapper.prototype.constructor = LodashWrapper;\n\nexport default LodashWrapper;\n","import LazyWrapper from './_LazyWrapper.js';\nimport LodashWrapper from './_LodashWrapper.js';\nimport copyArray from './_copyArray.js';\n\n/**\n * Creates a clone of `wrapper`.\n *\n * @private\n * @param {Object} wrapper The wrapper to clone.\n * @returns {Object} Returns the cloned wrapper.\n */\nfunction wrapperClone(wrapper) {\n  if (wrapper instanceof LazyWrapper) {\n    return wrapper.clone();\n  }\n  var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n  result.__actions__ = copyArray(wrapper.__actions__);\n  result.__index__  = wrapper.__index__;\n  result.__values__ = wrapper.__values__;\n  return result;\n}\n\nexport default wrapperClone;\n","import LazyWrapper from './_LazyWrapper.js';\nimport LodashWrapper from './_LodashWrapper.js';\nimport baseLodash from './_baseLodash.js';\nimport isArray from './isArray.js';\nimport isObjectLike from './isObjectLike.js';\nimport wrapperClone from './_wrapperClone.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates a `lodash` object which wraps `value` to enable implicit method\n * chain sequences. Methods that operate on and return arrays, collections,\n * and functions can be chained together. Methods that retrieve a single value\n * or may return a primitive value will automatically end the chain sequence\n * and return the unwrapped value. Otherwise, the value must be unwrapped\n * with `_#value`.\n *\n * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n * enabled using `_.chain`.\n *\n * The execution of chained methods is lazy, that is, it's deferred until\n * `_#value` is implicitly or explicitly called.\n *\n * Lazy evaluation allows several methods to support shortcut fusion.\n * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n * the creation of intermediate arrays and can greatly reduce the number of\n * iteratee executions. Sections of a chain sequence qualify for shortcut\n * fusion if the section is applied to an array and iteratees accept only\n * one argument. The heuristic for whether a section qualifies for shortcut\n * fusion is subject to change.\n *\n * Chaining is supported in custom builds as long as the `_#value` method is\n * directly or indirectly included in the build.\n *\n * In addition to lodash methods, wrappers have `Array` and `String` methods.\n *\n * The wrapper `Array` methods are:\n * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n *\n * The wrapper `String` methods are:\n * `replace` and `split`\n *\n * The wrapper methods that support shortcut fusion are:\n * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n *\n * The chainable wrapper methods are:\n * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n * `zipObject`, `zipObjectDeep`, and `zipWith`\n *\n * The wrapper methods that are **not** chainable by default are:\n * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n * `upperFirst`, `value`, and `words`\n *\n * @name _\n * @constructor\n * @category Seq\n * @param {*} value The value to wrap in a `lodash` instance.\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var wrapped = _([1, 2, 3]);\n *\n * // Returns an unwrapped value.\n * wrapped.reduce(_.add);\n * // => 6\n *\n * // Returns a wrapped value.\n * var squares = wrapped.map(square);\n *\n * _.isArray(squares);\n * // => false\n *\n * _.isArray(squares.value());\n * // => true\n */\nfunction lodash(value) {\n  if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n    if (value instanceof LodashWrapper) {\n      return value;\n    }\n    if (hasOwnProperty.call(value, '__wrapped__')) {\n      return wrapperClone(value);\n    }\n  }\n  return new LodashWrapper(value);\n}\n\n// Ensure wrappers are instances of `baseLodash`.\nlodash.prototype = baseLodash.prototype;\nlodash.prototype.constructor = lodash;\n\nexport default lodash;\n","import LazyWrapper from './_LazyWrapper.js';\nimport getData from './_getData.js';\nimport getFuncName from './_getFuncName.js';\nimport lodash from './wrapperLodash.js';\n\n/**\n * Checks if `func` has a lazy counterpart.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n *  else `false`.\n */\nfunction isLaziable(func) {\n  var funcName = getFuncName(func),\n      other = lodash[funcName];\n\n  if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n    return false;\n  }\n  if (func === other) {\n    return true;\n  }\n  var data = getData(other);\n  return !!data && func === data[0];\n}\n\nexport default isLaziable;\n","import baseSetData from './_baseSetData.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets metadata for `func`.\n *\n * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n * period of time, it will trip its breaker and transition to an identity\n * function to avoid garbage collection pauses in V8. See\n * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n * for more details.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar setData = shortOut(baseSetData);\n\nexport default setData;\n","/** Used to match wrap detail comments. */\nvar reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n    reSplitDetails = /,? & /;\n\n/**\n * Extracts wrapper details from the `source` body comment.\n *\n * @private\n * @param {string} source The source to inspect.\n * @returns {Array} Returns the wrapper details.\n */\nfunction getWrapDetails(source) {\n  var match = source.match(reWrapDetails);\n  return match ? match[1].split(reSplitDetails) : [];\n}\n\nexport default getWrapDetails;\n","/** Used to match wrap detail comments. */\nvar reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/;\n\n/**\n * Inserts wrapper `details` in a comment at the top of the `source` body.\n *\n * @private\n * @param {string} source The source to modify.\n * @returns {Array} details The details to insert.\n * @returns {string} Returns the modified source.\n */\nfunction insertWrapDetails(source, details) {\n  var length = details.length;\n  if (!length) {\n    return source;\n  }\n  var lastIndex = length - 1;\n  details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n  details = details.join(length > 2 ? ', ' : ' ');\n  return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n}\n\nexport default insertWrapDetails;\n","import arrayEach from './_arrayEach.js';\nimport arrayIncludes from './_arrayIncludes.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256,\n    WRAP_FLIP_FLAG = 512;\n\n/** Used to associate wrap methods with their bit flags. */\nvar wrapFlags = [\n  ['ary', WRAP_ARY_FLAG],\n  ['bind', WRAP_BIND_FLAG],\n  ['bindKey', WRAP_BIND_KEY_FLAG],\n  ['curry', WRAP_CURRY_FLAG],\n  ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n  ['flip', WRAP_FLIP_FLAG],\n  ['partial', WRAP_PARTIAL_FLAG],\n  ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n  ['rearg', WRAP_REARG_FLAG]\n];\n\n/**\n * Updates wrapper `details` based on `bitmask` flags.\n *\n * @private\n * @returns {Array} details The details to modify.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Array} Returns `details`.\n */\nfunction updateWrapDetails(details, bitmask) {\n  arrayEach(wrapFlags, function(pair) {\n    var value = '_.' + pair[0];\n    if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n      details.push(value);\n    }\n  });\n  return details.sort();\n}\n\nexport default updateWrapDetails;\n","import getWrapDetails from './_getWrapDetails.js';\nimport insertWrapDetails from './_insertWrapDetails.js';\nimport setToString from './_setToString.js';\nimport updateWrapDetails from './_updateWrapDetails.js';\n\n/**\n * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n * with wrapper details in a comment at the top of the source body.\n *\n * @private\n * @param {Function} wrapper The function to modify.\n * @param {Function} reference The reference function.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Function} Returns `wrapper`.\n */\nfunction setWrapToString(wrapper, reference, bitmask) {\n  var source = (reference + '');\n  return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n}\n\nexport default setWrapToString;\n","import isLaziable from './_isLaziable.js';\nimport setData from './_setData.js';\nimport setWrapToString from './_setWrapToString.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/**\n * Creates a function that wraps `func` to continue currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {Function} wrapFunc The function to create the `func` wrapper.\n * @param {*} placeholder The placeholder value.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n  var isCurry = bitmask & WRAP_CURRY_FLAG,\n      newHolders = isCurry ? holders : undefined,\n      newHoldersRight = isCurry ? undefined : holders,\n      newPartials = isCurry ? partials : undefined,\n      newPartialsRight = isCurry ? undefined : partials;\n\n  bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n  bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n  if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n    bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n  }\n  var newData = [\n    func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n    newHoldersRight, argPos, ary, arity\n  ];\n\n  var result = wrapFunc.apply(undefined, newData);\n  if (isLaziable(func)) {\n    setData(result, newData);\n  }\n  result.placeholder = placeholder;\n  return setWrapToString(result, func, bitmask);\n}\n\nexport default createRecurry;\n","/**\n * Gets the argument placeholder value for `func`.\n *\n * @private\n * @param {Function} func The function to inspect.\n * @returns {*} Returns the placeholder value.\n */\nfunction getHolder(func) {\n  var object = func;\n  return object.placeholder;\n}\n\nexport default getHolder;\n","import copyArray from './_copyArray.js';\nimport isIndex from './_isIndex.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Reorder `array` according to the specified indexes where the element at\n * the first index is assigned as the first element, the element at\n * the second index is assigned as the second element, and so on.\n *\n * @private\n * @param {Array} array The array to reorder.\n * @param {Array} indexes The arranged array indexes.\n * @returns {Array} Returns `array`.\n */\nfunction reorder(array, indexes) {\n  var arrLength = array.length,\n      length = nativeMin(indexes.length, arrLength),\n      oldArray = copyArray(array);\n\n  while (length--) {\n    var index = indexes[length];\n    array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n  }\n  return array;\n}\n\nexport default reorder;\n","/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/**\n * Replaces all `placeholder` elements in `array` with an internal placeholder\n * and returns an array of their indexes.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {*} placeholder The placeholder to replace.\n * @returns {Array} Returns the new array of placeholder indexes.\n */\nfunction replaceHolders(array, placeholder) {\n  var index = -1,\n      length = array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value === placeholder || value === PLACEHOLDER) {\n      array[index] = PLACEHOLDER;\n      result[resIndex++] = index;\n    }\n  }\n  return result;\n}\n\nexport default replaceHolders;\n","import composeArgs from './_composeArgs.js';\nimport composeArgsRight from './_composeArgsRight.js';\nimport countHolders from './_countHolders.js';\nimport createCtor from './_createCtor.js';\nimport createRecurry from './_createRecurry.js';\nimport getHolder from './_getHolder.js';\nimport reorder from './_reorder.js';\nimport replaceHolders from './_replaceHolders.js';\nimport root from './_root.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_ARY_FLAG = 128,\n    WRAP_FLIP_FLAG = 512;\n\n/**\n * Creates a function that wraps `func` to invoke it with optional `this`\n * binding of `thisArg`, partial application, and currying.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [partialsRight] The arguments to append to those provided\n *  to the new function.\n * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n  var isAry = bitmask & WRAP_ARY_FLAG,\n      isBind = bitmask & WRAP_BIND_FLAG,\n      isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n      isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n      isFlip = bitmask & WRAP_FLIP_FLAG,\n      Ctor = isBindKey ? undefined : createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length;\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    if (isCurried) {\n      var placeholder = getHolder(wrapper),\n          holdersCount = countHolders(args, placeholder);\n    }\n    if (partials) {\n      args = composeArgs(args, partials, holders, isCurried);\n    }\n    if (partialsRight) {\n      args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n    }\n    length -= holdersCount;\n    if (isCurried && length < arity) {\n      var newHolders = replaceHolders(args, placeholder);\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n        args, newHolders, argPos, ary, arity - length\n      );\n    }\n    var thisBinding = isBind ? thisArg : this,\n        fn = isBindKey ? thisBinding[func] : func;\n\n    length = args.length;\n    if (argPos) {\n      args = reorder(args, argPos);\n    } else if (isFlip && length > 1) {\n      args.reverse();\n    }\n    if (isAry && ary < length) {\n      args.length = ary;\n    }\n    if (this && this !== root && this instanceof wrapper) {\n      fn = Ctor || createCtor(fn);\n    }\n    return fn.apply(thisBinding, args);\n  }\n  return wrapper;\n}\n\nexport default createHybrid;\n","import apply from './_apply.js';\nimport createCtor from './_createCtor.js';\nimport createHybrid from './_createHybrid.js';\nimport createRecurry from './_createRecurry.js';\nimport getHolder from './_getHolder.js';\nimport replaceHolders from './_replaceHolders.js';\nimport root from './_root.js';\n\n/**\n * Creates a function that wraps `func` to enable currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {number} arity The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCurry(func, bitmask, arity) {\n  var Ctor = createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length,\n        placeholder = getHolder(wrapper);\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n      ? []\n      : replaceHolders(args, placeholder);\n\n    length -= holders.length;\n    if (length < arity) {\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, undefined,\n        args, holders, undefined, undefined, arity - length);\n    }\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return apply(fn, this, args);\n  }\n  return wrapper;\n}\n\nexport default createCurry;\n","import apply from './_apply.js';\nimport createCtor from './_createCtor.js';\nimport root from './_root.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the `this` binding\n * of `thisArg` and `partials` prepended to the arguments it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} partials The arguments to prepend to those provided to\n *  the new function.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createPartial(func, bitmask, thisArg, partials) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var argsIndex = -1,\n        argsLength = arguments.length,\n        leftIndex = -1,\n        leftLength = partials.length,\n        args = Array(leftLength + argsLength),\n        fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n    while (++leftIndex < leftLength) {\n      args[leftIndex] = partials[leftIndex];\n    }\n    while (argsLength--) {\n      args[leftIndex++] = arguments[++argsIndex];\n    }\n    return apply(fn, isBind ? thisArg : this, args);\n  }\n  return wrapper;\n}\n\nexport default createPartial;\n","import composeArgs from './_composeArgs.js';\nimport composeArgsRight from './_composeArgsRight.js';\nimport replaceHolders from './_replaceHolders.js';\n\n/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Merges the function metadata of `source` into `data`.\n *\n * Merging metadata reduces the number of wrappers used to invoke a function.\n * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n * may be applied regardless of execution order. Methods like `_.ary` and\n * `_.rearg` modify function arguments, making the order in which they are\n * executed important, preventing the merging of metadata. However, we make\n * an exception for a safe combined case where curried functions have `_.ary`\n * and or `_.rearg` applied.\n *\n * @private\n * @param {Array} data The destination metadata.\n * @param {Array} source The source metadata.\n * @returns {Array} Returns `data`.\n */\nfunction mergeData(data, source) {\n  var bitmask = data[1],\n      srcBitmask = source[1],\n      newBitmask = bitmask | srcBitmask,\n      isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n  var isCombo =\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n    ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n  // Exit early if metadata can't be merged.\n  if (!(isCommon || isCombo)) {\n    return data;\n  }\n  // Use source `thisArg` if available.\n  if (srcBitmask & WRAP_BIND_FLAG) {\n    data[2] = source[2];\n    // Set when currying a bound function.\n    newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n  }\n  // Compose partial arguments.\n  var value = source[3];\n  if (value) {\n    var partials = data[3];\n    data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n    data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n  }\n  // Compose partial right arguments.\n  value = source[5];\n  if (value) {\n    partials = data[5];\n    data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n    data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n  }\n  // Use source `argPos` if available.\n  value = source[7];\n  if (value) {\n    data[7] = value;\n  }\n  // Use source `ary` if it's smaller.\n  if (srcBitmask & WRAP_ARY_FLAG) {\n    data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n  }\n  // Use source `arity` if one is not provided.\n  if (data[9] == null) {\n    data[9] = source[9];\n  }\n  // Use source `func` and merge bitmasks.\n  data[0] = source[0];\n  data[1] = newBitmask;\n\n  return data;\n}\n\nexport default mergeData;\n","import baseSetData from './_baseSetData.js';\nimport createBind from './_createBind.js';\nimport createCurry from './_createCurry.js';\nimport createHybrid from './_createHybrid.js';\nimport createPartial from './_createPartial.js';\nimport getData from './_getData.js';\nimport mergeData from './_mergeData.js';\nimport setData from './_setData.js';\nimport setWrapToString from './_setWrapToString.js';\nimport toInteger from './toInteger.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that either curries or invokes `func` with optional\n * `this` binding and partially applied arguments.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags.\n *    1 - `_.bind`\n *    2 - `_.bindKey`\n *    4 - `_.curry` or `_.curryRight` of a bound function\n *    8 - `_.curry`\n *   16 - `_.curryRight`\n *   32 - `_.partial`\n *   64 - `_.partialRight`\n *  128 - `_.rearg`\n *  256 - `_.ary`\n *  512 - `_.flip`\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to be partially applied.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n  var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n  if (!isBindKey && typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var length = partials ? partials.length : 0;\n  if (!length) {\n    bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n    partials = holders = undefined;\n  }\n  ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n  arity = arity === undefined ? arity : toInteger(arity);\n  length -= holders ? holders.length : 0;\n\n  if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n    var partialsRight = partials,\n        holdersRight = holders;\n\n    partials = holders = undefined;\n  }\n  var data = isBindKey ? undefined : getData(func);\n\n  var newData = [\n    func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n    argPos, ary, arity\n  ];\n\n  if (data) {\n    mergeData(newData, data);\n  }\n  func = newData[0];\n  bitmask = newData[1];\n  thisArg = newData[2];\n  partials = newData[3];\n  holders = newData[4];\n  arity = newData[9] = newData[9] === undefined\n    ? (isBindKey ? 0 : func.length)\n    : nativeMax(newData[9] - length, 0);\n\n  if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n    bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n  }\n  if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n    var result = createBind(func, bitmask, thisArg);\n  } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n    result = createCurry(func, bitmask, arity);\n  } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n    result = createPartial(func, bitmask, thisArg, partials);\n  } else {\n    result = createHybrid.apply(undefined, newData);\n  }\n  var setter = data ? baseSetData : setData;\n  return setWrapToString(setter(result, newData), func, bitmask);\n}\n\nexport default createWrap;\n","import createWrap from './_createWrap.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_CURRY_RIGHT_FLAG = 16;\n\n/**\n * This method is like `_.curry` except that arguments are applied to `func`\n * in the manner of `_.partialRight` instead of `_.partial`.\n *\n * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n * builds, may be used as a placeholder for provided arguments.\n *\n * **Note:** This method doesn't set the \"length\" property of curried functions.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} func The function to curry.\n * @param {number} [arity=func.length] The arity of `func`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Function} Returns the new curried function.\n * @example\n *\n * var abc = function(a, b, c) {\n *   return [a, b, c];\n * };\n *\n * var curried = _.curryRight(abc);\n *\n * curried(3)(2)(1);\n * // => [1, 2, 3]\n *\n * curried(2, 3)(1);\n * // => [1, 2, 3]\n *\n * curried(1, 2, 3);\n * // => [1, 2, 3]\n *\n * // Curried with placeholders.\n * curried(3)(1, _)(2);\n * // => [1, 2, 3]\n */\nfunction curryRight(func, arity, guard) {\n  arity = guard ? undefined : arity;\n  var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n  result.placeholder = curryRight.placeholder;\n  return result;\n}\n\n// Assign default placeholders.\ncurryRight.placeholder = {};\n\nexport default curryRight;\n","import toInteger from './toInteger.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that invokes `func`, with the `this` binding and arguments\n * of the created function, while it's called less than `n` times. Subsequent\n * calls to the created function return the result of the last `func` invocation.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {number} n The number of calls at which `func` is no longer invoked.\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * jQuery(element).on('click', _.before(5, addContactToList));\n * // => Allows adding up to 4 contacts to the list.\n */\nfunction before(n, func) {\n  var result;\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  n = toInteger(n);\n  return function() {\n    if (--n > 0) {\n      result = func.apply(this, arguments);\n    }\n    if (n <= 1) {\n      func = undefined;\n    }\n    return result;\n  };\n}\n\nexport default before;\n","import before from './before.js';\n\n/**\n * Creates a function that is restricted to invoking `func` once. Repeat calls\n * to the function return the value of the first invocation. The `func` is\n * invoked with the `this` binding and arguments of the created function.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * var initialize = _.once(createApplication);\n * initialize();\n * initialize();\n * // => `createApplication` is invoked once\n */\nfunction once(func) {\n  return before(2, func);\n}\n\nexport default once;\n"],"sourceRoot":""}